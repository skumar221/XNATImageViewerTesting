
ar COMPILED=!0,goog=goog||{};goog.global=this;goog.exportPath_=function(b,c,d){b=b.split(".");d=d||goog.global;b[0]in d||!d.execScript||d.execScript("var "+b[0]);for(var e;b.length&&(e=b.shift());)b.length||void 0===c?d=d[e]?d[e]:d[e]={}:d[e]=c};goog.define=function(b,c){var d=c;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,b)&&(d=goog.global.CLOSURE_DEFINES[b]);goog.exportPath_(b,d)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(b){if(!COMPILED){if(goog.isProvided_(b))throw Error('Namespace "'+b+'" already declared.');delete goog.implicitNamespaces_[b];for(var c=b;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(b)};goog.setTestOnly=function(b){if(COMPILED&&!goog.DEBUG)throw b=b||"",Error("Importing test-only code into non-debug environment"+b?": "+b:".");};
COMPILED||(goog.isProvided_=function(b){return!goog.implicitNamespaces_[b]&&!!goog.getObjectByName(b)},goog.implicitNamespaces_={});goog.getObjectByName=function(b,c){for(var d=b.split("."),e=c||goog.global,f;f=d.shift();)if(goog.isDefAndNotNull(e[f]))e=e[f];else return null;return e};goog.globalize=function(b,c){var d=c||goog.global,e;for(e in b)d[e]=b[e]};
goog.addDependency=function(b,c,d){if(goog.DEPENDENCIES_ENABLED){var e;b=b.replace(/\\/g,"/");for(var f=goog.dependencies_,g=0;e=c[g];g++)f.nameToPath[e]=b,b in f.pathToNames||(f.pathToNames[b]={}),f.pathToNames[b][e]=!0;for(e=0;c=d[e];e++)b in f.requires||(f.requires[b]={}),f.requires[b][c]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(b){if(!COMPILED&&!goog.isProvided_(b)){if(goog.ENABLE_DEBUG_LOADER){var c=goog.getPathFromDeps_(b);if(c){goog.included_[c]=!0;goog.writeScripts_();return}}b="goog.require could not find: "+b;goog.global.console&&goog.global.console.error(b);throw Error(b);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(b,c){return b};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(b){b.getInstance=function(){if(b.instance_)return b.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=b);return b.instance_=new b}};goog.instantiatedSingletons_=[];goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var b=goog.global.document;return"undefined"!=typeof b&&"write"in b},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var b=goog.global.document.getElementsByTagName("script"),c=b.length-1;0<=c;--c){var d=b[c].src,e=d.lastIndexOf("?"),e=-1==e?d.length:
e;if("base.js"==d.substr(e-7,7)){goog.basePath=d.substr(0,e-7);break}}},goog.importScript_=function(b){var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[b]&&c(b)&&(goog.dependencies_.written[b]=!0)},goog.writeScriptTag_=function(b){if(goog.inHtmlDocument_()){var c=goog.global.document;if("complete"==c.readyState){if(/\bdeps.js$/.test(b))return!1;throw Error('Cannot write "'+b+'" after document load');}c.write('<script type="text/javascript" src="'+b+'">\x3c/script>');
return!0}return!1},goog.writeScripts_=function(){function b(f){if(!(f in e.written)){if(!(f in e.visited)&&(e.visited[f]=!0,f in e.requires))for(var h in e.requires[f])if(!goog.isProvided_(h))if(h in e.nameToPath)b(e.nameToPath[h]);else throw Error("Undefined nameToPath for "+h);f in d||(d[f]=!0,c.push(f))}}var c=[],d={},e=goog.dependencies_,f;for(f in goog.included_)e.written[f]||b(f);for(f=0;f<c.length;f++)if(c[f])goog.importScript_(goog.basePath+c[f]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(b){return b in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[b]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(b){var c=typeof b;if("object"==c)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return c;var d=Object.prototype.toString.call(b);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof b.call&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof b.call)return"object";return c};goog.isDef=function(b){return void 0!==b};goog.isNull=function(b){return null===b};goog.isDefAndNotNull=function(b){return null!=b};goog.isArray=function(b){return"array"==goog.typeOf(b)};goog.isArrayLike=function(b){var c=goog.typeOf(b);return"array"==c||"object"==c&&"number"==typeof b.length};goog.isDateLike=function(b){return goog.isObject(b)&&"function"==typeof b.getFullYear};goog.isString=function(b){return"string"==typeof b};
goog.isBoolean=function(b){return"boolean"==typeof b};goog.isNumber=function(b){return"number"==typeof b};goog.isFunction=function(b){return"function"==goog.typeOf(b)};goog.isObject=function(b){var c=typeof b;return"object"==c&&null!=b||"function"==c};goog.getUid=function(b){return b[goog.UID_PROPERTY_]||(b[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(b){"removeAttribute"in b&&b.removeAttribute(goog.UID_PROPERTY_);try{delete b[goog.UID_PROPERTY_]}catch(c){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(b){var c=goog.typeOf(b);if("object"==c||"array"==c){if(b.clone)return b.clone();var c="array"==c?[]:{},d;for(d in b)c[d]=goog.cloneObject(b[d]);return c}return b};goog.bindNative_=function(b,c,d){return b.call.apply(b.bind,arguments)};
goog.bindJs_=function(b,c,d){if(!b)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,e);return b.apply(c,d)}}return function(){return b.apply(c,arguments)}};goog.bind=function(b,c,d){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(b,c){var d=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments);c.unshift.apply(c,d);return b.apply(this,c)}};goog.mixin=function(b,c){for(var d in c)b[d]=c[d]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(b){if(goog.global.execScript)goog.global.execScript(b,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(b);else{var c=goog.global.document,d=c.createElement("script");d.type="text/javascript";d.defer=!1;d.appendChild(c.createTextNode(b));c.body.appendChild(d);
c.body.removeChild(d)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(b,c){var d=function(b){return goog.cssNameMapping_[b]||b},e=function(b){b=b.split("-");for(var c=[],e=0;e<b.length;e++)c.push(d(b[e]));return c.join("-")},e=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?d:e:function(b){return b};return c?b+"-"+e(c):e(b)};goog.setCssNameMapping=function(b,c){goog.cssNameMapping_=b;goog.cssNameMappingStyle_=c};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(b,c){var d=c||{},e;for(e in d){var f=(""+d[e]).replace(/\$/g,"$$$$");b=b.replace(RegExp("\\{\\$"+e+"\\}","gi"),f)}return b};goog.getMsgWithFallback=function(b,c){return b};goog.exportSymbol=function(b,c,d){goog.exportPath_(b,c,d)};goog.exportProperty=function(b,c,d){b[c]=d};
goog.inherits=function(b,c){function d(){}d.prototype=c.prototype;b.superClass_=c.prototype;b.prototype=new d;b.prototype.constructor=b};
goog.base=function(b,c,d){var e=arguments.callee.caller;if(goog.DEBUG&&!e)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(e.superClass_)return e.superClass_.constructor.apply(b,Array.prototype.slice.call(arguments,1));for(var f=Array.prototype.slice.call(arguments,2),g=!1,h=b.constructor;h;h=h.superClass_&&h.superClass_.constructor)if(h.prototype[c]===e)g=!0;else if(g)return h.prototype[c].apply(b,
f);if(b[c]===e)return b.constructor.prototype[c].apply(b,f);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(b){b.call(goog.global)};goog.debug={};goog.debug.Error=function(b){Error.captureStackTrace?Error.captureStackTrace(this,goog.debug.Error):this.stack=Error().stack||"";b&&(this.message=String(b))};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.string={};goog.string.Unicode={NBSP:"\u00a0"};goog.string.startsWith=function(b,c){return 0==b.lastIndexOf(c,0)};goog.string.endsWith=function(b,c){var d=b.length-c.length;return 0<=d&&b.indexOf(c,d)==d};goog.string.caseInsensitiveStartsWith=function(b,c){return 0==goog.string.caseInsensitiveCompare(c,b.substr(0,c.length))};goog.string.caseInsensitiveEndsWith=function(b,c){return 0==goog.string.caseInsensitiveCompare(c,b.substr(b.length-c.length,c.length))};
goog.string.caseInsensitiveEquals=function(b,c){return b.toLowerCase()==c.toLowerCase()};goog.string.subs=function(b,c){for(var d=b.split("%s"),e="",f=Array.prototype.slice.call(arguments,1);f.length&&1<d.length;)e+=d.shift()+f.shift();return e+d.join("%s")};goog.string.collapseWhitespace=function(b){return b.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmpty=function(b){return/^[\s\xa0]*$/.test(b)};goog.string.isEmptySafe=function(b){return goog.string.isEmpty(goog.string.makeSafe(b))};
goog.string.isBreakingWhitespace=function(b){return!/[^\t\n\r ]/.test(b)};goog.string.isAlpha=function(b){return!/[^a-zA-Z]/.test(b)};goog.string.isNumeric=function(b){return!/[^0-9]/.test(b)};goog.string.isAlphaNumeric=function(b){return!/[^a-zA-Z0-9]/.test(b)};goog.string.isSpace=function(b){return" "==b};goog.string.isUnicodeChar=function(b){return 1==b.length&&" "<=b&&"~">=b||"\u0080"<=b&&"\ufffd">=b};goog.string.stripNewlines=function(b){return b.replace(/(\r\n|\r|\n)+/g," ")};
goog.string.canonicalizeNewlines=function(b){return b.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(b){return b.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(b){return b.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(b){return b.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
goog.string.trimLeft=function(b){return b.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(b){return b.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(b,c){var d=String(b).toLowerCase(),e=String(c).toLowerCase();return d<e?-1:d==e?0:1};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;
goog.string.numerateCompare=function(b,c){if(b==c)return 0;if(!b)return-1;if(!c)return 1;for(var d=b.toLowerCase().match(goog.string.numerateCompareRegExp_),e=c.toLowerCase().match(goog.string.numerateCompareRegExp_),f=Math.min(d.length,e.length),g=0;g<f;g++){var h=d[g],k=e[g];if(h!=k)return d=parseInt(h,10),!isNaN(d)&&(e=parseInt(k,10),!isNaN(e)&&d-e)?d-e:h<k?-1:1}return d.length!=e.length?d.length-e.length:b<c?-1:1};goog.string.urlEncode=function(b){return encodeURIComponent(String(b))};
goog.string.urlDecode=function(b){return decodeURIComponent(b.replace(/\+/g," "))};goog.string.newLineToBr=function(b,c){return b.replace(/(\r\n|\r|\n)/g,c?"<br />":"<br>")};
goog.string.htmlEscape=function(b,c){if(c)return b.replace(goog.string.amperRe_,"&amp;").replace(goog.string.ltRe_,"&lt;").replace(goog.string.gtRe_,"&gt;").replace(goog.string.quotRe_,"&quot;");if(!goog.string.allRe_.test(b))return b;-1!=b.indexOf("&")&&(b=b.replace(goog.string.amperRe_,"&amp;"));-1!=b.indexOf("<")&&(b=b.replace(goog.string.ltRe_,"&lt;"));-1!=b.indexOf(">")&&(b=b.replace(goog.string.gtRe_,"&gt;"));-1!=b.indexOf('"')&&(b=b.replace(goog.string.quotRe_,"&quot;"));return b};
goog.string.amperRe_=/&/g;goog.string.ltRe_=/</g;goog.string.gtRe_=/>/g;goog.string.quotRe_=/\"/g;goog.string.allRe_=/[&<>\"]/;goog.string.unescapeEntities=function(b){return goog.string.contains(b,"&")?"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(b):goog.string.unescapePureXmlEntities_(b):b};
goog.string.unescapeEntitiesUsingDom_=function(b){var c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},d=document.createElement("div");return b.replace(goog.string.HTML_ENTITY_PATTERN_,function(b,f){var g=c[b];if(g)return g;if("#"==f.charAt(0)){var h=Number("0"+f.substr(1));isNaN(h)||(g=String.fromCharCode(h))}g||(d.innerHTML=b+" ",g=d.firstChild.nodeValue.slice(0,-1));return c[b]=g})};
goog.string.unescapePureXmlEntities_=function(b){return b.replace(/&([^;]+);/g,function(b,d){switch(d){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:if("#"==d.charAt(0)){var e=Number("0"+d.substr(1));if(!isNaN(e))return String.fromCharCode(e)}return b}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(b,c){return goog.string.newLineToBr(b.replace(/  /g," &#160;"),c)};
goog.string.stripQuotes=function(b,c){for(var d=c.length,e=0;e<d;e++){var f=1==d?c:c.charAt(e);if(b.charAt(0)==f&&b.charAt(b.length-1)==f)return b.substring(1,b.length-1)}return b};goog.string.truncate=function(b,c,d){d&&(b=goog.string.unescapeEntities(b));b.length>c&&(b=b.substring(0,c-3)+"...");d&&(b=goog.string.htmlEscape(b));return b};
goog.string.truncateMiddle=function(b,c,d,e){d&&(b=goog.string.unescapeEntities(b));if(e&&b.length>c){e>c&&(e=c);var f=b.length-e;b=b.substring(0,c-e)+"..."+b.substring(f)}else b.length>c&&(e=Math.floor(c/2),f=b.length-e,b=b.substring(0,e+c%2)+"..."+b.substring(f));d&&(b=goog.string.htmlEscape(b));return b};goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};
goog.string.quote=function(b){b=String(b);if(b.quote)return b.quote();for(var c=['"'],d=0;d<b.length;d++){var e=b.charAt(d),f=e.charCodeAt(0);c[d+1]=goog.string.specialEscapeChars_[e]||(31<f&&127>f?e:goog.string.escapeChar(e))}c.push('"');return c.join("")};goog.string.escapeString=function(b){for(var c=[],d=0;d<b.length;d++)c[d]=goog.string.escapeChar(b.charAt(d));return c.join("")};
goog.string.escapeChar=function(b){if(b in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[b];if(b in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[b]=goog.string.specialEscapeChars_[b];var c=b,d=b.charCodeAt(0);if(31<d&&127>d)c=b;else{if(256>d){if(c="\\x",16>d||256<d)c+="0"}else c="\\u",4096>d&&(c+="0");c+=d.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[b]=c};goog.string.toMap=function(b){for(var c={},d=0;d<b.length;d++)c[b.charAt(d)]=!0;return c};
goog.string.contains=function(b,c){return-1!=b.indexOf(c)};goog.string.countOf=function(b,c){return b&&c?b.split(c).length-1:0};goog.string.removeAt=function(b,c,d){var e=b;0<=c&&(c<b.length&&0<d)&&(e=b.substr(0,c)+b.substr(c+d,b.length-c-d));return e};goog.string.remove=function(b,c){var d=RegExp(goog.string.regExpEscape(c),"");return b.replace(d,"")};goog.string.removeAll=function(b,c){var d=RegExp(goog.string.regExpEscape(c),"g");return b.replace(d,"")};
goog.string.regExpEscape=function(b){return String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(b,c){return Array(c+1).join(b)};goog.string.padNumber=function(b,c,d){b=goog.isDef(d)?b.toFixed(d):String(b);d=b.indexOf(".");-1==d&&(d=b.length);return goog.string.repeat("0",Math.max(0,c-d))+b};goog.string.makeSafe=function(b){return null==b?"":String(b)};goog.string.buildString=function(b){return Array.prototype.join.call(arguments,"")};
goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)};
goog.string.compareVersions=function(b,c){for(var d=0,e=goog.string.trim(String(b)).split("."),f=goog.string.trim(String(c)).split("."),g=Math.max(e.length,f.length),h=0;0==d&&h<g;h++){var k=e[h]||"",m=f[h]||"",p=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var q=p.exec(k)||["","",""],r=n.exec(m)||["","",""];if(0==q[0].length&&0==r[0].length)break;var d=0==q[1].length?0:parseInt(q[1],10),s=0==r[1].length?0:parseInt(r[1],10),d=goog.string.compareElements_(d,s)||goog.string.compareElements_(0==
q[2].length,0==r[2].length)||goog.string.compareElements_(q[2],r[2])}while(0==d)}return d};goog.string.compareElements_=function(b,c){return b<c?-1:b>c?1:0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(b){for(var c=0,d=0;d<b.length;++d)c=31*c+b.charCodeAt(d),c%=goog.string.HASHCODE_MAX_;return c};goog.string.uniqueStringCounter_=2147483648*Math.random()|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};
goog.string.toNumber=function(b){var c=Number(b);return 0==c&&goog.string.isEmpty(b)?NaN:c};goog.string.isLowerCamelCase=function(b){return/^[a-z]+([A-Z][a-z]*)*$/.test(b)};goog.string.isUpperCamelCase=function(b){return/^([A-Z][a-z]*)+$/.test(b)};goog.string.toCamelCase=function(b){return String(b).replace(/\-([a-z])/g,function(b,d){return d.toUpperCase()})};goog.string.toSelectorCase=function(b){return String(b).replace(/([A-Z])/g,"-$1").toLowerCase()};
goog.string.toTitleCase=function(b,c){var d=goog.isString(c)?goog.string.regExpEscape(c):"\\s";return b.replace(RegExp("(^"+(d?"|["+d+"]+":"")+")([a-z])","g"),function(b,c,d){return c+d.toUpperCase()})};goog.string.parseInt=function(b){isFinite(b)&&(b=String(b));return goog.isString(b)?/^\s*-?0x/i.test(b)?parseInt(b,16):parseInt(b,10):NaN};goog.string.splitLimit=function(b,c,d){b=b.split(c);for(var e=[];0<d&&b.length;)e.push(b.shift()),d--;b.length&&e.push(b.join(c));return e};goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(b,c){c.unshift(b);goog.debug.Error.call(this,goog.string.subs.apply(null,c));c.shift();this.messagePattern=b};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.doAssertFailure_=function(b,c,d,e){var f="Assertion failed";if(d)var f=f+(": "+d),g=e;else b&&(f+=": "+b,g=c);throw new goog.asserts.AssertionError(""+f,g||[]);};
goog.asserts.assert=function(b,c,d){goog.asserts.ENABLE_ASSERTS&&!b&&goog.asserts.doAssertFailure_("",null,c,Array.prototype.slice.call(arguments,2));return b};goog.asserts.fail=function(b,c){if(goog.asserts.ENABLE_ASSERTS)throw new goog.asserts.AssertionError("Failure"+(b?": "+b:""),Array.prototype.slice.call(arguments,1));};
goog.asserts.assertNumber=function(b,c,d){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(b)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(b),b],c,Array.prototype.slice.call(arguments,2));return b};goog.asserts.assertString=function(b,c,d){goog.asserts.ENABLE_ASSERTS&&!goog.isString(b)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(b),b],c,Array.prototype.slice.call(arguments,2));return b};
goog.asserts.assertFunction=function(b,c,d){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(b)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(b),b],c,Array.prototype.slice.call(arguments,2));return b};goog.asserts.assertObject=function(b,c,d){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(b)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(b),b],c,Array.prototype.slice.call(arguments,2));return b};
goog.asserts.assertArray=function(b,c,d){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(b)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(b),b],c,Array.prototype.slice.call(arguments,2));return b};goog.asserts.assertBoolean=function(b,c,d){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(b)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(b),b],c,Array.prototype.slice.call(arguments,2));return b};
goog.asserts.assertInstanceof=function(b,c,d,e){!goog.asserts.ENABLE_ASSERTS||b instanceof c||goog.asserts.doAssertFailure_("instanceof check failed.",null,d,Array.prototype.slice.call(arguments,3));return b};goog.asserts.assertObjectPrototypeIsIntact=function(){for(var b in Object.prototype)goog.asserts.fail(b+" should not be enumerable in Object.prototype.")};goog.object={};goog.object.forEach=function(b,c,d){for(var e in b)c.call(d,b[e],e,b)};goog.object.filter=function(b,c,d){var e={},f;for(f in b)c.call(d,b[f],f,b)&&(e[f]=b[f]);return e};goog.object.map=function(b,c,d){var e={},f;for(f in b)e[f]=c.call(d,b[f],f,b);return e};goog.object.some=function(b,c,d){for(var e in b)if(c.call(d,b[e],e,b))return!0;return!1};goog.object.every=function(b,c,d){for(var e in b)if(!c.call(d,b[e],e,b))return!1;return!0};
goog.object.getCount=function(b){var c=0,d;for(d in b)c++;return c};goog.object.getAnyKey=function(b){for(var c in b)return c};goog.object.getAnyValue=function(b){for(var c in b)return b[c]};goog.object.contains=function(b,c){return goog.object.containsValue(b,c)};goog.object.getValues=function(b){var c=[],d=0,e;for(e in b)c[d++]=b[e];return c};goog.object.getKeys=function(b){var c=[],d=0,e;for(e in b)c[d++]=e;return c};
goog.object.getValueByKeys=function(b,c){for(var d=goog.isArrayLike(c),e=d?c:arguments,d=d?0:1;d<e.length&&(b=b[e[d]],goog.isDef(b));d++);return b};goog.object.containsKey=function(b,c){return c in b};goog.object.containsValue=function(b,c){for(var d in b)if(b[d]==c)return!0;return!1};goog.object.findKey=function(b,c,d){for(var e in b)if(c.call(d,b[e],e,b))return e};goog.object.findValue=function(b,c,d){return(c=goog.object.findKey(b,c,d))&&b[c]};
goog.object.isEmpty=function(b){for(var c in b)return!1;return!0};goog.object.clear=function(b){for(var c in b)delete b[c]};goog.object.remove=function(b,c){var d;(d=c in b)&&delete b[c];return d};goog.object.add=function(b,c,d){if(c in b)throw Error('The object already contains the key "'+c+'"');goog.object.set(b,c,d)};goog.object.get=function(b,c,d){return c in b?b[c]:d};goog.object.set=function(b,c,d){b[c]=d};goog.object.setIfUndefined=function(b,c,d){return c in b?b[c]:b[c]=d};
goog.object.clone=function(b){var c={},d;for(d in b)c[d]=b[d];return c};goog.object.unsafeClone=function(b){var c=goog.typeOf(b);if("object"==c||"array"==c){if(b.clone)return b.clone();var c="array"==c?[]:{},d;for(d in b)c[d]=goog.object.unsafeClone(b[d]);return c}return b};goog.object.transpose=function(b){var c={},d;for(d in b)c[b[d]]=d;return c};goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.object.extend=function(b,c){for(var d,e,f=1;f<arguments.length;f++){e=arguments[f];for(d in e)b[d]=e[d];for(var g=0;g<goog.object.PROTOTYPE_FIELDS_.length;g++)d=goog.object.PROTOTYPE_FIELDS_[g],Object.prototype.hasOwnProperty.call(e,d)&&(b[d]=e[d])}};
goog.object.create=function(b){var c=arguments.length;if(1==c&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(c%2)throw Error("Uneven number of arguments");for(var d={},e=0;e<c;e+=2)d[arguments[e]]=arguments[e+1];return d};goog.object.createSet=function(b){var c=arguments.length;if(1==c&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var d={},e=0;e<c;e++)d[arguments[e]]=!0;return d};
goog.object.createImmutableView=function(b){var c=b;Object.isFrozen&&!Object.isFrozen(b)&&(c=Object.create(b),Object.freeze(c));return c};goog.object.isImmutableView=function(b){return!!Object.isFrozen&&Object.isFrozen(b)};goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE;goog.array.peek=function(b){return b[b.length-1]};goog.array.ARRAY_PROTOTYPE_=Array.prototype;
goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.indexOf?function(b,c,d){goog.asserts.assert(null!=b.length);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(b,c,d)}:function(b,c,d){d=null==d?0:0>d?Math.max(0,b.length+d):d;if(goog.isString(b))return goog.isString(c)&&1==c.length?b.indexOf(c,d):-1;for(;d<b.length;d++)if(d in b&&b[d]===c)return d;return-1};
goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.lastIndexOf?function(b,c,d){goog.asserts.assert(null!=b.length);return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(b,c,null==d?b.length-1:d)}:function(b,c,d){d=null==d?b.length-1:d;0>d&&(d=Math.max(0,b.length+d));if(goog.isString(b))return goog.isString(c)&&1==c.length?b.lastIndexOf(c,d):-1;for(;0<=d;d--)if(d in b&&b[d]===c)return d;return-1};
goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.forEach?function(b,c,d){goog.asserts.assert(null!=b.length);goog.array.ARRAY_PROTOTYPE_.forEach.call(b,c,d)}:function(b,c,d){for(var e=b.length,f=goog.isString(b)?b.split(""):b,g=0;g<e;g++)g in f&&c.call(d,f[g],g,b)};goog.array.forEachRight=function(b,c,d){for(var e=b.length,f=goog.isString(b)?b.split(""):b,e=e-1;0<=e;--e)e in f&&c.call(d,f[e],e,b)};
goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.filter?function(b,c,d){goog.asserts.assert(null!=b.length);return goog.array.ARRAY_PROTOTYPE_.filter.call(b,c,d)}:function(b,c,d){for(var e=b.length,f=[],g=0,h=goog.isString(b)?b.split(""):b,k=0;k<e;k++)if(k in h){var m=h[k];c.call(d,m,k,b)&&(f[g++]=m)}return f};
goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.map?function(b,c,d){goog.asserts.assert(null!=b.length);return goog.array.ARRAY_PROTOTYPE_.map.call(b,c,d)}:function(b,c,d){for(var e=b.length,f=Array(e),g=goog.isString(b)?b.split(""):b,h=0;h<e;h++)h in g&&(f[h]=c.call(d,g[h],h,b));return f};goog.array.reduce=function(b,c,d,e){if(b.reduce)return e?b.reduce(goog.bind(c,e),d):b.reduce(c,d);var f=d;goog.array.forEach(b,function(d,h){f=c.call(e,f,d,h,b)});return f};
goog.array.reduceRight=function(b,c,d,e){if(b.reduceRight)return e?b.reduceRight(goog.bind(c,e),d):b.reduceRight(c,d);var f=d;goog.array.forEachRight(b,function(d,h){f=c.call(e,f,d,h,b)});return f};
goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.some?function(b,c,d){goog.asserts.assert(null!=b.length);return goog.array.ARRAY_PROTOTYPE_.some.call(b,c,d)}:function(b,c,d){for(var e=b.length,f=goog.isString(b)?b.split(""):b,g=0;g<e;g++)if(g in f&&c.call(d,f[g],g,b))return!0;return!1};
goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.every?function(b,c,d){goog.asserts.assert(null!=b.length);return goog.array.ARRAY_PROTOTYPE_.every.call(b,c,d)}:function(b,c,d){for(var e=b.length,f=goog.isString(b)?b.split(""):b,g=0;g<e;g++)if(g in f&&!c.call(d,f[g],g,b))return!1;return!0};goog.array.count=function(b,c,d){var e=0;goog.array.forEach(b,function(b,g,h){c.call(d,b,g,h)&&++e},d);return e};
goog.array.find=function(b,c,d){c=goog.array.findIndex(b,c,d);return 0>c?null:goog.isString(b)?b.charAt(c):b[c]};goog.array.findIndex=function(b,c,d){for(var e=b.length,f=goog.isString(b)?b.split(""):b,g=0;g<e;g++)if(g in f&&c.call(d,f[g],g,b))return g;return-1};goog.array.findRight=function(b,c,d){c=goog.array.findIndexRight(b,c,d);return 0>c?null:goog.isString(b)?b.charAt(c):b[c]};
goog.array.findIndexRight=function(b,c,d){for(var e=b.length,f=goog.isString(b)?b.split(""):b,e=e-1;0<=e;e--)if(e in f&&c.call(d,f[e],e,b))return e;return-1};goog.array.contains=function(b,c){return 0<=goog.array.indexOf(b,c)};goog.array.isEmpty=function(b){return 0==b.length};goog.array.clear=function(b){if(!goog.isArray(b))for(var c=b.length-1;0<=c;c--)delete b[c];b.length=0};goog.array.insert=function(b,c){goog.array.contains(b,c)||b.push(c)};
goog.array.insertAt=function(b,c,d){goog.array.splice(b,d,0,c)};goog.array.insertArrayAt=function(b,c,d){goog.partial(goog.array.splice,b,d,0).apply(null,c)};goog.array.insertBefore=function(b,c,d){var e;2==arguments.length||0>(e=goog.array.indexOf(b,d))?b.push(c):goog.array.insertAt(b,c,e)};goog.array.remove=function(b,c){var d=goog.array.indexOf(b,c),e;(e=0<=d)&&goog.array.removeAt(b,d);return e};
goog.array.removeAt=function(b,c){goog.asserts.assert(null!=b.length);return 1==goog.array.ARRAY_PROTOTYPE_.splice.call(b,c,1).length};goog.array.removeIf=function(b,c,d){c=goog.array.findIndex(b,c,d);return 0<=c?(goog.array.removeAt(b,c),!0):!1};goog.array.concat=function(b){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.toArray=function(b){var c=b.length;if(0<c){for(var d=Array(c),e=0;e<c;e++)d[e]=b[e];return d}return[]};goog.array.clone=goog.array.toArray;
goog.array.extend=function(b,c){for(var d=1;d<arguments.length;d++){var e=arguments[d],f;if(goog.isArray(e)||(f=goog.isArrayLike(e))&&Object.prototype.hasOwnProperty.call(e,"callee"))b.push.apply(b,e);else if(f)for(var g=b.length,h=e.length,k=0;k<h;k++)b[g+k]=e[k];else b.push(e)}};goog.array.splice=function(b,c,d,e){goog.asserts.assert(null!=b.length);return goog.array.ARRAY_PROTOTYPE_.splice.apply(b,goog.array.slice(arguments,1))};
goog.array.slice=function(b,c,d){goog.asserts.assert(null!=b.length);return 2>=arguments.length?goog.array.ARRAY_PROTOTYPE_.slice.call(b,c):goog.array.ARRAY_PROTOTYPE_.slice.call(b,c,d)};goog.array.removeDuplicates=function(b,c){for(var d=c||b,e={},f=0,g=0;g<b.length;){var h=b[g++],k=goog.isObject(h)?"o"+goog.getUid(h):(typeof h).charAt(0)+h;Object.prototype.hasOwnProperty.call(e,k)||(e[k]=!0,d[f++]=h)}d.length=f};
goog.array.binarySearch=function(b,c,d){return goog.array.binarySearch_(b,d||goog.array.defaultCompare,!1,c)};goog.array.binarySelect=function(b,c,d){return goog.array.binarySearch_(b,c,!0,void 0,d)};goog.array.binarySearch_=function(b,c,d,e,f){for(var g=0,h=b.length,k;g<h;){var m=g+h>>1,p;p=d?c.call(f,b[m],m,b):c(e,b[m]);0<p?g=m+1:(h=m,k=!p)}return k?g:~g};goog.array.sort=function(b,c){goog.asserts.assert(null!=b.length);goog.array.ARRAY_PROTOTYPE_.sort.call(b,c||goog.array.defaultCompare)};
goog.array.stableSort=function(b,c){for(var d=0;d<b.length;d++)b[d]={index:d,value:b[d]};var e=c||goog.array.defaultCompare;goog.array.sort(b,function(b,c){return e(b.value,c.value)||b.index-c.index});for(d=0;d<b.length;d++)b[d]=b[d].value};goog.array.sortObjectsByKey=function(b,c,d){var e=d||goog.array.defaultCompare;goog.array.sort(b,function(b,d){return e(b[c],d[c])})};
goog.array.isSorted=function(b,c,d){c=c||goog.array.defaultCompare;for(var e=1;e<b.length;e++){var f=c(b[e-1],b[e]);if(0<f||0==f&&d)return!1}return!0};goog.array.equals=function(b,c,d){if(!goog.isArrayLike(b)||!goog.isArrayLike(c)||b.length!=c.length)return!1;var e=b.length;d=d||goog.array.defaultCompareEquality;for(var f=0;f<e;f++)if(!d(b[f],c[f]))return!1;return!0};goog.array.compare=function(b,c,d){return goog.array.equals(b,c,d)};
goog.array.compare3=function(b,c,d){d=d||goog.array.defaultCompare;for(var e=Math.min(b.length,c.length),f=0;f<e;f++){var g=d(b[f],c[f]);if(0!=g)return g}return goog.array.defaultCompare(b.length,c.length)};goog.array.defaultCompare=function(b,c){return b>c?1:b<c?-1:0};goog.array.defaultCompareEquality=function(b,c){return b===c};goog.array.binaryInsert=function(b,c,d){d=goog.array.binarySearch(b,c,d);return 0>d?(goog.array.insertAt(b,c,-(d+1)),!0):!1};
goog.array.binaryRemove=function(b,c,d){c=goog.array.binarySearch(b,c,d);return 0<=c?goog.array.removeAt(b,c):!1};goog.array.bucket=function(b,c,d){for(var e={},f=0;f<b.length;f++){var g=b[f],h=c.call(d,g,f,b);goog.isDef(h)&&(e[h]||(e[h]=[])).push(g)}return e};goog.array.toObject=function(b,c,d){var e={};goog.array.forEach(b,function(f,g){e[c.call(d,f,g,b)]=f});return e};
goog.array.range=function(b,c,d){var e=[],f=0,g=b;d=d||1;void 0!==c&&(f=b,g=c);if(0>d*(g-f))return[];if(0<d)for(b=f;b<g;b+=d)e.push(b);else for(b=f;b>g;b+=d)e.push(b);return e};goog.array.repeat=function(b,c){for(var d=[],e=0;e<c;e++)d[e]=b;return d};goog.array.flatten=function(b){for(var c=[],d=0;d<arguments.length;d++){var e=arguments[d];goog.isArray(e)?c.push.apply(c,goog.array.flatten.apply(null,e)):c.push(e)}return c};
goog.array.rotate=function(b,c){goog.asserts.assert(null!=b.length);b.length&&(c%=b.length,0<c?goog.array.ARRAY_PROTOTYPE_.unshift.apply(b,b.splice(-c,c)):0>c&&goog.array.ARRAY_PROTOTYPE_.push.apply(b,b.splice(0,-c)));return b};goog.array.moveItem=function(b,c,d){goog.asserts.assert(0<=c&&c<b.length);goog.asserts.assert(0<=d&&d<b.length);c=goog.array.ARRAY_PROTOTYPE_.splice.call(b,c,1);goog.array.ARRAY_PROTOTYPE_.splice.call(b,d,0,c[0])};
goog.array.zip=function(b){if(!arguments.length)return[];for(var c=[],d=0;;d++){for(var e=[],f=0;f<arguments.length;f++){var g=arguments[f];if(d>=g.length)return c;e.push(g[d])}c.push(e)}};goog.array.shuffle=function(b,c){for(var d=c||Math.random,e=b.length-1;0<e;e--){var f=Math.floor(d()*(e+1)),g=b[e];b[e]=b[f];b[f]=g}};goog.dom={};goog.dom.classes={};goog.dom.classes.set=function(b,c){b.className=c};goog.dom.classes.get=function(b){b=b.className;return goog.isString(b)&&b.match(/\S+/g)||[]};goog.dom.classes.add=function(b,c){var d=goog.dom.classes.get(b),e=goog.array.slice(arguments,1),f=d.length+e.length;goog.dom.classes.add_(d,e);goog.dom.classes.set(b,d.join(" "));return d.length==f};
goog.dom.classes.remove=function(b,c){var d=goog.dom.classes.get(b),e=goog.array.slice(arguments,1),f=goog.dom.classes.getDifference_(d,e);goog.dom.classes.set(b,f.join(" "));return f.length==d.length-e.length};goog.dom.classes.add_=function(b,c){for(var d=0;d<c.length;d++)goog.array.contains(b,c[d])||b.push(c[d])};goog.dom.classes.getDifference_=function(b,c){return goog.array.filter(b,function(b){return!goog.array.contains(c,b)})};
goog.dom.classes.swap=function(b,c,d){for(var e=goog.dom.classes.get(b),f=!1,g=0;g<e.length;g++)e[g]==c&&(goog.array.splice(e,g--,1),f=!0);f&&(e.push(d),goog.dom.classes.set(b,e.join(" ")));return f};goog.dom.classes.addRemove=function(b,c,d){var e=goog.dom.classes.get(b);goog.isString(c)?goog.array.remove(e,c):goog.isArray(c)&&(e=goog.dom.classes.getDifference_(e,c));goog.isString(d)&&!goog.array.contains(e,d)?e.push(d):goog.isArray(d)&&goog.dom.classes.add_(e,d);goog.dom.classes.set(b,e.join(" "))};
goog.dom.classes.has=function(b,c){return goog.array.contains(goog.dom.classes.get(b),c)};goog.dom.classes.enable=function(b,c,d){d?goog.dom.classes.add(b,c):goog.dom.classes.remove(b,c)};goog.dom.classes.toggle=function(b,c){var d=!goog.dom.classes.has(b,c);goog.dom.classes.enable(b,c,d);return d};goog.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDI:"BDI",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",COMMAND:"COMMAND",DATA:"DATA",DATALIST:"DATALIST",DD:"DD",DEL:"DEL",DETAILS:"DETAILS",DFN:"DFN",DIALOG:"DIALOG",DIR:"DIR",DIV:"DIV",
DL:"DL",DT:"DT",EM:"EM",EMBED:"EMBED",FIELDSET:"FIELDSET",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FONT:"FONT",FOOTER:"FOOTER",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HEADER:"HEADER",HGROUP:"HGROUP",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",KEYGEN:"KEYGEN",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MARK:"MARK",MATH:"MATH",MENU:"MENU",META:"META",METER:"METER",
NAV:"NAV",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",OUTPUT:"OUTPUT",P:"P",PARAM:"PARAM",PRE:"PRE",PROGRESS:"PROGRESS",Q:"Q",RP:"RP",RT:"RT",RUBY:"RUBY",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SECTION:"SECTION",SELECT:"SELECT",SMALL:"SMALL",SOURCE:"SOURCE",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUMMARY:"SUMMARY",SUP:"SUP",SVG:"SVG",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",
TIME:"TIME",TITLE:"TITLE",TR:"TR",TRACK:"TRACK",TT:"TT",U:"U",UL:"UL",VAR:"VAR",VIDEO:"VIDEO",WBR:"WBR"};goog.userAgent={};goog.userAgent.ASSUME_IE=!1;goog.userAgent.ASSUME_GECKO=!1;goog.userAgent.ASSUME_WEBKIT=!1;goog.userAgent.ASSUME_MOBILE_WEBKIT=!1;goog.userAgent.ASSUME_OPERA=!1;goog.userAgent.ASSUME_ANY_VERSION=!1;goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;
goog.userAgent.getUserAgentString=function(){return goog.global.navigator?goog.global.navigator.userAgent:null};goog.userAgent.getNavigator=function(){return goog.global.navigator};
goog.userAgent.init_=function(){goog.userAgent.detectedOpera_=!1;goog.userAgent.detectedIe_=!1;goog.userAgent.detectedWebkit_=!1;goog.userAgent.detectedMobile_=!1;goog.userAgent.detectedGecko_=!1;var b;if(!goog.userAgent.BROWSER_KNOWN_&&(b=goog.userAgent.getUserAgentString())){var c=goog.userAgent.getNavigator();goog.userAgent.detectedOpera_=goog.string.startsWith(b,"Opera");goog.userAgent.detectedIe_=!goog.userAgent.detectedOpera_&&(goog.string.contains(b,"MSIE")||goog.string.contains(b,"Trident"));
goog.userAgent.detectedWebkit_=!goog.userAgent.detectedOpera_&&goog.string.contains(b,"WebKit");goog.userAgent.detectedMobile_=goog.userAgent.detectedWebkit_&&goog.string.contains(b,"Mobile");goog.userAgent.detectedGecko_=!goog.userAgent.detectedOpera_&&!goog.userAgent.detectedWebkit_&&!goog.userAgent.detectedIe_&&"Gecko"==c.product}};goog.userAgent.BROWSER_KNOWN_||goog.userAgent.init_();goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.userAgent.detectedOpera_;
goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.userAgent.detectedIe_;goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.userAgent.detectedGecko_;goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.userAgent.detectedWebkit_;goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.detectedMobile_;goog.userAgent.SAFARI=goog.userAgent.WEBKIT;
goog.userAgent.determinePlatform_=function(){var b=goog.userAgent.getNavigator();return b&&b.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.userAgent.ASSUME_MAC=!1;goog.userAgent.ASSUME_WINDOWS=!1;goog.userAgent.ASSUME_LINUX=!1;goog.userAgent.ASSUME_X11=!1;goog.userAgent.ASSUME_ANDROID=!1;goog.userAgent.ASSUME_IPHONE=!1;goog.userAgent.ASSUME_IPAD=!1;
goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD;
goog.userAgent.initPlatform_=function(){goog.userAgent.detectedMac_=goog.string.contains(goog.userAgent.PLATFORM,"Mac");goog.userAgent.detectedWindows_=goog.string.contains(goog.userAgent.PLATFORM,"Win");goog.userAgent.detectedLinux_=goog.string.contains(goog.userAgent.PLATFORM,"Linux");goog.userAgent.detectedX11_=!!goog.userAgent.getNavigator()&&goog.string.contains(goog.userAgent.getNavigator().appVersion||"","X11");var b=goog.userAgent.getUserAgentString();goog.userAgent.detectedAndroid_=!!b&&
goog.string.contains(b,"Android");goog.userAgent.detectedIPhone_=!!b&&goog.string.contains(b,"iPhone");goog.userAgent.detectedIPad_=!!b&&goog.string.contains(b,"iPad")};goog.userAgent.PLATFORM_KNOWN_||goog.userAgent.initPlatform_();goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.userAgent.detectedMac_;goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.userAgent.detectedWindows_;
goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.detectedLinux_;goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.detectedX11_;goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.userAgent.detectedAndroid_;goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.userAgent.detectedIPhone_;
goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.userAgent.detectedIPad_;
goog.userAgent.determineVersion_=function(){var b="",c;goog.userAgent.OPERA&&goog.global.opera?(b=goog.global.opera.version,b="function"==typeof b?b():b):(goog.userAgent.GECKO?c=/rv\:([^\);]+)(\)|;)/:goog.userAgent.IE?c=/\b(?:MSIE|rv)\s+([^\);]+)(\)|;)/:goog.userAgent.WEBKIT&&(c=/WebKit\/(\S+)/),c&&(b=(b=c.exec(goog.userAgent.getUserAgentString()))?b[1]:""));return goog.userAgent.IE&&(c=goog.userAgent.getDocumentMode_(),c>parseFloat(b))?String(c):b};
goog.userAgent.getDocumentMode_=function(){var b=goog.global.document;return b?b.documentMode:void 0};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(b,c){return goog.string.compareVersions(b,c)};goog.userAgent.isVersionOrHigherCache_={};
goog.userAgent.isVersionOrHigher=function(b){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[b]||(goog.userAgent.isVersionOrHigherCache_[b]=0<=goog.string.compareVersions(goog.userAgent.VERSION,b))};goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher;goog.userAgent.isDocumentModeOrHigher=function(b){return goog.userAgent.IE&&goog.userAgent.DOCUMENT_MODE>=b};goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;
goog.userAgent.DOCUMENT_MODE=function(){var b=goog.global.document;return b&&goog.userAgent.IE?goog.userAgent.getDocumentMode_()||("CSS1Compat"==b.compatMode?parseInt(goog.userAgent.VERSION,10):5):void 0}();goog.math={};goog.math.Size=function(b,c){this.width=b;this.height=c};goog.math.Size.equals=function(b,c){return b==c?!0:b&&c?b.width==c.width&&b.height==c.height:!1};goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)};goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"});goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)};
goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)};goog.math.Size.prototype.area=function(){return this.width*this.height};goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)};goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height};goog.math.Size.prototype.isEmpty=function(){return!this.area()};goog.math.Size.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
goog.math.Size.prototype.fitsInside=function(b){return this.width<=b.width&&this.height<=b.height};goog.math.Size.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Size.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Size.prototype.scale=function(b,c){var d=goog.isNumber(c)?c:b;this.width*=b;this.height*=d;return this};
goog.math.Size.prototype.scaleToFit=function(b){b=this.aspectRatio()>b.aspectRatio()?b.width/this.width:b.height/this.height;return this.scale(b)};goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE};goog.math.randomInt=function(b){return Math.floor(Math.random()*b)};goog.math.uniformRandom=function(b,c){return b+Math.random()*(c-b)};goog.math.clamp=function(b,c,d){return Math.min(Math.max(b,c),d)};goog.math.modulo=function(b,c){var d=b%c;return 0>d*c?d+c:d};goog.math.lerp=function(b,c,d){return b+d*(c-b)};goog.math.nearlyEquals=function(b,c,d){return Math.abs(b-c)<=(d||1E-6)};goog.math.standardAngle=function(b){return goog.math.modulo(b,360)};
goog.math.toRadians=function(b){return b*Math.PI/180};goog.math.toDegrees=function(b){return 180*b/Math.PI};goog.math.angleDx=function(b,c){return c*Math.cos(goog.math.toRadians(b))};goog.math.angleDy=function(b,c){return c*Math.sin(goog.math.toRadians(b))};goog.math.angle=function(b,c,d,e){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(e-c,d-b)))};goog.math.angleDifference=function(b,c){var d=goog.math.standardAngle(c)-goog.math.standardAngle(b);180<d?d-=360:-180>=d&&(d=360+d);return d};
goog.math.sign=function(b){return 0==b?0:0>b?-1:1};goog.math.longestCommonSubsequence=function(b,c,d,e){d=d||function(b,c){return b==c};e=e||function(c,d){return b[c]};for(var f=b.length,g=c.length,h=[],k=0;k<f+1;k++)h[k]=[],h[k][0]=0;for(var m=0;m<g+1;m++)h[0][m]=0;for(k=1;k<=f;k++)for(m=1;m<=g;m++)d(b[k-1],c[m-1])?h[k][m]=h[k-1][m-1]+1:h[k][m]=Math.max(h[k-1][m],h[k][m-1]);for(var p=[],k=f,m=g;0<k&&0<m;)d(b[k-1],c[m-1])?(p.unshift(e(k-1,m-1)),k--,m--):h[k-1][m]>h[k][m-1]?k--:m--;return p};
goog.math.sum=function(b){return goog.array.reduce(arguments,function(b,d){return b+d},0)};goog.math.average=function(b){return goog.math.sum.apply(null,arguments)/arguments.length};goog.math.standardDeviation=function(b){var c=arguments.length;if(2>c)return 0;var d=goog.math.average.apply(null,arguments),c=goog.math.sum.apply(null,goog.array.map(arguments,function(b){return Math.pow(b-d,2)}))/(c-1);return Math.sqrt(c)};goog.math.isInt=function(b){return isFinite(b)&&0==b%1};
goog.math.isFiniteNumber=function(b){return isFinite(b)&&!isNaN(b)};goog.math.safeFloor=function(b,c){goog.asserts.assert(!goog.isDef(c)||0<c);return Math.floor(b+(c||2E-15))};goog.math.safeCeil=function(b,c){goog.asserts.assert(!goog.isDef(c)||0<c);return Math.ceil(b-(c||2E-15))};goog.math.Coordinate=function(b,c){this.x=goog.isDef(b)?b:0;this.y=goog.isDef(c)?c:0};goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)};goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"});goog.math.Coordinate.equals=function(b,c){return b==c?!0:b&&c?b.x==c.x&&b.y==c.y:!1};goog.math.Coordinate.distance=function(b,c){var d=b.x-c.x,e=b.y-c.y;return Math.sqrt(d*d+e*e)};
goog.math.Coordinate.magnitude=function(b){return Math.sqrt(b.x*b.x+b.y*b.y)};goog.math.Coordinate.azimuth=function(b){return goog.math.angle(0,0,b.x,b.y)};goog.math.Coordinate.squaredDistance=function(b,c){var d=b.x-c.x,e=b.y-c.y;return d*d+e*e};goog.math.Coordinate.difference=function(b,c){return new goog.math.Coordinate(b.x-c.x,b.y-c.y)};goog.math.Coordinate.sum=function(b,c){return new goog.math.Coordinate(b.x+c.x,b.y+c.y)};
goog.math.Coordinate.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};goog.math.Coordinate.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};goog.math.Coordinate.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};goog.math.Coordinate.prototype.translate=function(b,c){b instanceof goog.math.Coordinate?(this.x+=b.x,this.y+=b.y):(this.x+=b,goog.isNumber(c)&&(this.y+=c));return this};
goog.math.Coordinate.prototype.scale=function(b,c){var d=goog.isNumber(c)?c:b;this.x*=b;this.y*=d;return this};goog.dom.ASSUME_QUIRKS_MODE=!1;goog.dom.ASSUME_STANDARDS_MODE=!1;goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE;goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.dom.getDomHelper=function(b){return b?new goog.dom.DomHelper(goog.dom.getOwnerDocument(b)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)};
goog.dom.getDocument=function(){return document};goog.dom.getElement=function(b){return goog.isString(b)?document.getElementById(b):b};goog.dom.$=goog.dom.getElement;goog.dom.getElementsByTagNameAndClass=function(b,c,d){return goog.dom.getElementsByTagNameAndClass_(document,b,c,d)};
goog.dom.getElementsByClass=function(b,c){var d=c||document;return goog.dom.canUseQuerySelector_(d)?d.querySelectorAll("."+b):d.getElementsByClassName?d.getElementsByClassName(b):goog.dom.getElementsByTagNameAndClass_(document,"*",b,c)};goog.dom.getElementByClass=function(b,c){var d=c||document,e=null;return(e=goog.dom.canUseQuerySelector_(d)?d.querySelector("."+b):goog.dom.getElementsByClass(b,c)[0])||null};goog.dom.canUseQuerySelector_=function(b){return!(!b.querySelectorAll||!b.querySelector)};
goog.dom.getElementsByTagNameAndClass_=function(b,c,d,e){b=e||b;c=c&&"*"!=c?c.toUpperCase():"";if(goog.dom.canUseQuerySelector_(b)&&(c||d))return b.querySelectorAll(c+(d?"."+d:""));if(d&&b.getElementsByClassName){b=b.getElementsByClassName(d);if(c){e={};for(var f=0,g=0,h;h=b[g];g++)c==h.nodeName&&(e[f++]=h);e.length=f;return e}return b}b=b.getElementsByTagName(c||"*");if(d){e={};for(g=f=0;h=b[g];g++)c=h.className,"function"==typeof c.split&&goog.array.contains(c.split(/\s+/),d)&&(e[f++]=h);e.length=
f;return e}return b};goog.dom.$$=goog.dom.getElementsByTagNameAndClass;goog.dom.setProperties=function(b,c){goog.object.forEach(c,function(c,e){"style"==e?b.style.cssText=c:"class"==e?b.className=c:"for"==e?b.htmlFor=c:e in goog.dom.DIRECT_ATTRIBUTE_MAP_?b.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[e],c):goog.string.startsWith(e,"aria-")||goog.string.startsWith(e,"data-")?b.setAttribute(e,c):b[e]=c})};
goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};goog.dom.getViewportSize=function(b){return goog.dom.getViewportSize_(b||window)};goog.dom.getViewportSize_=function(b){b=b.document;b=goog.dom.isCss1CompatMode_(b)?b.documentElement:b.body;return new goog.math.Size(b.clientWidth,b.clientHeight)};
goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)};goog.dom.getDocumentHeight_=function(b){var c=b.document,d=0;if(c){b=goog.dom.getViewportSize_(b).height;var d=c.body,e=c.documentElement;if(goog.dom.isCss1CompatMode_(c)&&e.scrollHeight)d=e.scrollHeight!=b?e.scrollHeight:e.offsetHeight;else{var c=e.scrollHeight,f=e.offsetHeight;e.clientHeight!=f&&(c=d.scrollHeight,f=d.offsetHeight);d=c>b?c>f?c:f:c<f?c:f}}return d};
goog.dom.getPageScroll=function(b){return goog.dom.getDomHelper((b||goog.global||window).document).getDocumentScroll()};goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)};
goog.dom.getDocumentScroll_=function(b){var c=goog.dom.getDocumentScrollElement_(b);b=goog.dom.getWindow_(b);return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&b.pageYOffset!=c.scrollTop?new goog.math.Coordinate(c.scrollLeft,c.scrollTop):new goog.math.Coordinate(b.pageXOffset||c.scrollLeft,b.pageYOffset||c.scrollTop)};goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)};
goog.dom.getDocumentScrollElement_=function(b){return!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(b)?b.documentElement:b.body};goog.dom.getWindow=function(b){return b?goog.dom.getWindow_(b):window};goog.dom.getWindow_=function(b){return b.parentWindow||b.defaultView};goog.dom.createDom=function(b,c,d){return goog.dom.createDom_(document,arguments)};
goog.dom.createDom_=function(b,c){var d=c[0],e=c[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&e&&(e.name||e.type)){d=["<",d];e.name&&d.push(' name="',goog.string.htmlEscape(e.name),'"');if(e.type){d.push(' type="',goog.string.htmlEscape(e.type),'"');var f={};goog.object.extend(f,e);delete f.type;e=f}d.push(">");d=d.join("")}d=b.createElement(d);e&&(goog.isString(e)?d.className=e:goog.isArray(e)?goog.dom.classes.add.apply(null,[d].concat(e)):goog.dom.setProperties(d,e));2<c.length&&
goog.dom.append_(b,d,c,2);return d};goog.dom.append_=function(b,c,d,e){function f(d){d&&c.appendChild(goog.isString(d)?b.createTextNode(d):d)}for(;e<d.length;e++){var g=d[e];goog.isArrayLike(g)&&!goog.dom.isNodeLike(g)?goog.array.forEach(goog.dom.isNodeList(g)?goog.array.toArray(g):g,f):f(g)}};goog.dom.$dom=goog.dom.createDom;goog.dom.createElement=function(b){return document.createElement(b)};goog.dom.createTextNode=function(b){return document.createTextNode(String(b))};
goog.dom.createTable=function(b,c,d){return goog.dom.createTable_(document,b,c,!!d)};goog.dom.createTable_=function(b,c,d,e){for(var f=["<tr>"],g=0;g<d;g++)f.push(e?"<td>&nbsp;</td>":"<td></td>");f.push("</tr>");f=f.join("");d=["<table>"];for(g=0;g<c;g++)d.push(f);d.push("</table>");b=b.createElement(goog.dom.TagName.DIV);b.innerHTML=d.join("");return b.removeChild(b.firstChild)};goog.dom.htmlToDocumentFragment=function(b){return goog.dom.htmlToDocumentFragment_(document,b)};
goog.dom.htmlToDocumentFragment_=function(b,c){var d=b.createElement("div");goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(d.innerHTML="<br>"+c,d.removeChild(d.firstChild)):d.innerHTML=c;if(1==d.childNodes.length)return d.removeChild(d.firstChild);for(var e=b.createDocumentFragment();d.firstChild;)e.appendChild(d.firstChild);return e};goog.dom.getCompatMode=function(){return goog.dom.isCss1CompatMode()?"CSS1Compat":"BackCompat"};goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)};
goog.dom.isCss1CompatMode_=function(b){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==b.compatMode};goog.dom.canHaveChildren=function(b){if(b.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(b.tagName){case goog.dom.TagName.APPLET:case goog.dom.TagName.AREA:case goog.dom.TagName.BASE:case goog.dom.TagName.BR:case goog.dom.TagName.COL:case goog.dom.TagName.COMMAND:case goog.dom.TagName.EMBED:case goog.dom.TagName.FRAME:case goog.dom.TagName.HR:case goog.dom.TagName.IMG:case goog.dom.TagName.INPUT:case goog.dom.TagName.IFRAME:case goog.dom.TagName.ISINDEX:case goog.dom.TagName.KEYGEN:case goog.dom.TagName.LINK:case goog.dom.TagName.NOFRAMES:case goog.dom.TagName.NOSCRIPT:case goog.dom.TagName.META:case goog.dom.TagName.OBJECT:case goog.dom.TagName.PARAM:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.SOURCE:case goog.dom.TagName.STYLE:case goog.dom.TagName.TRACK:case goog.dom.TagName.WBR:return!1}return!0};
goog.dom.appendChild=function(b,c){b.appendChild(c)};goog.dom.append=function(b,c){goog.dom.append_(goog.dom.getOwnerDocument(b),b,arguments,1)};goog.dom.removeChildren=function(b){for(var c;c=b.firstChild;)b.removeChild(c)};goog.dom.insertSiblingBefore=function(b,c){c.parentNode&&c.parentNode.insertBefore(b,c)};goog.dom.insertSiblingAfter=function(b,c){c.parentNode&&c.parentNode.insertBefore(b,c.nextSibling)};goog.dom.insertChildAt=function(b,c,d){b.insertBefore(c,b.childNodes[d]||null)};
goog.dom.removeNode=function(b){return b&&b.parentNode?b.parentNode.removeChild(b):null};goog.dom.replaceNode=function(b,c){var d=c.parentNode;d&&d.replaceChild(b,c)};goog.dom.flattenElement=function(b){var c,d=b.parentNode;if(d&&d.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(b.removeNode)return b.removeNode(!1);for(;c=b.firstChild;)d.insertBefore(c,b);return goog.dom.removeNode(b)}};
goog.dom.getChildren=function(b){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&void 0!=b.children?b.children:goog.array.filter(b.childNodes,function(b){return b.nodeType==goog.dom.NodeType.ELEMENT})};goog.dom.getFirstElementChild=function(b){return void 0!=b.firstElementChild?b.firstElementChild:goog.dom.getNextElementNode_(b.firstChild,!0)};goog.dom.getLastElementChild=function(b){return void 0!=b.lastElementChild?b.lastElementChild:goog.dom.getNextElementNode_(b.lastChild,!1)};
goog.dom.getNextElementSibling=function(b){return void 0!=b.nextElementSibling?b.nextElementSibling:goog.dom.getNextElementNode_(b.nextSibling,!0)};goog.dom.getPreviousElementSibling=function(b){return void 0!=b.previousElementSibling?b.previousElementSibling:goog.dom.getNextElementNode_(b.previousSibling,!1)};goog.dom.getNextElementNode_=function(b,c){for(;b&&b.nodeType!=goog.dom.NodeType.ELEMENT;)b=c?b.nextSibling:b.previousSibling;return b};
goog.dom.getNextNode=function(b){if(!b)return null;if(b.firstChild)return b.firstChild;for(;b&&!b.nextSibling;)b=b.parentNode;return b?b.nextSibling:null};goog.dom.getPreviousNode=function(b){if(!b)return null;if(!b.previousSibling)return b.parentNode;for(b=b.previousSibling;b&&b.lastChild;)b=b.lastChild;return b};goog.dom.isNodeLike=function(b){return goog.isObject(b)&&0<b.nodeType};goog.dom.isElement=function(b){return goog.isObject(b)&&b.nodeType==goog.dom.NodeType.ELEMENT};
goog.dom.isWindow=function(b){return goog.isObject(b)&&b.window==b};goog.dom.getParentElement=function(b){if(goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY&&!(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10")&&goog.global.SVGElement&&b instanceof goog.global.SVGElement))return b.parentElement;b=b.parentNode;return goog.dom.isElement(b)?b:null};
goog.dom.contains=function(b,c){if(b.contains&&c.nodeType==goog.dom.NodeType.ELEMENT)return b==c||b.contains(c);if("undefined"!=typeof b.compareDocumentPosition)return b==c||Boolean(b.compareDocumentPosition(c)&16);for(;c&&b!=c;)c=c.parentNode;return c==b};
goog.dom.compareNodeOrder=function(b,c){if(b==c)return 0;if(b.compareDocumentPosition)return b.compareDocumentPosition(c)&2?1:-1;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(b.nodeType==goog.dom.NodeType.DOCUMENT)return-1;if(c.nodeType==goog.dom.NodeType.DOCUMENT)return 1}if("sourceIndex"in b||b.parentNode&&"sourceIndex"in b.parentNode){var d=b.nodeType==goog.dom.NodeType.ELEMENT,e=c.nodeType==goog.dom.NodeType.ELEMENT;if(d&&e)return b.sourceIndex-c.sourceIndex;var f=b.parentNode,
g=c.parentNode;return f==g?goog.dom.compareSiblingOrder_(b,c):!d&&goog.dom.contains(f,c)?-1*goog.dom.compareParentsDescendantNodeIe_(b,c):!e&&goog.dom.contains(g,b)?goog.dom.compareParentsDescendantNodeIe_(c,b):(d?b.sourceIndex:f.sourceIndex)-(e?c.sourceIndex:g.sourceIndex)}e=goog.dom.getOwnerDocument(b);d=e.createRange();d.selectNode(b);d.collapse(!0);e=e.createRange();e.selectNode(c);e.collapse(!0);return d.compareBoundaryPoints(goog.global.Range.START_TO_END,e)};
goog.dom.compareParentsDescendantNodeIe_=function(b,c){var d=b.parentNode;if(d==c)return-1;for(var e=c;e.parentNode!=d;)e=e.parentNode;return goog.dom.compareSiblingOrder_(e,b)};goog.dom.compareSiblingOrder_=function(b,c){for(var d=c;d=d.previousSibling;)if(d==b)return-1;return 1};
goog.dom.findCommonAncestor=function(b){var c,d=arguments.length;if(!d)return null;if(1==d)return arguments[0];var e=[],f=Infinity;for(c=0;c<d;c++){for(var g=[],h=arguments[c];h;)g.unshift(h),h=h.parentNode;e.push(g);f=Math.min(f,g.length)}g=null;for(c=0;c<f;c++){for(var h=e[0][c],k=1;k<d;k++)if(h!=e[k][c])return g;g=h}return g};goog.dom.getOwnerDocument=function(b){return b.nodeType==goog.dom.NodeType.DOCUMENT?b:b.ownerDocument||b.document};
goog.dom.getFrameContentDocument=function(b){return b.contentDocument||b.contentWindow.document};goog.dom.getFrameContentWindow=function(b){return b.contentWindow||goog.dom.getWindow_(goog.dom.getFrameContentDocument(b))};
goog.dom.setTextContent=function(b,c){if("textContent"in b)b.textContent=c;else if(b.firstChild&&b.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;b.lastChild!=b.firstChild;)b.removeChild(b.lastChild);b.firstChild.data=c}else{goog.dom.removeChildren(b);var d=goog.dom.getOwnerDocument(b);b.appendChild(d.createTextNode(String(c)))}};goog.dom.getOuterHtml=function(b){if("outerHTML"in b)return b.outerHTML;var c=goog.dom.getOwnerDocument(b).createElement("div");c.appendChild(b.cloneNode(!0));return c.innerHTML};
goog.dom.findNode=function(b,c){var d=[];return goog.dom.findNodes_(b,c,d,!0)?d[0]:void 0};goog.dom.findNodes=function(b,c){var d=[];goog.dom.findNodes_(b,c,d,!1);return d};goog.dom.findNodes_=function(b,c,d,e){if(null!=b)for(b=b.firstChild;b;){if(c(b)&&(d.push(b),e)||goog.dom.findNodes_(b,c,d,e))return!0;b=b.nextSibling}return!1};goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};
goog.dom.isFocusableTabIndex=function(b){var c=b.getAttributeNode("tabindex");return c&&c.specified?(b=b.tabIndex,goog.isNumber(b)&&0<=b&&32768>b):!1};goog.dom.setFocusableTabIndex=function(b,c){c?b.tabIndex=0:(b.tabIndex=-1,b.removeAttribute("tabIndex"))};
goog.dom.getTextContent=function(b){if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&"innerText"in b)b=goog.string.canonicalizeNewlines(b.innerText);else{var c=[];goog.dom.getTextContent_(b,c,!0);b=c.join("")}b=b.replace(/ \xAD /g," ").replace(/\xAD/g,"");b=b.replace(/\u200B/g,"");goog.dom.BrowserFeature.CAN_USE_INNER_TEXT||(b=b.replace(/ +/g," "));" "!=b&&(b=b.replace(/^\s*/,""));return b};goog.dom.getRawTextContent=function(b){var c=[];goog.dom.getTextContent_(b,c,!1);return c.join("")};
goog.dom.getTextContent_=function(b,c,d){if(!(b.nodeName in goog.dom.TAGS_TO_IGNORE_))if(b.nodeType==goog.dom.NodeType.TEXT)d?c.push(String(b.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(b.nodeValue);else if(b.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)c.push(goog.dom.PREDEFINED_TAG_VALUES_[b.nodeName]);else for(b=b.firstChild;b;)goog.dom.getTextContent_(b,c,d),b=b.nextSibling};goog.dom.getNodeTextLength=function(b){return goog.dom.getTextContent(b).length};
goog.dom.getNodeTextOffset=function(b,c){for(var d=c||goog.dom.getOwnerDocument(b).body,e=[];b&&b!=d;){for(var f=b;f=f.previousSibling;)e.unshift(goog.dom.getTextContent(f));b=b.parentNode}return goog.string.trimLeft(e.join("")).replace(/ +/g," ").length};
goog.dom.getNodeAtOffset=function(b,c,d){b=[b];for(var e=0,f=null;0<b.length&&e<c;)if(f=b.pop(),!(f.nodeName in goog.dom.TAGS_TO_IGNORE_))if(f.nodeType==goog.dom.NodeType.TEXT)var g=f.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," "),e=e+g.length;else if(f.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)e+=goog.dom.PREDEFINED_TAG_VALUES_[f.nodeName].length;else for(g=f.childNodes.length-1;0<=g;g--)b.push(f.childNodes[g]);goog.isObject(d)&&(d.remainder=f?f.nodeValue.length+c-e-1:0,d.node=f);return f};
goog.dom.isNodeList=function(b){if(b&&"number"==typeof b.length){if(goog.isObject(b))return"function"==typeof b.item||"string"==typeof b.item;if(goog.isFunction(b))return"function"==typeof b.item}return!1};goog.dom.getAncestorByTagNameAndClass=function(b,c,d){if(!c&&!d)return null;var e=c?c.toUpperCase():null;return goog.dom.getAncestor(b,function(b){return(!e||b.nodeName==e)&&(!d||goog.dom.classes.has(b,d))},!0)};
goog.dom.getAncestorByClass=function(b,c){return goog.dom.getAncestorByTagNameAndClass(b,null,c)};goog.dom.getAncestor=function(b,c,d,e){d||(b=b.parentNode);d=null==e;for(var f=0;b&&(d||f<=e);){if(c(b))return b;b=b.parentNode;f++}return null};goog.dom.getActiveElement=function(b){try{return b&&b.activeElement}catch(c){}return null};goog.dom.DomHelper=function(b){this.document_=b||goog.global.document||document};goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper;
goog.dom.DomHelper.prototype.setDocument=function(b){this.document_=b};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.getElement=function(b){return goog.isString(b)?this.document_.getElementById(b):b};goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement;goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(b,c,d){return goog.dom.getElementsByTagNameAndClass_(this.document_,b,c,d)};
goog.dom.DomHelper.prototype.getElementsByClass=function(b,c){return goog.dom.getElementsByClass(b,c||this.document_)};goog.dom.DomHelper.prototype.getElementByClass=function(b,c){return goog.dom.getElementByClass(b,c||this.document_)};goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass;goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties;goog.dom.DomHelper.prototype.getViewportSize=function(b){return goog.dom.getViewportSize(b||this.getWindow())};
goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())};goog.dom.DomHelper.prototype.createDom=function(b,c,d){return goog.dom.createDom_(this.document_,arguments)};goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom;goog.dom.DomHelper.prototype.createElement=function(b){return this.document_.createElement(b)};goog.dom.DomHelper.prototype.createTextNode=function(b){return this.document_.createTextNode(String(b))};
goog.dom.DomHelper.prototype.createTable=function(b,c,d){return goog.dom.createTable_(this.document_,b,c,!!d)};goog.dom.DomHelper.prototype.htmlToDocumentFragment=function(b){return goog.dom.htmlToDocumentFragment_(this.document_,b)};goog.dom.DomHelper.prototype.getCompatMode=function(){return this.isCss1CompatMode()?"CSS1Compat":"BackCompat"};goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)};goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)};
goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)};goog.dom.DomHelper.prototype.getActiveElement=function(b){return goog.dom.getActiveElement(b||this.document_)};goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild;goog.dom.DomHelper.prototype.append=goog.dom.append;
goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren;goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren;goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore;goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter;goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt;goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode;goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode;
goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement;goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren;goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild;goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild;goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling;goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling;
goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode;goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode;goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike;goog.dom.DomHelper.prototype.isElement=goog.dom.isElement;goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow;goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement;goog.dom.DomHelper.prototype.contains=goog.dom.contains;goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder;
goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor;goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument;goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument;goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow;goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent;goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml;goog.dom.DomHelper.prototype.findNode=goog.dom.findNode;
goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes;goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex;goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex;goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent;goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength;goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset;goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset;
goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList;goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass;goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass;goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor;goog.math.Box=function(b,c,d,e){this.top=b;this.right=c;this.bottom=d;this.left=e};goog.math.Box.boundingBox=function(b){for(var c=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),d=1;d<arguments.length;d++){var e=arguments[d];c.top=Math.min(c.top,e.y);c.right=Math.max(c.right,e.x);c.bottom=Math.max(c.bottom,e.y);c.left=Math.min(c.left,e.x)}return c};goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)};
goog.DEBUG&&(goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"});goog.math.Box.prototype.contains=function(b){return goog.math.Box.contains(this,b)};goog.math.Box.prototype.expand=function(b,c,d,e){goog.isObject(b)?(this.top-=b.top,this.right+=b.right,this.bottom+=b.bottom,this.left-=b.left):(this.top-=b,this.right+=c,this.bottom+=d,this.left-=e);return this};
goog.math.Box.prototype.expandToInclude=function(b){this.left=Math.min(this.left,b.left);this.top=Math.min(this.top,b.top);this.right=Math.max(this.right,b.right);this.bottom=Math.max(this.bottom,b.bottom)};goog.math.Box.equals=function(b,c){return b==c?!0:b&&c?b.top==c.top&&b.right==c.right&&b.bottom==c.bottom&&b.left==c.left:!1};
goog.math.Box.contains=function(b,c){return b&&c?c instanceof goog.math.Box?c.left>=b.left&&c.right<=b.right&&c.top>=b.top&&c.bottom<=b.bottom:c.x>=b.left&&c.x<=b.right&&c.y>=b.top&&c.y<=b.bottom:!1};goog.math.Box.relativePositionX=function(b,c){return c.x<b.left?c.x-b.left:c.x>b.right?c.x-b.right:0};goog.math.Box.relativePositionY=function(b,c){return c.y<b.top?c.y-b.top:c.y>b.bottom?c.y-b.bottom:0};
goog.math.Box.distance=function(b,c){var d=goog.math.Box.relativePositionX(b,c),e=goog.math.Box.relativePositionY(b,c);return Math.sqrt(d*d+e*e)};goog.math.Box.intersects=function(b,c){return b.left<=c.right&&c.left<=b.right&&b.top<=c.bottom&&c.top<=b.bottom};goog.math.Box.intersectsWithPadding=function(b,c,d){return b.left<=c.right+d&&c.left<=b.right+d&&b.top<=c.bottom+d&&c.top<=b.bottom+d};
goog.math.Box.prototype.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};goog.math.Box.prototype.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};
goog.math.Box.prototype.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};goog.math.Box.prototype.translate=function(b,c){b instanceof goog.math.Coordinate?(this.left+=b.x,this.right+=b.x,this.top+=b.y,this.bottom+=b.y):(this.left+=b,this.right+=b,goog.isNumber(c)&&(this.top+=c,this.bottom+=c));return this};
goog.math.Box.prototype.scale=function(b,c){var d=goog.isNumber(c)?c:b;this.left*=b;this.right*=b;this.top*=d;this.bottom*=d;return this};goog.math.Rect=function(b,c,d,e){this.left=b;this.top=c;this.width=d;this.height=e};goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)};goog.math.Rect.prototype.toBox=function(){return new goog.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)};goog.math.Rect.createFromBox=function(b){return new goog.math.Rect(b.left,b.top,b.right-b.left,b.bottom-b.top)};
goog.DEBUG&&(goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"});goog.math.Rect.equals=function(b,c){return b==c?!0:b&&c?b.left==c.left&&b.width==c.width&&b.top==c.top&&b.height==c.height:!1};
goog.math.Rect.prototype.intersection=function(b){var c=Math.max(this.left,b.left),d=Math.min(this.left+this.width,b.left+b.width);if(c<=d){var e=Math.max(this.top,b.top);b=Math.min(this.top+this.height,b.top+b.height);if(e<=b)return this.left=c,this.top=e,this.width=d-c,this.height=b-e,!0}return!1};
goog.math.Rect.intersection=function(b,c){var d=Math.max(b.left,c.left),e=Math.min(b.left+b.width,c.left+c.width);if(d<=e){var f=Math.max(b.top,c.top),g=Math.min(b.top+b.height,c.top+c.height);if(f<=g)return new goog.math.Rect(d,f,e-d,g-f)}return null};goog.math.Rect.intersects=function(b,c){return b.left<=c.left+c.width&&c.left<=b.left+b.width&&b.top<=c.top+c.height&&c.top<=b.top+b.height};goog.math.Rect.prototype.intersects=function(b){return goog.math.Rect.intersects(this,b)};
goog.math.Rect.difference=function(b,c){var d=goog.math.Rect.intersection(b,c);if(!d||!d.height||!d.width)return[b.clone()];var d=[],e=b.top,f=b.height,g=b.left+b.width,h=b.top+b.height,k=c.left+c.width,m=c.top+c.height;c.top>b.top&&(d.push(new goog.math.Rect(b.left,b.top,b.width,c.top-b.top)),e=c.top,f-=c.top-b.top);m<h&&(d.push(new goog.math.Rect(b.left,m,b.width,h-m)),f=m-e);c.left>b.left&&d.push(new goog.math.Rect(b.left,e,c.left-b.left,f));k<g&&d.push(new goog.math.Rect(k,e,g-k,f));return d};
goog.math.Rect.prototype.difference=function(b){return goog.math.Rect.difference(this,b)};goog.math.Rect.prototype.boundingRect=function(b){var c=Math.max(this.left+this.width,b.left+b.width),d=Math.max(this.top+this.height,b.top+b.height);this.left=Math.min(this.left,b.left);this.top=Math.min(this.top,b.top);this.width=c-this.left;this.height=d-this.top};goog.math.Rect.boundingRect=function(b,c){if(!b||!c)return null;var d=b.clone();d.boundingRect(c);return d};
goog.math.Rect.prototype.contains=function(b){return b instanceof goog.math.Rect?this.left<=b.left&&this.left+this.width>=b.left+b.width&&this.top<=b.top&&this.top+this.height>=b.top+b.height:b.x>=this.left&&b.x<=this.left+this.width&&b.y>=this.top&&b.y<=this.top+this.height};goog.math.Rect.prototype.squaredDistance=function(b){var c=b.x<this.left?this.left-b.x:Math.max(b.x-(this.left+this.width),0);b=b.y<this.top?this.top-b.y:Math.max(b.y-(this.top+this.height),0);return c*c+b*b};
goog.math.Rect.prototype.distance=function(b){return Math.sqrt(this.squaredDistance(b))};goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)};goog.math.Rect.prototype.getTopLeft=function(){return new goog.math.Coordinate(this.left,this.top)};goog.math.Rect.prototype.getCenter=function(){return new goog.math.Coordinate(this.left+this.width/2,this.top+this.height/2)};
goog.math.Rect.prototype.getBottomRight=function(){return new goog.math.Coordinate(this.left+this.width,this.top+this.height)};goog.math.Rect.prototype.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Rect.prototype.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
goog.math.Rect.prototype.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Rect.prototype.translate=function(b,c){b instanceof goog.math.Coordinate?(this.left+=b.x,this.top+=b.y):(this.left+=b,goog.isNumber(c)&&(this.top+=c));return this};goog.math.Rect.prototype.scale=function(b,c){var d=goog.isNumber(c)?c:b;this.left*=b;this.width*=b;this.top*=d;this.height*=d;return this};goog.dom.vendor={};goog.dom.vendor.getVendorJsPrefix=function(){return goog.userAgent.WEBKIT?"Webkit":goog.userAgent.GECKO?"Moz":goog.userAgent.IE?"ms":goog.userAgent.OPERA?"O":null};goog.dom.vendor.getVendorPrefix=function(){return goog.userAgent.WEBKIT?"-webkit":goog.userAgent.GECKO?"-moz":goog.userAgent.IE?"-ms":goog.userAgent.OPERA?"-o":null};goog.style={};goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS=!1;goog.style.setStyle=function(b,c,d){goog.isString(c)?goog.style.setStyle_(b,d,c):goog.object.forEach(c,goog.partial(goog.style.setStyle_,b))};goog.style.setStyle_=function(b,c,d){(d=goog.style.getVendorJsStyleName_(b,d))&&(b.style[d]=c)};goog.style.getVendorJsStyleName_=function(b,c){var d=goog.string.toCamelCase(c);if(void 0===b.style[d]){var e=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(c);if(void 0!==b.style[e])return e}return d};
goog.style.getVendorStyleName_=function(b,c){var d=goog.string.toCamelCase(c);return void 0===b.style[d]&&(d=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(c),void 0!==b.style[d])?goog.dom.vendor.getVendorPrefix()+"-"+c:c};goog.style.getStyle=function(b,c){var d=b.style[goog.string.toCamelCase(c)];return"undefined"!==typeof d?d:b.style[goog.style.getVendorJsStyleName_(b,c)]||""};
goog.style.getComputedStyle=function(b,c){var d=goog.dom.getOwnerDocument(b);return d.defaultView&&d.defaultView.getComputedStyle&&(d=d.defaultView.getComputedStyle(b,null))?d[c]||d.getPropertyValue(c)||"":""};goog.style.getCascadedStyle=function(b,c){return b.currentStyle?b.currentStyle[c]:null};goog.style.getStyle_=function(b,c){return goog.style.getComputedStyle(b,c)||goog.style.getCascadedStyle(b,c)||b.style&&b.style[c]};
goog.style.getComputedPosition=function(b){return goog.style.getStyle_(b,"position")};goog.style.getBackgroundColor=function(b){return goog.style.getStyle_(b,"backgroundColor")};goog.style.getComputedOverflowX=function(b){return goog.style.getStyle_(b,"overflowX")};goog.style.getComputedOverflowY=function(b){return goog.style.getStyle_(b,"overflowY")};goog.style.getComputedZIndex=function(b){return goog.style.getStyle_(b,"zIndex")};
goog.style.getComputedTextAlign=function(b){return goog.style.getStyle_(b,"textAlign")};goog.style.getComputedCursor=function(b){return goog.style.getStyle_(b,"cursor")};goog.style.setPosition=function(b,c,d){var e,f=goog.userAgent.GECKO&&(goog.userAgent.MAC||goog.userAgent.X11)&&goog.userAgent.isVersionOrHigher("1.9");c instanceof goog.math.Coordinate?(e=c.x,c=c.y):(e=c,c=d);b.style.left=goog.style.getPixelStyleValue_(e,f);b.style.top=goog.style.getPixelStyleValue_(c,f)};
goog.style.getPosition=function(b){return new goog.math.Coordinate(b.offsetLeft,b.offsetTop)};goog.style.getClientViewportElement=function(b){b=b?goog.dom.getOwnerDocument(b):goog.dom.getDocument();return!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||goog.dom.getDomHelper(b).isCss1CompatMode()?b.documentElement:b.body};goog.style.getViewportPageOffset=function(b){var c=b.body;b=b.documentElement;return new goog.math.Coordinate(c.scrollLeft||b.scrollLeft,c.scrollTop||b.scrollTop)};
goog.style.getBoundingClientRect_=function(b){var c;try{c=b.getBoundingClientRect()}catch(d){return{left:0,top:0,right:0,bottom:0}}goog.userAgent.IE&&(b=b.ownerDocument,c.left-=b.documentElement.clientLeft+b.body.clientLeft,c.top-=b.documentElement.clientTop+b.body.clientTop);return c};
goog.style.getOffsetParent=function(b){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(8))return b.offsetParent;var c=goog.dom.getOwnerDocument(b),d=goog.style.getStyle_(b,"position"),e="fixed"==d||"absolute"==d;for(b=b.parentNode;b&&b!=c;b=b.parentNode)if(d=goog.style.getStyle_(b,"position"),e=e&&"static"==d&&b!=c.documentElement&&b!=c.body,!e&&(b.scrollWidth>b.clientWidth||b.scrollHeight>b.clientHeight||"fixed"==d||"absolute"==d||"relative"==d))return b;return null};
goog.style.getVisibleRectForElement=function(b){for(var c=new goog.math.Box(0,Infinity,Infinity,0),d=goog.dom.getDomHelper(b),e=d.getDocument().body,f=d.getDocument().documentElement,g=d.getDocumentScrollElement();b=goog.style.getOffsetParent(b);)if(!(goog.userAgent.IE&&0==b.clientWidth||goog.userAgent.WEBKIT&&0==b.clientHeight&&b==e||b==e||b==f||"visible"==goog.style.getStyle_(b,"overflow"))){var h=goog.style.getPageOffset(b),k=goog.style.getClientLeftTop(b);h.x+=k.x;h.y+=k.y;c.top=Math.max(c.top,
h.y);c.right=Math.min(c.right,h.x+b.clientWidth);c.bottom=Math.min(c.bottom,h.y+b.clientHeight);c.left=Math.max(c.left,h.x)}e=g.scrollLeft;g=g.scrollTop;c.left=Math.max(c.left,e);c.top=Math.max(c.top,g);d=d.getViewportSize();c.right=Math.min(c.right,e+d.width);c.bottom=Math.min(c.bottom,g+d.height);return 0<=c.top&&0<=c.left&&c.bottom>c.top&&c.right>c.left?c:null};
goog.style.getContainerOffsetToScrollInto=function(b,c,d){var e=goog.style.getPageOffset(b),f=goog.style.getPageOffset(c),g=goog.style.getBorderBox(c),h=e.x-f.x-g.left,e=e.y-f.y-g.top,f=c.clientWidth-b.offsetWidth;b=c.clientHeight-b.offsetHeight;g=c.scrollLeft;c=c.scrollTop;d?(g+=h-f/2,c+=e-b/2):(g+=Math.min(h,Math.max(h-f,0)),c+=Math.min(e,Math.max(e-b,0)));return new goog.math.Coordinate(g,c)};
goog.style.scrollIntoContainerView=function(b,c,d){b=goog.style.getContainerOffsetToScrollInto(b,c,d);c.scrollLeft=b.x;c.scrollTop=b.y};
goog.style.getClientLeftTop=function(b){if(goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("1.9")){var c=parseFloat(goog.style.getComputedStyle(b,"borderLeftWidth"));if(goog.style.isRightToLeft(b))var d=b.offsetWidth-b.clientWidth-c-parseFloat(goog.style.getComputedStyle(b,"borderRightWidth")),c=c+d;return new goog.math.Coordinate(c,parseFloat(goog.style.getComputedStyle(b,"borderTopWidth")))}return new goog.math.Coordinate(b.clientLeft,b.clientTop)};
goog.style.getPageOffset=function(b){var c,d=goog.dom.getOwnerDocument(b),e=goog.style.getStyle_(b,"position");goog.asserts.assertObject(b,"Parameter is required");var f=!goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS&&goog.userAgent.GECKO&&d.getBoxObjectFor&&!b.getBoundingClientRect&&"absolute"==e&&(c=d.getBoxObjectFor(b))&&(0>c.screenX||0>c.screenY),g=new goog.math.Coordinate(0,0),h=goog.style.getClientViewportElement(d);if(b==h)return g;if(goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS||
b.getBoundingClientRect)c=goog.style.getBoundingClientRect_(b),b=goog.dom.getDomHelper(d).getDocumentScroll(),g.x=c.left+b.x,g.y=c.top+b.y;else if(d.getBoxObjectFor&&!f)c=d.getBoxObjectFor(b),b=d.getBoxObjectFor(h),g.x=c.screenX-b.screenX,g.y=c.screenY-b.screenY;else{c=b;do{g.x+=c.offsetLeft;g.y+=c.offsetTop;c!=b&&(g.x+=c.clientLeft||0,g.y+=c.clientTop||0);if(goog.userAgent.WEBKIT&&"fixed"==goog.style.getComputedPosition(c)){g.x+=d.body.scrollLeft;g.y+=d.body.scrollTop;break}c=c.offsetParent}while(c&&
c!=b);if(goog.userAgent.OPERA||goog.userAgent.WEBKIT&&"absolute"==e)g.y-=d.body.offsetTop;for(c=b;(c=goog.style.getOffsetParent(c))&&c!=d.body&&c!=h;)g.x-=c.scrollLeft,goog.userAgent.OPERA&&"TR"==c.tagName||(g.y-=c.scrollTop)}return g};goog.style.getPageOffsetLeft=function(b){return goog.style.getPageOffset(b).x};goog.style.getPageOffsetTop=function(b){return goog.style.getPageOffset(b).y};
goog.style.getFramedPageOffset=function(b,c){var d=new goog.math.Coordinate(0,0),e=goog.dom.getWindow(goog.dom.getOwnerDocument(b)),f=b;do{var g=e==c?goog.style.getPageOffset(f):goog.style.getClientPositionForElement_(goog.asserts.assert(f));d.x+=g.x;d.y+=g.y}while(e&&e!=c&&(f=e.frameElement)&&(e=e.parent));return d};
goog.style.translateRectForAnotherFrame=function(b,c,d){if(c.getDocument()!=d.getDocument()){var e=c.getDocument().body;d=goog.style.getFramedPageOffset(e,d.getWindow());d=goog.math.Coordinate.difference(d,goog.style.getPageOffset(e));goog.userAgent.IE&&!c.isCss1CompatMode()&&(d=goog.math.Coordinate.difference(d,c.getDocumentScroll()));b.left+=d.x;b.top+=d.y}};
goog.style.getRelativePosition=function(b,c){var d=goog.style.getClientPosition(b),e=goog.style.getClientPosition(c);return new goog.math.Coordinate(d.x-e.x,d.y-e.y)};
goog.style.getClientPositionForElement_=function(b){var c;if(goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS||b.getBoundingClientRect)c=goog.style.getBoundingClientRect_(b),c=new goog.math.Coordinate(c.left,c.top);else{c=goog.dom.getDomHelper(b).getDocumentScroll();var d=goog.style.getPageOffset(b);c=new goog.math.Coordinate(d.x-c.x,d.y-c.y)}return goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher(12)?goog.math.Coordinate.sum(c,goog.style.getCssTranslation(b)):c};
goog.style.getClientPosition=function(b){goog.asserts.assert(b);if(b.nodeType==goog.dom.NodeType.ELEMENT)return goog.style.getClientPositionForElement_(b);var c=goog.isFunction(b.getBrowserEvent),d=b;b.targetTouches?d=b.targetTouches[0]:c&&b.getBrowserEvent().targetTouches&&(d=b.getBrowserEvent().targetTouches[0]);return new goog.math.Coordinate(d.clientX,d.clientY)};
goog.style.setPageOffset=function(b,c,d){var e=goog.style.getPageOffset(b);c instanceof goog.math.Coordinate&&(d=c.y,c=c.x);goog.style.setPosition(b,b.offsetLeft+(c-e.x),b.offsetTop+(d-e.y))};goog.style.setSize=function(b,c,d){if(c instanceof goog.math.Size)d=c.height,c=c.width;else if(void 0==d)throw Error("missing height argument");goog.style.setWidth(b,c);goog.style.setHeight(b,d)};goog.style.getPixelStyleValue_=function(b,c){"number"==typeof b&&(b=(c?Math.round(b):b)+"px");return b};
goog.style.setHeight=function(b,c){b.style.height=goog.style.getPixelStyleValue_(c,!0)};goog.style.setWidth=function(b,c){b.style.width=goog.style.getPixelStyleValue_(c,!0)};goog.style.getSize=function(b){return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_,b)};
goog.style.evaluateWithTemporaryDisplay_=function(b,c){if("none"!=goog.style.getStyle_(c,"display"))return b(c);var d=c.style,e=d.display,f=d.visibility,g=d.position;d.visibility="hidden";d.position="absolute";d.display="inline";var h=b(c);d.display=e;d.position=g;d.visibility=f;return h};
goog.style.getSizeWithDisplay_=function(b){var c=b.offsetWidth,d=b.offsetHeight,e=goog.userAgent.WEBKIT&&!c&&!d;return goog.isDef(c)&&!e||!b.getBoundingClientRect?new goog.math.Size(c,d):(b=goog.style.getBoundingClientRect_(b),new goog.math.Size(b.right-b.left,b.bottom-b.top))};goog.style.getTransformedSize=function(b){if(!b.getBoundingClientRect)return null;b=goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_,b);return new goog.math.Size(b.right-b.left,b.bottom-b.top)};
goog.style.getBounds=function(b){var c=goog.style.getPageOffset(b);b=goog.style.getSize(b);return new goog.math.Rect(c.x,c.y,b.width,b.height)};goog.style.toCamelCase=function(b){return goog.string.toCamelCase(String(b))};goog.style.toSelectorCase=function(b){return goog.string.toSelectorCase(b)};
goog.style.getOpacity=function(b){var c=b.style;b="";"opacity"in c?b=c.opacity:"MozOpacity"in c?b=c.MozOpacity:"filter"in c&&(c=c.filter.match(/alpha\(opacity=([\d.]+)\)/))&&(b=String(c[1]/100));return""==b?b:Number(b)};goog.style.setOpacity=function(b,c){var d=b.style;"opacity"in d?d.opacity=c:"MozOpacity"in d?d.MozOpacity=c:"filter"in d&&(d.filter=""===c?"":"alpha(opacity="+100*c+")")};
goog.style.setTransparentBackgroundImage=function(b,c){var d=b.style;goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?d.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+c+'", sizingMethod="crop")':(d.backgroundImage="url("+c+")",d.backgroundPosition="top left",d.backgroundRepeat="no-repeat")};goog.style.clearTransparentBackgroundImage=function(b){b=b.style;"filter"in b?b.filter="":b.backgroundImage="none"};
goog.style.showElement=function(b,c){goog.style.setElementShown(b,c)};goog.style.setElementShown=function(b,c){b.style.display=c?"":"none"};goog.style.isElementShown=function(b){return"none"!=b.style.display};
goog.style.installStyles=function(b,c){var d=goog.dom.getDomHelper(c),e=null;if(goog.userAgent.IE)e=d.getDocument().createStyleSheet(),goog.style.setStyles(e,b);else{var f=d.getElementsByTagNameAndClass("head")[0];f||(e=d.getElementsByTagNameAndClass("body")[0],f=d.createDom("head"),e.parentNode.insertBefore(f,e));e=d.createDom("style");goog.style.setStyles(e,b);d.appendChild(f,e)}return e};goog.style.uninstallStyles=function(b){goog.dom.removeNode(b.ownerNode||b.owningElement||b)};
goog.style.setStyles=function(b,c){goog.userAgent.IE?b.cssText=c:b.innerHTML=c};goog.style.setPreWrap=function(b){b=b.style;goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(b.whiteSpace="pre",b.wordWrap="break-word"):b.whiteSpace=goog.userAgent.GECKO?"-moz-pre-wrap":"pre-wrap"};
goog.style.setInlineBlock=function(b){b=b.style;b.position="relative";goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(b.zoom="1",b.display="inline"):b.display=goog.userAgent.GECKO?goog.userAgent.isVersionOrHigher("1.9a")?"inline-block":"-moz-inline-box":"inline-block"};goog.style.isRightToLeft=function(b){return"rtl"==goog.style.getStyle_(b,"direction")};goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT?"WebkitUserSelect":null;
goog.style.isUnselectable=function(b){return goog.style.unselectableStyle_?"none"==b.style[goog.style.unselectableStyle_].toLowerCase():goog.userAgent.IE||goog.userAgent.OPERA?"on"==b.getAttribute("unselectable"):!1};
goog.style.setUnselectable=function(b,c,d){d=d?null:b.getElementsByTagName("*");var e=goog.style.unselectableStyle_;if(e){if(c=c?"none":"",b.style[e]=c,d){b=0;for(var f;f=d[b];b++)f.style[e]=c}}else if(goog.userAgent.IE||goog.userAgent.OPERA)if(c=c?"on":"",b.setAttribute("unselectable",c),d)for(b=0;f=d[b];b++)f.setAttribute("unselectable",c)};goog.style.getBorderBoxSize=function(b){return new goog.math.Size(b.offsetWidth,b.offsetHeight)};
goog.style.setBorderBoxSize=function(b,c){var d=goog.dom.getOwnerDocument(b),e=goog.dom.getDomHelper(d).isCss1CompatMode();if(!goog.userAgent.IE||e&&goog.userAgent.isVersionOrHigher("8"))goog.style.setBoxSizingSize_(b,c,"border-box");else if(d=b.style,e){var e=goog.style.getPaddingBox(b),f=goog.style.getBorderBox(b);d.pixelWidth=c.width-f.left-e.left-e.right-f.right;d.pixelHeight=c.height-f.top-e.top-e.bottom-f.bottom}else d.pixelWidth=c.width,d.pixelHeight=c.height};
goog.style.getContentBoxSize=function(b){var c=goog.dom.getOwnerDocument(b),d=goog.userAgent.IE&&b.currentStyle;if(d&&goog.dom.getDomHelper(c).isCss1CompatMode()&&"auto"!=d.width&&"auto"!=d.height&&!d.boxSizing)return c=goog.style.getIePixelValue_(b,d.width,"width","pixelWidth"),b=goog.style.getIePixelValue_(b,d.height,"height","pixelHeight"),new goog.math.Size(c,b);d=goog.style.getBorderBoxSize(b);c=goog.style.getPaddingBox(b);b=goog.style.getBorderBox(b);return new goog.math.Size(d.width-b.left-
c.left-c.right-b.right,d.height-b.top-c.top-c.bottom-b.bottom)};
goog.style.setContentBoxSize=function(b,c){var d=goog.dom.getOwnerDocument(b),e=goog.dom.getDomHelper(d).isCss1CompatMode();if(!goog.userAgent.IE||e&&goog.userAgent.isVersionOrHigher("8"))goog.style.setBoxSizingSize_(b,c,"content-box");else if(d=b.style,e)d.pixelWidth=c.width,d.pixelHeight=c.height;else{var e=goog.style.getPaddingBox(b),f=goog.style.getBorderBox(b);d.pixelWidth=c.width+f.left+e.left+e.right+f.right;d.pixelHeight=c.height+f.top+e.top+e.bottom+f.bottom}};
goog.style.setBoxSizingSize_=function(b,c,d){b=b.style;goog.userAgent.GECKO?b.MozBoxSizing=d:goog.userAgent.WEBKIT?b.WebkitBoxSizing=d:b.boxSizing=d;b.width=Math.max(c.width,0)+"px";b.height=Math.max(c.height,0)+"px"};goog.style.getIePixelValue_=function(b,c,d,e){if(/^\d+px?$/.test(c))return parseInt(c,10);var f=b.style[d],g=b.runtimeStyle[d];b.runtimeStyle[d]=b.currentStyle[d];b.style[d]=c;c=b.style[e];b.style[d]=f;b.runtimeStyle[d]=g;return c};
goog.style.getIePixelDistance_=function(b,c){var d=goog.style.getCascadedStyle(b,c);return d?goog.style.getIePixelValue_(b,d,"left","pixelLeft"):0};
goog.style.getBox_=function(b,c){if(goog.userAgent.IE){var d=goog.style.getIePixelDistance_(b,c+"Left"),e=goog.style.getIePixelDistance_(b,c+"Right"),f=goog.style.getIePixelDistance_(b,c+"Top"),g=goog.style.getIePixelDistance_(b,c+"Bottom");return new goog.math.Box(f,e,g,d)}d=goog.style.getComputedStyle(b,c+"Left");e=goog.style.getComputedStyle(b,c+"Right");f=goog.style.getComputedStyle(b,c+"Top");g=goog.style.getComputedStyle(b,c+"Bottom");return new goog.math.Box(parseFloat(f),parseFloat(e),parseFloat(g),
parseFloat(d))};goog.style.getPaddingBox=function(b){return goog.style.getBox_(b,"padding")};goog.style.getMarginBox=function(b){return goog.style.getBox_(b,"margin")};goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6};
goog.style.getIePixelBorder_=function(b,c){if("none"==goog.style.getCascadedStyle(b,c+"Style"))return 0;var d=goog.style.getCascadedStyle(b,c+"Width");return d in goog.style.ieBorderWidthKeywords_?goog.style.ieBorderWidthKeywords_[d]:goog.style.getIePixelValue_(b,d,"left","pixelLeft")};
goog.style.getBorderBox=function(b){if(goog.userAgent.IE){var c=goog.style.getIePixelBorder_(b,"borderLeft"),d=goog.style.getIePixelBorder_(b,"borderRight"),e=goog.style.getIePixelBorder_(b,"borderTop");b=goog.style.getIePixelBorder_(b,"borderBottom");return new goog.math.Box(e,d,b,c)}c=goog.style.getComputedStyle(b,"borderLeftWidth");d=goog.style.getComputedStyle(b,"borderRightWidth");e=goog.style.getComputedStyle(b,"borderTopWidth");b=goog.style.getComputedStyle(b,"borderBottomWidth");return new goog.math.Box(parseFloat(e),
parseFloat(d),parseFloat(b),parseFloat(c))};goog.style.getFontFamily=function(b){var c=goog.dom.getOwnerDocument(b),d="";if(c.body.createTextRange){c=c.body.createTextRange();c.moveToElementText(b);try{d=c.queryCommandValue("FontName")}catch(e){d=""}}d||(d=goog.style.getStyle_(b,"fontFamily"));b=d.split(",");1<b.length&&(d=b[0]);return goog.string.stripQuotes(d,"\"'")};goog.style.lengthUnitRegex_=/[^\d]+$/;
goog.style.getLengthUnits=function(b){return(b=b.match(goog.style.lengthUnitRegex_))&&b[0]||null};goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,"in":1,mm:1,pc:1,pt:1};goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1};
goog.style.getFontSize=function(b){var c=goog.style.getStyle_(b,"fontSize"),d=goog.style.getLengthUnits(c);if(c&&"px"==d)return parseInt(c,10);if(goog.userAgent.IE){if(d in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)return goog.style.getIePixelValue_(b,c,"left","pixelLeft");if(b.parentNode&&b.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&d in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_)return b=b.parentNode,d=goog.style.getStyle_(b,"fontSize"),goog.style.getIePixelValue_(b,c==d?"1em":c,"left","pixelLeft")}d=
goog.dom.createDom("span",{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"});goog.dom.appendChild(b,d);c=d.offsetHeight;goog.dom.removeNode(d);return c};goog.style.parseStyleAttribute=function(b){var c={};goog.array.forEach(b.split(/\s*;\s*/),function(b){b=b.split(/\s*:\s*/);2==b.length&&(c[goog.string.toCamelCase(b[0].toLowerCase())]=b[1])});return c};
goog.style.toStyleAttribute=function(b){var c=[];goog.object.forEach(b,function(b,e){c.push(goog.string.toSelectorCase(e),":",b,";")});return c.join("")};goog.style.setFloat=function(b,c){b.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=c};goog.style.getFloat=function(b){return b.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""};
goog.style.getScrollbarWidth=function(b){var c=goog.dom.createElement("div");b&&(c.className=b);c.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";b=goog.dom.createElement("div");goog.style.setSize(b,"200px","200px");c.appendChild(b);goog.dom.appendChild(goog.dom.getDocument().body,c);b=c.offsetWidth-c.clientWidth;goog.dom.removeNode(c);return b};goog.style.MATRIX_TRANSLATION_REGEX_=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;
goog.style.getCssTranslation=function(b){var c;goog.userAgent.IE?c="-ms-transform":goog.userAgent.WEBKIT?c="-webkit-transform":goog.userAgent.OPERA?c="-o-transform":goog.userAgent.GECKO&&(c="-moz-transform");var d;c&&(d=goog.style.getStyle_(b,c));d||(d=goog.style.getStyle_(b,"transform"));return d?(b=d.match(goog.style.MATRIX_TRANSLATION_REGEX_))?new goog.math.Coordinate(parseFloat(b[1]),parseFloat(b[2])):new goog.math.Coordinate(0,0):new goog.math.Coordinate(0,0)};goog.events={};goog.events.Listenable=function(){};goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(1E6*Math.random()|0);goog.events.Listenable.addImplementation=function(b){b.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=!0};goog.events.Listenable.isImplementedBy=function(b){return!(!b||!b[goog.events.Listenable.IMPLEMENTED_BY_PROP])};goog.events.ListenableKey=function(){};goog.events.ListenableKey.counter_=0;goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_};goog.events.Listener=function(b,c,d,e,f,g){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=Error().stack);this.listener=b;this.proxy=c;this.src=d;this.type=e;this.capture=!!f;this.handler=g;this.key=goog.events.ListenableKey.reserveKey();this.removed=this.callOnce=!1};goog.events.Listener.ENABLE_MONITORING=!1;goog.events.Listener.prototype.markAsRemoved=function(){this.removed=!0;this.handler=this.src=this.proxy=this.listener=null};goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||
goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!goog.global.navigator||!goog.global.navigator.msMaxTouchPoints)};goog.debug.entryPointRegistry={};goog.debug.EntryPointMonitor=function(){};goog.debug.entryPointRegistry.refList_=[];goog.debug.entryPointRegistry.monitors_=[];goog.debug.entryPointRegistry.monitorsMayExist_=!1;goog.debug.entryPointRegistry.register=function(b){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=b;if(goog.debug.entryPointRegistry.monitorsMayExist_)for(var c=goog.debug.entryPointRegistry.monitors_,d=0;d<c.length;d++)b(goog.bind(c[d].wrap,c[d]))};
goog.debug.entryPointRegistry.monitorAll=function(b){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var c=goog.bind(b.wrap,b),d=0;d<goog.debug.entryPointRegistry.refList_.length;d++)goog.debug.entryPointRegistry.refList_[d](c);goog.debug.entryPointRegistry.monitors_.push(b)};
goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(b){var c=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(b==c[c.length-1],"Only the most recent monitor can be unwrapped.");b=goog.bind(b.unwrap,b);for(var d=0;d<goog.debug.entryPointRegistry.refList_.length;d++)goog.debug.entryPointRegistry.refList_[d](b);c.length--};goog.events.EventType={CLICK:"click",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",SELECTSTART:"selectstart",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",
DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",
PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",TRANSITIONEND:goog.userAgent.WEBKIT?"webkitTransitionEnd":goog.userAgent.OPERA?"oTransitionEnd":"transitionend",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",
MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROVER:"MSPointerOver",MSPOINTEROUT:"MSPointerOut",MSPOINTERUP:"MSPointerUp",TEXTINPUT:"textinput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",
RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive"};goog.disposable={};goog.disposable.IDisposable=function(){};goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(goog.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=Error().stack),goog.Disposable.instances_[goog.getUid(this)]=this)};goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2};goog.Disposable.MONITORING_MODE=0;goog.Disposable.INCLUDE_STACK_ON_CREATION=!0;goog.Disposable.instances_={};
goog.Disposable.getUndisposedObjects=function(){var b=[],c;for(c in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(c)&&b.push(goog.Disposable.instances_[Number(c)]);return b};goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=!1;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;
goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var b=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(b))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");delete goog.Disposable.instances_[b]}};
goog.Disposable.prototype.registerDisposable=function(b){this.addOnDisposeCallback(goog.partial(goog.dispose,b))};goog.Disposable.prototype.addOnDisposeCallback=function(b,c){this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]);this.onDisposeCallbacks_.push(goog.bind(b,c))};goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()};
goog.Disposable.isDisposed=function(b){return b&&"function"==typeof b.isDisposed?b.isDisposed():!1};goog.dispose=function(b){b&&"function"==typeof b.dispose&&b.dispose()};goog.disposeAll=function(b){for(var c=0,d=arguments.length;c<d;++c){var e=arguments[c];goog.isArrayLike(e)?goog.disposeAll.apply(null,e):goog.dispose(e)}};goog.events.Event=function(b,c){this.type=b;this.currentTarget=this.target=c};goog.events.Event.prototype.disposeInternal=function(){};goog.events.Event.prototype.dispose=function(){};goog.events.Event.prototype.propagationStopped_=!1;goog.events.Event.prototype.defaultPrevented=!1;goog.events.Event.prototype.returnValue_=!0;goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0};
goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0;this.returnValue_=!1};goog.events.Event.stopPropagation=function(b){b.stopPropagation()};goog.events.Event.preventDefault=function(b){b.preventDefault()};goog.reflect={};goog.reflect.object=function(b,c){return c};goog.reflect.sinkValue=function(b){goog.reflect.sinkValue[" "](b);return b};goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(b,c){try{return goog.reflect.sinkValue(b[c]),!0}catch(d){}return!1};goog.events.BrowserEvent=function(b,c){b&&this.init(b,c)};goog.inherits(goog.events.BrowserEvent,goog.events.Event);goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};goog.events.BrowserEvent.IEButtonMap=[1,4,2];goog.events.BrowserEvent.prototype.target=null;goog.events.BrowserEvent.prototype.relatedTarget=null;goog.events.BrowserEvent.prototype.offsetX=0;goog.events.BrowserEvent.prototype.offsetY=0;goog.events.BrowserEvent.prototype.clientX=0;
goog.events.BrowserEvent.prototype.clientY=0;goog.events.BrowserEvent.prototype.screenX=0;goog.events.BrowserEvent.prototype.screenY=0;goog.events.BrowserEvent.prototype.button=0;goog.events.BrowserEvent.prototype.keyCode=0;goog.events.BrowserEvent.prototype.charCode=0;goog.events.BrowserEvent.prototype.ctrlKey=!1;goog.events.BrowserEvent.prototype.altKey=!1;goog.events.BrowserEvent.prototype.shiftKey=!1;goog.events.BrowserEvent.prototype.metaKey=!1;
goog.events.BrowserEvent.prototype.platformModifierKey=!1;goog.events.BrowserEvent.prototype.event_=null;
goog.events.BrowserEvent.prototype.init=function(b,c){var d=this.type=b.type;goog.events.Event.call(this,d);this.target=b.target||b.srcElement;this.currentTarget=c;var e=b.relatedTarget;e?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(e,"nodeName")||(e=null)):d==goog.events.EventType.MOUSEOVER?e=b.fromElement:d==goog.events.EventType.MOUSEOUT&&(e=b.toElement);this.relatedTarget=e;this.offsetX=goog.userAgent.WEBKIT||void 0!==b.offsetX?b.offsetX:b.layerX;this.offsetY=goog.userAgent.WEBKIT||void 0!==
b.offsetY?b.offsetY:b.layerY;this.clientX=void 0!==b.clientX?b.clientX:b.pageX;this.clientY=void 0!==b.clientY?b.clientY:b.pageY;this.screenX=b.screenX||0;this.screenY=b.screenY||0;this.button=b.button;this.keyCode=b.keyCode||0;this.charCode=b.charCode||("keypress"==d?b.keyCode:0);this.ctrlKey=b.ctrlKey;this.altKey=b.altKey;this.shiftKey=b.shiftKey;this.metaKey=b.metaKey;this.platformModifierKey=goog.userAgent.MAC?b.metaKey:b.ctrlKey;this.state=b.state;this.event_=b;b.defaultPrevented&&this.preventDefault();
delete this.propagationStopped_};goog.events.BrowserEvent.prototype.isButton=function(b){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==b:"click"==this.type?b==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[b])};goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)};
goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0};
goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var b=this.event_;if(b.preventDefault)b.preventDefault();else if(b.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{if(b.ctrlKey||112<=b.keyCode&&123>=b.keyCode)b.keyCode=-1}catch(c){}};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};goog.events.BrowserEvent.prototype.disposeInternal=function(){};goog.events.listeners_={};goog.events.listenerTree_={};goog.events.sources_={};goog.events.onString_="on";goog.events.onStringMap_={};goog.events.keySeparator_="_";goog.events.listen=function(b,c,d,e,f){if(goog.isArray(c)){for(var g=0;g<c.length;g++)goog.events.listen(b,c[g],d,e,f);return null}d=goog.events.wrapListener_(d);return goog.events.Listenable.isImplementedBy(b)?b.listen(c,d,e,f):goog.events.listen_(b,c,d,!1,e,f)};
goog.events.listen_=function(b,c,d,e,f,g){if(!c)throw Error("Invalid event type");f=!!f;var h=goog.events.listenerTree_;c in h||(h[c]={count_:0});h=h[c];f in h||(h[f]={count_:0},h.count_++);var h=h[f],k=goog.getUid(b),m;if(h[k]){m=h[k];for(var p=0;p<m.length;p++)if(h=m[p],h.listener==d&&h.handler==g){if(h.removed)break;e||(m[p].callOnce=!1);return m[p]}}else m=h[k]=[],h.count_++;p=goog.events.getProxy();h=new goog.events.Listener(d,p,b,c,f,g);h.callOnce=e;p.src=b;p.listener=h;m.push(h);goog.events.sources_[k]||
(goog.events.sources_[k]=[]);goog.events.sources_[k].push(h);b.addEventListener?b.addEventListener(c,p,f):b.attachEvent(goog.events.getOnString_(c),p);return goog.events.listeners_[h.key]=h};goog.events.getProxy=function(){var b=goog.events.handleBrowserEvent_,c=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(d){return b.call(c.src,c.listener,d)}:function(d){d=b.call(c.src,c.listener,d);if(!d)return d};return c};
goog.events.listenOnce=function(b,c,d,e,f){if(goog.isArray(c)){for(var g=0;g<c.length;g++)goog.events.listenOnce(b,c[g],d,e,f);return null}d=goog.events.wrapListener_(d);return goog.events.Listenable.isImplementedBy(b)?b.listenOnce(c,d,e,f):goog.events.listen_(b,c,d,!0,e,f)};goog.events.listenWithWrapper=function(b,c,d,e,f){c.listen(b,d,e,f)};
goog.events.unlisten=function(b,c,d,e,f){if(goog.isArray(c)){for(var g=0;g<c.length;g++)goog.events.unlisten(b,c[g],d,e,f);return null}d=goog.events.wrapListener_(d);if(goog.events.Listenable.isImplementedBy(b))return b.unlisten(c,d,e,f);e=!!e;b=goog.events.getListeners_(b,c,e);if(!b)return!1;for(g=0;g<b.length;g++)if(b[g].listener==d&&b[g].capture==e&&b[g].handler==f)return goog.events.unlistenByKey(b[g]);return!1};
goog.events.unlistenByKey=function(b){if(goog.isNumber(b)||!b||b.removed)return!1;var c=b.src;if(goog.events.Listenable.isImplementedBy(c))return c.unlistenByKey(b);var d=b.type,e=b.proxy,f=b.capture;c.removeEventListener?c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(goog.events.getOnString_(d),e);c=goog.getUid(c);goog.events.sources_[c]&&(e=goog.events.sources_[c],goog.array.remove(e,b),0==e.length&&delete goog.events.sources_[c]);b.markAsRemoved();if(e=goog.events.listenerTree_[d][f][c])goog.array.remove(e,
b),0==e.length&&(delete goog.events.listenerTree_[d][f][c],goog.events.listenerTree_[d][f].count_--),0==goog.events.listenerTree_[d][f].count_&&(delete goog.events.listenerTree_[d][f],goog.events.listenerTree_[d].count_--),0==goog.events.listenerTree_[d].count_&&delete goog.events.listenerTree_[d];delete goog.events.listeners_[b.key];return!0};goog.events.unlistenWithWrapper=function(b,c,d,e,f){c.unlisten(b,d,e,f)};
goog.events.removeAll=function(b,c){var d=0,e=null==c;if(null!=b){if(b&&goog.events.Listenable.isImplementedBy(b))return b.removeAllListeners(c);var f=goog.getUid(b);if(goog.events.sources_[f])for(var f=goog.events.sources_[f],g=f.length-1;0<=g;g--){var h=f[g];if(e||c==h.type)goog.events.unlistenByKey(h),d++}}else goog.object.forEach(goog.events.listeners_,function(b){goog.events.unlistenByKey(b);d++});return d};
goog.events.removeAllNativeListeners=function(){var b=0;goog.object.forEach(goog.events.listeners_,function(c){goog.events.unlistenByKey(c);b++});return b};goog.events.getListeners=function(b,c,d){return goog.events.Listenable.isImplementedBy(b)?b.getListeners(c,d):goog.events.getListeners_(b,c,d)||[]};goog.events.getListeners_=function(b,c,d){var e=goog.events.listenerTree_;return c in e&&(e=e[c],d in e&&(e=e[d],b=goog.getUid(b),e[b]))?e[b]:null};
goog.events.getListener=function(b,c,d,e,f){e=!!e;d=goog.events.wrapListener_(d);if(goog.events.Listenable.isImplementedBy(b))return b.getListener(c,d,e,f);if(b=goog.events.getListeners_(b,c,e))for(c=0;c<b.length;c++)if(!b[c].removed&&b[c].listener==d&&b[c].capture==e&&b[c].handler==f)return b[c];return null};
goog.events.hasListener=function(b,c,d){if(goog.events.Listenable.isImplementedBy(b))return b.hasListener(c,d);b=goog.getUid(b);var e=goog.events.sources_[b];if(e){var f=goog.isDef(c),g=goog.isDef(d);return f&&g?(e=goog.events.listenerTree_[c],!!e&&!!e[d]&&b in e[d]):f||g?goog.array.some(e,function(b){return f&&b.type==c||g&&b.capture==d}):!0}return!1};goog.events.expose=function(b){var c=[],d;for(d in b)b[d]&&b[d].id?c.push(d+" = "+b[d]+" ("+b[d].id+")"):c.push(d+" = "+b[d]);return c.join("\n")};
goog.events.getOnString_=function(b){return b in goog.events.onStringMap_?goog.events.onStringMap_[b]:goog.events.onStringMap_[b]=goog.events.onString_+b};goog.events.fireListeners=function(b,c,d,e){if(goog.events.Listenable.isImplementedBy(b))return b.fireListeners(c,d,e);var f=goog.events.listenerTree_;return c in f&&(f=f[c],d in f)?goog.events.fireListeners_(f[d],b,c,d,e):!0};
goog.events.fireListeners_=function(b,c,d,e,f){d=1;c=goog.getUid(c);if(b[c])for(b=goog.array.clone(b[c]),c=0;c<b.length;c++)(e=b[c])&&!e.removed&&(d&=!1!==goog.events.fireListener(e,f));return Boolean(d)};goog.events.fireListener=function(b,c){var d=b.listener,e=b.handler||b.src;b.callOnce&&goog.events.unlistenByKey(b);return d.call(e,c)};goog.events.getTotalListenerCount=function(){return goog.object.getCount(goog.events.listeners_)};
goog.events.dispatchEvent=function(b,c){goog.asserts.assert(goog.events.Listenable.isImplementedBy(b),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance.");return b.dispatchEvent(c)};goog.events.protectBrowserEventEntryPoint=function(b){goog.events.handleBrowserEvent_=b.protectEntryPoint(goog.events.handleBrowserEvent_)};
goog.events.handleBrowserEvent_=function(b,c){if(b.removed)return!0;var d=b.type,e=goog.events.listenerTree_;if(!(d in e))return!0;var e=e[d],f,g;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){f=c||goog.getObjectByName("window.event");var h=!0 in e,k=!1 in e;if(h){if(goog.events.isMarkedIeEvent_(f))return!0;goog.events.markIeEvent_(f)}var m=new goog.events.BrowserEvent;m.init(f,this);f=!0;try{if(h){for(var p=[],n=m.currentTarget;n;n=n.parentNode)p.push(n);g=e[!0];for(var q=p.length-1;!m.propagationStopped_&&
0<=q;q--)m.currentTarget=p[q],f&=goog.events.fireListeners_(g,p[q],d,!0,m);if(k)for(g=e[!1],q=0;!m.propagationStopped_&&q<p.length;q++)m.currentTarget=p[q],f&=goog.events.fireListeners_(g,p[q],d,!1,m)}else f=goog.events.fireListener(b,m)}finally{p&&(p.length=0)}return f}d=new goog.events.BrowserEvent(c,this);return f=goog.events.fireListener(b,d)};goog.events.markIeEvent_=function(b){var c=!1;if(0==b.keyCode)try{b.keyCode=-1;return}catch(d){c=!0}if(c||void 0==b.returnValue)b.returnValue=!0};
goog.events.isMarkedIeEvent_=function(b){return 0>b.keyCode||void 0!=b.returnValue};goog.events.uniqueIdCounter_=0;goog.events.getUniqueId=function(b){return b+"_"+goog.events.uniqueIdCounter_++};goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1E9*Math.random()>>>0);
goog.events.wrapListener_=function(b){goog.asserts.assert(b,"Listener can not be null.");if(goog.isFunction(b))return b;goog.asserts.assert(b.handleEvent,"An object listener must have handleEvent method.");return b[goog.events.LISTENER_WRAPPER_PROP_]||(b[goog.events.LISTENER_WRAPPER_PROP_]=function(c){return b.handleEvent(c)})};goog.debug.entryPointRegistry.register(function(b){goog.events.handleBrowserEvent_=b(goog.events.handleBrowserEvent_)});goog.events.ListenerMap=function(b){this.src=b;this.listeners={};this.typeCount_=0};goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_};goog.events.ListenerMap.prototype.getListenerCount=function(){var b=0,c;for(c in this.listeners)b+=this.listeners[c].length;return b};
goog.events.ListenerMap.prototype.add=function(b,c,d,e,f){var g=this.listeners[b];g||(g=this.listeners[b]=[],this.typeCount_++);var h=goog.events.ListenerMap.findListenerIndex_(g,c,e,f);-1<h?(b=g[h],d||(b.callOnce=!1)):(b=new goog.events.Listener(c,null,this.src,b,!!e,f),b.callOnce=d,g.push(b));return b};
goog.events.ListenerMap.prototype.remove=function(b,c,d,e){if(!(b in this.listeners))return!1;var f=this.listeners[b];c=goog.events.ListenerMap.findListenerIndex_(f,c,d,e);return-1<c?(f[c].markAsRemoved(),goog.array.removeAt(f,c),0==f.length&&(delete this.listeners[b],this.typeCount_--),!0):!1};
goog.events.ListenerMap.prototype.removeByKey=function(b){var c=b.type;if(!(c in this.listeners))return!1;var d=goog.array.remove(this.listeners[c],b);d&&(b.markAsRemoved(),0==this.listeners[c].length&&(delete this.listeners[c],this.typeCount_--));return d};goog.events.ListenerMap.prototype.removeAll=function(b){var c=0,d;for(d in this.listeners)if(!b||d==b){for(var e=this.listeners[d],f=0;f<e.length;f++)++c,e[f].removed=!0;delete this.listeners[d];this.typeCount_--}return c};
goog.events.ListenerMap.prototype.getListeners=function(b,c){var d=this.listeners[b],e=[];if(d)for(var f=0;f<d.length;++f){var g=d[f];g.capture==c&&e.push(g)}return e};goog.events.ListenerMap.prototype.getListener=function(b,c,d,e){b=this.listeners[b];var f=-1;b&&(f=goog.events.ListenerMap.findListenerIndex_(b,c,d,e));return-1<f?b[f]:null};
goog.events.ListenerMap.prototype.hasListener=function(b,c){var d=goog.isDef(b),e=goog.isDef(c);return goog.object.some(this.listeners,function(f,g){for(var h=0;h<f.length;++h)if(!(d&&f[h].type!=b||e&&f[h].capture!=c))return!0;return!1})};goog.events.ListenerMap.findListenerIndex_=function(b,c,d,e){for(var f=0;f<b.length;++f){var g=b[f];if(!g.removed&&g.listener==c&&g.capture==!!d&&g.handler==e)return f}return-1};goog.events.EventTarget=function(){goog.Disposable.call(this);this.eventTargetListeners_=new goog.events.ListenerMap(this);this.actualEventTarget_=this};goog.inherits(goog.events.EventTarget,goog.Disposable);goog.events.Listenable.addImplementation(goog.events.EventTarget);goog.events.EventTarget.MAX_ANCESTORS_=1E3;goog.events.EventTarget.prototype.parentEventTarget_=null;goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_};
goog.events.EventTarget.prototype.setParentEventTarget=function(b){this.parentEventTarget_=b};goog.events.EventTarget.prototype.addEventListener=function(b,c,d,e){goog.events.listen(this,b,c,d,e)};goog.events.EventTarget.prototype.removeEventListener=function(b,c,d,e){goog.events.unlisten(this,b,c,d,e)};
goog.events.EventTarget.prototype.dispatchEvent=function(b){this.assertInitialized_();var c,d=this.getParentEventTarget();if(d){c=[];for(var e=1;d;d=d.getParentEventTarget())c.push(d),goog.asserts.assert(++e<goog.events.EventTarget.MAX_ANCESTORS_,"infinite loop")}return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,b,c)};
goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this);this.removeAllListeners();this.parentEventTarget_=null};goog.events.EventTarget.prototype.listen=function(b,c,d,e){this.assertInitialized_();return this.eventTargetListeners_.add(b,c,!1,d,e)};goog.events.EventTarget.prototype.listenOnce=function(b,c,d,e){return this.eventTargetListeners_.add(b,c,!0,d,e)};
goog.events.EventTarget.prototype.unlisten=function(b,c,d,e){return this.eventTargetListeners_.remove(b,c,d,e)};goog.events.EventTarget.prototype.unlistenByKey=function(b){return this.eventTargetListeners_.removeByKey(b)};goog.events.EventTarget.prototype.removeAllListeners=function(b){return this.eventTargetListeners_?this.eventTargetListeners_.removeAll(b):0};
goog.events.EventTarget.prototype.fireListeners=function(b,c,d){b=this.eventTargetListeners_.listeners[b];if(!b)return!0;b=goog.array.clone(b);for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.removed&&g.capture==c){var h=g.listener,k=g.handler||g.src;g.callOnce&&this.unlistenByKey(g);e=!1!==h.call(k,d)&&e}}return e&&!1!=d.returnValue_};goog.events.EventTarget.prototype.getListeners=function(b,c){return this.eventTargetListeners_.getListeners(b,c)};
goog.events.EventTarget.prototype.getListener=function(b,c,d,e){return this.eventTargetListeners_.getListener(b,c,d,e)};goog.events.EventTarget.prototype.hasListener=function(b,c){return this.eventTargetListeners_.hasListener(b,c)};goog.events.EventTarget.prototype.setTargetForTesting=function(b){this.actualEventTarget_=b};goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")};
goog.events.EventTarget.dispatchEventInternal_=function(b,c,d){var e=c.type||c;if(goog.isString(c))c=new goog.events.Event(c,b);else if(c instanceof goog.events.Event)c.target=c.target||b;else{var f=c;c=new goog.events.Event(e,b);goog.object.extend(c,f)}var f=!0,g;if(d)for(var h=d.length-1;!c.propagationStopped_&&0<=h;h--)g=c.currentTarget=d[h],f=g.fireListeners(e,!0,c)&&f;c.propagationStopped_||(g=c.currentTarget=b,f=g.fireListeners(e,!0,c)&&f,c.propagationStopped_||(f=g.fireListeners(e,!1,c)&&f));
if(d)for(h=0;!c.propagationStopped_&&h<d.length;h++)g=c.currentTarget=d[h],f=g.fireListeners(e,!1,c)&&f;return f};goog.Timer=function(b,c){goog.events.EventTarget.call(this);this.interval_=b||1;this.timerObject_=c||goog.Timer.defaultTimerObject;this.boundTick_=goog.bind(this.tick_,this);this.last_=goog.now()};goog.inherits(goog.Timer,goog.events.EventTarget);goog.Timer.MAX_TIMEOUT_=2147483647;goog.Timer.prototype.enabled=!1;goog.Timer.defaultTimerObject=goog.global;goog.Timer.intervalScale=0.8;goog.Timer.prototype.timer_=null;goog.Timer.prototype.getInterval=function(){return this.interval_};
goog.Timer.prototype.setInterval=function(b){this.interval_=b;this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()};
goog.Timer.prototype.tick_=function(){if(this.enabled){var b=goog.now()-this.last_;0<b&&b<this.interval_*goog.Timer.intervalScale?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-b):(this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null),this.dispatchTick(),this.enabled&&(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now()))}};goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)};
goog.Timer.prototype.start=function(){this.enabled=!0;this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now())};goog.Timer.prototype.stop=function(){this.enabled=!1;this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)};goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this);this.stop();delete this.timerObject_};goog.Timer.TICK="tick";
goog.Timer.callOnce=function(b,c,d){if(goog.isFunction(b))d&&(b=goog.bind(b,d));else if(b&&"function"==typeof b.handleEvent)b=goog.bind(b.handleEvent,b);else throw Error("Invalid listener argument");return c>goog.Timer.MAX_TIMEOUT_?-1:goog.Timer.defaultTimerObject.setTimeout(b,c||0)};goog.Timer.clear=function(b){goog.Timer.defaultTimerObject.clearTimeout(b)};goog.async={};goog.async.Delay=function(b,c,d){goog.Disposable.call(this);this.listener_=b;this.interval_=c||0;this.handler_=d;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.Delay,goog.Disposable);goog.Delay=goog.async.Delay;goog.async.Delay.prototype.id_=0;goog.async.Delay.prototype.disposeInternal=function(){goog.async.Delay.superClass_.disposeInternal.call(this);this.stop();delete this.listener_;delete this.handler_};
goog.async.Delay.prototype.start=function(b){this.stop();this.id_=goog.Timer.callOnce(this.callback_,goog.isDef(b)?b:this.interval_)};goog.async.Delay.prototype.stop=function(){this.isActive()&&goog.Timer.clear(this.id_);this.id_=0};goog.async.Delay.prototype.fire=function(){this.stop();this.doAction_()};goog.async.Delay.prototype.fireIfActive=function(){this.isActive()&&this.fire()};goog.async.Delay.prototype.isActive=function(){return 0!=this.id_};
goog.async.Delay.prototype.doAction_=function(){this.id_=0;this.listener_&&this.listener_.call(this.handler_)};goog.functions={};goog.functions.constant=function(b){return function(){return b}};goog.functions.FALSE=goog.functions.constant(!1);goog.functions.TRUE=goog.functions.constant(!0);goog.functions.NULL=goog.functions.constant(null);goog.functions.identity=function(b,c){return b};goog.functions.error=function(b){return function(){throw Error(b);}};goog.functions.fail=function(b){return function(){throw b;}};
goog.functions.lock=function(b,c){c=c||0;return function(){return b.apply(this,Array.prototype.slice.call(arguments,0,c))}};goog.functions.withReturnValue=function(b,c){return goog.functions.sequence(b,goog.functions.constant(c))};goog.functions.compose=function(b,c){var d=arguments,e=d.length;return function(){var b;e&&(b=d[e-1].apply(this,arguments));for(var c=e-2;0<=c;c--)b=d[c].call(this,b);return b}};
goog.functions.sequence=function(b){var c=arguments,d=c.length;return function(){for(var b,f=0;f<d;f++)b=c[f].apply(this,arguments);return b}};goog.functions.and=function(b){var c=arguments,d=c.length;return function(){for(var b=0;b<d;b++)if(!c[b].apply(this,arguments))return!1;return!0}};goog.functions.or=function(b){var c=arguments,d=c.length;return function(){for(var b=0;b<d;b++)if(c[b].apply(this,arguments))return!0;return!1}};
goog.functions.not=function(b){return function(){return!b.apply(this,arguments)}};goog.functions.create=function(b,c){var d=function(){};d.prototype=b.prototype;d=new d;b.apply(d,Array.prototype.slice.call(arguments,1));return d};goog.async.AnimationDelay=function(b,c,d){goog.Disposable.call(this);this.listener_=b;this.handler_=d;this.win_=c||window;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.AnimationDelay,goog.Disposable);goog.async.AnimationDelay.prototype.id_=null;goog.async.AnimationDelay.prototype.usingListeners_=!1;goog.async.AnimationDelay.TIMEOUT=20;goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_="MozBeforePaint";
goog.async.AnimationDelay.prototype.start=function(){this.stop();this.usingListeners_=!1;var b=this.getRaf_(),c=this.getCancelRaf_();b&&!c&&this.win_.mozRequestAnimationFrame?(this.id_=goog.events.listen(this.win_,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_,this.callback_),this.win_.mozRequestAnimationFrame(null),this.usingListeners_=!0):this.id_=b&&c?b.call(this.win_,this.callback_):this.win_.setTimeout(goog.functions.lock(this.callback_),goog.async.AnimationDelay.TIMEOUT)};
goog.async.AnimationDelay.prototype.stop=function(){if(this.isActive()){var b=this.getRaf_(),c=this.getCancelRaf_();b&&!c&&this.win_.mozRequestAnimationFrame?goog.events.unlistenByKey(this.id_):b&&c?c.call(this.win_,this.id_):this.win_.clearTimeout(this.id_)}this.id_=null};goog.async.AnimationDelay.prototype.fire=function(){this.stop();this.doAction_()};goog.async.AnimationDelay.prototype.fireIfActive=function(){this.isActive()&&this.fire()};
goog.async.AnimationDelay.prototype.isActive=function(){return null!=this.id_};goog.async.AnimationDelay.prototype.doAction_=function(){this.usingListeners_&&this.id_&&goog.events.unlistenByKey(this.id_);this.id_=null;this.listener_.call(this.handler_,goog.now())};goog.async.AnimationDelay.prototype.disposeInternal=function(){this.stop();goog.async.AnimationDelay.superClass_.disposeInternal.call(this)};
goog.async.AnimationDelay.prototype.getRaf_=function(){var b=this.win_;return b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||null};goog.async.AnimationDelay.prototype.getCancelRaf_=function(){var b=this.win_;return b.cancelRequestAnimationFrame||b.webkitCancelRequestAnimationFrame||b.mozCancelRequestAnimationFrame||b.oCancelRequestAnimationFrame||b.msCancelRequestAnimationFrame||null};goog.fx={};goog.fx.anim={};goog.fx.anim.Animated=function(){};goog.fx.anim.TIMEOUT=goog.async.AnimationDelay.TIMEOUT;goog.fx.anim.activeAnimations_={};goog.fx.anim.animationWindow_=null;goog.fx.anim.animationDelay_=null;goog.fx.anim.registerAnimation=function(b){var c=goog.getUid(b);c in goog.fx.anim.activeAnimations_||(goog.fx.anim.activeAnimations_[c]=b);goog.fx.anim.requestAnimationFrame_()};
goog.fx.anim.unregisterAnimation=function(b){b=goog.getUid(b);delete goog.fx.anim.activeAnimations_[b];goog.object.isEmpty(goog.fx.anim.activeAnimations_)&&goog.fx.anim.cancelAnimationFrame_()};goog.fx.anim.tearDown=function(){goog.fx.anim.animationWindow_=null;goog.dispose(goog.fx.anim.animationDelay_);goog.fx.anim.animationDelay_=null;goog.fx.anim.activeAnimations_={}};
goog.fx.anim.setAnimationWindow=function(b){var c=goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.isActive();goog.dispose(goog.fx.anim.animationDelay_);goog.fx.anim.animationDelay_=null;goog.fx.anim.animationWindow_=b;c&&goog.fx.anim.requestAnimationFrame_()};
goog.fx.anim.requestAnimationFrame_=function(){goog.fx.anim.animationDelay_||(goog.fx.anim.animationDelay_=goog.fx.anim.animationWindow_?new goog.async.AnimationDelay(function(b){goog.fx.anim.cycleAnimations_(b)},goog.fx.anim.animationWindow_):new goog.async.Delay(function(){goog.fx.anim.cycleAnimations_(goog.now())},goog.fx.anim.TIMEOUT));var b=goog.fx.anim.animationDelay_;b.isActive()||b.start()};goog.fx.anim.cancelAnimationFrame_=function(){goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.stop()};
goog.fx.anim.cycleAnimations_=function(b){goog.object.forEach(goog.fx.anim.activeAnimations_,function(c){c.onAnimationFrame(b)});goog.object.isEmpty(goog.fx.anim.activeAnimations_)||goog.fx.anim.requestAnimationFrame_()};goog.fx.Transition=function(){};goog.fx.Transition.EventType={PLAY:"play",BEGIN:"begin",RESUME:"resume",END:"end",STOP:"stop",FINISH:"finish",PAUSE:"pause"};goog.fx.TransitionBase=function(){goog.events.EventTarget.call(this);this.state_=goog.fx.TransitionBase.State.STOPPED;this.endTime=this.startTime=null};goog.inherits(goog.fx.TransitionBase,goog.events.EventTarget);goog.fx.TransitionBase.State={STOPPED:0,PAUSED:-1,PLAYING:1};goog.fx.TransitionBase.prototype.getStateInternal=function(){return this.state_};goog.fx.TransitionBase.prototype.setStatePlaying=function(){this.state_=goog.fx.TransitionBase.State.PLAYING};
goog.fx.TransitionBase.prototype.setStatePaused=function(){this.state_=goog.fx.TransitionBase.State.PAUSED};goog.fx.TransitionBase.prototype.setStateStopped=function(){this.state_=goog.fx.TransitionBase.State.STOPPED};goog.fx.TransitionBase.prototype.isPlaying=function(){return this.state_==goog.fx.TransitionBase.State.PLAYING};goog.fx.TransitionBase.prototype.isPaused=function(){return this.state_==goog.fx.TransitionBase.State.PAUSED};
goog.fx.TransitionBase.prototype.isStopped=function(){return this.state_==goog.fx.TransitionBase.State.STOPPED};goog.fx.TransitionBase.prototype.onBegin=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.BEGIN)};goog.fx.TransitionBase.prototype.onEnd=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.END)};goog.fx.TransitionBase.prototype.onFinish=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.FINISH)};
goog.fx.TransitionBase.prototype.onPause=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PAUSE)};goog.fx.TransitionBase.prototype.onPlay=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PLAY)};goog.fx.TransitionBase.prototype.onResume=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.RESUME)};goog.fx.TransitionBase.prototype.onStop=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.STOP)};
goog.fx.TransitionBase.prototype.dispatchAnimationEvent=function(b){this.dispatchEvent(b)};goog.fx.Animation=function(b,c,d,e){goog.fx.TransitionBase.call(this);if(!goog.isArray(b)||!goog.isArray(c))throw Error("Start and end parameters must be arrays");if(b.length!=c.length)throw Error("Start and end points must be the same length");this.startPoint=b;this.endPoint=c;this.duration=d;this.accel_=e;this.coords=[];this.useRightPositioningForRtl_=!1};goog.inherits(goog.fx.Animation,goog.fx.TransitionBase);
goog.fx.Animation.prototype.enableRightPositioningForRtl=function(b){this.useRightPositioningForRtl_=b};goog.fx.Animation.prototype.isRightPositioningForRtlEnabled=function(){return this.useRightPositioningForRtl_};
goog.fx.Animation.EventType={PLAY:goog.fx.Transition.EventType.PLAY,BEGIN:goog.fx.Transition.EventType.BEGIN,RESUME:goog.fx.Transition.EventType.RESUME,END:goog.fx.Transition.EventType.END,STOP:goog.fx.Transition.EventType.STOP,FINISH:goog.fx.Transition.EventType.FINISH,PAUSE:goog.fx.Transition.EventType.PAUSE,ANIMATE:"animate",DESTROY:"destroy"};goog.fx.Animation.TIMEOUT=goog.fx.anim.TIMEOUT;goog.fx.Animation.State=goog.fx.TransitionBase.State;goog.fx.Animation.setAnimationWindow=function(b){goog.fx.anim.setAnimationWindow(b)};
goog.fx.Animation.prototype.fps_=0;goog.fx.Animation.prototype.progress=0;goog.fx.Animation.prototype.lastFrame=null;
goog.fx.Animation.prototype.play=function(b){if(b||this.isStopped())this.progress=0,this.coords=this.startPoint;else if(this.isPlaying())return!1;goog.fx.anim.unregisterAnimation(this);this.startTime=b=goog.now();this.isPaused()&&(this.startTime-=this.duration*this.progress);this.endTime=this.startTime+this.duration;this.lastFrame=this.startTime;if(!this.progress)this.onBegin();this.onPlay();if(this.isPaused())this.onResume();this.setStatePlaying();goog.fx.anim.registerAnimation(this);this.cycle(b);
return!0};goog.fx.Animation.prototype.stop=function(b){goog.fx.anim.unregisterAnimation(this);this.setStateStopped();b&&(this.progress=1);this.updateCoords_(this.progress);this.onStop();this.onEnd()};goog.fx.Animation.prototype.pause=function(){this.isPlaying()&&(goog.fx.anim.unregisterAnimation(this),this.setStatePaused(),this.onPause())};goog.fx.Animation.prototype.getProgress=function(){return this.progress};
goog.fx.Animation.prototype.setProgress=function(b){this.progress=b;this.isPlaying()&&(this.startTime=goog.now()-this.duration*this.progress,this.endTime=this.startTime+this.duration)};goog.fx.Animation.prototype.disposeInternal=function(){this.isStopped()||this.stop(!1);this.onDestroy();goog.fx.Animation.superClass_.disposeInternal.call(this)};goog.fx.Animation.prototype.destroy=function(){this.dispose()};goog.fx.Animation.prototype.onAnimationFrame=function(b){this.cycle(b)};
goog.fx.Animation.prototype.cycle=function(b){this.progress=(b-this.startTime)/(this.endTime-this.startTime);1<=this.progress&&(this.progress=1);this.fps_=1E3/(b-this.lastFrame);this.lastFrame=b;this.updateCoords_(this.progress);if(1==this.progress)this.setStateStopped(),goog.fx.anim.unregisterAnimation(this),this.onFinish(),this.onEnd();else if(this.isPlaying())this.onAnimate()};
goog.fx.Animation.prototype.updateCoords_=function(b){goog.isFunction(this.accel_)&&(b=this.accel_(b));this.coords=Array(this.startPoint.length);for(var c=0;c<this.startPoint.length;c++)this.coords[c]=(this.endPoint[c]-this.startPoint[c])*b+this.startPoint[c]};goog.fx.Animation.prototype.onAnimate=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.ANIMATE)};goog.fx.Animation.prototype.onDestroy=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.DESTROY)};
goog.fx.Animation.prototype.dispatchAnimationEvent=function(b){this.dispatchEvent(new goog.fx.AnimationEvent(b,this))};goog.fx.AnimationEvent=function(b,c){goog.events.Event.call(this,b);this.coords=c.coords;this.x=c.coords[0];this.y=c.coords[1];this.z=c.coords[2];this.duration=c.duration;this.progress=c.getProgress();this.fps=c.fps_;this.state=c.getStateInternal();this.anim=c};goog.inherits(goog.fx.AnimationEvent,goog.events.Event);
goog.fx.AnimationEvent.prototype.coordsAsInts=function(){return goog.array.map(this.coords,Math.round)};goog.color={};
goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};goog.color.parse=function(b){var c={};b=String(b);var d=goog.color.prependHashIfNecessaryHelper(b);if(goog.color.isValidHexColor_(d))return c.hex=goog.color.normalizeHex(d),c.type="hex",c;d=goog.color.isValidRgbColor_(b);if(d.length)return c.hex=goog.color.rgbArrayToHex(d),c.type="rgb",c;if(goog.color.names&&(d=goog.color.names[b.toLowerCase()]))return c.hex=d,c.type="named",c;throw Error(b+" is not a valid color string");};
goog.color.isValidColor=function(b){var c=goog.color.prependHashIfNecessaryHelper(b);return!!(goog.color.isValidHexColor_(c)||goog.color.isValidRgbColor_(b).length||goog.color.names&&goog.color.names[b.toLowerCase()])};goog.color.parseRgb=function(b){var c=goog.color.isValidRgbColor_(b);if(!c.length)throw Error(b+" is not a valid RGB color");return c};goog.color.hexToRgbStyle=function(b){return goog.color.rgbStyle_(goog.color.hexToRgb(b))};goog.color.hexTripletRe_=/#(.)(.)(.)/;
goog.color.normalizeHex=function(b){if(!goog.color.isValidHexColor_(b))throw Error("'"+b+"' is not a valid hex color");4==b.length&&(b=b.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3"));return b.toLowerCase()};goog.color.hexToRgb=function(b){b=goog.color.normalizeHex(b);var c=parseInt(b.substr(1,2),16),d=parseInt(b.substr(3,2),16);b=parseInt(b.substr(5,2),16);return[c,d,b]};
goog.color.rgbToHex=function(b,c,d){b=Number(b);c=Number(c);d=Number(d);if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(d)||0>d||255<d)throw Error('"('+b+","+c+","+d+'") is not a valid RGB color');b=goog.color.prependZeroIfNecessaryHelper(b.toString(16));c=goog.color.prependZeroIfNecessaryHelper(c.toString(16));d=goog.color.prependZeroIfNecessaryHelper(d.toString(16));return"#"+b+c+d};goog.color.rgbArrayToHex=function(b){return goog.color.rgbToHex(b[0],b[1],b[2])};
goog.color.rgbToHsl=function(b,c,d){b/=255;c/=255;d/=255;var e=Math.max(b,c,d),f=Math.min(b,c,d),g=0,h=0,k=0.5*(e+f);e!=f&&(e==b?g=60*(c-d)/(e-f):e==c?g=60*(d-b)/(e-f)+120:e==d&&(g=60*(b-c)/(e-f)+240),h=0<k&&0.5>=k?(e-f)/(2*k):(e-f)/(2-2*k));return[Math.round(g+360)%360,h,k]};goog.color.rgbArrayToHsl=function(b){return goog.color.rgbToHsl(b[0],b[1],b[2])};goog.color.hueToRgb_=function(b,c,d){0>d?d+=1:1<d&&(d-=1);return 1>6*d?b+6*(c-b)*d:1>2*d?c:2>3*d?b+6*(c-b)*(2/3-d):b};
goog.color.hslToRgb=function(b,c,d){var e=0,f=0,g=0;b/=360;if(0==c)e=f=g=255*d;else var h=g=0,h=0.5>d?d*(1+c):d+c-c*d,g=2*d-h,e=255*goog.color.hueToRgb_(g,h,b+1/3),f=255*goog.color.hueToRgb_(g,h,b),g=255*goog.color.hueToRgb_(g,h,b-1/3);return[Math.round(e),Math.round(f),Math.round(g)]};goog.color.hslArrayToRgb=function(b){return goog.color.hslToRgb(b[0],b[1],b[2])};goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;goog.color.isValidHexColor_=function(b){return goog.color.validHexColorRe_.test(b)};
goog.color.normalizedHexColorRe_=/^#[0-9a-f]{6}$/;goog.color.isNormalizedHexColor_=function(b){return goog.color.normalizedHexColorRe_.test(b)};goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;goog.color.isValidRgbColor_=function(b){var c=b.match(goog.color.rgbColorRe_);if(c){b=Number(c[1]);var d=Number(c[2]),c=Number(c[3]);if(0<=b&&255>=b&&0<=d&&255>=d&&0<=c&&255>=c)return[b,d,c]}return[]};
goog.color.prependZeroIfNecessaryHelper=function(b){return 1==b.length?"0"+b:b};goog.color.prependHashIfNecessaryHelper=function(b){return"#"==b.charAt(0)?b:"#"+b};goog.color.rgbStyle_=function(b){return"rgb("+b.join(",")+")"};
goog.color.hsvToRgb=function(b,c,d){var e=0,f=0,g=0;if(0==c)g=f=e=d;else{var h=Math.floor(b/60),k=b/60-h;b=d*(1-c);var m=d*(1-c*k);c=d*(1-c*(1-k));switch(h){case 1:e=m;f=d;g=b;break;case 2:e=b;f=d;g=c;break;case 3:e=b;f=m;g=d;break;case 4:e=c;f=b;g=d;break;case 5:e=d;f=b;g=m;break;case 6:case 0:e=d,f=c,g=b}}return[Math.floor(e),Math.floor(f),Math.floor(g)]};
goog.color.rgbToHsv=function(b,c,d){var e=Math.max(Math.max(b,c),d),f=Math.min(Math.min(b,c),d);if(f==e)f=b=0;else{var g=e-f,f=g/e;b=60*(b==e?(c-d)/g:c==e?2+(d-b)/g:4+(b-c)/g);0>b&&(b+=360);360<b&&(b-=360)}return[b,f,e]};goog.color.rgbArrayToHsv=function(b){return goog.color.rgbToHsv(b[0],b[1],b[2])};goog.color.hsvArrayToRgb=function(b){return goog.color.hsvToRgb(b[0],b[1],b[2])};goog.color.hexToHsl=function(b){b=goog.color.hexToRgb(b);return goog.color.rgbToHsl(b[0],b[1],b[2])};
goog.color.hslToHex=function(b,c,d){return goog.color.rgbArrayToHex(goog.color.hslToRgb(b,c,d))};goog.color.hslArrayToHex=function(b){return goog.color.rgbArrayToHex(goog.color.hslToRgb(b[0],b[1],b[2]))};goog.color.hexToHsv=function(b){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(b))};goog.color.hsvToHex=function(b,c,d){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(b,c,d))};goog.color.hsvArrayToHex=function(b){return goog.color.hsvToHex(b[0],b[1],b[2])};
goog.color.hslDistance=function(b,c){var d,e;d=0.5>=b[2]?b[1]*b[2]:b[1]*(1-b[2]);e=0.5>=c[2]?c[1]*c[2]:c[1]*(1-c[2]);return(b[2]-c[2])*(b[2]-c[2])+d*d+e*e-2*d*e*Math.cos(2*(b[0]/360-c[0]/360)*Math.PI)};goog.color.blend=function(b,c,d){d=goog.math.clamp(d,0,1);return[Math.round(d*b[0]+(1-d)*c[0]),Math.round(d*b[1]+(1-d)*c[1]),Math.round(d*b[2]+(1-d)*c[2])]};goog.color.darken=function(b,c){return goog.color.blend([0,0,0],b,c)};
goog.color.lighten=function(b,c){return goog.color.blend([255,255,255],b,c)};goog.color.highContrast=function(b,c){for(var d=[],e=0;e<c.length;e++)d.push({color:c[e],diff:goog.color.yiqBrightnessDiff_(c[e],b)+goog.color.colorDiff_(c[e],b)});d.sort(function(b,c){return c.diff-b.diff});return d[0].color};goog.color.yiqBrightness_=function(b){return Math.round((299*b[0]+587*b[1]+114*b[2])/1E3)};goog.color.yiqBrightnessDiff_=function(b,c){return Math.abs(goog.color.yiqBrightness_(b)-goog.color.yiqBrightness_(c))};
goog.color.colorDiff_=function(b,c){return Math.abs(b[0]-c[0])+Math.abs(b[1]-c[1])+Math.abs(b[2]-c[2])};goog.style.bidi={};goog.style.bidi.getScrollLeft=function(b){var c=goog.style.isRightToLeft(b);return c&&goog.userAgent.GECKO?-b.scrollLeft:!c||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||"visible"==goog.style.getComputedOverflowX(b)?b.scrollLeft:b.scrollWidth-b.clientWidth-b.scrollLeft};
goog.style.bidi.getOffsetStart=function(b){var c=b.offsetLeft,d=b.offsetParent;d||"fixed"!=goog.style.getComputedPosition(b)||(d=goog.dom.getOwnerDocument(b).documentElement);if(!d)return c;if(goog.userAgent.GECKO)var e=goog.style.getBorderBox(d),c=c+e.left;else goog.userAgent.isDocumentModeOrHigher(8)&&(e=goog.style.getBorderBox(d),c-=e.left);return goog.style.isRightToLeft(d)?d.clientWidth-(c+b.offsetWidth):c};
goog.style.bidi.setScrollOffset=function(b,c){c=Math.max(c,0);goog.style.isRightToLeft(b)?goog.userAgent.GECKO?b.scrollLeft=-c:goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")?b.scrollLeft=c:b.scrollLeft=b.scrollWidth-c-b.clientWidth:b.scrollLeft=c};goog.style.bidi.setPosition=function(b,c,d,e){goog.isNull(d)||(b.style.top=d+"px");e?(b.style.right=c+"px",b.style.left=""):(b.style.left=c+"px",b.style.right="")};goog.fx.dom={};goog.fx.dom.PredefinedEffect=function(b,c,d,e,f){goog.fx.Animation.call(this,c,d,e,f);this.element=b};goog.inherits(goog.fx.dom.PredefinedEffect,goog.fx.Animation);goog.fx.dom.PredefinedEffect.prototype.updateStyle=goog.nullFunction;goog.fx.dom.PredefinedEffect.prototype.isRightToLeft=function(){goog.isDef(this.rightToLeft_)||(this.rightToLeft_=goog.style.isRightToLeft(this.element));return this.rightToLeft_};
goog.fx.dom.PredefinedEffect.prototype.onAnimate=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onAnimate.call(this)};goog.fx.dom.PredefinedEffect.prototype.onEnd=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onEnd.call(this)};goog.fx.dom.PredefinedEffect.prototype.onBegin=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onBegin.call(this)};
goog.fx.dom.Slide=function(b,c,d,e,f){if(2!=c.length||2!=d.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.Slide,goog.fx.dom.PredefinedEffect);goog.fx.dom.Slide.prototype.updateStyle=function(){var b=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"right":"left";this.element.style[b]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};
goog.fx.dom.SlideFrom=function(b,c,d,e){var f=[this.isRightPositioningForRtlEnabled()?goog.style.bidi.getOffsetStart(b):b.offsetLeft,b.offsetTop];goog.fx.dom.Slide.call(this,b,f,c,d,e)};goog.inherits(goog.fx.dom.SlideFrom,goog.fx.dom.Slide);goog.fx.dom.SlideFrom.prototype.onBegin=function(){this.startPoint=[this.isRightPositioningForRtlEnabled()?goog.style.bidi.getOffsetStart(this.element):this.element.offsetLeft,this.element.offsetTop];goog.fx.dom.SlideFrom.superClass_.onBegin.call(this)};
goog.fx.dom.Swipe=function(b,c,d,e,f){if(2!=c.length||2!=d.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments);this.maxWidth_=Math.max(this.endPoint[0],this.startPoint[0]);this.maxHeight_=Math.max(this.endPoint[1],this.startPoint[1])};goog.inherits(goog.fx.dom.Swipe,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Swipe.prototype.updateStyle=function(){var b=this.coords[0],c=this.coords[1];this.clip_(Math.round(b),Math.round(c),this.maxWidth_,this.maxHeight_);this.element.style.width=Math.round(b)+"px";var d=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"marginRight":"marginLeft";this.element.style[d]=Math.round(b)-this.maxWidth_+"px";this.element.style.marginTop=Math.round(c)-this.maxHeight_+"px"};
goog.fx.dom.Swipe.prototype.clip_=function(b,c,d,e){this.element.style.clip="rect("+(e-c)+"px "+d+"px "+e+"px "+(d-b)+"px)"};goog.fx.dom.Scroll=function(b,c,d,e,f){if(2!=c.length||2!=d.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.Scroll,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Scroll.prototype.updateStyle=function(){this.isRightPositioningForRtlEnabled()?goog.style.bidi.setScrollOffset(this.element,Math.round(this.coords[0])):this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};goog.fx.dom.Resize=function(b,c,d,e,f){if(2!=c.length||2!=d.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.Resize,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Resize.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};goog.fx.dom.ResizeWidth=function(b,c,d,e,f){goog.fx.dom.PredefinedEffect.call(this,b,[c],[d],e,f)};goog.inherits(goog.fx.dom.ResizeWidth,goog.fx.dom.PredefinedEffect);goog.fx.dom.ResizeWidth.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px"};
goog.fx.dom.ResizeHeight=function(b,c,d,e,f){goog.fx.dom.PredefinedEffect.call(this,b,[c],[d],e,f)};goog.inherits(goog.fx.dom.ResizeHeight,goog.fx.dom.PredefinedEffect);goog.fx.dom.ResizeHeight.prototype.updateStyle=function(){this.element.style.height=Math.round(this.coords[0])+"px"};goog.fx.dom.Fade=function(b,c,d,e,f){goog.isNumber(c)&&(c=[c]);goog.isNumber(d)&&(d=[d]);goog.fx.dom.PredefinedEffect.call(this,b,c,d,e,f);if(1!=c.length||1!=d.length)throw Error("Start and end points must be 1D");};
goog.inherits(goog.fx.dom.Fade,goog.fx.dom.PredefinedEffect);goog.fx.dom.Fade.prototype.updateStyle=function(){goog.style.setOpacity(this.element,this.coords[0])};goog.fx.dom.Fade.prototype.show=function(){this.element.style.display=""};goog.fx.dom.Fade.prototype.hide=function(){this.element.style.display="none"};goog.fx.dom.FadeOut=function(b,c,d){goog.fx.dom.Fade.call(this,b,1,0,c,d)};goog.inherits(goog.fx.dom.FadeOut,goog.fx.dom.Fade);
goog.fx.dom.FadeIn=function(b,c,d){goog.fx.dom.Fade.call(this,b,0,1,c,d)};goog.inherits(goog.fx.dom.FadeIn,goog.fx.dom.Fade);goog.fx.dom.FadeOutAndHide=function(b,c,d){goog.fx.dom.Fade.call(this,b,1,0,c,d)};goog.inherits(goog.fx.dom.FadeOutAndHide,goog.fx.dom.Fade);goog.fx.dom.FadeOutAndHide.prototype.onBegin=function(){this.show();goog.fx.dom.FadeOutAndHide.superClass_.onBegin.call(this)};goog.fx.dom.FadeOutAndHide.prototype.onEnd=function(){this.hide();goog.fx.dom.FadeOutAndHide.superClass_.onEnd.call(this)};
goog.fx.dom.FadeInAndShow=function(b,c,d){goog.fx.dom.Fade.call(this,b,0,1,c,d)};goog.inherits(goog.fx.dom.FadeInAndShow,goog.fx.dom.Fade);goog.fx.dom.FadeInAndShow.prototype.onBegin=function(){this.show();goog.fx.dom.FadeInAndShow.superClass_.onBegin.call(this)};goog.fx.dom.BgColorTransform=function(b,c,d,e,f){if(3!=c.length||3!=d.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.BgColorTransform,goog.fx.dom.PredefinedEffect);
goog.fx.dom.BgColorTransform.prototype.setColor=function(){for(var b=[],c=0;c<this.coords.length;c++)b[c]=Math.round(this.coords[c]);b="rgb("+b.join(",")+")";this.element.style.backgroundColor=b};goog.fx.dom.BgColorTransform.prototype.updateStyle=function(){this.setColor()};
goog.fx.dom.bgColorFadeIn=function(b,c,d,e){function f(){b.style.backgroundColor=g}var g=b.style.backgroundColor||"",h=goog.style.getBackgroundColor(b),h=h&&"transparent"!=h&&"rgba(0, 0, 0, 0)"!=h?goog.color.hexToRgb(goog.color.parse(h).hex):[255,255,255];c=new goog.fx.dom.BgColorTransform(b,c,h,d);e?e.listen(c,goog.fx.Transition.EventType.END,f):goog.events.listen(c,goog.fx.Transition.EventType.END,f);c.play()};
goog.fx.dom.ColorTransform=function(b,c,d,e,f){if(3!=c.length||3!=d.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.ColorTransform,goog.fx.dom.PredefinedEffect);goog.fx.dom.ColorTransform.prototype.updateStyle=function(){for(var b=[],c=0;c<this.coords.length;c++)b[c]=Math.round(this.coords[c]);b="rgb("+b.join(",")+")";this.element.style.color=b};goog.events.EventHandler=function(b){goog.Disposable.call(this);this.handler_=b;this.keys_={}};goog.inherits(goog.events.EventHandler,goog.Disposable);goog.events.EventHandler.typeArray_=[];goog.events.EventHandler.prototype.listen=function(b,c,d,e,f){goog.isArray(c)||(goog.events.EventHandler.typeArray_[0]=c,c=goog.events.EventHandler.typeArray_);for(var g=0;g<c.length;g++){var h=goog.events.listen(b,c[g],d||this,e||!1,f||this.handler_||this);if(goog.DEBUG&&!h)break;this.keys_[h.key]=h}return this};
goog.events.EventHandler.prototype.listenOnce=function(b,c,d,e,f){if(goog.isArray(c))for(var g=0;g<c.length;g++)this.listenOnce(b,c[g],d,e,f);else b=goog.events.listenOnce(b,c,d||this,e,f||this.handler_||this),this.keys_[b.key]=b;return this};goog.events.EventHandler.prototype.listenWithWrapper=function(b,c,d,e,f){c.listen(b,d,e,f||this.handler_||this,this);return this};
goog.events.EventHandler.prototype.getListenerCount=function(){var b=0,c;for(c in this.keys_)Object.prototype.hasOwnProperty.call(this.keys_,c)&&b++;return b};goog.events.EventHandler.prototype.unlisten=function(b,c,d,e,f){if(goog.isArray(c))for(var g=0;g<c.length;g++)this.unlisten(b,c[g],d,e,f);else if(b=goog.events.getListener(b,c,d||this,e,f||this.handler_||this))goog.events.unlistenByKey(b),delete this.keys_[b.key];return this};
goog.events.EventHandler.prototype.unlistenWithWrapper=function(b,c,d,e,f){c.unlisten(b,d,e,f||this.handler_||this,this);return this};goog.events.EventHandler.prototype.removeAll=function(){goog.object.forEach(this.keys_,goog.events.unlistenByKey);this.keys_={}};goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this);this.removeAll()};
goog.events.EventHandler.prototype.handleEvent=function(b){throw Error("EventHandler.handleEvent not implemented");};goog.ui={};goog.ui.IdGenerator=function(){};goog.addSingletonGetter(goog.ui.IdGenerator);goog.ui.IdGenerator.prototype.nextId_=0;goog.ui.IdGenerator.prototype.getNextUniqueId=function(){return":"+(this.nextId_++).toString(36)};goog.ui.IdGenerator.instance=goog.ui.IdGenerator.getInstance();goog.ui.Component=function(b){goog.events.EventTarget.call(this);this.dom_=b||goog.dom.getDomHelper();this.rightToLeft_=goog.ui.Component.defaultRightToLeft_};goog.inherits(goog.ui.Component,goog.events.EventTarget);goog.ui.Component.ALLOW_DETACHED_DECORATION=!1;goog.ui.Component.prototype.idGenerator_=goog.ui.IdGenerator.getInstance();goog.ui.Component.defaultRightToLeft_=null;
goog.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"};
goog.ui.Component.Error={NOT_SUPPORTED:"Method not supported",DECORATE_INVALID:"Invalid element to decorate",ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",NOT_OUR_CHILD:"Child is not in parent component",NOT_IN_DOCUMENT:"Operation not supported while component is not in document",STATE_INVALID:"Invalid component state"};
goog.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64};
goog.ui.Component.getStateTransitionEvent=function(b,c){switch(b){case goog.ui.Component.State.DISABLED:return c?goog.ui.Component.EventType.DISABLE:goog.ui.Component.EventType.ENABLE;case goog.ui.Component.State.HOVER:return c?goog.ui.Component.EventType.HIGHLIGHT:goog.ui.Component.EventType.UNHIGHLIGHT;case goog.ui.Component.State.ACTIVE:return c?goog.ui.Component.EventType.ACTIVATE:goog.ui.Component.EventType.DEACTIVATE;case goog.ui.Component.State.SELECTED:return c?goog.ui.Component.EventType.SELECT:
goog.ui.Component.EventType.UNSELECT;case goog.ui.Component.State.CHECKED:return c?goog.ui.Component.EventType.CHECK:goog.ui.Component.EventType.UNCHECK;case goog.ui.Component.State.FOCUSED:return c?goog.ui.Component.EventType.FOCUS:goog.ui.Component.EventType.BLUR;case goog.ui.Component.State.OPENED:return c?goog.ui.Component.EventType.OPEN:goog.ui.Component.EventType.CLOSE}throw Error(goog.ui.Component.Error.STATE_INVALID);};
goog.ui.Component.setDefaultRightToLeft=function(b){goog.ui.Component.defaultRightToLeft_=b};goog.ui.Component.prototype.id_=null;goog.ui.Component.prototype.inDocument_=!1;goog.ui.Component.prototype.element_=null;goog.ui.Component.prototype.rightToLeft_=null;goog.ui.Component.prototype.model_=null;goog.ui.Component.prototype.parent_=null;goog.ui.Component.prototype.children_=null;goog.ui.Component.prototype.childIndex_=null;goog.ui.Component.prototype.wasDecorated_=!1;
goog.ui.Component.prototype.getId=function(){return this.id_||(this.id_=this.idGenerator_.getNextUniqueId())};goog.ui.Component.prototype.setId=function(b){this.parent_&&this.parent_.childIndex_&&(goog.object.remove(this.parent_.childIndex_,this.id_),goog.object.add(this.parent_.childIndex_,b,this));this.id_=b};goog.ui.Component.prototype.getElement=function(){return this.element_};
goog.ui.Component.prototype.getElementStrict=function(){var b=this.element_;goog.asserts.assert(b,"Can not call getElementStrict before rendering/decorating.");return b};goog.ui.Component.prototype.setElementInternal=function(b){this.element_=b};goog.ui.Component.prototype.getElementsByClass=function(b){return this.element_?this.dom_.getElementsByClass(b,this.element_):[]};goog.ui.Component.prototype.getElementByClass=function(b){return this.element_?this.dom_.getElementByClass(b,this.element_):null};
goog.ui.Component.prototype.getRequiredElementByClass=function(b){var c=this.getElementByClass(b);goog.asserts.assert(c,"Expected element in component with class: %s",b);return c};goog.ui.Component.prototype.getHandler=function(){return this.googUiComponentHandler_||(this.googUiComponentHandler_=new goog.events.EventHandler(this))};
goog.ui.Component.prototype.setParent=function(b){if(this==b)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);if(b&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=b)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=b;goog.ui.Component.superClass_.setParentEventTarget.call(this,b)};goog.ui.Component.prototype.getParent=function(){return this.parent_};
goog.ui.Component.prototype.setParentEventTarget=function(b){if(this.parent_&&this.parent_!=b)throw Error(goog.ui.Component.Error.NOT_SUPPORTED);goog.ui.Component.superClass_.setParentEventTarget.call(this,b)};goog.ui.Component.prototype.getDomHelper=function(){return this.dom_};goog.ui.Component.prototype.isInDocument=function(){return this.inDocument_};goog.ui.Component.prototype.createDom=function(){this.element_=this.dom_.createElement("div")};goog.ui.Component.prototype.render=function(b){this.render_(b)};
goog.ui.Component.prototype.renderBefore=function(b){this.render_(b.parentNode,b)};goog.ui.Component.prototype.render_=function(b,c){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.element_||this.createDom();b?b.insertBefore(this.element_,c||null):this.dom_.getDocument().body.appendChild(this.element_);this.parent_&&!this.parent_.isInDocument()||this.enterDocument()};
goog.ui.Component.prototype.decorate=function(b){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(b&&this.canDecorate(b)){this.wasDecorated_=!0;var c=goog.dom.getOwnerDocument(b);this.dom_&&this.dom_.getDocument()==c||(this.dom_=goog.dom.getDomHelper(b));this.decorateInternal(b);goog.ui.Component.ALLOW_DETACHED_DECORATION&&!goog.dom.contains(c,b)||this.enterDocument()}else throw Error(goog.ui.Component.Error.DECORATE_INVALID);};goog.ui.Component.prototype.canDecorate=function(b){return!0};
goog.ui.Component.prototype.wasDecorated=function(){return this.wasDecorated_};goog.ui.Component.prototype.decorateInternal=function(b){this.element_=b};goog.ui.Component.prototype.enterDocument=function(){this.inDocument_=!0;this.forEachChild(function(b){!b.isInDocument()&&b.getElement()&&b.enterDocument()})};
goog.ui.Component.prototype.exitDocument=function(){this.forEachChild(function(b){b.isInDocument()&&b.exitDocument()});this.googUiComponentHandler_&&this.googUiComponentHandler_.removeAll();this.inDocument_=!1};
goog.ui.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument();this.googUiComponentHandler_&&(this.googUiComponentHandler_.dispose(),delete this.googUiComponentHandler_);this.forEachChild(function(b){b.dispose()});!this.wasDecorated_&&this.element_&&goog.dom.removeNode(this.element_);this.parent_=this.model_=this.element_=this.childIndex_=this.children_=null;goog.ui.Component.superClass_.disposeInternal.call(this)};
goog.ui.Component.prototype.makeId=function(b){return this.getId()+"."+b};goog.ui.Component.prototype.makeIds=function(b){var c={},d;for(d in b)c[d]=this.makeId(b[d]);return c};goog.ui.Component.prototype.getModel=function(){return this.model_};goog.ui.Component.prototype.setModel=function(b){this.model_=b};goog.ui.Component.prototype.getFragmentFromId=function(b){return b.substring(this.getId().length+1)};
goog.ui.Component.prototype.getElementByFragment=function(b){if(!this.inDocument_)throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);return this.dom_.getElement(this.makeId(b))};goog.ui.Component.prototype.addChild=function(b,c){this.addChildAt(b,this.getChildCount(),c)};
goog.ui.Component.prototype.addChildAt=function(b,c,d){if(b.inDocument_&&(d||!this.inDocument_))throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(0>c||c>this.getChildCount())throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);this.childIndex_&&this.children_||(this.childIndex_={},this.children_=[]);b.getParent()==this?(goog.object.set(this.childIndex_,b.getId(),b),goog.array.remove(this.children_,b)):goog.object.add(this.childIndex_,b.getId(),b);b.setParent(this);goog.array.insertAt(this.children_,
b,c);b.inDocument_&&this.inDocument_&&b.getParent()==this?(d=this.getContentElement(),d.insertBefore(b.getElement(),d.childNodes[c]||null)):d?(this.element_||this.createDom(),c=this.getChildAt(c+1),b.render_(this.getContentElement(),c?c.element_:null)):this.inDocument_&&(!b.inDocument_&&b.element_&&b.element_.parentNode&&b.element_.parentNode.nodeType==goog.dom.NodeType.ELEMENT)&&b.enterDocument()};goog.ui.Component.prototype.getContentElement=function(){return this.element_};
goog.ui.Component.prototype.isRightToLeft=function(){null==this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.inDocument_?this.element_:this.dom_.getDocument().body));return this.rightToLeft_};goog.ui.Component.prototype.setRightToLeft=function(b){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.rightToLeft_=b};goog.ui.Component.prototype.hasChildren=function(){return!!this.children_&&0!=this.children_.length};
goog.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0};goog.ui.Component.prototype.getChildIds=function(){var b=[];this.forEachChild(function(c){b.push(c.getId())});return b};goog.ui.Component.prototype.getChild=function(b){return this.childIndex_&&b?goog.object.get(this.childIndex_,b)||null:null};goog.ui.Component.prototype.getChildAt=function(b){return this.children_?this.children_[b]||null:null};
goog.ui.Component.prototype.forEachChild=function(b,c){this.children_&&goog.array.forEach(this.children_,b,c)};goog.ui.Component.prototype.indexOfChild=function(b){return this.children_&&b?goog.array.indexOf(this.children_,b):-1};
goog.ui.Component.prototype.removeChild=function(b,c){if(b){var d=goog.isString(b)?b:b.getId();b=this.getChild(d);d&&b&&(goog.object.remove(this.childIndex_,d),goog.array.remove(this.children_,b),c&&(b.exitDocument(),b.element_&&goog.dom.removeNode(b.element_)),b.setParent(null))}if(!b)throw Error(goog.ui.Component.Error.NOT_OUR_CHILD);return b};goog.ui.Component.prototype.removeChildAt=function(b,c){return this.removeChild(this.getChildAt(b),c)};
goog.ui.Component.prototype.removeChildren=function(b){for(var c=[];this.hasChildren();)c.push(this.removeChildAt(0,b));return c};goog.fx.Dragger=function(b,c,d){goog.events.EventTarget.call(this);this.target=b;this.handle=c||b;this.limits=d||new goog.math.Rect(NaN,NaN,NaN,NaN);this.document_=goog.dom.getOwnerDocument(b);this.eventHandler_=new goog.events.EventHandler(this);this.registerDisposable(this.eventHandler_);goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this)};goog.inherits(goog.fx.Dragger,goog.events.EventTarget);
goog.fx.Dragger.HAS_SET_CAPTURE_=goog.userAgent.IE||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.3");goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"};goog.fx.Dragger.prototype.clientX=0;goog.fx.Dragger.prototype.clientY=0;goog.fx.Dragger.prototype.screenX=0;goog.fx.Dragger.prototype.screenY=0;goog.fx.Dragger.prototype.startX=0;goog.fx.Dragger.prototype.startY=0;goog.fx.Dragger.prototype.deltaX=0;
goog.fx.Dragger.prototype.deltaY=0;goog.fx.Dragger.prototype.enabled_=!0;goog.fx.Dragger.prototype.dragging_=!1;goog.fx.Dragger.prototype.hysteresisDistanceSquared_=0;goog.fx.Dragger.prototype.mouseDownTime_=0;goog.fx.Dragger.prototype.ieDragStartCancellingOn_=!1;goog.fx.Dragger.prototype.useRightPositioningForRtl_=!1;goog.fx.Dragger.prototype.enableRightPositioningForRtl=function(b){this.useRightPositioningForRtl_=b};goog.fx.Dragger.prototype.getHandler=function(){return this.eventHandler_};
goog.fx.Dragger.prototype.setLimits=function(b){this.limits=b||new goog.math.Rect(NaN,NaN,NaN,NaN)};goog.fx.Dragger.prototype.setHysteresis=function(b){this.hysteresisDistanceSquared_=Math.pow(b,2)};goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)};goog.fx.Dragger.prototype.setScrollTarget=function(b){this.scrollTarget_=b};goog.fx.Dragger.prototype.setCancelIeDragStart=function(b){this.ieDragStartCancellingOn_=b};
goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_};goog.fx.Dragger.prototype.setEnabled=function(b){this.enabled_=b};goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this);goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this);this.cleanUpAfterDragging_();this.handle=this.target=null};
goog.fx.Dragger.prototype.isRightToLeft_=function(){goog.isDef(this.rightToLeft_)||(this.rightToLeft_=goog.style.isRightToLeft(this.target));return this.rightToLeft_};
goog.fx.Dragger.prototype.startDrag=function(b){var c=b.type==goog.events.EventType.MOUSEDOWN;if(!this.enabled_||this.dragging_||c&&!b.isMouseActionButton())this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);else{this.maybeReinitTouchEvent_(b);if(0==this.hysteresisDistanceSquared_)if(this.fireDragStart_(b))this.dragging_=!0,b.preventDefault();else return;else b.preventDefault();this.setupDragHandlers();this.clientX=this.startX=b.clientX;this.clientY=this.startY=b.clientY;this.screenX=b.screenX;
this.screenY=b.screenY;this.deltaX=this.useRightPositioningForRtl_?goog.style.bidi.getOffsetStart(this.target):this.target.offsetLeft;this.deltaY=this.target.offsetTop;this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll();this.mouseDownTime_=goog.now()}};
goog.fx.Dragger.prototype.setupDragHandlers=function(){var b=this.document_,c=b.documentElement,d=!goog.fx.Dragger.HAS_SET_CAPTURE_;this.eventHandler_.listen(b,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,d);this.eventHandler_.listen(b,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,d);goog.fx.Dragger.HAS_SET_CAPTURE_?(c.setCapture(!1),this.eventHandler_.listen(c,goog.events.EventType.LOSECAPTURE,this.endDrag)):this.eventHandler_.listen(goog.dom.getWindow(b),
goog.events.EventType.BLUR,this.endDrag);goog.userAgent.IE&&this.ieDragStartCancellingOn_&&this.eventHandler_.listen(b,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault);this.scrollTarget_&&this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,d)};goog.fx.Dragger.prototype.fireDragStart_=function(b){return this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,b.clientX,b.clientY,b))};
goog.fx.Dragger.prototype.cleanUpAfterDragging_=function(){this.eventHandler_.removeAll();goog.fx.Dragger.HAS_SET_CAPTURE_&&this.document_.releaseCapture()};goog.fx.Dragger.prototype.endDrag=function(b,c){this.cleanUpAfterDragging_();if(this.dragging_){this.maybeReinitTouchEvent_(b);this.dragging_=!1;var d=this.limitX(this.deltaX),e=this.limitY(this.deltaY);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,b.clientX,b.clientY,b,d,e,c||b.type==goog.events.EventType.TOUCHCANCEL))}else this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)};
goog.fx.Dragger.prototype.endDragCancel=function(b){this.endDrag(b,!0)};goog.fx.Dragger.prototype.maybeReinitTouchEvent_=function(b){var c=b.type;c==goog.events.EventType.TOUCHSTART||c==goog.events.EventType.TOUCHMOVE?b.init(b.getBrowserEvent().targetTouches[0],b.currentTarget):c!=goog.events.EventType.TOUCHEND&&c!=goog.events.EventType.TOUCHCANCEL||b.init(b.getBrowserEvent().changedTouches[0],b.currentTarget)};
goog.fx.Dragger.prototype.handleMove_=function(b){if(this.enabled_){this.maybeReinitTouchEvent_(b);var c=(this.useRightPositioningForRtl_&&this.isRightToLeft_()?-1:1)*(b.clientX-this.clientX),d=b.clientY-this.clientY;this.clientX=b.clientX;this.clientY=b.clientY;this.screenX=b.screenX;this.screenY=b.screenY;if(!this.dragging_){var e=this.startX-this.clientX,f=this.startY-this.clientY;if(e*e+f*f>this.hysteresisDistanceSquared_)if(this.fireDragStart_(b))this.dragging_=!0;else{this.isDisposed()||this.endDrag(b);
return}}d=this.calculatePosition_(c,d);c=d.x;d=d.y;this.dragging_&&this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,b.clientX,b.clientY,b,c,d))&&(this.doDrag(b,c,d,!1),b.preventDefault())}};
goog.fx.Dragger.prototype.calculatePosition_=function(b,c){var d=goog.dom.getDomHelper(this.document_).getDocumentScroll();b+=d.x-this.pageScroll.x;c+=d.y-this.pageScroll.y;this.pageScroll=d;this.deltaX+=b;this.deltaY+=c;var d=this.limitX(this.deltaX),e=this.limitY(this.deltaY);return new goog.math.Coordinate(d,e)};goog.fx.Dragger.prototype.onScroll_=function(b){var c=this.calculatePosition_(0,0);b.clientX=this.clientX;b.clientY=this.clientY;this.doDrag(b,c.x,c.y,!0)};
goog.fx.Dragger.prototype.doDrag=function(b,c,d,e){this.defaultAction(c,d);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,b.clientX,b.clientY,b,c,d))};goog.fx.Dragger.prototype.limitX=function(b){var c=this.limits,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))};
goog.fx.Dragger.prototype.limitY=function(b){var c=this.limits,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))};goog.fx.Dragger.prototype.defaultAction=function(b,c){this.useRightPositioningForRtl_&&this.isRightToLeft_()?this.target.style.right=b+"px":this.target.style.left=b+"px";this.target.style.top=c+"px"};goog.fx.Dragger.prototype.isDragging=function(){return this.dragging_};
goog.fx.DragEvent=function(b,c,d,e,f,g,h,k){goog.events.Event.call(this,b);this.clientX=d;this.clientY=e;this.browserEvent=f;this.left=goog.isDef(g)?g:c.deltaX;this.top=goog.isDef(h)?h:c.deltaY;this.dragger=c;this.dragCanceled=!!k};goog.inherits(goog.fx.DragEvent,goog.events.Event);goog.fx.AbstractDragDrop=function(){goog.events.EventTarget.call(this);this.items_=[];this.targets_=[];this.scrollableContainers_=[]};goog.inherits(goog.fx.AbstractDragDrop,goog.events.EventTarget);goog.fx.AbstractDragDrop.DUMMY_TARGET_MIN_SIZE_=10;goog.fx.AbstractDragDrop.prototype.isSource_=!1;goog.fx.AbstractDragDrop.prototype.isTarget_=!1;goog.fx.AbstractDragDrop.prototype.initialized_=!1;
goog.fx.AbstractDragDrop.EventType={DRAGOVER:"dragover",DRAGOUT:"dragout",DRAG:"drag",DROP:"drop",DRAGSTART:"dragstart",DRAGEND:"dragend"};goog.fx.AbstractDragDrop.initDragDistanceThreshold=5;goog.fx.AbstractDragDrop.prototype.setDragClass=function(b){this.dragClass_=b};goog.fx.AbstractDragDrop.prototype.setSourceClass=function(b){this.sourceClass_=b};goog.fx.AbstractDragDrop.prototype.setTargetClass=function(b){this.targetClass_=b};goog.fx.AbstractDragDrop.prototype.isInitialized=function(){return this.initialized_};
goog.fx.AbstractDragDrop.prototype.addTarget=function(b){this.targets_.push(b);this.isSource_=b.isTarget_=!0};goog.fx.AbstractDragDrop.prototype.setScrollTarget=function(b){this.scrollTarget_=b};goog.fx.AbstractDragDrop.prototype.init=function(){if(!this.initialized_){for(var b,c=0;b=this.items_[c];c++)this.initItem(b);this.initialized_=!0}};
goog.fx.AbstractDragDrop.prototype.initItem=function(b){this.isSource_&&(goog.events.listen(b.element,goog.events.EventType.MOUSEDOWN,b.mouseDown_,!1,b),this.sourceClass_&&goog.dom.classes.add(b.element,this.sourceClass_));this.isTarget_&&this.targetClass_&&goog.dom.classes.add(b.element,this.targetClass_)};
goog.fx.AbstractDragDrop.prototype.disposeItem=function(b){this.isSource_&&(goog.events.unlisten(b.element,goog.events.EventType.MOUSEDOWN,b.mouseDown_,!1,b),this.sourceClass_&&goog.dom.classes.remove(b.element,this.sourceClass_));this.isTarget_&&this.targetClass_&&goog.dom.classes.remove(b.element,this.targetClass_);b.dispose()};goog.fx.AbstractDragDrop.prototype.removeItems=function(){for(var b,c=0;b=this.items_[c];c++)this.disposeItem(b);this.items_.length=0};
goog.fx.AbstractDragDrop.prototype.maybeStartDrag=function(b,c){c.maybeStartDrag_(b,c.element)};
goog.fx.AbstractDragDrop.prototype.startDrag=function(b,c){if(!this.dragItem_){this.dragItem_=c;var d=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGSTART,this,this.dragItem_);if(!1==this.dispatchEvent(d))this.dragItem_=null;else{d=c.getCurrentDragElement();this.dragEl_=this.createDragElement(d);var e=goog.dom.getOwnerDocument(d);e.body.appendChild(this.dragEl_);this.dragger_=this.createDraggerFor(d,this.dragEl_,b);this.dragger_.setScrollTarget(this.scrollTarget_);goog.events.listen(this.dragger_,
goog.fx.Dragger.EventType.DRAG,this.moveDrag_,!1,this);goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.END,this.endDrag,!1,this);goog.events.listen(e.body,goog.events.EventType.SELECTSTART,this.suppressSelect_);this.recalculateDragTargets();this.recalculateScrollableContainers();this.activeTarget_=null;this.initScrollableContainerListeners_();this.dragger_.startDrag(b);b.preventDefault()}}};
goog.fx.AbstractDragDrop.prototype.recalculateDragTargets=function(){this.targetList_=[];for(var b,c=0;b=this.targets_[c];c++)for(var d,e=0;d=b.items_[e];e++)this.addDragTarget_(b,d);this.targetBox_||(this.targetBox_=new goog.math.Box(0,0,0,0))};
goog.fx.AbstractDragDrop.prototype.recalculateScrollableContainers=function(){var b,c,d,e;for(c=0;b=this.scrollableContainers_[c];c++)b.containedTargets_=[],b.savedScrollLeft_=b.element_.scrollLeft,b.savedScrollTop_=b.element_.scrollTop,d=goog.style.getPageOffset(b.element_),e=goog.style.getSize(b.element_),b.box_=new goog.math.Box(d.y,d.x+e.width,d.y+e.height,d.x);for(c=0;e=this.targetList_[c];c++)for(d=0;b=this.scrollableContainers_[d];d++)goog.dom.contains(b.element_,e.element_)&&(b.containedTargets_.push(e),
e.scrollableContainer_=b)};goog.fx.AbstractDragDrop.prototype.createDraggerFor=function(b,c,d){b=this.getDragElementPosition(b,c,d);c.style.position="absolute";c.style.left=b.x+"px";c.style.top=b.y+"px";return new goog.fx.Dragger(c)};
goog.fx.AbstractDragDrop.prototype.endDrag=function(b){var c=b.dragCanceled?null:this.activeTarget_;if(c&&c.target_){var d=b.clientX;b=b.clientY;var e=this.getScrollPos(),f=d+e.x,e=b+e.y,g;this.subtargetFunction_&&(g=this.subtargetFunction_(c.item_,c.box_,f,e));var h=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAG,this,this.dragItem_,c.target_,c.item_,c.element_,d,b,f,e);this.dispatchEvent(h);d=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DROP,this,this.dragItem_,
c.target_,c.item_,c.element_,d,b,f,e,g);c.target_.dispatchEvent(d)}c=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGEND,this,this.dragItem_);this.dispatchEvent(c);goog.events.unlisten(this.dragger_,goog.fx.Dragger.EventType.DRAG,this.moveDrag_,!1,this);goog.events.unlisten(this.dragger_,goog.fx.Dragger.EventType.END,this.endDrag,!1,this);c=goog.dom.getOwnerDocument(this.dragItem_.getCurrentDragElement());goog.events.unlisten(c.body,goog.events.EventType.SELECTSTART,this.suppressSelect_);
this.afterEndDrag(this.activeTarget_?this.activeTarget_.item_:null)};goog.fx.AbstractDragDrop.prototype.afterEndDrag=function(b){this.disposeDrag()};goog.fx.AbstractDragDrop.prototype.disposeDrag=function(){this.disposeScrollableContainerListeners_();this.dragger_.dispose();goog.dom.removeNode(this.dragEl_);delete this.dragItem_;delete this.dragEl_;delete this.dragger_;delete this.targetList_;delete this.activeTarget_};
goog.fx.AbstractDragDrop.prototype.moveDrag_=function(b){var c=this.getEventPosition(b),d=c.x,e=c.y,f=this.activeTarget_,g;if(f){this.subtargetFunction_&&f.target_&&(g=this.subtargetFunction_(f.item_,f.box_,d,e));if(f.box_.contains(c)&&g==this.activeSubtarget_)return;if(f.target_){var h=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGOUT,this,this.dragItem_,f.target_,f.item_,f.element_);this.dispatchEvent(h);h=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGOUT,this,
this.dragItem_,f.target_,f.item_,f.element_,void 0,void 0,void 0,void 0,this.activeSubtarget_);f.target_.dispatchEvent(h)}this.activeSubtarget_=g;this.activeTarget_=null}this.targetBox_.contains(c)&&((f=this.activeTarget_=this.getTargetFromPosition_(c))&&f.target_?(this.subtargetFunction_&&(g=this.subtargetFunction_(f.item_,f.box_,d,e)),c=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGOVER,this,this.dragItem_,f.target_,f.item_,f.element_),c.subtarget=g,this.dispatchEvent(c),b=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGOVER,
this,this.dragItem_,f.target_,f.item_,f.element_,b.clientX,b.clientY,void 0,void 0,g),f.target_.dispatchEvent(b)):f||(this.activeTarget_=this.maybeCreateDummyTargetForPosition_(d,e)))};goog.fx.AbstractDragDrop.prototype.suppressSelect_=function(b){return!1};goog.fx.AbstractDragDrop.prototype.initScrollableContainerListeners_=function(){var b,c;for(c=0;b=this.scrollableContainers_[c];c++)goog.events.listen(b.element_,goog.events.EventType.SCROLL,this.containerScrollHandler_,!1,this)};
goog.fx.AbstractDragDrop.prototype.disposeScrollableContainerListeners_=function(){for(var b=0,c;c=this.scrollableContainers_[b];b++)goog.events.unlisten(c.element_,"scroll",this.containerScrollHandler_,!1,this),c.containedTargets_=[]};goog.fx.AbstractDragDrop.prototype.addScrollableContainer=function(b){this.scrollableContainers_.push(new goog.fx.ScrollableContainer_(b))};
goog.fx.AbstractDragDrop.prototype.removeAllScrollableContainers=function(){this.disposeScrollableContainerListeners_();this.scrollableContainers_=[]};
goog.fx.AbstractDragDrop.prototype.containerScrollHandler_=function(b){for(var c=0,d;d=this.scrollableContainers_[c];c++)if(b.target==d.element_){var e=d.savedScrollTop_-d.element_.scrollTop,f=d.savedScrollLeft_-d.element_.scrollLeft;d.savedScrollTop_=d.element_.scrollTop;d.savedScrollLeft_=d.element_.scrollLeft;this.dummyTarget_&&this.activeTarget_==this.dummyTarget_&&(0<e?this.dummyTarget_.box_.top+=e:this.dummyTarget_.box_.bottom+=e,0<f?this.dummyTarget_.box_.left+=f:this.dummyTarget_.box_.right+=
f);for(var g=0,h;h=d.containedTargets_[g];g++)h=h.box_,h.top+=e,h.left+=f,h.bottom+=e,h.right+=f,this.calculateTargetBox_(h)}this.dragger_.onScroll_(b)};goog.fx.AbstractDragDrop.prototype.setSubtargetFunction=function(b){this.subtargetFunction_=b};goog.fx.AbstractDragDrop.prototype.createDragElement=function(b){b=this.cloneNode_(b);this.dragClass_&&goog.dom.classes.add(b,this.dragClass_);return b};
goog.fx.AbstractDragDrop.prototype.getDragElementPosition=function(b,c,d){c=goog.style.getPageOffset(b);b=goog.style.getMarginBox(b);c.x-=2*(b.left||0);c.y-=2*(b.top||0);return c};goog.fx.AbstractDragDrop.prototype.getDragger=function(){return this.dragger_};
goog.fx.AbstractDragDrop.prototype.cloneNode_=function(b){var c=b.cloneNode(!0);switch(b.tagName.toLowerCase()){case "tr":return goog.dom.createDom("table",null,goog.dom.createDom("tbody",null,c));case "td":case "th":return goog.dom.createDom("table",null,goog.dom.createDom("tbody",null,goog.dom.createDom("tr",null,c)));default:return c}};
goog.fx.AbstractDragDrop.prototype.addDragTarget_=function(b,c){for(var d=c.getDraggableElements(),e=this.targetList_,f=0;f<d.length;f++){var g=d[f],h=goog.style.getPageOffset(g),k=goog.style.getSize(g),h=new goog.math.Box(h.y,h.x+k.width,h.y+k.height,h.x);e.push(new goog.fx.ActiveDropTarget_(h,b,c,g));this.calculateTargetBox_(h)}};
goog.fx.AbstractDragDrop.prototype.calculateTargetBox_=function(b){if(1==this.targetList_.length)this.targetBox_=new goog.math.Box(b.top,b.right,b.bottom,b.left);else{var c=this.targetBox_;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}};
goog.fx.AbstractDragDrop.prototype.maybeCreateDummyTargetForPosition_=function(b,c){this.dummyTarget_||(this.dummyTarget_=new goog.fx.ActiveDropTarget_(this.targetBox_.clone()));var d=this.dummyTarget_.box_;d.top=this.targetBox_.top;d.right=this.targetBox_.right;d.bottom=this.targetBox_.bottom;d.left=this.targetBox_.left;for(var e=0,f;f=this.targetList_[e];e++){var g=f.box_;f.scrollableContainer_&&(f=f.scrollableContainer_.box_,g=new goog.math.Box(Math.max(g.top,f.top),Math.min(g.right,f.right),Math.min(g.bottom,
f.bottom),Math.max(g.left,f.left)));f=null;b>=g.right?f=g.right>d.left?g.right:d.left:b<g.left&&(f=g.left<d.right?g.left:d.right);var h=null;c>=g.bottom?h=g.bottom>d.top?g.bottom:d.top:c<g.top&&(h=g.top<d.bottom?g.top:d.bottom);goog.isNull(f)||goog.isNull(h)||(Math.abs(f-b)>Math.abs(h-c)?h=null:f=null);goog.isNull(f)?goog.isNull(h)||(h<=c?d.top=h:d.bottom=h):f<=b?d.left=f:d.right=f}return(d.right-d.left)*(d.bottom-d.top)>=goog.fx.AbstractDragDrop.DUMMY_TARGET_MIN_SIZE_?this.dummyTarget_:null};
goog.fx.AbstractDragDrop.prototype.getTargetFromPosition_=function(b){for(var c,d=0;c=this.targetList_[d];d++)if(c.box_.contains(b))if(c.scrollableContainer_){if(c.scrollableContainer_.box_.contains(b))return c}else return c;return null};goog.fx.AbstractDragDrop.prototype.isInside=function(b,c,d){return b>=d.left&&b<d.right&&c>=d.top&&c<d.bottom};goog.fx.AbstractDragDrop.prototype.getScrollPos=function(){return goog.dom.getDomHelper(this.dragEl_).getDocumentScroll()};
goog.fx.AbstractDragDrop.prototype.getEventPosition=function(b){var c=this.getScrollPos();return new goog.math.Coordinate(b.clientX+c.x,b.clientY+c.y)};goog.fx.AbstractDragDrop.prototype.disposeInternal=function(){goog.fx.AbstractDragDrop.superClass_.disposeInternal.call(this);this.removeItems()};
goog.fx.DragDropEvent=function(b,c,d,e,f,g,h,k,m,p,n){goog.events.Event.call(this,b);this.dragSource=c;this.dragSourceItem=d;this.dropTarget=e;this.dropTargetItem=f;this.dropTargetElement=g;this.clientX=h;this.clientY=k;this.viewportX=m;this.viewportY=p;this.subtarget=n};goog.inherits(goog.fx.DragDropEvent,goog.events.Event);goog.fx.DragDropEvent.prototype.disposeInternal=function(){};
goog.fx.DragDropItem=function(b,c){goog.events.EventTarget.call(this);this.element=goog.dom.getElement(b);this.data=c;this.parent_=null;this.eventHandler_=new goog.events.EventHandler(this);this.registerDisposable(this.eventHandler_);if(!this.element)throw Error("Invalid argument");};goog.inherits(goog.fx.DragDropItem,goog.events.EventTarget);goog.fx.DragDropItem.prototype.currentDragElement_=null;goog.fx.DragDropItem.prototype.getData=function(){return this.data};
goog.fx.DragDropItem.prototype.getDraggableElement=function(b){return b};goog.fx.DragDropItem.prototype.getCurrentDragElement=function(){return this.currentDragElement_};goog.fx.DragDropItem.prototype.getDraggableElements=function(){return[this.element]};goog.fx.DragDropItem.prototype.mouseDown_=function(b){if(b.isMouseActionButton()){var c=this.getDraggableElement(b.target);c&&this.maybeStartDrag_(b,c)}};goog.fx.DragDropItem.prototype.setParent=function(b){this.parent_=b};
goog.fx.DragDropItem.prototype.maybeStartDrag_=function(b,c){var d=goog.events.EventType;this.eventHandler_.listen(c,d.MOUSEMOVE,this.mouseMove_,!1).listen(c,d.MOUSEOUT,this.mouseMove_,!1);var e=goog.dom.getOwnerDocument(c);this.eventHandler_.listen(e,d.MOUSEUP,this.mouseUp_,!0);this.currentDragElement_=c;this.startPosition_=new goog.math.Coordinate(b.clientX,b.clientY);b.preventDefault()};
goog.fx.DragDropItem.prototype.mouseMove_=function(b){var c=Math.abs(b.clientX-this.startPosition_.x)+Math.abs(b.clientY-this.startPosition_.y),d=this.currentDragElement_,d=b.type==goog.events.EventType.MOUSEOUT&&b.target==d;if(c>goog.fx.AbstractDragDrop.initDragDistanceThreshold||d)this.eventHandler_.removeAll(),this.parent_.startDrag(b,this)};goog.fx.DragDropItem.prototype.mouseUp_=function(b){this.eventHandler_.removeAll();delete this.startPosition_;this.currentDragElement_=null};
goog.fx.ActiveDropTarget_=function(b,c,d,e){this.box_=b;this.target_=c;this.item_=d;this.element_=e};goog.fx.ActiveDropTarget_.prototype.scrollableContainer_=null;goog.fx.ScrollableContainer_=function(b){this.containedTargets_=[];this.element_=b;this.savedScrollTop_=this.savedScrollLeft_=0;this.box_=null};goog.fx.DragDrop=function(b,c){goog.fx.AbstractDragDrop.call(this);var d=new goog.fx.DragDropItem(b,c);d.setParent(this);this.items_.push(d)};goog.inherits(goog.fx.DragDrop,goog.fx.AbstractDragDrop);goog.a11y={};goog.a11y.aria={};
goog.a11y.aria.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",CONTROLS:"controls",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",OWNS:"owns",POSINSET:"posinset",
PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"};goog.a11y.aria.AutoCompleteValues={INLINE:"inline",LIST:"list",BOTH:"both",NONE:"none"};goog.a11y.aria.DropEffectValues={COPY:"copy",MOVE:"move",LINK:"link",EXECUTE:"execute",POPUP:"popup",NONE:"none"};goog.a11y.aria.LivePriority={OFF:"off",POLITE:"polite",ASSERTIVE:"assertive"};
goog.a11y.aria.OrientationValues={VERTICAL:"vertical",HORIZONTAL:"horizontal"};goog.a11y.aria.RelevantValues={ADDITIONS:"additions",REMOVALS:"removals",TEXT:"text",ALL:"all"};goog.a11y.aria.SortValues={ASCENDING:"ascending",DESCENDING:"descending",NONE:"none",OTHER:"other"};goog.a11y.aria.CheckedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"};goog.a11y.aria.ExpandedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};
goog.a11y.aria.GrabbedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.InvalidValues={FALSE:"false",TRUE:"true",GRAMMAR:"grammar",SPELLING:"spelling"};goog.a11y.aria.PressedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"};goog.a11y.aria.SelectedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.datatables={};
goog.a11y.aria.datatables.getDefaultValuesMap=function(){goog.a11y.aria.DefaultStateValueMap_||(goog.a11y.aria.DefaultStateValueMap_=goog.object.create(goog.a11y.aria.State.ATOMIC,!1,goog.a11y.aria.State.AUTOCOMPLETE,"none",goog.a11y.aria.State.DROPEFFECT,"none",goog.a11y.aria.State.HASPOPUP,!1,goog.a11y.aria.State.LIVE,"off",goog.a11y.aria.State.MULTILINE,!1,goog.a11y.aria.State.MULTISELECTABLE,!1,goog.a11y.aria.State.ORIENTATION,"vertical",goog.a11y.aria.State.READONLY,!1,goog.a11y.aria.State.RELEVANT,
"additions text",goog.a11y.aria.State.REQUIRED,!1,goog.a11y.aria.State.SORT,"none",goog.a11y.aria.State.BUSY,!1,goog.a11y.aria.State.DISABLED,!1,goog.a11y.aria.State.HIDDEN,!1,goog.a11y.aria.State.INVALID,"false"));return goog.a11y.aria.DefaultStateValueMap_};goog.a11y.aria.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",CONTENTINFO:"contentinfo",DEFINITION:"definition",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",
MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUBAR:"menubar",MENU_ITEM:"menuitem",MENU_ITEM_CHECKBOX:"menuitemcheckbox",MENU_ITEM_RADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",
TAB_LIST:"tablist",TAB_PANEL:"tabpanel",TEXTBOX:"textbox",TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"};goog.a11y.aria.ARIA_PREFIX_="aria-";goog.a11y.aria.ROLE_ATTRIBUTE_="role";goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_=[goog.dom.TagName.A,goog.dom.TagName.AREA,goog.dom.TagName.BUTTON,goog.dom.TagName.HEAD,goog.dom.TagName.INPUT,goog.dom.TagName.LINK,goog.dom.TagName.MENU,goog.dom.TagName.META,goog.dom.TagName.OPTGROUP,goog.dom.TagName.OPTION,goog.dom.TagName.PROGRESS,goog.dom.TagName.STYLE,goog.dom.TagName.SELECT,goog.dom.TagName.SOURCE,goog.dom.TagName.TEXTAREA,goog.dom.TagName.TITLE,goog.dom.TagName.TRACK];
goog.a11y.aria.setRole=function(b,c){c?(goog.asserts.ENABLE_ASSERTS&&goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.Role,c),"No such ARIA role "+c),b.setAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_,c)):goog.a11y.aria.removeRole(b)};goog.a11y.aria.getRole=function(b){return b.getAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)||null};goog.a11y.aria.removeRole=function(b){b.removeAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)};
goog.a11y.aria.setState=function(b,c,d){goog.isArrayLike(d)&&(d=d.join(" "));var e=goog.a11y.aria.getAriaAttributeName_(c);""===d||void 0==d?(d=goog.a11y.aria.datatables.getDefaultValuesMap(),c in d?b.setAttribute(e,d[c]):b.removeAttribute(e)):b.setAttribute(e,d)};goog.a11y.aria.removeState=function(b,c){b.removeAttribute(goog.a11y.aria.getAriaAttributeName_(c))};goog.a11y.aria.getState=function(b,c){var d=b.getAttribute(goog.a11y.aria.getAriaAttributeName_(c));return null==d||void 0==d?"":String(d)};
goog.a11y.aria.getActiveDescendant=function(b){var c=goog.a11y.aria.getState(b,goog.a11y.aria.State.ACTIVEDESCENDANT);return goog.dom.getOwnerDocument(b).getElementById(c)};goog.a11y.aria.setActiveDescendant=function(b,c){var d="";c&&(d=c.id,goog.asserts.assert(d,"The active element should have an id."));goog.a11y.aria.setState(b,goog.a11y.aria.State.ACTIVEDESCENDANT,d)};goog.a11y.aria.getLabel=function(b){return goog.a11y.aria.getState(b,goog.a11y.aria.State.LABEL)};
goog.a11y.aria.setLabel=function(b,c){goog.a11y.aria.setState(b,goog.a11y.aria.State.LABEL,c)};goog.a11y.aria.assertRoleIsSetInternalUtil=function(b,c){if(!goog.array.contains(goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_,b.tagName)){var d=goog.a11y.aria.getRole(b);goog.asserts.assert(null!=d,"The element ARIA role cannot be null.");goog.asserts.assert(goog.array.contains(c,d),'Non existing or incorrect role set for element.The role set is "'+d+'". The role should be any of "'+c+'". Check the ARIA specification for more details http://www.w3.org/TR/wai-aria/roles.')}};
goog.a11y.aria.getBooleanStateInternalUtil=function(b,c){var d=goog.a11y.aria.getState(b,c);return"true"==d?!0:"false"==d?!1:null};goog.a11y.aria.getNumberStateInternalUtil=function(b,c){var d=goog.a11y.aria.getState(b,c);return goog.string.isNumeric(d)?goog.string.toNumber(d):null};goog.a11y.aria.getStringArrayStateInternalUtil=function(b,c){var d=b.getAttribute(goog.a11y.aria.getAriaAttributeName_(c));return goog.a11y.aria.splitStringOnWhitespace_(d)};
goog.a11y.aria.getStringStateInternalUtil=function(b,c){return goog.a11y.aria.getState(b,c)||null};goog.a11y.aria.splitStringOnWhitespace_=function(b){return b?b.split(/\s+/):[]};goog.a11y.aria.getAriaAttributeName_=function(b){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.assert(b,"ARIA attribute cannot be empty."),goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.State,b),"No such ARIA attribute "+b));return goog.a11y.aria.ARIA_PREFIX_+b};goog.ui.RangeModel=function(){goog.events.EventTarget.call(this)};goog.inherits(goog.ui.RangeModel,goog.events.EventTarget);goog.ui.RangeModel.prototype.value_=0;goog.ui.RangeModel.prototype.minimum_=0;goog.ui.RangeModel.prototype.maximum_=100;goog.ui.RangeModel.prototype.extent_=0;goog.ui.RangeModel.prototype.step_=1;goog.ui.RangeModel.prototype.isChanging_=!1;goog.ui.RangeModel.prototype.mute_=!1;goog.ui.RangeModel.prototype.setMute=function(b){this.mute_=b};
goog.ui.RangeModel.prototype.setValue=function(b){b=this.roundToStepWithMin(b);this.value_!=b&&(this.value_=b+this.extent_>this.maximum_?this.maximum_-this.extent_:b<this.minimum_?this.minimum_:b,this.isChanging_||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))};goog.ui.RangeModel.prototype.getValue=function(){return this.roundToStepWithMin(this.value_)};
goog.ui.RangeModel.prototype.setExtent=function(b){b=this.roundToStepWithMin(b);this.extent_!=b&&(this.extent_=0>b?0:this.value_+b>this.maximum_?this.maximum_-this.value_:b,this.isChanging_||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))};goog.ui.RangeModel.prototype.getExtent=function(){return this.roundToStep(this.extent_)};
goog.ui.RangeModel.prototype.setMinimum=function(b){if(this.minimum_!=b){var c=this.isChanging_;this.isChanging_=!0;this.minimum_=b;b+this.extent_>this.maximum_&&(this.extent_=this.maximum_-this.minimum_);b>this.value_&&this.setValue(b);b>this.maximum_&&(this.extent_=0,this.setMaximum(b),this.setValue(b));(this.isChanging_=c)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE)}};goog.ui.RangeModel.prototype.getMinimum=function(){return this.roundToStepWithMin(this.minimum_)};
goog.ui.RangeModel.prototype.setMaximum=function(b){b=this.roundToStepWithMin(b);if(this.maximum_!=b){var c=this.isChanging_;this.isChanging_=!0;this.maximum_=b;b<this.value_+this.extent_&&this.setValue(b-this.extent_);b<this.minimum_&&(this.extent_=0,this.setMinimum(b),this.setValue(this.maximum_));b<this.minimum_+this.extent_&&(this.extent_=this.maximum_-this.minimum_);(this.isChanging_=c)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE)}};
goog.ui.RangeModel.prototype.getMaximum=function(){return this.roundToStepWithMin(this.maximum_)};goog.ui.RangeModel.prototype.getStep=function(){return this.step_};goog.ui.RangeModel.prototype.setStep=function(b){this.step_!=b&&(this.step_=b,b=this.isChanging_,this.isChanging_=!0,this.setMaximum(this.getMaximum()),this.setExtent(this.getExtent()),this.setValue(this.getValue()),(this.isChanging_=b)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))};
goog.ui.RangeModel.prototype.roundToStepWithMin=function(b){return null==this.step_?b:this.minimum_+Math.round((b-this.minimum_)/this.step_)*this.step_};goog.ui.RangeModel.prototype.roundToStep=function(b){return null==this.step_?b:Math.round(b/this.step_)*this.step_};goog.ui.ProgressBar=function(b){goog.ui.Component.call(this,b);this.rangeModel_=new goog.ui.RangeModel;goog.events.listen(this.rangeModel_,goog.ui.Component.EventType.CHANGE,this.handleChange_,!1,this)};goog.inherits(goog.ui.ProgressBar,goog.ui.Component);goog.ui.ProgressBar.Orientation={VERTICAL:"vertical",HORIZONTAL:"horizontal"};goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_={};goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[goog.ui.ProgressBar.Orientation.VERTICAL]="progress-bar-vertical";
goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[goog.ui.ProgressBar.Orientation.HORIZONTAL]="progress-bar-horizontal";goog.ui.ProgressBar.prototype.createDom=function(){this.thumbElement_=this.createThumb_();var b=goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[this.orientation_];this.setElementInternal(this.getDomHelper().createDom("div",b,this.thumbElement_));this.setValueState_();this.setMinimumState_();this.setMaximumState_()};
goog.ui.ProgressBar.prototype.enterDocument=function(){goog.ui.ProgressBar.superClass_.enterDocument.call(this);this.attachEvents_();this.updateUi_();var b=this.getElement();goog.asserts.assert(b,"The progress bar DOM element cannot be null.");goog.a11y.aria.setRole(b,"progressbar");goog.a11y.aria.setState(b,"live","polite")};goog.ui.ProgressBar.prototype.exitDocument=function(){goog.ui.ProgressBar.superClass_.exitDocument.call(this);this.detachEvents_()};
goog.ui.ProgressBar.prototype.createThumb_=function(){return this.getDomHelper().createDom("div","progress-bar-thumb")};goog.ui.ProgressBar.prototype.attachEvents_=function(){goog.userAgent.IE&&7>goog.userAgent.VERSION&&goog.events.listen(this.getElement(),goog.events.EventType.RESIZE,this.updateUi_,!1,this)};goog.ui.ProgressBar.prototype.detachEvents_=function(){goog.userAgent.IE&&7>goog.userAgent.VERSION&&goog.events.unlisten(this.getElement(),goog.events.EventType.RESIZE,this.updateUi_,!1,this)};
goog.ui.ProgressBar.prototype.decorateInternal=function(b){goog.ui.ProgressBar.superClass_.decorateInternal.call(this,b);goog.dom.classes.add(this.getElement(),goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[this.orientation_]);b=goog.dom.getElementsByTagNameAndClass(null,"progress-bar-thumb",this.getElement())[0];b||(b=this.createThumb_(),this.getElement().appendChild(b));this.thumbElement_=b};goog.ui.ProgressBar.prototype.getValue=function(){return this.rangeModel_.getValue()};
goog.ui.ProgressBar.prototype.setValue=function(b){this.rangeModel_.setValue(b);this.getElement()&&this.setValueState_()};goog.ui.ProgressBar.prototype.setValueState_=function(){var b=this.getElement();goog.asserts.assert(b,"The progress bar DOM element cannot be null.");goog.a11y.aria.setState(b,"valuenow",this.getValue())};goog.ui.ProgressBar.prototype.getMinimum=function(){return this.rangeModel_.getMinimum()};
goog.ui.ProgressBar.prototype.setMinimum=function(b){this.rangeModel_.setMinimum(b);this.getElement()&&this.setMinimumState_()};goog.ui.ProgressBar.prototype.setMinimumState_=function(){var b=this.getElement();goog.asserts.assert(b,"The progress bar DOM element cannot be null.");goog.a11y.aria.setState(b,"valuemin",this.getMinimum())};goog.ui.ProgressBar.prototype.getMaximum=function(){return this.rangeModel_.getMaximum()};
goog.ui.ProgressBar.prototype.setMaximum=function(b){this.rangeModel_.setMaximum(b);this.getElement()&&this.setMaximumState_()};goog.ui.ProgressBar.prototype.setMaximumState_=function(){var b=this.getElement();goog.asserts.assert(b,"The progress bar DOM element cannot be null.");goog.a11y.aria.setState(b,"valuemax",this.getMaximum())};goog.ui.ProgressBar.prototype.orientation_=goog.ui.ProgressBar.Orientation.HORIZONTAL;goog.ui.ProgressBar.prototype.handleChange_=function(b){this.updateUi_();this.dispatchEvent(goog.ui.Component.EventType.CHANGE)};
goog.ui.ProgressBar.prototype.updateUi_=function(){if(this.thumbElement_){var b=this.getMinimum(),c=this.getMaximum(),b=(this.getValue()-b)/(c-b),c=Math.round(100*b);this.orientation_==goog.ui.ProgressBar.Orientation.VERTICAL?goog.userAgent.IE&&7>goog.userAgent.VERSION?(this.thumbElement_.style.top=0,this.thumbElement_.style.height="100%",c=this.thumbElement_.offsetHeight,b=Math.round(b*c),this.thumbElement_.style.top=c-b+"px",this.thumbElement_.style.height=b+"px"):(this.thumbElement_.style.top=
100-c+"%",this.thumbElement_.style.height=c+"%"):this.thumbElement_.style.width=c+"%"}};goog.ui.ProgressBar.prototype.initializeUi_=function(){var b=this.thumbElement_.style;this.orientation_==goog.ui.ProgressBar.Orientation.VERTICAL?(b.left=0,b.width="100%"):(b.top=b.left=0,b.height="100%")};
goog.ui.ProgressBar.prototype.setOrientation=function(b){if(this.orientation_!=b){var c=goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[this.orientation_],d=goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[b];this.orientation_=b;this.getElement()&&(goog.dom.classes.swap(this.getElement(),c,d),this.initializeUi_(),this.updateUi_())}};goog.ui.ProgressBar.prototype.getOrientation=function(){return this.orientation_};
goog.ui.ProgressBar.prototype.disposeInternal=function(){this.detachEvents_();goog.ui.ProgressBar.superClass_.disposeInternal.call(this);this.thumbElement_=null;this.rangeModel_.dispose()};goog.ui.ProgressBar.prototype.getStep=function(){return this.rangeModel_.getStep()};goog.ui.ProgressBar.prototype.setStep=function(b){this.rangeModel_.setStep(b)};goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,
X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,
SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,PHANTOM:255};
goog.events.KeyCodes.isTextModifyingKeyEvent=function(b){if(b.altKey&&!b.ctrlKey||b.metaKey||b.keyCode>=goog.events.KeyCodes.F1&&b.keyCode<=goog.events.KeyCodes.F12)return!1;switch(b.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return!1;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return!goog.userAgent.GECKO;
default:return b.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||b.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}};
goog.events.KeyCodes.firesKeyPressEvent=function(b,c,d,e,f){if(!(goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525")))return!0;if(goog.userAgent.MAC&&f)return goog.events.KeyCodes.isCharacterKey(b);if(f&&!e||!d&&(c==goog.events.KeyCodes.CTRL||c==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&c==goog.events.KeyCodes.META))return!1;if(goog.userAgent.WEBKIT&&e&&d)switch(b){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return!1}if(goog.userAgent.IE&&
e&&c==b)return!1;switch(b){case goog.events.KeyCodes.ENTER:return!(goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9));case goog.events.KeyCodes.ESC:return!goog.userAgent.WEBKIT}return goog.events.KeyCodes.isCharacterKey(b)};
goog.events.KeyCodes.isCharacterKey=function(b){if(b>=goog.events.KeyCodes.ZERO&&b<=goog.events.KeyCodes.NINE||b>=goog.events.KeyCodes.NUM_ZERO&&b<=goog.events.KeyCodes.NUM_MULTIPLY||b>=goog.events.KeyCodes.A&&b<=goog.events.KeyCodes.Z||goog.userAgent.WEBKIT&&0==b)return!0;switch(b){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:return!0;
default:return!1}};goog.events.KeyCodes.normalizeGeckoKeyCode=function(b){switch(b){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return b}};goog.events.KeyHandler=function(b,c){goog.events.EventTarget.call(this);b&&this.attach(b,c)};goog.inherits(goog.events.KeyHandler,goog.events.EventTarget);goog.events.KeyHandler.prototype.element_=null;goog.events.KeyHandler.prototype.keyPressKey_=null;goog.events.KeyHandler.prototype.keyDownKey_=null;goog.events.KeyHandler.prototype.keyUpKey_=null;goog.events.KeyHandler.prototype.lastKey_=-1;goog.events.KeyHandler.prototype.keyCode_=-1;goog.events.KeyHandler.prototype.altKey_=!1;
goog.events.KeyHandler.EventType={KEY:"key"};
goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,
63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT};
goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,
"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.USES_KEYDOWN_=goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525");goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO;
goog.events.KeyHandler.prototype.handleKeyDown_=function(b){goog.userAgent.WEBKIT&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!b.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!b.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!b.metaKey)&&(this.keyCode_=this.lastKey_=-1);-1==this.lastKey_&&(b.ctrlKey&&b.keyCode!=goog.events.KeyCodes.CTRL?this.lastKey_=goog.events.KeyCodes.CTRL:b.altKey&&b.keyCode!=goog.events.KeyCodes.ALT?this.lastKey_=goog.events.KeyCodes.ALT:b.metaKey&&
b.keyCode!=goog.events.KeyCodes.META&&(this.lastKey_=goog.events.KeyCodes.META));goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(b.keyCode,this.lastKey_,b.shiftKey,b.ctrlKey,b.altKey)?this.handleEvent(b):(this.keyCode_=goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(b.keyCode):b.keyCode,goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(this.altKey_=b.altKey))};goog.events.KeyHandler.prototype.resetState=function(){this.keyCode_=this.lastKey_=-1};
goog.events.KeyHandler.prototype.handleKeyup_=function(b){this.resetState();this.altKey_=b.altKey};
goog.events.KeyHandler.prototype.handleEvent=function(b){var c=b.getBrowserEvent(),d,e,f=c.altKey;goog.userAgent.IE&&b.type==goog.events.EventType.KEYPRESS?(d=this.keyCode_,e=d!=goog.events.KeyCodes.ENTER&&d!=goog.events.KeyCodes.ESC?c.keyCode:0):goog.userAgent.WEBKIT&&b.type==goog.events.EventType.KEYPRESS?(d=this.keyCode_,e=0<=c.charCode&&63232>c.charCode&&goog.events.KeyCodes.isCharacterKey(d)?c.charCode:0):goog.userAgent.OPERA?(d=this.keyCode_,e=goog.events.KeyCodes.isCharacterKey(d)?c.keyCode:
0):(d=c.keyCode||this.keyCode_,e=c.charCode||0,goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(f=this.altKey_),goog.userAgent.MAC&&(e==goog.events.KeyCodes.QUESTION_MARK&&d==goog.events.KeyCodes.WIN_KEY)&&(d=goog.events.KeyCodes.SLASH));var g=d,h=c.keyIdentifier;d?63232<=d&&d in goog.events.KeyHandler.safariKey_?g=goog.events.KeyHandler.safariKey_[d]:25==d&&b.shiftKey&&(g=9):h&&h in goog.events.KeyHandler.keyIdentifier_&&(g=goog.events.KeyHandler.keyIdentifier_[h]);b=g==this.lastKey_;this.lastKey_=
g;c=new goog.events.KeyEvent(g,e,b,c);c.altKey=f;this.dispatchEvent(c)};goog.events.KeyHandler.prototype.getElement=function(){return this.element_};
goog.events.KeyHandler.prototype.attach=function(b,c){this.keyUpKey_&&this.detach();this.element_=b;this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,c);this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,c,this);this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,c,this)};
goog.events.KeyHandler.prototype.detach=function(){this.keyPressKey_&&(goog.events.unlistenByKey(this.keyPressKey_),goog.events.unlistenByKey(this.keyDownKey_),goog.events.unlistenByKey(this.keyUpKey_),this.keyUpKey_=this.keyDownKey_=this.keyPressKey_=null);this.element_=null;this.keyCode_=this.lastKey_=-1};goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this);this.detach()};
goog.events.KeyEvent=function(b,c,d,e){goog.events.BrowserEvent.call(this,e);this.type=goog.events.KeyHandler.EventType.KEY;this.keyCode=b;this.charCode=c;this.repeat=d};goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent);goog.fx.AnimationQueue=function(){goog.fx.TransitionBase.call(this);this.queue=[]};goog.inherits(goog.fx.AnimationQueue,goog.fx.TransitionBase);goog.fx.AnimationQueue.prototype.add=function(b){goog.asserts.assert(this.isStopped(),"Not allowed to add animations to a running animation queue.");goog.array.contains(this.queue,b)||(this.queue.push(b),goog.events.listen(b,goog.fx.Transition.EventType.FINISH,this.onAnimationFinish,!1,this))};
goog.fx.AnimationQueue.prototype.remove=function(b){goog.asserts.assert(this.isStopped(),"Not allowed to remove animations from a running animation queue.");goog.array.remove(this.queue,b)&&goog.events.unlisten(b,goog.fx.Transition.EventType.FINISH,this.onAnimationFinish,!1,this)};goog.fx.AnimationQueue.prototype.disposeInternal=function(){goog.array.forEach(this.queue,function(b){b.dispose()});this.queue.length=0;goog.fx.AnimationQueue.superClass_.disposeInternal.call(this)};
goog.fx.AnimationParallelQueue=function(){goog.fx.AnimationQueue.call(this);this.finishedCounter_=0};goog.inherits(goog.fx.AnimationParallelQueue,goog.fx.AnimationQueue);
goog.fx.AnimationParallelQueue.prototype.play=function(b){if(0==this.queue.length)return!1;if(b||this.isStopped())this.finishedCounter_=0,this.onBegin();else if(this.isPlaying())return!1;this.onPlay();if(this.isPaused())this.onResume();var c=this.isPaused()&&!b;this.startTime=goog.now();this.endTime=null;this.setStatePlaying();goog.array.forEach(this.queue,function(d){c&&!d.isPaused()||d.play(b)});return!0};
goog.fx.AnimationParallelQueue.prototype.pause=function(){this.isPlaying()&&(goog.array.forEach(this.queue,function(b){b.isPlaying()&&b.pause()}),this.setStatePaused(),this.onPause())};goog.fx.AnimationParallelQueue.prototype.stop=function(b){goog.array.forEach(this.queue,function(c){c.isStopped()||c.stop(b)});this.setStateStopped();this.endTime=goog.now();this.onStop();this.onEnd()};
goog.fx.AnimationParallelQueue.prototype.onAnimationFinish=function(b){this.finishedCounter_++;this.finishedCounter_==this.queue.length&&(this.endTime=goog.now(),this.setStateStopped(),this.onFinish(),this.onEnd())};goog.fx.AnimationSerialQueue=function(){goog.fx.AnimationQueue.call(this);this.current_=0};goog.inherits(goog.fx.AnimationSerialQueue,goog.fx.AnimationQueue);
goog.fx.AnimationSerialQueue.prototype.play=function(b){if(0==this.queue.length)return!1;if(b||this.isStopped())this.current_<this.queue.length&&!this.queue[this.current_].isStopped()&&this.queue[this.current_].stop(!1),this.current_=0,this.onBegin();else if(this.isPlaying())return!1;this.onPlay();if(this.isPaused())this.onResume();this.startTime=goog.now();this.endTime=null;this.setStatePlaying();this.queue[this.current_].play(b);return!0};
goog.fx.AnimationSerialQueue.prototype.pause=function(){this.isPlaying()&&(this.queue[this.current_].pause(),this.setStatePaused(),this.onPause())};goog.fx.AnimationSerialQueue.prototype.stop=function(b){this.setStateStopped();this.endTime=goog.now();if(b)for(b=this.current_;b<this.queue.length;++b){var c=this.queue[b];c.isStopped()&&c.play();c.isStopped()||c.stop(!0)}else this.current_<this.queue.length&&this.queue[this.current_].stop(!1);this.onStop();this.onEnd()};
goog.fx.AnimationSerialQueue.prototype.onAnimationFinish=function(b){this.isPlaying()&&(this.current_++,this.current_<this.queue.length?this.queue[this.current_].play():(this.endTime=goog.now(),this.setStateStopped(),this.onFinish(),this.onEnd()))};goog.events.MouseWheelHandler=function(b,c){goog.events.EventTarget.call(this);this.element_=b;var d=goog.dom.isElement(this.element_)?this.element_:this.element_?this.element_.body:null;this.isRtl_=!!d&&goog.style.isRightToLeft(d);this.listenKey_=goog.events.listen(this.element_,goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel",this,c)};goog.inherits(goog.events.MouseWheelHandler,goog.events.EventTarget);goog.events.MouseWheelHandler.EventType={MOUSEWHEEL:"mousewheel"};
goog.events.MouseWheelHandler.prototype.setMaxDeltaX=function(b){this.maxDeltaX_=b};goog.events.MouseWheelHandler.prototype.setMaxDeltaY=function(b){this.maxDeltaY_=b};
goog.events.MouseWheelHandler.prototype.handleEvent=function(b){var c=0,d=0,e=0;b=b.getBrowserEvent();if("mousewheel"==b.type){d=1;if(goog.userAgent.IE||goog.userAgent.WEBKIT&&(goog.userAgent.WINDOWS||goog.userAgent.isVersionOrHigher("532.0")))d=40;e=goog.events.MouseWheelHandler.smartScale_(-b.wheelDelta,d);goog.isDef(b.wheelDeltaX)?(c=goog.events.MouseWheelHandler.smartScale_(-b.wheelDeltaX,d),d=goog.events.MouseWheelHandler.smartScale_(-b.wheelDeltaY,d)):d=e}else e=b.detail,100<e?e=3:-100>e&&(e=
-3),goog.isDef(b.axis)&&b.axis===b.HORIZONTAL_AXIS?c=e:d=e;goog.isNumber(this.maxDeltaX_)&&(c=goog.math.clamp(c,-this.maxDeltaX_,this.maxDeltaX_));goog.isNumber(this.maxDeltaY_)&&(d=goog.math.clamp(d,-this.maxDeltaY_,this.maxDeltaY_));this.isRtl_&&(c=-c);c=new goog.events.MouseWheelEvent(e,b,c,d);this.dispatchEvent(c)};goog.events.MouseWheelHandler.smartScale_=function(b,c){return goog.userAgent.WEBKIT&&(goog.userAgent.MAC||goog.userAgent.LINUX)&&0!=b%c?b:b/c};
goog.events.MouseWheelHandler.prototype.disposeInternal=function(){goog.events.MouseWheelHandler.superClass_.disposeInternal.call(this);goog.events.unlistenByKey(this.listenKey_);this.listenKey_=null};goog.events.MouseWheelEvent=function(b,c,d,e){goog.events.BrowserEvent.call(this,c);this.type=goog.events.MouseWheelHandler.EventType.MOUSEWHEEL;this.detail=b;this.deltaX=d;this.deltaY=e};goog.inherits(goog.events.MouseWheelEvent,goog.events.BrowserEvent);goog.ui.SliderBase=function(b){goog.ui.Component.call(this,b);this.additionalAnimations_=null;this.rangeModel=new goog.ui.RangeModel;goog.events.listen(this.rangeModel,goog.ui.Component.EventType.CHANGE,this.handleRangeModelChange,!1,this)};goog.inherits(goog.ui.SliderBase,goog.ui.Component);
goog.ui.SliderBase.EventType={DRAG_VALUE_START:goog.events.getUniqueId("dragvaluestart"),DRAG_VALUE_END:goog.events.getUniqueId("dragvalueend"),DRAG_EXTENT_START:goog.events.getUniqueId("dragextentstart"),DRAG_EXTENT_END:goog.events.getUniqueId("dragextentend"),DRAG_START:goog.events.getUniqueId("dragstart"),DRAG_END:goog.events.getUniqueId("dragend")};goog.ui.SliderBase.Orientation={VERTICAL:"vertical",HORIZONTAL:"horizontal"};goog.ui.SliderBase.prototype.orientation_=goog.ui.SliderBase.Orientation.HORIZONTAL;
goog.ui.SliderBase.MOUSE_DOWN_INCREMENT_INTERVAL_=200;goog.ui.SliderBase.ANIMATION_INTERVAL_=100;goog.ui.SliderBase.prototype.isAnimating_=!1;goog.ui.SliderBase.prototype.moveToPointEnabled_=!1;goog.ui.SliderBase.prototype.blockIncrement_=10;goog.ui.SliderBase.prototype.minExtent_=0;goog.ui.SliderBase.prototype.isHandleMouseWheel_=!0;goog.ui.SliderBase.prototype.enabled_=!0;goog.ui.SliderBase.prototype.flipForRtl_=!1;goog.ui.SliderBase.prototype.enableFlipForRtl=function(b){this.flipForRtl_=b};
goog.ui.SliderBase.prototype.createDom=function(){goog.ui.SliderBase.superClass_.createDom.call(this);var b=this.getDomHelper().createDom("div",this.getCssClass(this.orientation_));this.decorateInternal(b)};goog.ui.SliderBase.SLIDER_DRAGGING_CSS_CLASS_="goog-slider-dragging";goog.ui.SliderBase.THUMB_DRAGGING_CSS_CLASS_="goog-slider-thumb-dragging";goog.ui.SliderBase.DISABLED_CSS_CLASS_="goog-slider-disabled";
goog.ui.SliderBase.prototype.decorateInternal=function(b){goog.ui.SliderBase.superClass_.decorateInternal.call(this,b);goog.dom.classes.add(b,this.getCssClass(this.orientation_));this.createThumbs();this.setAriaRoles()};
goog.ui.SliderBase.prototype.enterDocument=function(){goog.ui.SliderBase.superClass_.enterDocument.call(this);this.valueDragger_=new goog.fx.Dragger(this.valueThumb);this.extentDragger_=new goog.fx.Dragger(this.extentThumb);this.valueDragger_.enableRightPositioningForRtl(this.flipForRtl_);this.extentDragger_.enableRightPositioningForRtl(this.flipForRtl_);this.valueDragger_.defaultAction=this.extentDragger_.defaultAction=goog.nullFunction;this.keyHandler_=new goog.events.KeyHandler(this.getElement());
this.enableEventHandlers_(!0);this.getElement().tabIndex=0;this.updateUi_()};
goog.ui.SliderBase.prototype.enableEventHandlers_=function(b){b?(this.getHandler().listen(this.valueDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).listen(this.extentDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).listen(this.valueDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).listen(this.extentDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).listen(this.keyHandler_,
goog.events.KeyHandler.EventType.KEY,this.handleKeyDown_).listen(this.getElement(),goog.events.EventType.MOUSEDOWN,this.handleMouseDown_),this.isHandleMouseWheel()&&this.enableMouseWheelHandling_(!0)):(this.getHandler().unlisten(this.valueDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).unlisten(this.extentDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).unlisten(this.valueDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).unlisten(this.extentDragger_,
[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).unlisten(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.handleKeyDown_).unlisten(this.getElement(),goog.events.EventType.MOUSEDOWN,this.handleMouseDown_),this.isHandleMouseWheel()&&this.enableMouseWheelHandling_(!1))};
goog.ui.SliderBase.prototype.exitDocument=function(){goog.ui.SliderBase.superClass_.exitDocument.call(this);goog.disposeAll(this.valueDragger_,this.extentDragger_,this.keyHandler_,this.mouseWheelHandler_)};
goog.ui.SliderBase.prototype.handleBeforeDrag_=function(b){var c=b.dragger==this.valueDragger_?this.valueThumb:this.extentThumb,d;this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(d=this.getElement().clientHeight-c.offsetHeight,d=(d-b.top)/d*(this.getMaximum()-this.getMinimum())+this.getMinimum()):(d=this.getElement().clientWidth-c.offsetWidth,d=b.left/d*(this.getMaximum()-this.getMinimum())+this.getMinimum());d=b.dragger==this.valueDragger_?Math.min(Math.max(d,this.getMinimum()),this.getValue()+
this.getExtent()):Math.min(Math.max(d,this.getValue()),this.getMaximum());this.setThumbPosition_(c,d)};
goog.ui.SliderBase.prototype.handleThumbDragStartEnd_=function(b){var c=b.type==goog.fx.Dragger.EventType.START;goog.dom.classes.enable(this.getElement(),goog.ui.SliderBase.SLIDER_DRAGGING_CSS_CLASS_,c);goog.dom.classes.enable(b.target.handle,goog.ui.SliderBase.THUMB_DRAGGING_CSS_CLASS_,c);b=b.dragger==this.valueDragger_;c?(this.dispatchEvent(goog.ui.SliderBase.EventType.DRAG_START),this.dispatchEvent(b?goog.ui.SliderBase.EventType.DRAG_VALUE_START:goog.ui.SliderBase.EventType.DRAG_EXTENT_START)):
(this.dispatchEvent(goog.ui.SliderBase.EventType.DRAG_END),this.dispatchEvent(b?goog.ui.SliderBase.EventType.DRAG_VALUE_END:goog.ui.SliderBase.EventType.DRAG_EXTENT_END))};
goog.ui.SliderBase.prototype.handleKeyDown_=function(b){var c=!0;switch(b.keyCode){case goog.events.KeyCodes.HOME:this.animatedSetValue(this.getMinimum());break;case goog.events.KeyCodes.END:this.animatedSetValue(this.getMaximum());break;case goog.events.KeyCodes.PAGE_UP:this.moveThumbs(this.getBlockIncrement());break;case goog.events.KeyCodes.PAGE_DOWN:this.moveThumbs(-this.getBlockIncrement());break;case goog.events.KeyCodes.LEFT:var d=this.flipForRtl_&&this.isRightToLeft()?1:-1;this.moveThumbs(b.shiftKey?
d*this.getBlockIncrement():d*this.getUnitIncrement());break;case goog.events.KeyCodes.DOWN:this.moveThumbs(b.shiftKey?-this.getBlockIncrement():-this.getUnitIncrement());break;case goog.events.KeyCodes.RIGHT:d=this.flipForRtl_&&this.isRightToLeft()?-1:1;this.moveThumbs(b.shiftKey?d*this.getBlockIncrement():d*this.getUnitIncrement());break;case goog.events.KeyCodes.UP:this.moveThumbs(b.shiftKey?this.getBlockIncrement():this.getUnitIncrement());break;default:c=!1}c&&b.preventDefault()};
goog.ui.SliderBase.prototype.handleMouseDown_=function(b){this.getElement().focus&&this.getElement().focus();var c=b.target;goog.dom.contains(this.valueThumb,c)||goog.dom.contains(this.extentThumb,c)||(this.moveToPointEnabled_?this.animatedSetValue(this.getValueFromMousePosition(b)):this.startBlockIncrementing_(b))};goog.ui.SliderBase.prototype.handleMouseWheel_=function(b){this.moveThumbs((0<b.detail?-1:1)*this.getUnitIncrement());b.preventDefault()};
goog.ui.SliderBase.prototype.startBlockIncrementing_=function(b){this.storeMousePos_(b);this.thumbToMove_=this.getClosestThumb_(this.getValueFromMousePosition(b));this.incrementing_=this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?this.lastMousePosition_<this.thumbToMove_.offsetTop:this.lastMousePosition_>this.getOffsetStart_(this.thumbToMove_)+this.thumbToMove_.offsetWidth;b=goog.dom.getOwnerDocument(this.getElement());this.getHandler().listen(b,goog.events.EventType.MOUSEUP,this.stopBlockIncrementing_,
!0).listen(this.getElement(),goog.events.EventType.MOUSEMOVE,this.storeMousePos_);this.incTimer_||(this.incTimer_=new goog.Timer(goog.ui.SliderBase.MOUSE_DOWN_INCREMENT_INTERVAL_),this.getHandler().listen(this.incTimer_,goog.Timer.TICK,this.handleTimerTick_));this.handleTimerTick_();this.incTimer_.start()};
goog.ui.SliderBase.prototype.handleTimerTick_=function(){var b;if(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL){var c=this.lastMousePosition_,d=this.thumbToMove_.offsetTop;this.incrementing_?c<d&&(b=this.getThumbPosition_(this.thumbToMove_)+this.getBlockIncrement()):c>d+this.thumbToMove_.offsetHeight&&(b=this.getThumbPosition_(this.thumbToMove_)-this.getBlockIncrement())}else c=this.lastMousePosition_,d=this.getOffsetStart_(this.thumbToMove_),this.incrementing_?c>d+this.thumbToMove_.offsetWidth&&
(b=this.getThumbPosition_(this.thumbToMove_)+this.getBlockIncrement()):c<d&&(b=this.getThumbPosition_(this.thumbToMove_)-this.getBlockIncrement());goog.isDef(b)&&this.setThumbPosition_(this.thumbToMove_,b)};
goog.ui.SliderBase.prototype.stopBlockIncrementing_=function(){this.incTimer_&&this.incTimer_.stop();var b=goog.dom.getOwnerDocument(this.getElement());this.getHandler().unlisten(b,goog.events.EventType.MOUSEUP,this.stopBlockIncrementing_,!0).unlisten(this.getElement(),goog.events.EventType.MOUSEMOVE,this.storeMousePos_)};
goog.ui.SliderBase.prototype.getRelativeMousePos_=function(b){b=goog.style.getRelativePosition(b,this.getElement());return this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?b.y:this.flipForRtl_&&this.isRightToLeft()?this.getElement().clientWidth-b.x:b.x};goog.ui.SliderBase.prototype.storeMousePos_=function(b){this.lastMousePosition_=this.getRelativeMousePos_(b)};
goog.ui.SliderBase.prototype.getValueFromMousePosition=function(b){var c=this.getMinimum(),d=this.getMaximum();if(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL){var e=this.valueThumb.offsetHeight,f=this.getElement().clientHeight-e;b=this.getRelativeMousePos_(b)-e/2;return(d-c)*(f-b)/f+c}e=this.valueThumb.offsetWidth;f=this.getElement().clientWidth-e;b=this.getRelativeMousePos_(b)-e/2;return(d-c)*b/f+c};goog.ui.SliderBase.prototype.getValueFromMousePosition_=goog.ui.SliderBase.prototype.getValueFromMousePosition;
goog.ui.SliderBase.prototype.getThumbPosition_=function(b){if(b==this.valueThumb)return this.rangeModel.getValue();if(b==this.extentThumb)return this.rangeModel.getValue()+this.rangeModel.getExtent();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");};goog.ui.SliderBase.prototype.isDragging=function(){return this.valueDragger_.isDragging()||this.extentDragger_.isDragging()};
goog.ui.SliderBase.prototype.moveThumbs=function(b){var c=this.getThumbPosition_(this.valueThumb)+b;b=this.getThumbPosition_(this.extentThumb)+b;c=goog.math.clamp(c,this.getMinimum(),this.getMaximum()-this.minExtent_);b=goog.math.clamp(b,this.getMinimum()+this.minExtent_,this.getMaximum());this.setValueAndExtent(c,b-c)};
goog.ui.SliderBase.prototype.setThumbPosition_=function(b,c){var d=this.rangeModel.roundToStepWithMin(c),e=b==this.valueThumb?d:this.rangeModel.getValue(),d=b==this.extentThumb?d:this.rangeModel.getValue()+this.rangeModel.getExtent();e>=this.getMinimum()&&(d>=e+this.minExtent_&&this.getMaximum()>=d)&&this.setValueAndExtent(e,d-e)};
goog.ui.SliderBase.prototype.setValueAndExtent=function(b,c){this.getMinimum()<=b&&(b<=this.getMaximum()-c&&this.minExtent_<=c&&c<=this.getMaximum()-b)&&(b!=this.getValue()||c!=this.getExtent())&&(this.rangeModel.setMute(!0),this.rangeModel.setExtent(0),this.rangeModel.setValue(b),this.rangeModel.setExtent(c),this.rangeModel.setMute(!1),this.handleRangeModelChange(null))};goog.ui.SliderBase.prototype.getMinimum=function(){return this.rangeModel.getMinimum()};
goog.ui.SliderBase.prototype.setMinimum=function(b){this.rangeModel.setMinimum(b)};goog.ui.SliderBase.prototype.getMaximum=function(){return this.rangeModel.getMaximum()};goog.ui.SliderBase.prototype.setMaximum=function(b){this.rangeModel.setMaximum(b)};goog.ui.SliderBase.prototype.getValueThumb=function(){return this.valueThumb};goog.ui.SliderBase.prototype.getExtentThumb=function(){return this.extentThumb};
goog.ui.SliderBase.prototype.getClosestThumb_=function(b){return b<=this.rangeModel.getValue()+this.rangeModel.getExtent()/2?this.valueThumb:this.extentThumb};goog.ui.SliderBase.prototype.handleRangeModelChange=function(b){this.updateUi_();this.updateAriaStates();this.dispatchEvent(goog.ui.Component.EventType.CHANGE)};
goog.ui.SliderBase.prototype.updateUi_=function(){if(this.valueThumb&&!this.isAnimating_){var b=this.getThumbCoordinateForValue(this.getThumbPosition_(this.valueThumb)),c=this.getThumbCoordinateForValue(this.getThumbPosition_(this.extentThumb));if(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL)this.valueThumb.style.top=b.y+"px",this.extentThumb.style.top=c.y+"px",this.rangeHighlight&&(b=this.calculateRangeHighlightPositioning_(c.y,b.y,this.valueThumb.offsetHeight),this.rangeHighlight.style.top=
b.offset+"px",this.rangeHighlight.style.height=b.size+"px");else{var d=this.flipForRtl_&&this.isRightToLeft()?"right":"left";this.valueThumb.style[d]=b.x+"px";this.extentThumb.style[d]=c.x+"px";this.rangeHighlight&&(b=this.calculateRangeHighlightPositioning_(b.x,c.x,this.valueThumb.offsetWidth),this.rangeHighlight.style[d]=b.offset+"px",this.rangeHighlight.style.width=b.size+"px")}}};
goog.ui.SliderBase.prototype.calculateRangeHighlightPositioning_=function(b,c,d){var e=Math.ceil(d/2);return{offset:b+e,size:Math.max(c-b+d-2*e,0)}};
goog.ui.SliderBase.prototype.getThumbCoordinateForValue=function(b){var c=new goog.math.Coordinate;if(this.valueThumb){var d=this.getMinimum(),e=this.getMaximum();b=b==d&&d==e?0:(b-d)/(e-d);this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(d=this.valueThumb.offsetHeight,d=this.getElement().clientHeight-d,b=Math.round(b*d),c.x=this.getOffsetStart_(this.valueThumb),c.y=d-b):(d=this.getElement().clientWidth-this.valueThumb.offsetWidth,b=Math.round(b*d),c.x=b,c.y=this.valueThumb.offsetTop)}return c};
goog.ui.SliderBase.prototype.getThumbCoordinateForValue_=goog.ui.SliderBase.prototype.getThumbCoordinateForValue;
goog.ui.SliderBase.prototype.animatedSetValue=function(b){b=goog.math.clamp(b,this.getMinimum(),this.getMaximum());this.isAnimating_&&this.currentAnimation_.stop(!0);var c=new goog.fx.AnimationParallelQueue,d,e=this.getClosestThumb_(b),f=this.getValue(),g=this.getExtent(),h=this.getThumbPosition_(e),k=this.getThumbCoordinateForValue(h);d=this.getStep();Math.abs(b-h)<d&&(b=goog.math.clamp(h+(b>h?d:-d),this.getMinimum(),this.getMaximum()));this.setThumbPosition_(e,b);h=this.getThumbCoordinateForValue(this.getThumbPosition_(e));
d=this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?[this.getOffsetStart_(e),h.y]:[h.x,e.offsetTop];k=new goog.fx.dom.Slide(e,[k.x,k.y],d,goog.ui.SliderBase.ANIMATION_INTERVAL_);k.enableRightPositioningForRtl(this.flipForRtl_);c.add(k);this.rangeHighlight&&this.addRangeHighlightAnimations_(e,f,g,h,c);this.additionalAnimations_&&(b=this.additionalAnimations_.createAnimations(f,b,goog.ui.SliderBase.ANIMATION_INTERVAL_),goog.array.forEach(b,function(b){c.add(b)}));this.currentAnimation_=c;this.getHandler().listen(c,
goog.fx.Transition.EventType.END,this.endAnimation_);this.isAnimating_=!0;c.play(!1)};goog.ui.SliderBase.prototype.isAnimating=function(){return this.isAnimating_};goog.ui.SliderBase.prototype.setAdditionalAnimations=function(b){this.additionalAnimations_=b};
goog.ui.SliderBase.prototype.addRangeHighlightAnimations_=function(b,c,d,e,f){var g=this.getThumbCoordinateForValue(c),h=this.getThumbCoordinateForValue(c+d);c=g;d=h;b==this.valueThumb?c=e:d=e;this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(b=this.calculateRangeHighlightPositioning_(h.y,g.y,this.valueThumb.offsetHeight),g=this.calculateRangeHighlightPositioning_(d.y,c.y,this.valueThumb.offsetHeight),e=new goog.fx.dom.Slide(this.rangeHighlight,[this.getOffsetStart_(this.rangeHighlight),
b.offset],[this.getOffsetStart_(this.rangeHighlight),g.offset],goog.ui.SliderBase.ANIMATION_INTERVAL_),b=new goog.fx.dom.ResizeHeight(this.rangeHighlight,b.size,g.size,goog.ui.SliderBase.ANIMATION_INTERVAL_)):(b=this.calculateRangeHighlightPositioning_(g.x,h.x,this.valueThumb.offsetWidth),g=this.calculateRangeHighlightPositioning_(c.x,d.x,this.valueThumb.offsetWidth),e=new goog.fx.dom.Slide(this.rangeHighlight,[b.offset,this.rangeHighlight.offsetTop],[g.offset,this.rangeHighlight.offsetTop],goog.ui.SliderBase.ANIMATION_INTERVAL_),
b=new goog.fx.dom.ResizeWidth(this.rangeHighlight,b.size,g.size,goog.ui.SliderBase.ANIMATION_INTERVAL_));e.enableRightPositioningForRtl(this.flipForRtl_);b.enableRightPositioningForRtl(this.flipForRtl_);f.add(e);f.add(b)};goog.ui.SliderBase.prototype.endAnimation_=function(b){this.isAnimating_=!1};
goog.ui.SliderBase.prototype.setOrientation=function(b){if(this.orientation_!=b){var c=this.getCssClass(this.orientation_),d=this.getCssClass(b);this.orientation_=b;this.getElement()&&(goog.dom.classes.swap(this.getElement(),c,d),b=this.flipForRtl_&&this.isRightToLeft()?"right":"left",this.valueThumb.style[b]=this.valueThumb.style.top="",this.extentThumb.style[b]=this.extentThumb.style.top="",this.rangeHighlight&&(this.rangeHighlight.style[b]=this.rangeHighlight.style.top="",this.rangeHighlight.style.width=
this.rangeHighlight.style.height=""),this.updateUi_())}};goog.ui.SliderBase.prototype.getOrientation=function(){return this.orientation_};
goog.ui.SliderBase.prototype.disposeInternal=function(){goog.ui.SliderBase.superClass_.disposeInternal.call(this);this.incTimer_&&this.incTimer_.dispose();delete this.incTimer_;this.currentAnimation_&&this.currentAnimation_.dispose();delete this.currentAnimation_;delete this.valueThumb;delete this.extentThumb;this.rangeHighlight&&delete this.rangeHighlight;this.rangeModel.dispose();delete this.rangeModel;this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_);this.mouseWheelHandler_&&
(this.mouseWheelHandler_.dispose(),delete this.mouseWheelHandler_);this.valueDragger_&&(this.valueDragger_.dispose(),delete this.valueDragger_);this.extentDragger_&&(this.extentDragger_.dispose(),delete this.extentDragger_)};goog.ui.SliderBase.prototype.getBlockIncrement=function(){return this.blockIncrement_};goog.ui.SliderBase.prototype.setBlockIncrement=function(b){this.blockIncrement_=b};goog.ui.SliderBase.prototype.setMinExtent=function(b){this.minExtent_=b};
goog.ui.SliderBase.prototype.unitIncrement_=1;goog.ui.SliderBase.prototype.getUnitIncrement=function(){return this.unitIncrement_};goog.ui.SliderBase.prototype.setUnitIncrement=function(b){this.unitIncrement_=b};goog.ui.SliderBase.prototype.getStep=function(){return this.rangeModel.getStep()};goog.ui.SliderBase.prototype.setStep=function(b){this.rangeModel.setStep(b)};goog.ui.SliderBase.prototype.getMoveToPointEnabled=function(){return this.moveToPointEnabled_};
goog.ui.SliderBase.prototype.setMoveToPointEnabled=function(b){this.moveToPointEnabled_=b};goog.ui.SliderBase.prototype.getValue=function(){return this.rangeModel.getValue()};goog.ui.SliderBase.prototype.setValue=function(b){this.setThumbPosition_(this.valueThumb,b)};goog.ui.SliderBase.prototype.getExtent=function(){return this.rangeModel.getExtent()};goog.ui.SliderBase.prototype.setExtent=function(b){this.setThumbPosition_(this.extentThumb,this.rangeModel.getValue()+b)};
goog.ui.SliderBase.prototype.setVisible=function(b){goog.style.setElementShown(this.getElement(),b);b&&this.updateUi_()};goog.ui.SliderBase.prototype.setAriaRoles=function(){var b=this.getElement();goog.asserts.assert(b,"The DOM element for the slider base cannot be null.");goog.a11y.aria.setRole(b,goog.a11y.aria.Role.SLIDER);this.updateAriaStates()};
goog.ui.SliderBase.prototype.updateAriaStates=function(){var b=this.getElement();b&&(goog.a11y.aria.setState(b,goog.a11y.aria.State.VALUEMIN,this.getMinimum()),goog.a11y.aria.setState(b,goog.a11y.aria.State.VALUEMAX,this.getMaximum()),goog.a11y.aria.setState(b,goog.a11y.aria.State.VALUENOW,this.getValue()))};goog.ui.SliderBase.prototype.setHandleMouseWheel=function(b){this.isInDocument()&&b!=this.isHandleMouseWheel()&&this.enableMouseWheelHandling_(b);this.isHandleMouseWheel_=b};
goog.ui.SliderBase.prototype.isHandleMouseWheel=function(){return this.isHandleMouseWheel_};goog.ui.SliderBase.prototype.enableMouseWheelHandling_=function(b){b?(this.mouseWheelHandler_||(this.mouseWheelHandler_=new goog.events.MouseWheelHandler(this.getElement())),this.getHandler().listen(this.mouseWheelHandler_,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.handleMouseWheel_)):this.getHandler().unlisten(this.mouseWheelHandler_,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.handleMouseWheel_)};
goog.ui.SliderBase.prototype.setEnabled=function(b){this.enabled_!=b&&this.dispatchEvent(b?goog.ui.Component.EventType.ENABLE:goog.ui.Component.EventType.DISABLE)&&(this.enabled_=b,this.enableEventHandlers_(b),b||this.stopBlockIncrementing_(),goog.dom.classes.enable(this.getElement(),goog.ui.SliderBase.DISABLED_CSS_CLASS_,!b))};goog.ui.SliderBase.prototype.isEnabled=function(){return this.enabled_};
goog.ui.SliderBase.prototype.getOffsetStart_=function(b){return this.flipForRtl_?goog.style.bidi.getOffsetStart(b):b.offsetLeft};goog.ui.SliderBase.AnimationFactory=function(){};goog.ui.Slider=function(b){goog.ui.SliderBase.call(this,b);this.rangeModel.setExtent(0)};goog.inherits(goog.ui.Slider,goog.ui.SliderBase);goog.ui.Slider.Orientation=goog.ui.SliderBase.Orientation;goog.ui.Slider.CSS_CLASS_PREFIX="goog-slider";goog.ui.Slider.THUMB_CSS_CLASS=goog.ui.Slider.CSS_CLASS_PREFIX+"-thumb";goog.ui.Slider.prototype.getCssClass=function(b){return b==goog.ui.SliderBase.Orientation.VERTICAL?goog.ui.Slider.CSS_CLASS_PREFIX+"-vertical":goog.ui.Slider.CSS_CLASS_PREFIX+"-horizontal"};
goog.ui.Slider.prototype.createThumbs=function(){var b=this.getElement(),c=goog.dom.getElementsByTagNameAndClass(null,goog.ui.Slider.THUMB_CSS_CLASS,b)[0];c||(c=this.createThumb_(),b.appendChild(c));this.valueThumb=this.extentThumb=c};goog.ui.Slider.prototype.createThumb_=function(){var b=this.getDomHelper().createDom("div",goog.ui.Slider.THUMB_CSS_CLASS);goog.a11y.aria.setRole(b,goog.a11y.aria.Role.BUTTON);return b};goog.fx.DragDropGroup=function(){goog.fx.AbstractDragDrop.call(this)};goog.inherits(goog.fx.DragDropGroup,goog.fx.AbstractDragDrop);goog.fx.DragDropGroup.prototype.addItem=function(b,c){var d=new goog.fx.DragDropItem(b,c);this.addDragDropItem(d)};goog.fx.DragDropGroup.prototype.addDragDropItem=function(b){b.setParent(this);this.items_.push(b);this.isInitialized()&&this.initItem(b)};
goog.fx.DragDropGroup.prototype.removeItem=function(b){b=goog.dom.getElement(b);for(var c,d=0;c=this.items_[d];d++)if(c.element==b){this.items_.splice(d,1);this.disposeItem(c);break}};goog.fx.DragDropGroup.prototype.setSelection=function(b){};goog.fx.easing={};goog.fx.easing.easeIn=function(b){return b*b*b};goog.fx.easing.easeOut=function(b){return 1-Math.pow(1-b,3)};goog.fx.easing.inAndOut=function(b){return 3*b*b-2*b*b*b};var utils=function(){};utils.ajax=function(){};utils.convert=function(){};utils.css=function(){};utils.dom=function(){};utils.gui=function(){};utils.oo=function(){};utils.fx=function(){};utils.array=function(){};utils.globals=function(){};goog.exportSymbol("utils.globals",utils.globals);utils.globals.fontSizeS=10;utils.globals.fontSizeM=13;utils.globals.fontSizeL=16;utils.globals.fontFamily="Helvetica, Helvetica neue, Arial, sans-serif";utils.globals.animFast=200;utils.globals.animMedium=500;
utils.globals.animSlow=100;utils.fx.fadeTo=function(b,c,d,e){var f=b.style.opacity?parseInt(b.style.opacity,10):1;b=new goog.fx.dom.Fade(b,f,d,c);e&&b.addEventListener(goog.fx.Transition.EventType.END,function(b){e(b)});b.play()};goog.exportSymbol("utils.fx.fadeTo",utils.fx.fadeTo);utils.dom.addClass=function(b,c){b.className+=(0<b.className.length?" ":"")+c};goog.exportSymbol("utils.dom.addClass",utils.dom.addClass);utils.dom.debug=function(b){window.console&&console.log(b)};goog.exportSymbol("utils.dom.debug",utils.dom.debug);utils.dom.uniqueId=function(){function b(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};goog.exportSymbol("utils.dom.uniqueId",utils.dom.uniqueId);utils.dom.makeElement=function(b,c,d,e){if(!b)throw Error("utils.dom.makeElement: Cannot make element without a valid type.");c||(utils.dom.debug("utils.dom.makeElement: ",c),utils.dom.debug("utils.dom.makeElement: ",b),utils.dom.debug("utils.dom.makeElement: ",d));b=document.createElement(b);b.id=d+"_"+utils.dom.uniqueId();utils.dom.addClass(b,d);e&&utils.css.setCSS(b,e);c&&c.appendChild(b);return b};goog.exportSymbol("utils.dom.makeElement",utils.dom.makeElement);utils.gui.GenericSlider=function(b){goog.ui.Slider.call(this);var c="object"===typeof b?b:{},d=this;this.id=(c.className?c.className:"GenericSlider")+"_"+goog.events.getUniqueId("GenericSlider");this.getMin=function(){return this.getMinimum()};this.getMax=function(){return this.getMaximum()};c.orientation&&"vertical"==c.orientation.toLowerCase()?(this.setOrientation(goog.ui.Slider.Orientation.VERTICAL),this.setValue(this.getMaximum()),this.setStep(-1),c.widgetCSS=utils.dom.mergeArgs({position:"absolute",
width:10,height:"100%",left:0,top:0,backgroundColor:"rgb(255,255,255)"},c.widgetCSS),c.thumbCSS=utils.dom.mergeArgs({position:"absolute",top:0,height:10,width:c.widgetCSS.width,backgroundColor:"rgb(225, 225, 225)"},c.thumbCSS),c.trackCSS=utils.dom.mergeArgs({position:"absolute",width:"40%",height:"100%",left:"30%",borderRadius:3,backgroundColor:"rgba(100,100,100,0)"},c.trackCSS)):(c.widgetCSS=utils.dom.mergeArgs({position:"absolute",width:"100%",height:10,left:0,top:0,borderColor:"rgba(200,200,200,1)"},
c.widgetCSS),c.thumbCSS=utils.dom.mergeArgs({position:"absolute",height:c.widgetCSS.height,width:c.widgetCSS.height,backgroundColor:"rgb(225, 225, 225)",borderRadius:0},c.thumbCSS),c.trackCSS=utils.dom.mergeArgs({position:"absolute",width:"100%",height:"40%",top:"30%",borderRadius:3,backgroundColor:"rgba(100,100,100,0)"},c.trackCSS));this.widget_=utils.dom.makeElement("div",c.parent,c.className,c.widgetCSS);this.track_=utils.dom.makeElement("div",this.widget_,"SliderTrack",c.trackCSS);this.getTrack=
function(){return this.track_};d.decorate(this.widget_);utils.array.forEach(goog.dom.getChildren(this.widget_),function(b){"goog-slider-thumb"===b.className&&(utils.css.setCSS(b,c.thumbCSS),d.getThumb=function(){return b})});this.enable=function(b){utils.gui.GenericSlider.superClass_.setEnabled.call(this,b)}};goog.inherits(utils.gui.GenericSlider,goog.ui.Slider);goog.exportSymbol("utils.gui.GenericSlider",utils.gui.GenericSlider);utils.gui.GenericSlider.prototype.getWidget=function(){return this.widget_};
utils.gui.GenericSlider.prototype.getValue=function(){return utils.gui.GenericSlider.superClass_.getValue.call(this)};utils.gui.GenericSlider.prototype.setValue=function(b){return utils.gui.GenericSlider.superClass_.setValue.call(this,b)};utils.gui.GenericSlider.prototype.bindToMouseWheel=function(b){var c=this;(new goog.events.MouseWheelHandler(b)).addEventListener(goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,function(b){c.setValue(Math.round(c.getValue()+b.deltaY/3));b.preventDefault()})};
utils.gui.GenericSlider.prototype.addSlideCallback=function(b,c){var d=this;utils.gui.GenericSlider.superClass_.addEventListener.call(this,goog.ui.Component.EventType.CHANGE,function(e){e.stopPropagation();utils.dom.stopPropagation(e);b(d,c,e)})};var XVGlobals=function(){};goog.exportSymbol("XVGlobals",XVGlobals);XVGlobals=new XVGlobals;XVGlobals.ModalId="XNATModal";XVGlobals.ViewerPreId="Viewer";XVGlobals.inactiveFontColor="rgba(55,55,55,1)";XVGlobals.inactiveLineColor="rgba(55,55,55,1)";XVGlobals.activeFontColor="rgba(255,255,255,1)";XVGlobals.activeLineColor="rgba(205,205,205,1)";XVGlobals.semiactiveFontColor="rgba(85,85,85,1)";XVGlobals.semiactiveLineColor="rgba(85,85,85,1)";XVGlobals.fontSizeSmall=10;XVGlobals.fontSizeMed=12;
XVGlobals.fontSizeLarge=14;XVGlobals.fontFamily="Helvetica, Helvetica neue, Arial, sans-serif";XVGlobals.animVeryFast=100;XVGlobals.animFast=200;XVGlobals.animMed=500;XVGlobals.animSlow=1E3;XVGlobals.minFrameHolderHeight=200;XVGlobals.minFrameHolderWidth=150;XVGlobals.ViewerDimRatio=0.85;XVGlobals.minViewerHeight=320;XVGlobals.minViewerWidth=XVGlobals.minViewerHeight*XVGlobals.ViewerDimRatio;XVGlobals.ViewerVerticalMargin=20;XVGlobals.ViewerHorizontalMargin=20;XVGlobals.ThumbnailImageHeight=72;
XVGlobals.ThumbnailImageWidth=72;XVGlobals.ThumbnailImageMarginX=8;XVGlobals.ThumbnailImageMarginY=8;XVGlobals.ThumbnailWidgetHeight=XVGlobals.ThumbnailImageHeight+2*XVGlobals.ThumbnailImageMarginX;XVGlobals.ThumbnailWidgetWidth=200;XVGlobals.expandButtonWidth=30;XVGlobals.ScrollGalleryWidth=180;XVGlobals.scanTabLabelHeight=15;XVGlobals.scanTabLabelWidth=50;XVGlobals.minScanTabHeight=XVGlobals.scanTabLabelHeight;XVGlobals.defaultScanTabHeight=XVGlobals.minScanTabHeight;
XVGlobals.maxModalWidthPct=0.9;XVGlobals.maxModalHeightPct=0.95;XVGlobals.tabClickHeight=300;XVGlobals.minScanTabHeightBeforeActive=80;XVGlobals.MAX_SCROLL_LINK_GROUPS=10;XVGlobals.ContentDividerHeight=4;XVGlobals.minContentDividerTop=function(b){return b-XVGlobals.ContentDividerHeight-XVGlobals.minScanTabHeight};XVGlobals.ContentDividerColor="rgb(35,35,35)";XVGlobals.dragAndDropImage=new Image;XVGlobals.dragAndDropImage.src="./icons/DragAndDrop-3pt.png";
XVGlobals.classNames={XVWidget:"XVWidget",Modal:"Modal",ContentDivider:"ContentDivider",Thumbnail:"Thumbnail",ScanThumbnail:"ScanThumbnail",SlicerThumbnail:"SlicerThumbnail",Viewer:"Viewer",ScanViewer:"ScanViewer",SlicerViewer:"SlicerViewer",ThreeDHolder:"ThreeDHolder",PlaneHolder:"PlaneHolder",Menu:"Menu",FrameHolder:"FrameHolder",FrameHolderCanvas:"FrameHolderCanvas",ScrollGallery:"XVWidget_ScrollGallery",ThumbnailCanvas:"ThumbnailCanvas",FrameSlider:"FrameSlider",ScrollGalleryZippyHeader:"ZippyHeader",
ViewerTabs:"ViewerTabs",ScanTabs:"ScanTabs",ViewerDivider:"ViewerDivider",ThumbnailDragDropTarget:"ThumbnailDragDropTarget",ViewerDragDropTarget:"ViewerDragDropTarget"};var FrameSlider=function(b){utils.gui.GenericSlider.call(this,b);var c=this;this.linkSlider=function(b){if(c.linkedSliders)for(var e=0,f=c.linkedSliders.length;e<f;e++){if(b===c.linkedSliders[e])return}else c.linkedSliders=[];c.linkedSliders.push(b);c.addLinkedCallback(function(c){var e=c.getMaximum()-c.getMinimum(),f=b.getMaximum()-b.getMinimum();c=Math.round(f*(c.getValue()/e));b.setValue(c)})};this.clearLinked=function(){c.linkedCallbacks=[];c.linkedSliders=[]};this.addLinkedCallback=function(b){c.linkedCallbacks||
(c.linkedCallbacks=[]);c.linkedCallbacks.push(b)};this.addSlideCallback(function(){c.linkedCallbacks&&0<c.linkedCallbacks.length&&utils.array.forEach(c.linkedCallbacks,function(b){b(c)})})};goog.inherits(FrameSlider,utils.gui.GenericSlider);goog.exportSymbol("FrameSlider",FrameSlider);FrameSlider.prototype.updateCSS=function(b){utils.css.setCSS(this.widget_,b)};var X=X||{};X.DEV=!0;X.TIMER=function(b){eval("X.DEV === undefined")||window.console.time(b)};X.TIMERSTOP=function(b){eval("X.DEV === undefined")||window.console.timeEnd(b)};X.counter=function(){this._counter=0;this.uniqueId=function(){return this._counter++}};window["X.counter"]=new X.counter;function inject(b,c){for(var d in c){var e=c.__lookupGetter__(d),f=c.__lookupSetter__(d);d in b||(e||f?(e&&b.__defineGetter__(d,e),f&&b.__defineSetter__(d,f)):b[d]=c[d])}return b}var $=window.$;
function bind_shim(){Function.prototype.bind||(Function.prototype.bind=function(b){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice,d=c.call(arguments,1),e=this,f=function(){},g=function(){return e.apply(this instanceof f?this:b||window,d.concat(c.call(arguments)))};f.prototype=this.prototype;g.prototype=new f;return g})}
function requestAnimationFrame_shim(){(function(){for(var b=0,c=["ms","moz","webkit","o"],d=0,e=c.length&&!window.requestAnimationFrame;d<e;++d)window.requestAnimationFrame=window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(c,d){var e=Date.now(),k=Math.max(0,16-(e-b)),m=window.setTimeout(function(){c(e+k)},k);b=e+k;return m});window.cancelAnimationFrame||
(window.cancelAnimationFrame=function(b){clearTimeout(b)})})()}
function arrayBufferSlice_shim(){"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(b,c){if(void 0===b)throw Error("Not enough arguments.");var d=c||this.byteLength;0>b&&(b=this.byteLength+b);0>d&&(d=this.byteLength+d);d<b&&(d=b=0);0>b&&(b=0);0>d&&(d=0);b>this.byteLength&&(b=this.byteLength);d>this.byteLength&&(d=this.byteLength);for(var e=new ArrayBuffer(d-b),f=new Uint8Array(this),g=new Uint8Array(e),h=b,k=0;h<d;++h,++k)g[k]=f[h];return e})}bind_shim();requestAnimationFrame_shim();
arrayBufferSlice_shim();goog.exportSymbol("$",$);goog.exportSymbol("Function.prototype.bind",Function.prototype.bind);goog.exportSymbol("window.requestAnimationFrame",window.requestAnimationFrame);goog.exportSymbol("window.cancelAnimationFrame",window.cancelAnimationFrame);X.base=function(){goog.events.EventTarget.call(this);this._classname="base";this._id=window["X.counter"].uniqueId();this._dirty=!1};goog.inherits(X.base,goog.events.EventTarget);X.base.prototype.__defineGetter__("classname",function(){return this._classname});X.base.prototype.__defineGetter__("id",function(){return this._id});goog.exportSymbol("X.base",X.base);X.indexer=function(){X.base.call(this);this._classname="indexer";this._unique=[];this._indices=[];this._map={}};goog.inherits(X.indexer,X.base);X.indexer.prototype.add=function(b){if(!goog.isDefAndNotNull(b))throw Error("Invalid object.");var c=window.JSON.stringify(b);c in this._map||(this._map[c]=this._unique.length,this._unique.push(b));return this._map[c]};X.indexer.prototype.unique=function(){return this._unique};X.file=function(b){X.base.call(this);this._classname="file";this._path=b;this._dirty=!0};goog.inherits(X.file,X.base);X.loadable=function(){this._filedata=this._file=null};X.loadable.prototype.__defineSetter__("file",function(b){if(!goog.isDefAndNotNull(b)||goog.isArray(b)&&0==b.length)this._file=null;else{if(goog.isArray(b)){if(1==b.length){this._file=new X.file(b[0]);return}this._file=goog.array.map(b,function(b){var d=new X.volume;d._file=new X.file(b);return d})}else this._file=new X.file(b);this._filedata=null}});
X.loadable.prototype.__defineGetter__("file",function(){return this._file?goog.isArray(this._file)?this._file.map(function(b){return b._file._path}):this._file._path:""});X.loadable.prototype.__defineGetter__("filedata",function(){return goog.isArray(this._file)?this._file.map(function(b){return b._filedata}):this._filedata});
X.loadable.prototype.__defineSetter__("filedata",function(b){if(!goog.isDefAndNotNull(b)||goog.isArray(b)&&0==b.length)this._filedata=null;if(goog.isArray(b))if(1==b.length)this._filedata=b[0];else{var c=this._file.length,d;for(d=0;d<c;d++)this._file[d]._filedata=b[d]}else this._filedata=b});goog.iter={};goog.iter.StopIteration="StopIteration"in goog.global?goog.global.StopIteration:Error("StopIteration");goog.iter.Iterator=function(){};goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration;};goog.iter.Iterator.prototype.__iterator__=function(b){return this};
goog.iter.toIterator=function(b){if(b instanceof goog.iter.Iterator)return b;if("function"==typeof b.__iterator__)return b.__iterator__(!1);if(goog.isArrayLike(b)){var c=0,d=new goog.iter.Iterator;d.next=function(){for(;;){if(c>=b.length)throw goog.iter.StopIteration;if(c in b)return b[c++];c++}};return d}throw Error("Not implemented");};
goog.iter.forEach=function(b,c,d){if(goog.isArrayLike(b))try{goog.array.forEach(b,c,d)}catch(e){if(e!==goog.iter.StopIteration)throw e;}else{b=goog.iter.toIterator(b);try{for(;;)c.call(d,b.next(),void 0,b)}catch(f){if(f!==goog.iter.StopIteration)throw f;}}};goog.iter.filter=function(b,c,d){var e=goog.iter.toIterator(b);b=new goog.iter.Iterator;b.next=function(){for(;;){var b=e.next();if(c.call(d,b,void 0,e))return b}};return b};
goog.iter.range=function(b,c,d){var e=0,f=b,g=d||1;1<arguments.length&&(e=b,f=c);if(0==g)throw Error("Range step argument must not be zero");var h=new goog.iter.Iterator;h.next=function(){if(0<g&&e>=f||0>g&&e<=f)throw goog.iter.StopIteration;var b=e;e+=g;return b};return h};goog.iter.join=function(b,c){return goog.iter.toArray(b).join(c)};goog.iter.map=function(b,c,d){var e=goog.iter.toIterator(b);b=new goog.iter.Iterator;b.next=function(){for(;;){var b=e.next();return c.call(d,b,void 0,e)}};return b};
goog.iter.reduce=function(b,c,d,e){var f=d;goog.iter.forEach(b,function(b){f=c.call(e,f,b)});return f};goog.iter.some=function(b,c,d){b=goog.iter.toIterator(b);try{for(;;)if(c.call(d,b.next(),void 0,b))return!0}catch(e){if(e!==goog.iter.StopIteration)throw e;}return!1};goog.iter.every=function(b,c,d){b=goog.iter.toIterator(b);try{for(;;)if(!c.call(d,b.next(),void 0,b))return!1}catch(e){if(e!==goog.iter.StopIteration)throw e;}return!0};
goog.iter.chain=function(b){var c=arguments,d=c.length,e=0,f=new goog.iter.Iterator;f.next=function(){try{if(e>=d)throw goog.iter.StopIteration;return goog.iter.toIterator(c[e]).next()}catch(b){if(b!==goog.iter.StopIteration||e>=d)throw b;e++;return this.next()}};return f};goog.iter.dropWhile=function(b,c,d){var e=goog.iter.toIterator(b);b=new goog.iter.Iterator;var f=!0;b.next=function(){for(;;){var b=e.next();if(!f||!c.call(d,b,void 0,e))return f=!1,b}};return b};
goog.iter.takeWhile=function(b,c,d){var e=goog.iter.toIterator(b);b=new goog.iter.Iterator;var f=!0;b.next=function(){for(;;)if(f){var b=e.next();if(c.call(d,b,void 0,e))return b;f=!1}else throw goog.iter.StopIteration;};return b};goog.iter.toArray=function(b){if(goog.isArrayLike(b))return goog.array.toArray(b);b=goog.iter.toIterator(b);var c=[];goog.iter.forEach(b,function(b){c.push(b)});return c};
goog.iter.equals=function(b,c){b=goog.iter.toIterator(b);c=goog.iter.toIterator(c);var d,e;try{for(;;){d=e=!1;var f=b.next();d=!0;var g=c.next();e=!0;if(f!=g)break}}catch(h){if(h!==goog.iter.StopIteration)throw h;if(d&&!e)return!1;if(!e)try{c.next()}catch(k){if(k!==goog.iter.StopIteration)throw k;return!0}}return!1};goog.iter.nextOrValue=function(b,c){try{return goog.iter.toIterator(b).next()}catch(d){if(d!=goog.iter.StopIteration)throw d;return c}};
goog.iter.product=function(b){if(goog.array.some(arguments,function(b){return!b.length})||!arguments.length)return new goog.iter.Iterator;var c=new goog.iter.Iterator,d=arguments,e=goog.array.repeat(0,d.length);c.next=function(){if(e){for(var b=goog.array.map(e,function(b,c){return d[c][b]}),c=e.length-1;0<=c;c--){goog.asserts.assert(e);if(e[c]<d[c].length-1){e[c]++;break}if(0==c){e=null;break}e[c]=0}return b}throw goog.iter.StopIteration;};return c};
goog.iter.cycle=function(b){var c=goog.iter.toIterator(b),d=[],e=0;b=new goog.iter.Iterator;var f=!1;b.next=function(){var b=null;if(!f)try{return b=c.next(),d.push(b),b}catch(h){if(h!=goog.iter.StopIteration||goog.array.isEmpty(d))throw h;f=!0}b=d[e];e=(e+1)%d.length;return b};return b};goog.structs={};goog.structs.Map=function(b,c){this.map_={};this.keys_=[];var d=arguments.length;if(1<d){if(d%2)throw Error("Uneven number of arguments");for(var e=0;e<d;e+=2)this.set(arguments[e],arguments[e+1])}else b&&this.addAll(b)};goog.structs.Map.prototype.count_=0;goog.structs.Map.prototype.version_=0;goog.structs.Map.prototype.getCount=function(){return this.count_};
goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();for(var b=[],c=0;c<this.keys_.length;c++)b.push(this.map_[this.keys_[c]]);return b};goog.structs.Map.prototype.getKeys=function(){this.cleanupKeysArray_();return this.keys_.concat()};goog.structs.Map.prototype.containsKey=function(b){return goog.structs.Map.hasKey_(this.map_,b)};
goog.structs.Map.prototype.containsValue=function(b){for(var c=0;c<this.keys_.length;c++){var d=this.keys_[c];if(goog.structs.Map.hasKey_(this.map_,d)&&this.map_[d]==b)return!0}return!1};goog.structs.Map.prototype.equals=function(b,c){if(this===b)return!0;if(this.count_!=b.getCount())return!1;var d=c||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var e,f=0;e=this.keys_[f];f++)if(!d(this.get(e),b.get(e)))return!1;return!0};goog.structs.Map.defaultEquals=function(b,c){return b===c};
goog.structs.Map.prototype.isEmpty=function(){return 0==this.count_};goog.structs.Map.prototype.clear=function(){this.map_={};this.version_=this.count_=this.keys_.length=0};goog.structs.Map.prototype.remove=function(b){return goog.structs.Map.hasKey_(this.map_,b)?(delete this.map_[b],this.count_--,this.version_++,this.keys_.length>2*this.count_&&this.cleanupKeysArray_(),!0):!1};
goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){for(var b=0,c=0;b<this.keys_.length;){var d=this.keys_[b];goog.structs.Map.hasKey_(this.map_,d)&&(this.keys_[c++]=d);b++}this.keys_.length=c}if(this.count_!=this.keys_.length){for(var e={},c=b=0;b<this.keys_.length;)d=this.keys_[b],goog.structs.Map.hasKey_(e,d)||(this.keys_[c++]=d,e[d]=1),b++;this.keys_.length=c}};
goog.structs.Map.prototype.get=function(b,c){return goog.structs.Map.hasKey_(this.map_,b)?this.map_[b]:c};goog.structs.Map.prototype.set=function(b,c){goog.structs.Map.hasKey_(this.map_,b)||(this.count_++,this.keys_.push(b),this.version_++);this.map_[b]=c};goog.structs.Map.prototype.addAll=function(b){var c;b instanceof goog.structs.Map?(c=b.getKeys(),b=b.getValues()):(c=goog.object.getKeys(b),b=goog.object.getValues(b));for(var d=0;d<c.length;d++)this.set(c[d],b[d])};
goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)};goog.structs.Map.prototype.transpose=function(){for(var b=new goog.structs.Map,c=0;c<this.keys_.length;c++){var d=this.keys_[c];b.set(this.map_[d],d)}return b};goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();for(var b={},c=0;c<this.keys_.length;c++){var d=this.keys_[c];b[d]=this.map_[d]}return b};goog.structs.Map.prototype.getKeyIterator=function(){return this.__iterator__(!0)};
goog.structs.Map.prototype.getValueIterator=function(){return this.__iterator__(!1)};goog.structs.Map.prototype.__iterator__=function(b){this.cleanupKeysArray_();var c=0,d=this.keys_,e=this.map_,f=this.version_,g=this,h=new goog.iter.Iterator;h.next=function(){for(;;){if(f!=g.version_)throw Error("The map has changed since the iterator was created");if(c>=d.length)throw goog.iter.StopIteration;var h=d[c++];return b?h:e[h]}};return h};
goog.structs.Map.hasKey_=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)};X.colortable=function(){X.base.call(this);this._classname="colortable";this._map=new goog.structs.Map;inject(this,new X.loadable)};goog.inherits(X.colortable,X.base);X.colortable.prototype.add=function(b,c,d,e,f,g){if(!(goog.isNumber(b)&&goog.isNumber(d)&&goog.isNumber(e)&&goog.isNumber(f)&&goog.isNumber(g)))throw Error("Invalid color table entry.");this._map.set(b,[c,d,e,f,g]);this._dirty=!0};X.colortable.prototype.get=function(b){return this._map.get(b)};
goog.exportSymbol("X.colortable.prototype.get",X.colortable.prototype.get);goog.math.Coordinate3=function(b,c,d){this.x=goog.isDef(b)?b:0;this.y=goog.isDef(c)?c:0;this.z=goog.isDef(d)?d:0};goog.math.Coordinate3.prototype.clone=function(){return new goog.math.Coordinate3(this.x,this.y,this.z)};goog.DEBUG&&(goog.math.Coordinate3.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"});goog.math.Coordinate3.equals=function(b,c){return b==c?!0:b&&c?b.x==c.x&&b.y==c.y&&b.z==c.z:!1};
goog.math.Coordinate3.distance=function(b,c){var d=b.x-c.x,e=b.y-c.y,f=b.z-c.z;return Math.sqrt(d*d+e*e+f*f)};goog.math.Coordinate3.squaredDistance=function(b,c){var d=b.x-c.x,e=b.y-c.y,f=b.z-c.z;return d*d+e*e+f*f};goog.math.Coordinate3.difference=function(b,c){return new goog.math.Coordinate3(b.x-c.x,b.y-c.y,b.z-c.z)};goog.math.Coordinate3.prototype.toArray=function(){return[this.x,this.y,this.z]};
goog.math.Coordinate3.fromArray=function(b){if(3>=b.length)return new goog.math.Coordinate3(b[0],b[1],b[2]);throw Error("Conversion from an array requires an array of length 3");};goog.math.Vec3=function(b,c,d){this.x=b;this.y=c;this.z=d};goog.inherits(goog.math.Vec3,goog.math.Coordinate3);goog.math.Vec3.randomUnit=function(){var b=2*Math.random()*Math.PI,c=2*Math.random()*Math.PI,c=Math.cos(c),d=Math.sqrt(1-c*c)*Math.cos(b),b=Math.sqrt(1-c*c)*Math.sin(b);return new goog.math.Vec3(d,b,c)};goog.math.Vec3.random=function(){return goog.math.Vec3.randomUnit().scale(Math.random())};goog.math.Vec3.fromCoordinate3=function(b){return new goog.math.Vec3(b.x,b.y,b.z)};
goog.math.Vec3.prototype.clone=function(){return new goog.math.Vec3(this.x,this.y,this.z)};goog.math.Vec3.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};goog.math.Vec3.prototype.squaredMagnitude=function(){return this.x*this.x+this.y*this.y+this.z*this.z};goog.math.Vec3.prototype.scale=function(b){this.x*=b;this.y*=b;this.z*=b;return this};goog.math.Vec3.prototype.invert=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};
goog.math.Vec3.prototype.normalize=function(){return this.scale(1/this.magnitude())};goog.math.Vec3.prototype.add=function(b){this.x+=b.x;this.y+=b.y;this.z+=b.z;return this};goog.math.Vec3.prototype.subtract=function(b){this.x-=b.x;this.y-=b.y;this.z-=b.z;return this};goog.math.Vec3.prototype.equals=function(b){return this==b||!!b&&this.x==b.x&&this.y==b.y&&this.z==b.z};goog.math.Vec3.distance=goog.math.Coordinate3.distance;goog.math.Vec3.squaredDistance=goog.math.Coordinate3.squaredDistance;
goog.math.Vec3.equals=goog.math.Coordinate3.equals;goog.math.Vec3.sum=function(b,c){return new goog.math.Vec3(b.x+c.x,b.y+c.y,b.z+c.z)};goog.math.Vec3.difference=function(b,c){return new goog.math.Vec3(b.x-c.x,b.y-c.y,b.z-c.z)};goog.math.Vec3.dot=function(b,c){return b.x*c.x+b.y*c.y+b.z*c.z};goog.math.Vec3.cross=function(b,c){return new goog.math.Vec3(b.y*c.z-b.z*c.y,b.z*c.x-b.x*c.z,b.x*c.y-b.y*c.x)};
goog.math.Vec3.lerp=function(b,c,d){return new goog.math.Vec3(goog.math.lerp(b.x,c.x,d),goog.math.lerp(b.y,c.y,d),goog.math.lerp(b.z,c.z,d))};X.vector=goog.math.Vec3;X.vector.prototype.clone=goog.math.Vec3.prototype.clone;X.vector.prototype.magnitude=goog.math.Vec3.prototype.magnitude;X.vector.prototype.scale=goog.math.Vec3.prototype.scale;X.vector.prototype.invert=goog.math.Vec3.prototype.invert;X.vector.prototype.add=goog.math.Vec3.prototype.add;X.vector.prototype.subtract=goog.math.Vec3.prototype.subtract;X.vector.prototype.normalize=function(){var b=this.magnitude();return 0==b?this.scale(0):this.scale(1/b)};X.vector.dot=goog.math.Vec3.dot;
X.vector.cross=goog.math.Vec3.cross;X.vector.distance=goog.math.Vec3.distance;X.vector.lerp=goog.math.Vec3.lerp;X.vector.prototype.__defineGetter__("xx",function(){return this.x});X.vector.prototype.__defineGetter__("yy",function(){return this.y});X.vector.prototype.__defineGetter__("zz",function(){return this.z});goog.exportSymbol("X.vector",X.vector);goog.exportSymbol("X.vector.prototype.clone",X.vector.prototype.clone);goog.exportSymbol("X.vector.prototype.magnitude",X.vector.prototype.magnitude);
goog.exportSymbol("X.vector.prototype.scale",X.vector.prototype.scale);goog.exportSymbol("X.vector.prototype.invert",X.vector.prototype.invert);goog.exportSymbol("X.vector.prototype.normalize",X.vector.prototype.normalize);goog.exportSymbol("X.vector.prototype.add",X.vector.prototype.add);goog.exportSymbol("X.vector.prototype.subtract",X.vector.prototype.subtract);goog.exportSymbol("X.vector.dot",X.vector.dot);goog.exportSymbol("X.vector.cross",X.vector.cross);
goog.exportSymbol("X.vector.distance",X.vector.distance);goog.exportSymbol("X.vector.lerp",X.vector.lerp);goog.vec={};goog.vec.Float64Array=function(b){this.length=b.length||b;for(var c=0;c<this.length;c++)this[c]=b[c]||0};goog.vec.Float64Array.BYTES_PER_ELEMENT=8;goog.vec.Float64Array.prototype.BYTES_PER_ELEMENT=8;goog.vec.Float64Array.prototype.set=function(b,c){c=c||0;for(var d=0;d<b.length&&c+d<this.length;d++)this[c+d]=b[d]};goog.vec.Float64Array.prototype.toString=Array.prototype.join;
if("undefined"==typeof Float64Array){try{goog.exportProperty(goog.vec.Float64Array,"BYTES_PER_ELEMENT",goog.vec.Float64Array.BYTES_PER_ELEMENT)}catch(float64ArrayError){}goog.exportProperty(goog.vec.Float64Array.prototype,"BYTES_PER_ELEMENT",goog.vec.Float64Array.prototype.BYTES_PER_ELEMENT);goog.exportProperty(goog.vec.Float64Array.prototype,"set",goog.vec.Float64Array.prototype.set);goog.exportProperty(goog.vec.Float64Array.prototype,"toString",goog.vec.Float64Array.prototype.toString);goog.exportSymbol("Float64Array",
goog.vec.Float64Array)};goog.vec.Float32Array=function(b){this.length=b.length||b;for(var c=0;c<this.length;c++)this[c]=b[c]||0};goog.vec.Float32Array.BYTES_PER_ELEMENT=4;goog.vec.Float32Array.prototype.BYTES_PER_ELEMENT=4;goog.vec.Float32Array.prototype.set=function(b,c){c=c||0;for(var d=0;d<b.length&&c+d<this.length;d++)this[c+d]=b[d]};goog.vec.Float32Array.prototype.toString=Array.prototype.join;
"undefined"==typeof Float32Array&&(goog.exportProperty(goog.vec.Float32Array,"BYTES_PER_ELEMENT",goog.vec.Float32Array.BYTES_PER_ELEMENT),goog.exportProperty(goog.vec.Float32Array.prototype,"BYTES_PER_ELEMENT",goog.vec.Float32Array.prototype.BYTES_PER_ELEMENT),goog.exportProperty(goog.vec.Float32Array.prototype,"set",goog.vec.Float32Array.prototype.set),goog.exportProperty(goog.vec.Float32Array.prototype,"toString",goog.vec.Float32Array.prototype.toString),goog.exportSymbol("Float32Array",goog.vec.Float32Array));goog.vec.EPSILON=1E-6;goog.vec.Vec3={};goog.vec.Vec3.createFloat32=function(){return new Float32Array(3)};goog.vec.Vec3.createFloat64=function(){return new Float64Array(3)};goog.vec.Vec3.createNumber=function(){var b=Array(3);goog.vec.Vec3.setFromValues(b,0,0,0);return b};goog.vec.Vec3.create=function(){return new Float32Array(3)};goog.vec.Vec3.createFloat32FromArray=function(b){var c=goog.vec.Vec3.createFloat32();goog.vec.Vec3.setFromArray(c,b);return c};
goog.vec.Vec3.createFloat32FromValues=function(b,c,d){var e=goog.vec.Vec3.createFloat32();goog.vec.Vec3.setFromValues(e,b,c,d);return e};goog.vec.Vec3.cloneFloat32=goog.vec.Vec3.createFloat32FromArray;goog.vec.Vec3.createFloat64FromArray=function(b){var c=goog.vec.Vec3.createFloat64();goog.vec.Vec3.setFromArray(c,b);return c};goog.vec.Vec3.createFloat64FromValues=function(b,c,d){var e=goog.vec.Vec3.createFloat64();goog.vec.Vec3.setFromValues(e,b,c,d);return e};goog.vec.Vec3.cloneFloat64=goog.vec.Vec3.createFloat64FromArray;
goog.vec.Vec3.createFromArray=function(b){var c=goog.vec.Vec3.create();goog.vec.Vec3.setFromArray(c,b);return c};goog.vec.Vec3.createFromValues=function(b,c,d){var e=goog.vec.Vec3.create();goog.vec.Vec3.setFromValues(e,b,c,d);return e};goog.vec.Vec3.clone=function(b){var c=goog.vec.Vec3.create();goog.vec.Vec3.setFromArray(c,b);return c};goog.vec.Vec3.setFromValues=function(b,c,d,e){b[0]=c;b[1]=d;b[2]=e;return b};goog.vec.Vec3.setFromArray=function(b,c){b[0]=c[0];b[1]=c[1];b[2]=c[2];return b};
goog.vec.Vec3.add=function(b,c,d){d[0]=b[0]+c[0];d[1]=b[1]+c[1];d[2]=b[2]+c[2];return d};goog.vec.Vec3.subtract=function(b,c,d){d[0]=b[0]-c[0];d[1]=b[1]-c[1];d[2]=b[2]-c[2];return d};goog.vec.Vec3.negate=function(b,c){c[0]=-b[0];c[1]=-b[1];c[2]=-b[2];return c};goog.vec.Vec3.scale=function(b,c,d){d[0]=b[0]*c;d[1]=b[1]*c;d[2]=b[2]*c;return d};goog.vec.Vec3.magnitudeSquared=function(b){var c=b[0],d=b[1];b=b[2];return c*c+d*d+b*b};
goog.vec.Vec3.magnitude=function(b){var c=b[0],d=b[1];b=b[2];return Math.sqrt(c*c+d*d+b*b)};goog.vec.Vec3.normalize=function(b,c){var d=1/goog.vec.Vec3.magnitude(b);c[0]=b[0]*d;c[1]=b[1]*d;c[2]=b[2]*d;return c};goog.vec.Vec3.dot=function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]};goog.vec.Vec3.cross=function(b,c,d){var e=b[0],f=b[1];b=b[2];var g=c[0],h=c[1];c=c[2];d[0]=f*c-b*h;d[1]=b*g-e*c;d[2]=e*h-f*g;return d};
goog.vec.Vec3.distanceSquared=function(b,c){var d=b[0]-c[0],e=b[1]-c[1],f=b[2]-c[2];return d*d+e*e+f*f};goog.vec.Vec3.distance=function(b,c){return Math.sqrt(goog.vec.Vec3.distanceSquared(b,c))};goog.vec.Vec3.direction=function(b,c,d){var e=c[0]-b[0],f=c[1]-b[1];b=c[2]-b[2];(c=Math.sqrt(e*e+f*f+b*b))?(c=1/c,d[0]=e*c,d[1]=f*c,d[2]=b*c):d[0]=d[1]=d[2]=0;return d};goog.vec.Vec3.lerp=function(b,c,d,e){var f=b[0],g=b[1];b=b[2];e[0]=(c[0]-f)*d+f;e[1]=(c[1]-g)*d+g;e[2]=(c[2]-b)*d+b;return e};
goog.vec.Vec3.equals=function(b,c){return b.length==c.length&&b[0]==c[0]&&b[1]==c[1]&&b[2]==c[2]};goog.vec.Vec4={};goog.vec.Vec4.createFloat32=function(){return new Float32Array(4)};goog.vec.Vec4.createFloat64=function(){return new Float64Array(4)};goog.vec.Vec4.createNumber=function(){var b=Array(4);goog.vec.Vec4.setFromValues(b,0,0,0,0);return b};goog.vec.Vec4.create=function(){return new Float32Array(4)};goog.vec.Vec4.createFromArray=function(b){var c=goog.vec.Vec4.create();goog.vec.Vec4.setFromArray(c,b);return c};
goog.vec.Vec4.createFloat32FromArray=function(b){var c=goog.vec.Vec4.createFloat32();goog.vec.Vec4.setFromArray(c,b);return c};goog.vec.Vec4.createFloat32FromValues=function(b,c,d,e){var f=goog.vec.Vec4.createFloat32();goog.vec.Vec4.setFromValues(f,b,c,d,e);return f};goog.vec.Vec4.cloneFloat32=goog.vec.Vec4.createFloat32FromArray;goog.vec.Vec4.createFloat64FromArray=function(b){var c=goog.vec.Vec4.createFloat64();goog.vec.Vec4.setFromArray(c,b);return c};
goog.vec.Vec4.createFloat64FromValues=function(b,c,d,e){var f=goog.vec.Vec4.createFloat64();goog.vec.Vec4.setFromValues(f,b,c,d,e);return f};goog.vec.Vec4.cloneFloat64=goog.vec.Vec4.createFloat64FromArray;goog.vec.Vec4.createFromValues=function(b,c,d,e){var f=goog.vec.Vec4.create();goog.vec.Vec4.setFromValues(f,b,c,d,e);return f};goog.vec.Vec4.clone=goog.vec.Vec4.createFromArray;goog.vec.Vec4.setFromValues=function(b,c,d,e,f){b[0]=c;b[1]=d;b[2]=e;b[3]=f;return b};
goog.vec.Vec4.setFromArray=function(b,c){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];return b};goog.vec.Vec4.add=function(b,c,d){d[0]=b[0]+c[0];d[1]=b[1]+c[1];d[2]=b[2]+c[2];d[3]=b[3]+c[3];return d};goog.vec.Vec4.subtract=function(b,c,d){d[0]=b[0]-c[0];d[1]=b[1]-c[1];d[2]=b[2]-c[2];d[3]=b[3]-c[3];return d};goog.vec.Vec4.negate=function(b,c){c[0]=-b[0];c[1]=-b[1];c[2]=-b[2];c[3]=-b[3];return c};goog.vec.Vec4.scale=function(b,c,d){d[0]=b[0]*c;d[1]=b[1]*c;d[2]=b[2]*c;d[3]=b[3]*c;return d};
goog.vec.Vec4.magnitudeSquared=function(b){var c=b[0],d=b[1],e=b[2];b=b[3];return c*c+d*d+e*e+b*b};goog.vec.Vec4.magnitude=function(b){var c=b[0],d=b[1],e=b[2];b=b[3];return Math.sqrt(c*c+d*d+e*e+b*b)};goog.vec.Vec4.normalize=function(b,c){var d=1/goog.vec.Vec4.magnitude(b);c[0]=b[0]*d;c[1]=b[1]*d;c[2]=b[2]*d;c[3]=b[3]*d;return c};goog.vec.Vec4.dot=function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]+b[3]*c[3]};
goog.vec.Vec4.lerp=function(b,c,d,e){var f=b[0],g=b[1],h=b[2];b=b[3];e[0]=(c[0]-f)*d+f;e[1]=(c[1]-g)*d+g;e[2]=(c[2]-h)*d+h;e[3]=(c[3]-b)*d+b;return e};goog.vec.Vec4.equals=function(b,c){return b.length==c.length&&b[0]==c[0]&&b[1]==c[1]&&b[2]==c[2]&&b[3]==c[3]};goog.vec.Mat4={};goog.vec.Mat4.createFloat32=function(){return new Float32Array(16)};goog.vec.Mat4.createFloat64=function(){return new Float64Array(16)};goog.vec.Mat4.createNumber=function(){var b=Array(16);goog.vec.Mat4.setFromValues(b,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return b};goog.vec.Mat4.create=function(){return goog.vec.Mat4.createFloat32()};goog.vec.Mat4.createFloat32Identity=function(){var b=goog.vec.Mat4.createFloat32();b[0]=b[5]=b[10]=b[15]=1;return b};
goog.vec.Mat4.createFloat64Identity=function(){var b=goog.vec.Mat4.createFloat64();b[0]=b[5]=b[10]=b[15]=1;return b};goog.vec.Mat4.createNumberIdentity=function(){var b=Array(16);goog.vec.Mat4.setFromValues(b,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return b};goog.vec.Mat4.createIdentity=function(){return goog.vec.Mat4.createFloat32Identity()};goog.vec.Mat4.createFloat32FromArray=function(b){var c=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromArray(c,b);return c};
goog.vec.Mat4.createFloat32FromValues=function(b,c,d,e,f,g,h,k,m,p,n,q,r,s,u,t){var w=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromValues(w,b,c,d,e,f,g,h,k,m,p,n,q,r,s,u,t);return w};goog.vec.Mat4.cloneFloat32=goog.vec.Mat4.createFloat32FromArray;goog.vec.Mat4.createFloat64FromArray=function(b){var c=goog.vec.Mat4.createFloat64();goog.vec.Mat4.setFromArray(c,b);return c};
goog.vec.Mat4.createFloat64FromValues=function(b,c,d,e,f,g,h,k,m,p,n,q,r,s,u,t){var w=goog.vec.Mat4.createFloat64();goog.vec.Mat4.setFromValues(w,b,c,d,e,f,g,h,k,m,p,n,q,r,s,u,t);return w};goog.vec.Mat4.cloneFloat64=goog.vec.Mat4.createFloat64FromArray;goog.vec.Mat4.createFromArray=function(b){var c=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromArray(c,b);return c};
goog.vec.Mat4.createFromValues=function(b,c,d,e,f,g,h,k,m,p,n,q,r,s,u,t){return goog.vec.Mat4.createFloat32FromValues(b,c,d,e,f,g,h,k,m,p,n,q,r,s,u,t)};goog.vec.Mat4.clone=goog.vec.Mat4.createFromArray;goog.vec.Mat4.getElement=function(b,c,d){return b[c+4*d]};goog.vec.Mat4.setElement=function(b,c,d,e){b[c+4*d]=e;return b};
goog.vec.Mat4.setFromValues=function(b,c,d,e,f,g,h,k,m,p,n,q,r,s,u,t,w){b[0]=c;b[1]=d;b[2]=e;b[3]=f;b[4]=g;b[5]=h;b[6]=k;b[7]=m;b[8]=p;b[9]=n;b[10]=q;b[11]=r;b[12]=s;b[13]=u;b[14]=t;b[15]=w;return b};goog.vec.Mat4.setFromArray=function(b,c){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];b[4]=c[4];b[5]=c[5];b[6]=c[6];b[7]=c[7];b[8]=c[8];b[9]=c[9];b[10]=c[10];b[11]=c[11];b[12]=c[12];b[13]=c[13];b[14]=c[14];b[15]=c[15];return b};
goog.vec.Mat4.setFromRowMajorArray=function(b,c){b[0]=c[0];b[1]=c[4];b[2]=c[8];b[3]=c[12];b[4]=c[1];b[5]=c[5];b[6]=c[9];b[7]=c[13];b[8]=c[2];b[9]=c[6];b[10]=c[10];b[11]=c[14];b[12]=c[3];b[13]=c[7];b[14]=c[11];b[15]=c[15];return b};goog.vec.Mat4.setDiagonalValues=function(b,c,d,e,f){b[0]=c;b[5]=d;b[10]=e;b[15]=f;return b};goog.vec.Mat4.setDiagonal=function(b,c){b[0]=c[0];b[5]=c[1];b[10]=c[2];b[15]=c[3];return b};
goog.vec.Mat4.getDiagonal=function(b,c,d){if(d)for(var e=0<d?4*d:-d,f=0;f<4-Math.abs(d);f++)c[f]=b[e+5*f];else c[0]=b[0],c[1]=b[5],c[2]=b[10],c[3]=b[15];return c};goog.vec.Mat4.setColumnValues=function(b,c,d,e,f,g){c*=4;b[c]=d;b[c+1]=e;b[c+2]=f;b[c+3]=g;return b};goog.vec.Mat4.setColumn=function(b,c,d){c*=4;b[c]=d[0];b[c+1]=d[1];b[c+2]=d[2];b[c+3]=d[3];return b};goog.vec.Mat4.getColumn=function(b,c,d){c*=4;d[0]=b[c];d[1]=b[c+1];d[2]=b[c+2];d[3]=b[c+3];return d};
goog.vec.Mat4.setColumns=function(b,c,d,e,f){goog.vec.Mat4.setColumn(b,0,c);goog.vec.Mat4.setColumn(b,1,d);goog.vec.Mat4.setColumn(b,2,e);goog.vec.Mat4.setColumn(b,3,f);return b};goog.vec.Mat4.getColumns=function(b,c,d,e,f){goog.vec.Mat4.getColumn(b,0,c);goog.vec.Mat4.getColumn(b,1,d);goog.vec.Mat4.getColumn(b,2,e);goog.vec.Mat4.getColumn(b,3,f)};goog.vec.Mat4.setRowValues=function(b,c,d,e,f,g){b[c]=d;b[c+4]=e;b[c+8]=f;b[c+12]=g;return b};
goog.vec.Mat4.setRow=function(b,c,d){b[c]=d[0];b[c+4]=d[1];b[c+8]=d[2];b[c+12]=d[3];return b};goog.vec.Mat4.getRow=function(b,c,d){d[0]=b[c];d[1]=b[c+4];d[2]=b[c+8];d[3]=b[c+12];return d};goog.vec.Mat4.setRows=function(b,c,d,e,f){goog.vec.Mat4.setRow(b,0,c);goog.vec.Mat4.setRow(b,1,d);goog.vec.Mat4.setRow(b,2,e);goog.vec.Mat4.setRow(b,3,f);return b};
goog.vec.Mat4.getRows=function(b,c,d,e,f){goog.vec.Mat4.getRow(b,0,c);goog.vec.Mat4.getRow(b,1,d);goog.vec.Mat4.getRow(b,2,e);goog.vec.Mat4.getRow(b,3,f)};goog.vec.Mat4.makeZero=function(b){b[0]=0;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=0;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=0;return b};goog.vec.Mat4.makeIdentity=function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};
goog.vec.Mat4.addMat=function(b,c,d){d[0]=b[0]+c[0];d[1]=b[1]+c[1];d[2]=b[2]+c[2];d[3]=b[3]+c[3];d[4]=b[4]+c[4];d[5]=b[5]+c[5];d[6]=b[6]+c[6];d[7]=b[7]+c[7];d[8]=b[8]+c[8];d[9]=b[9]+c[9];d[10]=b[10]+c[10];d[11]=b[11]+c[11];d[12]=b[12]+c[12];d[13]=b[13]+c[13];d[14]=b[14]+c[14];d[15]=b[15]+c[15];return d};
goog.vec.Mat4.subMat=function(b,c,d){d[0]=b[0]-c[0];d[1]=b[1]-c[1];d[2]=b[2]-c[2];d[3]=b[3]-c[3];d[4]=b[4]-c[4];d[5]=b[5]-c[5];d[6]=b[6]-c[6];d[7]=b[7]-c[7];d[8]=b[8]-c[8];d[9]=b[9]-c[9];d[10]=b[10]-c[10];d[11]=b[11]-c[11];d[12]=b[12]-c[12];d[13]=b[13]-c[13];d[14]=b[14]-c[14];d[15]=b[15]-c[15];return d};
goog.vec.Mat4.multScalar=function(b,c,d){d[0]=b[0]*c;d[1]=b[1]*c;d[2]=b[2]*c;d[3]=b[3]*c;d[4]=b[4]*c;d[5]=b[5]*c;d[6]=b[6]*c;d[7]=b[7]*c;d[8]=b[8]*c;d[9]=b[9]*c;d[10]=b[10]*c;d[11]=b[11]*c;d[12]=b[12]*c;d[13]=b[13]*c;d[14]=b[14]*c;d[15]=b[15]*c;return d};
goog.vec.Mat4.multMat=function(b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],k=b[4],m=b[5],p=b[6],n=b[7],q=b[8],r=b[9],s=b[10],u=b[11],t=b[12],w=b[13],x=b[14];b=b[15];var y=c[0],I=c[1],z=c[2],C=c[3],D=c[4],A=c[5],E=c[6],B=c[7],F=c[8],G=c[9],H=c[10],J=c[11],v=c[12],L=c[13],N=c[14];c=c[15];d[0]=e*y+k*I+q*z+t*C;d[1]=f*y+m*I+r*z+w*C;d[2]=g*y+p*I+s*z+x*C;d[3]=h*y+n*I+u*z+b*C;d[4]=e*D+k*A+q*E+t*B;d[5]=f*D+m*A+r*E+w*B;d[6]=g*D+p*A+s*E+x*B;d[7]=h*D+n*A+u*E+b*B;d[8]=e*F+k*G+q*H+t*J;d[9]=f*F+m*G+r*H+w*J;d[10]=g*F+
p*G+s*H+x*J;d[11]=h*F+n*G+u*H+b*J;d[12]=e*v+k*L+q*N+t*c;d[13]=f*v+m*L+r*N+w*c;d[14]=g*v+p*L+s*N+x*c;d[15]=h*v+n*L+u*N+b*c;return d};
goog.vec.Mat4.transpose=function(b,c){if(c==b){var d=b[1],e=b[2],f=b[3],g=b[6],h=b[7],k=b[11];c[1]=b[4];c[2]=b[8];c[3]=b[12];c[4]=d;c[6]=b[9];c[7]=b[13];c[8]=e;c[9]=g;c[11]=b[14];c[12]=f;c[13]=h;c[14]=k}else c[0]=b[0],c[1]=b[4],c[2]=b[8],c[3]=b[12],c[4]=b[1],c[5]=b[5],c[6]=b[9],c[7]=b[13],c[8]=b[2],c[9]=b[6],c[10]=b[10],c[11]=b[14],c[12]=b[3],c[13]=b[7],c[14]=b[11],c[15]=b[15];return c};
goog.vec.Mat4.determinant=function(b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],m=b[7],p=b[8],n=b[9],q=b[10],r=b[11],s=b[12],u=b[13],t=b[14];b=b[15];return(c*h-d*g)*(q*b-r*t)-(c*k-e*g)*(n*b-r*u)+(c*m-f*g)*(n*t-q*u)+(d*k-e*h)*(p*b-r*s)-(d*m-f*h)*(p*t-q*s)+(e*m-f*k)*(p*u-n*s)};
goog.vec.Mat4.invert=function(b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],m=b[6],p=b[7],n=b[8],q=b[9],r=b[10],s=b[11],u=b[12],t=b[13],w=b[14],x=b[15],y=d*k-e*h,I=d*m-f*h,z=d*p-g*h,C=e*m-f*k,D=e*p-g*k,A=f*p-g*m,E=n*t-q*u,B=n*w-r*u,F=n*x-s*u,G=q*w-r*t,H=q*x-s*t,J=r*x-s*w,v=y*J-I*H+z*G+C*F-D*B+A*E;if(0==v)return!1;v=1/v;c[0]=(k*J-m*H+p*G)*v;c[1]=(-e*J+f*H-g*G)*v;c[2]=(t*A-w*D+x*C)*v;c[3]=(-q*A+r*D-s*C)*v;c[4]=(-h*J+m*F-p*B)*v;c[5]=(d*J-f*F+g*B)*v;c[6]=(-u*A+w*z-x*I)*v;c[7]=(n*A-r*z+s*I)*v;c[8]=
(h*H-k*F+p*E)*v;c[9]=(-d*H+e*F-g*E)*v;c[10]=(u*D-t*z+x*y)*v;c[11]=(-n*D+q*z-s*y)*v;c[12]=(-h*G+k*B-m*E)*v;c[13]=(d*G-e*B+f*E)*v;c[14]=(-u*C+t*I-w*y)*v;c[15]=(n*C-q*I+r*y)*v;return!0};goog.vec.Mat4.equals=function(b,c){return b.length==c.length&&b[0]==c[0]&&b[1]==c[1]&&b[2]==c[2]&&b[3]==c[3]&&b[4]==c[4]&&b[5]==c[5]&&b[6]==c[6]&&b[7]==c[7]&&b[8]==c[8]&&b[9]==c[9]&&b[10]==c[10]&&b[11]==c[11]&&b[12]==c[12]&&b[13]==c[13]&&b[14]==c[14]&&b[15]==c[15]};
goog.vec.Mat4.multVec3=function(b,c,d){var e=c[0],f=c[1];c=c[2];d[0]=e*b[0]+f*b[4]+c*b[8]+b[12];d[1]=e*b[1]+f*b[5]+c*b[9]+b[13];d[2]=e*b[2]+f*b[6]+c*b[10]+b[14];return d};goog.vec.Mat4.multVec3NoTranslate=function(b,c,d){var e=c[0],f=c[1];c=c[2];d[0]=e*b[0]+f*b[4]+c*b[8];d[1]=e*b[1]+f*b[5]+c*b[9];d[2]=e*b[2]+f*b[6]+c*b[10];return d};
goog.vec.Mat4.multVec3Projective=function(b,c,d){var e=c[0],f=c[1];c=c[2];var g=1/(e*b[3]+f*b[7]+c*b[11]+b[15]);d[0]=(e*b[0]+f*b[4]+c*b[8]+b[12])*g;d[1]=(e*b[1]+f*b[5]+c*b[9]+b[13])*g;d[2]=(e*b[2]+f*b[6]+c*b[10]+b[14])*g;return d};goog.vec.Mat4.multVec4=function(b,c,d){var e=c[0],f=c[1],g=c[2];c=c[3];d[0]=e*b[0]+f*b[4]+g*b[8]+c*b[12];d[1]=e*b[1]+f*b[5]+g*b[9]+c*b[13];d[2]=e*b[2]+f*b[6]+g*b[10]+c*b[14];d[3]=e*b[3]+f*b[7]+g*b[11]+c*b[15];return d};
goog.vec.Mat4.makeTranslate=function(b,c,d,e){goog.vec.Mat4.makeIdentity(b);return goog.vec.Mat4.setColumnValues(b,3,c,d,e,1)};goog.vec.Mat4.makeScale=function(b,c,d,e){goog.vec.Mat4.makeIdentity(b);return goog.vec.Mat4.setDiagonalValues(b,c,d,e,1)};goog.vec.Mat4.makeRotate=function(b,c,d,e,f){var g=Math.cos(c),h=1-g;c=Math.sin(c);return goog.vec.Mat4.setFromValues(b,d*d*h+g,d*e*h+f*c,d*f*h-e*c,0,d*e*h-f*c,e*e*h+g,e*f*h+d*c,0,d*f*h+e*c,e*f*h-d*c,f*f*h+g,0,0,0,0,1)};
goog.vec.Mat4.makeRotateX=function(b,c){var d=Math.cos(c),e=Math.sin(c);return goog.vec.Mat4.setFromValues(b,1,0,0,0,0,d,e,0,0,-e,d,0,0,0,0,1)};goog.vec.Mat4.makeRotateY=function(b,c){var d=Math.cos(c),e=Math.sin(c);return goog.vec.Mat4.setFromValues(b,d,0,-e,0,0,1,0,0,e,0,d,0,0,0,0,1)};goog.vec.Mat4.makeRotateZ=function(b,c){var d=Math.cos(c),e=Math.sin(c);return goog.vec.Mat4.setFromValues(b,d,e,0,0,-e,d,0,0,0,0,1,0,0,0,0,1)};
goog.vec.Mat4.makeFrustum=function(b,c,d,e,f,g,h){return goog.vec.Mat4.setFromValues(b,2*g/(d-c),0,0,0,0,2*g/(f-e),0,0,(d+c)/(d-c),(f+e)/(f-e),-(h+g)/(h-g),-1,0,0,-(2*h*g)/(h-g),0)};goog.vec.Mat4.makePerspective=function(b,c,d,e,f){var g=c/2;c=f-e;var h=Math.sin(g);if(0==c||0==h||0==d)return b;g=Math.cos(g)/h;return goog.vec.Mat4.setFromValues(b,g/d,0,0,0,0,g,0,0,0,0,-(f+e)/c,-1,0,0,-(2*e*f)/c,0)};
goog.vec.Mat4.makeOrtho=function(b,c,d,e,f,g,h){return goog.vec.Mat4.setFromValues(b,2/(d-c),0,0,0,0,2/(f-e),0,0,0,0,-2/(h-g),0,-(d+c)/(d-c),-(f+e)/(f-e),-(h+g)/(h-g),1)};
goog.vec.Mat4.makeLookAt=function(b,c,d,e){var f=goog.vec.Mat4.tmpVec4_[0];goog.vec.Vec3.subtract(d,c,f);goog.vec.Vec3.normalize(f,f);f[3]=0;d=goog.vec.Mat4.tmpVec4_[1];goog.vec.Vec3.cross(f,e,d);goog.vec.Vec3.normalize(d,d);d[3]=0;e=goog.vec.Mat4.tmpVec4_[2];goog.vec.Vec3.cross(d,f,e);goog.vec.Vec3.normalize(e,e);e[3]=0;goog.vec.Vec3.negate(f,f);goog.vec.Mat4.setRow(b,0,d);goog.vec.Mat4.setRow(b,1,e);goog.vec.Mat4.setRow(b,2,f);goog.vec.Mat4.setRowValues(b,3,0,0,0,1);goog.vec.Mat4.translate(b,-c[0],
-c[1],-c[2]);return b};goog.vec.Mat4.toLookAt=function(b,c,d,e){var f=goog.vec.Mat4.tmpMat4_[0];if(!goog.vec.Mat4.invert(b,f))return!1;c&&(c[0]=f[12],c[1]=f[13],c[2]=f[14]);if(d||e)d||(d=goog.vec.Mat4.tmpVec3_[0]),d[0]=-b[2],d[1]=-b[6],d[2]=-b[10],goog.vec.Vec3.normalize(d,d);e&&(c=goog.vec.Mat4.tmpVec3_[1],c[0]=b[0],c[1]=b[4],c[2]=b[8],goog.vec.Vec3.cross(c,d,e),goog.vec.Vec3.normalize(e,e));return!0};
goog.vec.Mat4.makeEulerZXZ=function(b,c,d,e){var f=Math.cos(c);c=Math.sin(c);var g=Math.cos(d);d=Math.sin(d);var h=Math.cos(e);e=Math.sin(e);b[0]=f*h-g*c*e;b[1]=g*f*e+h*c;b[2]=e*d;b[3]=0;b[4]=-f*e-h*g*c;b[5]=f*g*h-c*e;b[6]=h*d;b[7]=0;b[8]=d*c;b[9]=-f*d;b[10]=g;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};
goog.vec.Mat4.toEulerZXZ=function(b,c,d){var e=Math.sqrt(b[2]*b[2]+b[6]*b[6]);d=d?-1:1;e>goog.vec.EPSILON?(c[2]=Math.atan2(b[2]*d,b[6]*d),c[1]=Math.atan2(e*d,b[10]),c[0]=Math.atan2(b[8]*d,-b[9]*d)):(c[0]=0,c[1]=Math.atan2(e*d,b[10]),c[2]=Math.atan2(b[1],b[0]));c[0]=(c[0]+2*Math.PI)%(2*Math.PI);c[2]=(c[2]+2*Math.PI)%(2*Math.PI);c[1]=(c[1]*d+2*Math.PI)%(2*Math.PI)*d;return c};
goog.vec.Mat4.translate=function(b,c,d,e){return goog.vec.Mat4.setColumnValues(b,3,b[0]*c+b[4]*d+b[8]*e+b[12],b[1]*c+b[5]*d+b[9]*e+b[13],b[2]*c+b[6]*d+b[10]*e+b[14],b[3]*c+b[7]*d+b[11]*e+b[15])};goog.vec.Mat4.scale=function(b,c,d,e){return goog.vec.Mat4.setFromValues(b,b[0]*c,b[1]*c,b[2]*c,b[3]*c,b[4]*d,b[5]*d,b[6]*d,b[7]*d,b[8]*e,b[9]*e,b[10]*e,b[11]*e,b[12],b[13],b[14],b[15])};
goog.vec.Mat4.rotate=function(b,c,d,e,f){var g=b[0],h=b[1],k=b[2],m=b[3],p=b[4],n=b[5],q=b[6],r=b[7],s=b[8],u=b[9],t=b[10],w=b[11],x=b[12],y=b[13],I=b[14],z=b[15],C=Math.cos(c),D=Math.sin(c),A=1-C;c=d*d*A+C;var E=d*e*A+f*D,B=d*f*A-e*D,F=d*e*A-f*D,G=e*e*A+C,H=e*f*A+d*D,J=d*f*A+e*D;d=e*f*A-d*D;f=f*f*A+C;return goog.vec.Mat4.setFromValues(b,g*c+p*E+s*B,h*c+n*E+u*B,k*c+q*E+t*B,m*c+r*E+w*B,g*F+p*G+s*H,h*F+n*G+u*H,k*F+q*G+t*H,m*F+r*G+w*H,g*J+p*d+s*f,h*J+n*d+u*f,k*J+q*d+t*f,m*J+r*d+w*f,x,y,I,z)};
goog.vec.Mat4.rotateX=function(b,c){var d=b[4],e=b[5],f=b[6],g=b[7],h=b[8],k=b[9],m=b[10],p=b[11],n=Math.cos(c),q=Math.sin(c);b[4]=d*n+h*q;b[5]=e*n+k*q;b[6]=f*n+m*q;b[7]=g*n+p*q;b[8]=d*-q+h*n;b[9]=e*-q+k*n;b[10]=f*-q+m*n;b[11]=g*-q+p*n;return b};goog.vec.Mat4.rotateY=function(b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[8],k=b[9],m=b[10],p=b[11],n=Math.cos(c),q=Math.sin(c);b[0]=d*n+h*-q;b[1]=e*n+k*-q;b[2]=f*n+m*-q;b[3]=g*n+p*-q;b[8]=d*q+h*n;b[9]=e*q+k*n;b[10]=f*q+m*n;b[11]=g*q+p*n;return b};
goog.vec.Mat4.rotateZ=function(b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],m=b[6],p=b[7],n=Math.cos(c),q=Math.sin(c);b[0]=d*n+h*q;b[1]=e*n+k*q;b[2]=f*n+m*q;b[3]=g*n+p*q;b[4]=d*-q+h*n;b[5]=e*-q+k*n;b[6]=f*-q+m*n;b[7]=g*-q+p*n;return b};goog.vec.Mat4.getTranslation=function(b,c){c[0]=b[12];c[1]=b[13];c[2]=b[14];return c};goog.vec.Mat4.tmpVec3_=[goog.vec.Vec3.createFloat64(),goog.vec.Vec3.createFloat64()];goog.vec.Mat4.tmpVec4_=[goog.vec.Vec4.createFloat64(),goog.vec.Vec4.createFloat64(),goog.vec.Vec4.createFloat64()];
goog.vec.Mat4.tmpMat4_=[goog.vec.Mat4.createFloat64()];X.matrix={};X.matrix.makeLookAt=function(b,c,d,e){d=d.subtract(c);d.normalize();e=X.vector.cross(d,e);e.normalize();var f=X.vector.cross(e,d);f.normalize();d.invert();goog.vec.Mat4.setRowValues(b,0,e.x,e.y,e.z,0);goog.vec.Mat4.setRowValues(b,1,f.x,f.y,f.z,0);goog.vec.Mat4.setRowValues(b,2,d.x,d.y,d.z,0);goog.vec.Mat4.translate(b,-c.x,-c.y,-c.z);return b};
X.matrix.multiplyByVector=function(b,c,d,e){var f=1/(c*b[3]+d*b[7]+e*b[11]+b[15]);return new X.vector((c*b[0]+d*b[4]+e*b[8]+b[12])*f,(c*b[1]+d*b[5]+e*b[9]+b[13])*f,(c*b[2]+d*b[6]+e*b[10]+b[14])*f)};X.matrix.swapRows=function(b,c,d){var e=new Float32Array(4),f=new Float32Array(4);goog.vec.Mat4.getRow(b,c,e);goog.vec.Mat4.getRow(b,d,f);goog.vec.Mat4.setRow(b,c,f);goog.vec.Mat4.setRow(b,d,e);return b};
X.matrix.swapCols=function(b,c,d){var e=new Float32Array(4),f=new Float32Array(4);goog.vec.Mat4.getColumn(b,c,e);goog.vec.Mat4.getColumn(b,d,f);goog.vec.Mat4.setColumn(b,c,f);goog.vec.Mat4.setColumn(b,d,e);return b};X.matrix.identity=goog.vec.Mat4.createFloat32Identity;X.matrix.clone=goog.vec.Mat4.cloneFloat32;X.matrix.transpose=goog.vec.Mat4.transpose;X.matrix.determinant=goog.vec.Mat4.determinant;X.matrix.invert=goog.vec.Mat4.invert;X.matrix.makePerspective=goog.vec.Mat4.makePerspective;
X.matrix.makeFrustum=goog.vec.Mat4.makeFrustum;X.matrix.makeOrtho=goog.vec.Mat4.makeOrtho;X.matrix.multiply=goog.vec.Mat4.multMat;X.matrix.translate=goog.vec.Mat4.translate;X.matrix.scale=goog.vec.Mat4.scale;X.matrix.rotate=goog.vec.Mat4.rotate;X.matrix.rotateX=goog.vec.Mat4.rotateX;X.matrix.rotateY=goog.vec.Mat4.rotateY;X.matrix.rotateZ=goog.vec.Mat4.rotateZ;goog.exportSymbol("X.matrix.identity",X.matrix.identity);goog.exportSymbol("X.matrix.clone",X.matrix.clone);
goog.exportSymbol("X.matrix.transpose",X.matrix.transpose);goog.exportSymbol("X.matrix.determinant",X.matrix.determinant);goog.exportSymbol("X.matrix.invert",X.matrix.invert);goog.exportSymbol("X.matrix.multiply",X.matrix.multiply);goog.exportSymbol("X.matrix.multiplyByVector",X.matrix.multiplyByVector);goog.exportSymbol("X.matrix.makePerspective",X.matrix.makePerspective);goog.exportSymbol("X.matrix.makeFrustum",X.matrix.makeFrustum);goog.exportSymbol("X.matrix.makeOrtho",X.matrix.makeOrtho);
goog.exportSymbol("X.matrix.makeLookAt",X.matrix.makeLookAt);goog.exportSymbol("X.matrix.translate",X.matrix.translate);goog.exportSymbol("X.matrix.scale",X.matrix.scale);goog.exportSymbol("X.matrix.rotate",X.matrix.rotate);goog.exportSymbol("X.matrix.rotateX",X.matrix.rotateX);goog.exportSymbol("X.matrix.rotateY",X.matrix.rotateY);goog.exportSymbol("X.matrix.rotateZ",X.matrix.rotateZ);goog.exportSymbol("X.matrix.swapRows",X.matrix.swapRows);goog.exportSymbol("X.matrix.swapCols",X.matrix.swapCols);X.transform=function(){X.base.call(this);this._classname="transform";this._matrix=X.matrix.identity()};goog.inherits(X.transform,X.base);X.transform.prototype.__defineGetter__("matrix",function(){return this._matrix});X.transform.prototype.__defineSetter__("matrix",function(b){if(!(goog.isDefAndNotNull(b)&&b instanceof Float32Array))throw Error("Invalid matrix.");this._matrix=b;this.modified()});
X.transform.prototype.rotateX=function(b){if(!goog.isNumber(b)||-360>b||360<b)throw Error("Invalid angle.");X.matrix.rotateX(this._matrix,b*Math.PI/180);this.modified()};X.transform.prototype.rotateY=function(b){if(!goog.isNumber(b)||-360>b||360<b)throw Error("Invalid angle.");X.matrix.rotateY(this._matrix,b*Math.PI/180);this.modified()};X.transform.prototype.rotateZ=function(b){if(!goog.isNumber(b)||-360>b||360<b)throw Error("Invalid angle.");X.matrix.rotateZ(this._matrix,b*Math.PI/180);this.modified()};
X.transform.prototype.translateX=function(b){if(!goog.isNumber(b))throw Error("Invalid distance.");X.matrix.translate(this._matrix,b,0,0);this.modified()};X.transform.prototype.translateY=function(b){if(!goog.isNumber(b))throw Error("Invalid distance.");X.matrix.translate(this._matrix,0,b,0);this.modified()};X.transform.prototype.translateZ=function(b){if(!goog.isNumber(b))throw Error("Invalid distance.");X.matrix.translate(this._matrix,0,0,b);this.modified()};
X.transform.prototype.flip_=function(b,c){this._matrix[b+4*c]*=-1;this.modified()};X.transform.prototype.flipX=function(){this.flip_(0,0)};X.transform.prototype.flipY=function(){this.flip_(1,1)};X.transform.prototype.flipZ=function(){this.flip_(2,2)};X.transform.prototype.modified=function(){this._dirty=!0};goog.exportSymbol("X.transform",X.transform);goog.exportSymbol("X.transform.prototype.rotateX",X.transform.prototype.rotateX);goog.exportSymbol("X.transform.prototype.rotateY",X.transform.prototype.rotateY);
goog.exportSymbol("X.transform.prototype.rotateZ",X.transform.prototype.rotateZ);goog.exportSymbol("X.transform.prototype.translateX",X.transform.prototype.translateX);goog.exportSymbol("X.transform.prototype.translateY",X.transform.prototype.translateY);goog.exportSymbol("X.transform.prototype.translateZ",X.transform.prototype.translateZ);goog.exportSymbol("X.transform.prototype.flipX",X.transform.prototype.flipX);goog.exportSymbol("X.transform.prototype.flipY",X.transform.prototype.flipY);
goog.exportSymbol("X.transform.prototype.flipZ",X.transform.prototype.flipZ);goog.exportSymbol("X.transform.prototype.modified",X.transform.prototype.modified);X.texture=function(){X.base.call(this);this._classname="texture";this._rawData=this._image=this._file=null;this._rawDataHeight=this._rawDataWidth=0;this._grayscale=!1;inject(this,new X.loadable)};goog.inherits(X.texture,X.base);X.texture.prototype.__defineSetter__("rawData",function(b){this._rawData=b;this._dirty=!0});X.texture.prototype.__defineSetter__("rawDataHeight",function(b){this._rawDataHeight=b;this._dirty=!0});
X.texture.prototype.__defineSetter__("rawDataWidth",function(b){this._rawDataWidth=b;this._dirty=!0});X.texture.prototype.__defineSetter__("grayscale",function(b){this._grayscale=b;this._dirty=!0});goog.exportSymbol("X.texture",X.texture);X.triplets=function(b,c){X.base.call(this);this._classname="triplets";this._minA=Infinity;this._maxA=-Infinity;this._minB=Infinity;this._maxB=-Infinity;this._minC=Infinity;this._maxC=-Infinity;this._centroid=[0,0,0];this._fresh=!0;this._dataPointer=0;this._triplets=new Float32Array(b);goog.isDefAndNotNull(c)&&(this._triplets=c._triplets.subarray(0,c._triplets.length),this._dataPointer=this._triplets.length,this._minA=c._minA,this._maxA=c._maxA,this._minB=c._minB,this._maxB=c._maxB,this._minC=c._minC,
this._maxC=c._maxC,this._centroid=c._centroid.slice(),this._fresh=!1)};goog.inherits(X.triplets,X.base);
X.triplets.prototype.add=function(b,c,d){this._minA=Math.min(this._minA,b);this._maxA=Math.max(this._maxA,b);this._minB=Math.min(this._minB,c);this._maxB=Math.max(this._maxB,c);this._minC=Math.min(this._minC,d);this._maxC=Math.max(this._maxC,d);this._centroid=[(this._minA+this._maxA)/2,(this._minB+this._maxB)/2,(this._minC+this._maxC)/2];this._fresh=!1;this._dirty=!0;this._triplets[this._dataPointer++]=b;this._triplets[this._dataPointer++]=c;this._triplets[this._dataPointer++]=d;return this._dataPointer/
3};X.triplets.prototype.resize=function(){if(this._dataPointer!=this._triplets.length){var b=new Float32Array(this._dataPointer);b.set(this._triplets.subarray(0,this._dataPointer));this._triplets=b}};X.triplets.prototype.get=function(b){b*=3;return[this._triplets[b],this._triplets[b+1],this._triplets[b+2]]};X.triplets.prototype.remove=function(b){throw Error("Not implemented.");};X.triplets.prototype.clear=function(){this._triplets=new Float32Array(this._triplets.length);this._dirty=!0};
X.triplets.prototype.__defineGetter__("count",function(){this.resize();return this._triplets.length/3});X.triplets.prototype.__defineGetter__("length",function(){this.resize();return this._triplets.length});goog.exportSymbol("X.triplets",X.triplets);goog.exportSymbol("X.triplets.prototype.add",X.triplets.prototype.add);goog.exportSymbol("X.triplets.prototype.resize",X.triplets.prototype.resize);goog.exportSymbol("X.triplets.prototype.get",X.triplets.prototype.get);
goog.exportSymbol("X.triplets.prototype.remove",X.triplets.prototype.remove);goog.exportSymbol("X.triplets.prototype.clear",X.triplets.prototype.clear);X.displayable=function(){this._type=X.displayable.types.TRIANGLES;this._transform=new X.transform;this._color=[1,1,1];this._textureCoordinateMap=this._texture=this._colors=this._normals=this._points=null;this._pointIndices=[];this._visible=!0;this._linewidth=this._pointsize=1;this._caption=null;this._magicmode=!1;this._opacity=1;this._distance=0;this._pickable=!0};X.displayable.types={TRIANGLES:"TRIANGLES",TRIANGLE_STRIPS:"TRIANGLE_STRIPS",LINES:"LINES",POINTS:"POINTS",POLYGONS:"POLYGONS"};
X.displayable.prototype.__defineSetter__("type",function(b){return this._type=b});X.displayable.prototype.__defineGetter__("type",function(){return this._type});X.displayable.prototype.__defineGetter__("texture",function(){this._texture||(this._texture=new X.texture);return this._texture});X.displayable.prototype.__defineGetter__("transform",function(){return this._transform});X.displayable.prototype.__defineGetter__("points",function(){return this._points});
X.displayable.prototype.__defineSetter__("points",function(b){this._points=b});X.displayable.prototype.__defineGetter__("normals",function(){return this._normals});X.displayable.prototype.__defineSetter__("normals",function(b){this._normals=b});X.displayable.prototype.__defineGetter__("colors",function(){return this._colors});X.displayable.prototype.__defineSetter__("colors",function(b){this._colors=b});X.displayable.prototype.__defineGetter__("color",function(){return this._color});
X.displayable.prototype.__defineSetter__("color",function(b){if(!goog.isDefAndNotNull(b)||!goog.isArray(b)||3!=b.length)throw Error("Invalid color.");for(var c=this._children,d=c.length,e=0,e=0;e<d;e++)c[e].color=b;this._color=b;this._dirty=!0});X.displayable.prototype.__defineGetter__("opacity",function(){return this._opacity});
X.displayable.prototype.__defineSetter__("opacity",function(b){if(!goog.isNumber(b)||1<b||0>b)throw Error("Invalid opacity.");for(var c=this._children,d=c.length,e=0,e=0;e<d;e++)c[e].opacity=b;this._opacity=b;this._dirty=!0});X.displayable.prototype.__defineGetter__("caption",function(){return this._caption});X.displayable.prototype.__defineSetter__("caption",function(b){this._caption=b;this._dirty=!0});X.displayable.prototype.__defineGetter__("visible",function(){return this._visible});
X.displayable.prototype.__defineSetter__("visible",function(b){for(var c=this._children,d=c.length,e=0,e=0;e<d;e++)c[e].visible=b;this._visible=b;this._dirty=!0});X.displayable.prototype.__defineGetter__("pointsize",function(){return this._pointsize});X.displayable.prototype.__defineSetter__("pointsize",function(b){if(!goog.isNumber(b))throw Error("Invalid point size.");this._pointsize=b;this._dirty=!0});X.displayable.prototype.__defineGetter__("magicmode",function(){return this._magicmode});
X.displayable.prototype.__defineSetter__("magicmode",function(b){if(!goog.isBoolean(b))throw Error("Invalid magic mode setting.");this._magicmode=b;this._dirty=!0});X.displayable.prototype.__defineGetter__("linewidth",function(){return this._linewidth});X.displayable.prototype.__defineSetter__("linewidth",function(b){if(!goog.isNumber(b))throw Error("Invalid line width.");this._linewidth=b;this._dirty=!0});X.displayable.prototype.__defineGetter__("pickable",function(){return this._pickable});
X.displayable.prototype.__defineSetter__("pickable",function(b){if(!goog.isBoolean(b))throw Error("Invalid pickable setting.");this._pickable=b;this._dirty=!0});X.displayable.prototype.__defineGetter__("textureCoordinateMap",function(){return this._textureCoordinateMap});X.displayable.prototype.__defineSetter__("textureCoordinateMap",function(b){this._textureCoordinate=b});X.thresholdable=function(){this._min=Infinity;this._lowerThreshold=this._max=-Infinity;this._upperThreshold=Infinity;this._minColor=[0,0,0];this._maxColor=[1,1,1]};X.thresholdable.prototype.__defineGetter__("lowerThreshold",function(){return this._lowerThreshold});X.thresholdable.prototype.__defineSetter__("lowerThreshold",function(b){this._lowerThreshold=b});X.thresholdable.prototype.__defineGetter__("upperThreshold",function(){return this._upperThreshold});
X.thresholdable.prototype.__defineSetter__("upperThreshold",function(b){this._upperThreshold=b});X.thresholdable.prototype.__defineGetter__("min",function(){return this._min});X.thresholdable.prototype.__defineGetter__("max",function(){return this._max});X.thresholdable.prototype.__defineGetter__("minColor",function(){return this._minColor});
X.thresholdable.prototype.__defineSetter__("minColor",function(b){if(!goog.isDefAndNotNull(b)||!goog.isArray(b)||3!=b.length)throw Error("Invalid min. color.");this._minColor=b});X.thresholdable.prototype.__defineGetter__("maxColor",function(){return this._maxColor});X.thresholdable.prototype.__defineSetter__("maxColor",function(b){if(!goog.isDefAndNotNull(b)||!goog.isArray(b)||3!=b.length)throw Error("Invalid max. color.");this._maxColor=b});X.scalars=function(){X.base.call(this);this._classname="scalars";this._glArray=this._array=null;this._replaceMode=!0;this._interpolation=0;inject(this,new X.loadable);inject(this,new X.thresholdable);this._minColor=[0,1,0];this._maxColor=[1,0,0]};goog.inherits(X.scalars,X.base);X.scalars.prototype.__defineGetter__("array",function(){return this._array});X.scalars.prototype.__defineSetter__("array",function(b){this._glArray=this._array=b;this._dirty=!0});
X.scalars.prototype.__defineGetter__("interpolation",function(){return this._interpolation});X.scalars.prototype.__defineSetter__("interpolation",function(b){this._interpolation=b});goog.exportSymbol("X.scalars",X.scalars);X.object=function(b){X.base.call(this);this._classname="object";this._children=[];this._scalars=this._colortable=null;inject(this,new X.displayable);goog.isDefAndNotNull(b)&&this.copy_(b)};goog.inherits(X.object,X.base);
X.object.prototype.copy_=function(b){this._type=b._type;this._transform=new X.transform;this._transform._matrix=new Float32Array(b._transform._matrix);this._color=b._color.slice();b._points&&(this._points=new X.triplets(b._points.length,b._points));b._normals&&(this._normals=new X.triplets(b._normals.length,b._normals));b._colors&&(this._colors=new X.triplets(b._colors.length,b._colors));this._texture=b._texture;this._textureCoordinateMap=b._textureCoordinateMap;b._file&&(this._file=new X.file((new String(b._file._path)).toString()));
this._opacity=b._opacity;this._children.length=0;var c=b._children;if(c)for(var d=c.length,e=0,e=0;e<d;e++)this._children.push(new X[c[e]._classname](c[e]));this._visible=b._visible;this._pointsize=b._pointsize;this._linewidth=b._linewidth;b._caption&&(this._caption=(new String(b._caption)).toString());this._magicmode=b._magicmode;this._pickable=b._pickable;this._pointIndices=b._pointIndices.slice();this._dirty=!0};
X.object.prototype.__defineGetter__("colortable",function(){this._colortable||(this._colortable=new X.colortable);return this._colortable});X.object.prototype.__defineGetter__("scalars",function(){this._scalars||(this._scalars=new X.scalars);return this._scalars});X.object.prototype.__defineGetter__("children",function(){return this._children});X.object.prototype.modified=function(b){b=new X.event.ModifiedEvent;b._object=this;this.dispatchEvent(b)};
X.object.OPACITY_COMPARATOR=function(b,c){if(!(goog.isDefAndNotNull(b)&&goog.isDefAndNotNull(c)&&b instanceof X.object&&c instanceof X.object))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==b._opacity?-1:1==c._opacity?1:goog.isDefAndNotNull(b._distance)&&goog.isDefAndNotNull(c._distance)&&b._distance>c._distance?-1:1};goog.exportSymbol("X.object",X.object);goog.exportSymbol("X.object.prototype.modified",X.object.prototype.modified);X.event=function(b){goog.events.Event.call(this,b);this._classname="event"};goog.inherits(X.event,goog.events.Event);X.event.uniqueId=function(b){return b+"_"+goog.events.uniqueIdCounter_++};
X.event.events={PAN:X.event.uniqueId("pan"),ROTATE:X.event.uniqueId("rotate"),ZOOM:X.event.uniqueId("zoom"),SCROLL:X.event.uniqueId("scroll"),RENDER:X.event.uniqueId("render"),RESETVIEW:X.event.uniqueId("resetview"),WINDOWLEVEL:X.event.uniqueId("windowlevel"),MODIFIED:X.event.uniqueId("modified"),PROGRESS:X.event.uniqueId("progress"),HOVER:X.event.uniqueId("hover"),HOVER_END:X.event.uniqueId("hover_end")};
X.event.WindowLevelEvent=function(){X.event.call(this,X.event.events.WINDOWLEVEL);this._level=this._window=0};goog.inherits(X.event.WindowLevelEvent,X.event);X.event.PanEvent=function(){X.event.call(this,X.event.events.PAN);this._distance=new X.vector(0,0,0)};goog.inherits(X.event.PanEvent,X.event);X.event.RotateEvent=function(){X.event.call(this,X.event.events.ROTATE);this._distance=new X.vector(0,0,0)};goog.inherits(X.event.RotateEvent,X.event);
X.event.ZoomEvent=function(){X.event.call(this,X.event.events.ZOOM);this._fast=this._in=!1};goog.inherits(X.event.ZoomEvent,X.event);X.event.ScrollEvent=function(){X.event.call(this,X.event.events.SCROLL);this._up=!1};goog.inherits(X.event.ScrollEvent,X.event);X.event.RenderEvent=function(){X.event.call(this,X.event.events.RENDER)};goog.inherits(X.event.RenderEvent,X.event);X.event.HoverEvent=function(){X.event.call(this,X.event.events.HOVER);this._y=this._x=0};goog.inherits(X.event.HoverEvent,X.event);
X.event.HoverEndEvent=function(){X.event.call(this,X.event.events.HOVER_END)};goog.inherits(X.event.HoverEndEvent,X.event);X.event.ResetViewEvent=function(){X.event.call(this,X.event.events.RESETVIEW)};goog.inherits(X.event.ResetViewEvent,X.event);X.event.ModifiedEvent=function(){X.event.call(this,X.event.events.MODIFIED);this._container=this._object=null};goog.inherits(X.event.ModifiedEvent,X.event);X.event.ProgressEvent=function(){X.event.call(this,X.event.events.PROGRESS);this._value=0};
goog.inherits(X.event.ProgressEvent,X.event);var XVWidget=function(b,c){this.args=b?utils.dom.mergeArgs(this.defaultArgs,b):this.defaultArgs;this.CSS=this.args.CSS?this.args.CSS:this.args.widgetCSS;this.widget=utils.dom.makeElement("div",this.args.parent,this.args.className,this.CSS);this.getWidget=function(){return this.widget};this.getDefaultArgs=function(){return this.defaultArgs}};goog.exportSymbol("XVWidget",XVWidget);var Viewer=function(b){XVWidget.call(this,utils.dom.mergeArgs(Viewer.prototype.defaultArgs,b));goog.fx.DragDrop.call(this,this.widget,void 0);this.currThumbnail_=void 0;this.setThumbnail=function(b){this.currThumbnail_=b};this.getThumbnail=function(){return this.currThumbnail_};this.setHoverEvents()};goog.inherits(Viewer,XVWidget);goog.inherits(Viewer,goog.fx.DragDrop);
Viewer.prototype.defaultArgs={parent:document.body,className:XVGlobals.classNames.Viewer,widgetCSS:{top:0,left:80,width:500,height:500,border:"solid rgba(90,90,90,1) 1px",position:"absolute",overflow:"hidden","overflow-x":"visible","overflow-y":"visible"}};
Viewer.prototype.updateCSS=function(b){this.widgetDims=utils.css.dims(this.widget);b=b?b:{};utils.css.setCSS(this.widget,utils.dom.mergeArgs({width:this.widgetDims.width,height:this.widgetDims.height,top:this.widgetDims.top,left:this.widgetDims.left,overflow:"hidden"},b))};
Viewer.prototype.setHoverEvents=function(){var b=this,c=[XVGlobals.classNames.FrameHolder];this.hoverOut=function(){utils.array.forEach(b.widget.childNodes,function(b){var e=!1;utils.array.forEach(c,function(c){-1<b.className.indexOf(c)&&(e=!0)});e||utils.fx.fadeOut(b,0)})};this.hoverIn=function(){utils.array.forEach(b.widget.childNodes,function(b){utils.fx.fadeIn(b,0)})};goog.events.listen(this.widget,goog.events.EventType.MOUSEOVER,function(){b.hoverIn()});goog.events.listen(this.widget,goog.events.EventType.MOUSEOUT,
function(){b.hoverOut()});b.hoverOut()};Viewer.prototype.createDragElement=function(b){return this.widget.isCloneable?b.cloneNode(!1):(b=document.createElement("div"),b.id="DUMMY",b)};Viewer.prototype.loadThumbnail=function(b){this.setThumbnail(b)};var SlicerViewer=function(b){Viewer.call(this,utils.dom.mergeArgs(SlicerViewer.prototype.defaultArgs,b));var c=this;this.ThreeDHolder=new ThreeDHolder({parent:this.widget,"border-width":"0"});this.ThreeDHolder.Viewer=this;this.ThreeDHolder.addOnloadCallback(function(){var b=c.getThumbnail();b&&b.scanData&&c.populateData(b.scanData)});this.addViewPlaneMenu(this);this.ContentDivider=new ContentDivider({parent:this.widget,widgetCSS:{backgroundColor:"rgb(35,35,35)"}});this.ScanTabs=new ScanTabs({parent:this.widget,
tabTitles:["Info","Menu"],widgetCSS:{height:XVGlobals.minScanTabHeight,width:"100%"}});this.linkContentDividerToScanTabs();this.displayableData={};this.textCSS_small={color:"rgba(255,255,255,1)",position:"absolute",top:"0",left:"0",fontSize:XVGlobals.fontSizeMed,textAlign:"left",width:140};this.Menu=new Menu({parent:c.ScanTabs.getTab("Menu")});this.setHoverEvents();this.updateCSS()};goog.inherits(SlicerViewer,Viewer);SlicerViewer.prototype.defaultArgs={className:XVGlobals.classNames.SlicerViewer};
SlicerViewer.prototype.loadThumbnail=function(b){SlicerViewer.superClass_.loadThumbnail.call(this,b);this.ThreeDHolder.loadThumbnail(b,"3D")};
SlicerViewer.prototype.setHoverEvents=function(){var b=this,c=[XVGlobals.classNames.ThreeDHolder];this.hoverOut=function(){utils.array.forEach(b.widget.childNodes,function(b){utils.array.forEach(c,function(c){0>b.className.indexOf(c)&&utils.fx.fadeOut(b,0)})});this.ThreeDHolder&&this.ThreeDHolder.fadeOnHoverOut&&utils.array.forEach(b.ThreeDHolder.fadeOnHoverOut,function(b){utils.fx.fadeOut(b,0)})};this.hoverIn=function(){utils.array.forEach(b.widget.childNodes,function(b){utils.fx.fadeIn(b,0)});this.ThreeDHolder&&
this.ThreeDHolder.fadeOnHoverOut&&utils.array.forEach(b.ThreeDHolder.fadeOnHoverOut,function(b){utils.fx.fadeIn(b,0)})};goog.events.listen(this.widget,goog.events.EventType.MOUSEOVER,function(){b.hoverIn()});goog.events.listen(this.widget,goog.events.EventType.MOUSEOUT,function(){b.hoverOut()});b.hoverOut()};
SlicerViewer.prototype.createDragElement=function(b){var c=SlicerViewer.superClass_.createDragElement.call(this,b);"DUMMY"!==c.id&&(c=goog.dom.getAncestorByClass(b,XVGlobals.classNames.SlicerViewer).cloneNode(!0),c.style.fontFamily=XVGlobals.fontFamily,c.style.opacity=0.7,c.className="VIEWERCLONE",c.id="CLONE",utils.css.setCSS(c,{cursor:"move","-moz-user-select":"none"}),goog.events.removeAll(c));return c};utils.array.forEach=function(b,c){goog.array.forEach(b,c)};goog.exportSymbol("utils.array.forEach",utils.array.forEach);X.fibers=function(){X.object.call(this);this._classname="fibers";inject(this,new X.loadable)};goog.inherits(X.fibers,X.object);goog.exportSymbol("X.fibers",X.fibers);X.slice=function(b){X.object.call(this);this._classname="slice";this._center=[0,0,0];this._front=[0,0,1];this._up=[0,1,0];this._right=[1,0,0];this._height=this._width=10;this._textureCoordinateMap=[0,1,0,0,1,1,1,1,1,0,0,0];this._labelmap=this._volume=null;this._borders=!0;this._borderColor=[1,1,1];goog.isDefAndNotNull(b)&&this.copy_(b)};goog.inherits(X.slice,X.object);
X.slice.prototype.copy_=function(b){this._center=b._center.slice();this._front=b._front.slice();this._up=b._up.slice();this._width=b._width;this._height=b._height;this._volume=b._volume;this._labelmap=b._labelmap;this._borders=b._borders;this._borderColor=b._borderColor;this._hideChildren=b._hideChildren;X.slice.superClass_.copy_.call(this,b)};X.slice.prototype.__defineSetter__("height",function(b){this._height=b});X.slice.prototype.__defineSetter__("width",function(b){this._width=b});
X.slice.prototype.setup=function(b,c,d,e,f,g,h,k){if(!goog.isDefAndNotNull(b)||!goog.isArray(b)||3!=b.length)throw Error("Invalid center.");if(!goog.isDefAndNotNull(c)||!goog.isArray(c)||3!=c.length)throw Error("Invalid front direction.");if(!goog.isDefAndNotNull(d)||!goog.isArray(d)||3!=d.length)throw Error("Invalid up direction.");if(!goog.isNumber(f))throw Error("Invalid width.");if(!goog.isNumber(g))throw Error("Invalid height.");var m=!1;goog.isDefAndNotNull(h)&&(m=h);h=[1,1,1];goog.isDefAndNotNull(k)&&
(h=k);this._center=b;this._front=c;this._up=d;this._right=e;this._width=f;this._height=g;this._borders=m;this._borderColor=h;this.create_()};X.slice.prototype.create=function(){this.create_()};
X.slice.prototype.create_=function(){var b=new goog.math.Vec3(this._front[0],this._front[1],this._front[2]),c=new goog.math.Vec3(this._up[0],this._up[1],this._up[2]),d=new goog.math.Vec3(this._right[0],this._right[1],this._right[2]),e=new goog.math.Vec3(this._center[0],this._center[1],this._center[2]),f=new goog.math.Vec3(1,1,1);if(1==b.x||-1==b.x)f=new goog.math.Vec3(this._center[0],this._width/2,this._height/2);else if(1==b.y||-1==b.y)f=new goog.math.Vec3(this._height/2,this._center[1],this._width/
2);else if(1==b.z||-1==b.z)f=new goog.math.Vec3(this._width/2,this._height/2,this._center[2]);var g=goog.math.Vec3.sum(d.clone().invert(),c.clone().invert()),g=new goog.math.Vec3(g.x*f.x,g.y*f.y,g.z*f.z);g.add(e);var h=goog.math.Vec3.sum(d.clone().invert(),c),h=new goog.math.Vec3(h.x*f.x,h.y*f.y,h.z*f.z);h.add(e);var k=goog.math.Vec3.sum(d,c.clone().invert()),k=new goog.math.Vec3(k.x*f.x,k.y*f.y,k.z*f.z);k.add(e);var m=k,c=goog.math.Vec3.sum(d,c),c=new goog.math.Vec3(c.x*f.x,c.y*f.y,c.z*f.z);c.add(e);
e=h;this._points=new X.triplets(18);this._normals=new X.triplets(18);this._points.add(g.x,g.y,g.z);this._points.add(h.x,h.y,h.z);this._points.add(k.x,k.y,k.z);this._points.add(m.x,m.y,m.z);this._points.add(c.x,c.y,c.z);this._points.add(e.x,e.y,e.z);this._normals.add(b.x,b.y,b.z);this._normals.add(b.x,b.y,b.z);this._normals.add(b.x,b.y,b.z);this._normals.add(b.x,b.y,b.z);this._normals.add(b.x,b.y,b.z);this._normals.add(b.x,b.y,b.z);this._borders&&(b=new X.object,b._points=new X.triplets(24),b._normals=
new X.triplets(24),b._points.add(g.x,g.y,g.z),b._points.add(h.x,h.y,h.z),b._points.add(h.x,h.y,h.z),b._points.add(c.x,c.y,c.z),b._points.add(c.x,c.y,c.z),b._points.add(k.x,k.y,k.z),b._points.add(k.x,k.y,k.z),b._points.add(g.x,g.y,g.z),b._normals.add(0,0,0),b._normals.add(0,0,0),b._normals.add(0,0,0),b._normals.add(0,0,0),b._normals.add(0,0,0),b._normals.add(0,0,0),b._normals.add(0,0,0),b._normals.add(0,0,0),b._color=[this._borderColor[0],this._borderColor[1],this._borderColor[2]],b._type=X.displayable.types.LINES,
b._linewidth=2,this._children.push(b))};goog.exportSymbol("X.slice",X.slice);goog.exportSymbol("X.slice.prototype.create",X.slice.prototype.create);X.volume=function(b){X.object.call(this);this._classname="volume";this._center=[0,0,0];this._dimensions=[10,10,10];this._spacing=[1,1,1];this._image=[];this._indexIS=this._indexPA=this._indexLR=this._indexZold=this._indexZ=this._indexYold=this._indexY=this._indexXold=this._indexX=0;this._dimensionsRAS=[10,10,10];this._slicesX=new X.object;this._slicesY=new X.object;this._slicesZ=new X.object;this._volumeRenderingOld=this._volumeRendering=!1;this._volumeRenderingDirection=0;this._labelmap=null;this._borders=
!0;this._windowLow=Infinity;this._windowHigh=-Infinity;this._reslicing=!0;this._space=["left","posterior","superior"];this._spaceorientation=[1,0,0,0,1,0,0,0,1];this._rasspaceorientation=[-1,0,0,0,-1,0,0,0,1];this._orientation=[-1,-1,1];this._normcosine=[[-1,0,0],[0,-1,0],[0,0,1]];this._max=0;this._data=null;inject(this,new X.loadable);inject(this,new X.thresholdable);goog.isDefAndNotNull(b)&&this.copy_(b)};goog.inherits(X.volume,X.object);
X.volume.prototype.copy_=function(b){this._center=b._center.slice();this._dimensions=b._dimensions.slice();this._spacing=b._spacing.slice();this._indexX=b._indexX;this._indexXold=b._indexXold;this._indexY=b._indexY;this._indexYold=b._indexYold;this._indexZ=b._indexZ;this._indexZold=b._indexZold;this._indexLR=b._indexLR;this._indexPA=b._indexPA;this._indexIS=b._indexIS;this._dimensionsRAS=b._dimensionsRAS.slice();this._slicesX=new X.object(b._slicesX);this._slicesY=new X.object(b._slicesY);this._slicesZ=
new X.object(b._slicesZ);this._space=b.space;this._spaceorientation=b._spaceorientation;this._rasspaceorientation=b._rasspaceorientation;this._orientation=b._orientation;this._normcosine=b._normcosine;this._max=b._max;this._data=b._data;this._volumeRendering=b._volumeRendering;this._volumeRenderingOld=b._volumeRenderingOld;this._volumeRenderingDirection=b._volumeRenderingDirection;this._labelmap=b._labelmap;this._borders=b._borders;X.volume.superClass_.copy_.call(this,b)};
X.volume.prototype.create_=function(b){this._children.length=0;this._slicesX._children.length=0;this._slicesY._children.length=0;this._slicesZ._children.length=0;this._children.push(this._slicesX);this._children.push(this._slicesY);this._children.push(this._slicesZ);this._space=b.space;this._spaceorientation=b.spaceorientation;this._rasspaceorientation=b.rasspaceorientation;this._orientation=b.orientation;this._normcosine=b.normcosine;this._max=b.max;this._data=b.data;this._dirty=!0};
X.volume.prototype.map_=function(){var b=this._normcosine[2],c=this._dimensions;0!=b[0]?(this._indexLR=this._indexX,this._indexPA=this._indexY,this._indexIS=this._indexZ,this._dimensionsRAS=[c[2],c[0],c[1]]):0!=b[1]?(this._indexLR=this._indexY,this._indexPA=this._indexX,this._indexIS=this._indexZ,this._dimensionsRAS=[c[0],c[2],c[1]]):(this._indexLR=this._indexY,this._indexPA=this._indexZ,this._indexIS=this._indexX,this._dimensionsRAS=c)};
X.volume.prototype.modified=function(b){b="undefined"!==typeof b?b:!0;if(0<this._children.length){this._volumeRendering!=this._volumeRenderingOld&&(this._volumeRendering?(this._children[0]._children[parseInt(this._indexX,10)].visible=!1,this._children[1]._children[parseInt(this._indexY,10)].visible=!1,this._children[2]._children[parseInt(this._indexZ,10)].visible=!1):this._children[this._volumeRenderingDirection].visible=!1,this._dirty=!0,this._volumeRenderingOld=this._volumeRendering);if(!this._visible)return;
this._volumeRendering?this.volumeRendering_(this._volumeRenderingDirection):this.slicing_()}b&&X.volume.superClass_.modified.call(this)};
X.volume.prototype.slicing_=function(){for(var b=0,b=0;3>b;b++){var c=this._children[b],d=0,e=0;0==b?(d=this._indexX,e=this._indexXold,this._indexXold=this._indexX):1==b?(d=this._indexY,e=this._indexYold,this._indexYold=this._indexY):2==b&&(d=this._indexZ,e=this._indexZold,this._indexZold=this._indexZ);c._children[parseInt(e,10)].visible=!1;c=c._children[parseInt(d,10)];c.visible=!0;c._opacity=1}};X.volume.prototype.__defineGetter__("dimensions",function(){return this._dimensions});
X.volume.prototype.__defineGetter__("dimensionsRAS",function(){return this._dimensionsRAS});X.volume.prototype.__defineGetter__("volumeRendering",function(){return this._volumeRendering});X.volume.prototype.__defineSetter__("volumeRendering",function(b){this._volumeRendering=b;this.modified(!1)});X.volume.prototype.__defineGetter__("visible",function(){return this._visible});
X.volume.prototype.__defineSetter__("visible",function(b){if(b)this._visible=b,this.modified(!1);else{for(var c=this._children,d=c.length,e=0,e=0;e<d;e++)c[e].visible=b;this._visible=b;this._dirty=!0}});X.volume.prototype.__defineGetter__("center",function(){return this._center});X.volume.prototype.__defineSetter__("center",function(b){if(!goog.isDefAndNotNull(b)||!goog.isArray(b)||3!=b.length)throw Error("Invalid center.");this._center=b});X.volume.prototype.__defineGetter__("image",function(){return this._image});
X.volume.prototype.__defineGetter__("labelmap",function(){this._labelmap||(this._labelmap=new X.labelmap(this));return this._labelmap});X.volume.prototype.__defineGetter__("indexIS",function(){return this._indexIS=0!=this._normcosine[2][2]?this._indexX:this._indexZ});X.volume.prototype.__defineSetter__("indexIS",function(b){goog.isNumber(b)&&(0!=this._normcosine[2][2]?this._indexX=b:this._indexZ=b,this._indexIS=b,this.modified(!1))});
X.volume.prototype.__defineGetter__("indexLR",function(){return this._indexLR=0!=this._normcosine[2][0]?this._indexX:this._indexY});X.volume.prototype.__defineSetter__("indexLR",function(b){goog.isNumber(b)&&(0!=this._normcosine[2][0]?this._indexX=b:this._indexY=b,this._indexLR=b,this.modified(!1))});X.volume.prototype.__defineGetter__("indexPA",function(){return this._indexPA=0!=this._normcosine[2][0]?this._indexY:0!=this._normcosine[2][1]?this._indexX:this._indexZ});
X.volume.prototype.__defineSetter__("indexPA",function(b){goog.isNumber(b)&&(0!=this._normcosine[2][0]?this._indexY=b:0!=this._normcosine[2][1]?this._indexX=b:this._indexZ=b,this._indexPA=b,this.modified(!1))});X.volume.prototype.__defineGetter__("indexX",function(){return this._indexX});X.volume.prototype.__defineSetter__("indexX",function(b){goog.isNumber(b)&&(0<=b&&b<this._slicesX._children.length)&&(this._indexX=b,this.modified(!1))});X.volume.prototype.__defineGetter__("indexY",function(){return this._indexY});
X.volume.prototype.__defineSetter__("indexY",function(b){goog.isNumber(b)&&(0<=b&&b<this._slicesY._children.length)&&(this._indexY=b,this.modified(!1))});X.volume.prototype.__defineGetter__("indexZ",function(){return this._indexZ});X.volume.prototype.__defineSetter__("indexZ",function(b){goog.isNumber(b)&&(0<=b&&b<this._slicesZ._children.length)&&(this._indexZ=b,this.modified(!1))});X.volume.prototype.__defineGetter__("windowLow",function(){return this._windowLow});
X.volume.prototype.__defineSetter__("windowLow",function(b){this._windowLow=b});X.volume.prototype.__defineGetter__("windowHigh",function(){return this._windowHigh});X.volume.prototype.__defineSetter__("windowHigh",function(b){this._windowHigh=b});X.volume.prototype.__defineGetter__("borders",function(){return this._borders});X.volume.prototype.__defineSetter__("borders",function(b){this._borders=b});X.volume.prototype.__defineGetter__("reslicing",function(){return this._reslicing});
X.volume.prototype.__defineSetter__("reslicing",function(b){this._reslicing=b});
X.volume.prototype.volumeRendering_=function(b){b=(b+2)%3;b=0!=this._normcosine[0][b]?2:0!=this._normcosine[1][b]?0:1;0!=this._normcosine[2][1]&&(b=(b+1)%3);if(this._volumeRendering&&(this._dirty||b!=this._volumeRenderingDirection)){var c=this._children[this._volumeRenderingDirection];c.visible=!1;var c=this._children[b],d=c._children.length,e;for(e=0;e<d;e++)c._children[e]._visible=!0;this._volumeRenderingDirection=b;this._dirty=!1}};goog.exportSymbol("X.volume",X.volume);
goog.exportSymbol("X.volume.prototype.modified",X.volume.prototype.modified);var csgVector=function(b,c,d){this.z_=this.y_=this.x_=0;3==arguments.length?(this.x_=Number(b),this.y_=Number(c),this.z_=Number(d)):b instanceof csgVector?(this.x_=Number(b.x()),this.y_=Number(b.y()),this.z_=Number(b.z())):(this.x_=Number(b[0]),this.y_=Number(b[1]),this.z_=Number(b[2]))};
csgVector.prototype={clone:function(){return new csgVector(this.x_,this.y_,this.z_)},negated:function(){return new csgVector(-this.x_,-this.y_,-this.z_)},plus:function(b){return new csgVector(this.x_+b.x(),this.y_+b.y(),this.z_+b.z())},minus:function(b){return new csgVector(this.x_-b.x(),this.y_-b.y(),this.z_-b.z())},times:function(b){return new csgVector(this.x_*b,this.y_*b,this.z_*b)},dividedBy:function(b){return new csgVector(this.x_/b,this.y_/b,this.z_/b)},dot:function(b){return this.x_*b.x()+
this.y_*b.y()+this.z_*b.z()},lerp:function(b,c){return this.plus(b.minus(this).times(c))},length:function(){return Math.sqrt(this.dot(this))},unit:function(){return this.dividedBy(this.length())},cross:function(b){return new csgVector(this.y_*b.z()-this.z_*b.y(),this.z_*b.x()-this.x_*b.z(),this.x_*b.y()-this.y_*b.x())},x:function(){return this.x_},y:function(){return this.y_},z:function(){return this.z_}};var csgVertex=function(b,c){this.pos_=new csgVector(b);this.normal_=new csgVector(c)};csgVertex.prototype={clone:function(){return new csgVertex(this.pos_.clone(),this.normal_.clone())},flip:function(){this.normal_=this.normal_.negated()},interpolate:function(b,c){return new csgVertex(this.pos_.lerp(b.pos(),c),this.normal_.lerp(b.normal(),c))},pos:function(){return this.pos_},normal:function(){return this.normal_}};var csgPlane=function(b,c){this.normal_=b;this.w_=c};csgPlane.EPSILON=1E-5;csgPlane.fromPoints=function(b,c,d){c=c.minus(b).cross(d.minus(b)).unit();return new csgPlane(c,c.dot(b))};csgPlane.prototype={clone:function(){return new csgPlane(this.normal_.clone(),this.w_)},flip:function(){this.normal_=this.normal_.negated();this.w_=-this.w_},w:function(){return this.w_},normal:function(){return this.normal_}};var csgPolygon=function(b,c){this.vertices_=b;this.shared_=c;this.plane_=csgPlane.fromPoints(b[0].pos(),b[1].pos(),b[2].pos())};
csgPolygon.prototype={clone:function(){var b=this.vertices_.map(function(b){return b.clone()});return new csgPolygon(b,this.shared_)},flip:function(){this.vertices_.reverse().map(function(b){b.flip()});this.plane_.flip()},vertices:function(){return this.vertices_},shared:function(){return this.shared_},splitPolygon:function(b,c,d,e,f){for(var g=0,h=[],k=0,m=this.vertices_.length;k<m;k++){var p=b.normal().dot(this.vertices_[k].pos())-b.w(),p=p<-csgPlane.EPSILON?2:p>csgPlane.EPSILON?1:0,g=g|p;h.push(p)}switch(g){case 0:(0<
b.normal().dot(this.plane_.normal())?c:d).push(this);break;case 1:e.push(this);break;case 2:f.push(this);break;case 3:c=[];d=[];k=0;for(m=this.vertices.length;k<m;k++){var n=(k+1)%this.vertices().length,p=h[k],q=h[n],g=this.vertices()[k],n=this.vertices()[n];2!=p&&c.push(g);1!=p&&d.push(2!=p?g.clone():g);3==(p|q)&&(p=(b.w()-b.normal().dot(g.pos()))/b.normal().dot(n.pos().minus(g.pos())),p=g.interpolate(n,p),c.push(p),d.push(p.clone()))}3<=c.length&&e.push(new csgPolygon(c,this.shared()));3<=d.length&&
f.push(new csgPolygon(d,this.shared()))}}};var csgNode=function(b){this.back_=this.front_=this.plane_=null;this.polygons_=[];b&&this.build(b)};
csgNode.prototype={clone:function(){var b=new csgNode;b.setPlane(this.plane_&&this.plane_.clone());b.setFront(this.front_&&this.front_.clone());b.setBack(this.back_&&this.back_.clone());b.setPolygons(this.polygons_.map(function(b){return b.clone()}));return b},invert:function(){for(var b=0,c=this.polygons_.length;b<c;b++)this.polygons_[b].flip();this.plane_.flip();this.front_&&this.front_.invert();this.back_&&this.back_.invert();b=this.front_;this.front_=this.back_;this.back_=b},clipPolygons:function(b){if(!this.plane_)return b.slice();
for(var c=[],d=[],e=0,f=b.length;e<f;e++)b[e].splitPolygon(this.plane_,c,d,c,d);this.front_&&(c=this.front_.clipPolygons(c));d=this.back_?this.back_.clipPolygons(d):[];return c.concat(d)},clipTo:function(b){this.polygons_=b.clipPolygons(this.polygons_);this.front_&&this.front_.clipTo(b);this.back_&&this.back_.clipTo(b)},allPolygons:function(){var b=this.polygons_.slice();this.front_&&(b=b.concat(this.front_.allPolygons()));this.back_&&(b=b.concat(this.back_.allPolygons()));return b},build:function(b){if(b.length){this.plane_||
(this.plane_=b[0].plane_.clone());for(var c=[],d=[],e=0,f=b.length;e<f;e++)b[e].splitPolygon(this.plane_,this.polygons_,this.polygons_,c,d);c.length&&(this.front_||(this.front_=new csgNode),this.front_.build(c));d.length&&(this.back_||(this.back_=new csgNode),this.back_.build(d))}},plane:function(){return this.plane_},setPlane:function(b){this.plane_=b},front:function(){return this.front_},setFront:function(b){this.front_=b},back:function(){return this.back_},setBack:function(b){this.back_=b},polygons:function(){return this.polygons_},
setPolygons:function(b){this.polygons_=b}};var CSG=function(){this.polygons_=[]};CSG.fromPolygons=function(b){var c=new CSG;c.setPolygons(b);return c};
CSG.prototype={clone:function(){var b=new CSG;b.setPolygons(this.polygons_.map(function(b){return b.clone()}));return b},toPolygons:function(){return this.polygons_},union:function(b){var c=new csgNode(this.clone().polygons());b=new csgNode(b.clone().polygons());c.clipTo(b);b.clipTo(c);b.invert();b.clipTo(c);b.invert();c.build(b.allPolygons());return CSG.fromPolygons(c.allPolygons())},subtract:function(b){var c=new csgNode(this.clone().polygons());b=new csgNode(b.clone().polygons());c.invert();c.clipTo(b);
b.clipTo(c);b.invert();b.clipTo(c);b.invert();c.build(b.allPolygons());c.invert();return CSG.fromPolygons(c.allPolygons())},intersect:function(b){var c=new csgNode(this.clone().polygons());b=new csgNode(b.clone().polygons());c.invert();b.clipTo(c);b.invert();c.clipTo(b);b.clipTo(c);c.build(b.allPolygons());c.invert();return CSG.fromPolygons(c.allPolygons())},inverse:function(){var b=this.clone();b.polygons().map(function(b){b.flip()});return b},polygons:function(){return this.polygons_},setPolygons:function(b){this.polygons_=
b}};X.constructable=function(){};X.constructable.prototype.toCSG=function(){for(var b=this._points.count,c=[],d=0,d=0;d<b;d+=3){var e=this._points.get(d),f=this._points.get(d+1),g=this._points.get(d+2),h=this._normals.get(d),k=this._normals.get(d+1),m=this._normals.get(d+2),p=this._color;this._colors&&0<this._colors.length&&(p=this._colors.get(d));var n=[];n.push(new csgVertex(e,h));n.push(new csgVertex(f,k));n.push(new csgVertex(g,m));c.push(new csgPolygon(n,p))}return CSG.fromPolygons(c)};
X.constructable.prototype.fromCSG=function(b){if(!(goog.isDefAndNotNull(b)&&b instanceof CSG))throw Error("Invalid CSG object.");var c=new X.indexer,d=[];b=b.toPolygons();goog.array.map(b,function(b){var f=[],f=b.vertices(),g=b.shared(),f=goog.array.map(f,function(b){b.color=g;return c.add(b)});b=b=2;for(var h=f.length;b<h;b++)d.push([f[0],f[b-1],f[b]])}.bind(this));this.__vertices=goog.array.map(c.unique(),function(b){return[b.pos().x(),b.pos().y(),b.pos().z()]});this.__normals=goog.array.map(c.unique(),
function(b){return[b.normal().x(),b.normal().y(),b.normal().z()]});this.__colors=goog.array.map(c.unique(),function(b){return b.color?[b.color[0],b.color[1],b.color[2]]:null});this._points=new X.triplets(9*d.length);this._normals=new X.triplets(9*d.length);this._colors=new X.triplets(9*d.length);goog.array.map(d,function(b){var c=b[0],d=b[1];b=b[2];var h=this.__vertices,k=this.__normals,m=this.__colors;this._points.add(h[c][0],h[c][1],h[c][2]);this._points.add(h[d][0],h[d][1],h[d][2]);this._points.add(h[b][0],
h[b][1],h[b][2]);this._normals.add(k[c][0],k[c][1],k[c][2]);this._normals.add(k[d][0],k[d][1],k[d][2]);this._normals.add(k[b][0],k[b][1],k[b][2]);m[c]&&this._colors.add(m[c][0],m[c][1],m[c][2]);m[d]&&this._colors.add(m[d][0],m[d][1],m[d][2]);m[b]&&this._colors.add(m[b][0],m[b][1],m[b][2])}.bind(this));0==this._colors._dataPointer&&(this._colors=null);this._type=X.displayable.types.TRIANGLES};
X.constructable.prototype.union=function(b){if(!goog.isDefAndNotNull(b)||!(b instanceof CSG||b instanceof X.object))throw Error("Invalid object.");var c=b;b instanceof X.object&&(c=c.toCSG());b=new X.object;inject(b,new X.constructable);b.fromCSG(this.toCSG().union(c));return b};
X.constructable.prototype.subtract=function(b){if(!goog.isDefAndNotNull(b)||!(b instanceof CSG||b instanceof X.object))throw Error("Invalid object.");var c=b;b instanceof X.object&&(c=c.toCSG());b=new X.object;inject(b,new X.constructable);b.fromCSG(this.toCSG().subtract(c));return b};
X.constructable.prototype.intersect=function(b){if(!goog.isDefAndNotNull(b)||!(b instanceof CSG||b instanceof X.object))throw Error("Invalid object.");var c=b;b instanceof X.object&&(c=c.toCSG());b=new X.object;inject(b,new X.constructable);b.fromCSG(this.toCSG().intersect(c));return b};X.constructable.prototype.inverse=function(){var b=new X.object;inject(b,new X.constructable);b.fromCSG(this.toCSG().inverse());return b};goog.exportSymbol("X.constructable",X.constructable);
goog.exportSymbol("X.constructable.prototype.intersect",X.constructable.prototype.intersect);goog.exportSymbol("X.constructable.prototype.inverse",X.constructable.prototype.inverse);goog.exportSymbol("X.constructable.prototype.subtract",X.constructable.prototype.subtract);goog.exportSymbol("X.constructable.prototype.union",X.constructable.prototype.union);CSG.sphere=function(b){function c(b,c){b*=2*Math.PI;c*=Math.PI;var f=new csgVector(Math.cos(b)*Math.sin(c),Math.cos(c),Math.sin(b)*Math.sin(c));h.push(new csgVertex(d.plus(f.times(e)),f))}CSG.call(this);b=b||{};var d=new csgVector(b.center||[0,0,0]),e=b.radius||1,f=b.slices||16;b=b.stacks||8;for(var g=[],h=[],k=0,m=f;k<m;k++)for(var p=0,m=b;p<m;p++)h=[],c(k/f,p/b),0<p&&c((k+1)/f,p/b),p<b-1&&c((k+1)/f,(p+1)/b),c(k/f,(p+1)/b),g.push(new csgPolygon(h));return CSG.fromPolygons(g)};
goog.inherits(CSG.sphere,CSG);X.sphere=function(){X.object.call(this);this._classname="sphere";this._center=[0,0,0];this._radius=5;this._slices=32;this._stacks=16;inject(this,new X.constructable)};goog.inherits(X.sphere,X.object);X.sphere.prototype.__defineGetter__("center",function(){return this._center});X.sphere.prototype.__defineSetter__("center",function(b){if(!goog.isDefAndNotNull(b)||!goog.isArray(b)||3!=b.length)throw Error("Invalid center");this._center=b});X.sphere.prototype.__defineGetter__("radius",function(){return this._radius});
X.sphere.prototype.__defineSetter__("radius",function(b){if(!goog.isNumber(b))throw Error("Invalid radius.");this._radius=b});X.sphere.prototype.modified=function(){this.fromCSG(new CSG.sphere({center:this._center,radius:this._radius,slices:this._slices,stacks:this._stacks}));X.sphere.superClass_.modified.call(this)};goog.exportSymbol("X.sphere",X.sphere);goog.exportSymbol("X.sphere.prototype.modified",X.sphere.prototype.modified);X.mesh=function(){X.object.call(this);this._classname="mesh";inject(this,new X.loadable)};goog.inherits(X.mesh,X.object);goog.exportSymbol("X.mesh",X.mesh);var SlicerFileHandler=function(){};goog.exportSymbol("SlicerFileHandler",SlicerFileHandler);SlicerFileHandler.prototype.getFileExt=function(b){if(!b)throw b;1<b[0].length&&(b=b[0]);b=b.slice(b.lastIndexOf(".")+1,b.length);"gz"==b&&(b="nii."+b);return b.toLowerCase()};goog.exportProperty(SlicerFileHandler.prototype,"getFileExt",SlicerFileHandler.prototype.getFileExt);
SlicerFileHandler.prototype.getXTKObjName=function(b){var c;switch(b){case "stl":case "vtk":case "obj":case "fsm":case "inflated":case "smoothwm":case "pial":case "orig":c=new X.mesh;break;case "nrrd":case "nii":case "nii.gz":case "mgh":case "mgz":case "dicom":case "dcm":c=new X.volume;break;case "trk":c=new X.fibers;break;default:console.log("haven't added support for ."+b+" files yet")}return c};goog.exportProperty(SlicerFileHandler.prototype,"getXTKObjName",SlicerFileHandler.prototype.getXTKObjName);
SlicerFileHandler.prototype.isVolume=function(b){b=this.getFileExt(b);for(var c="nrrd nii nii.gz mgh mgz dicom dcm".split(" "),d=!1,e=0;e<c.length;++e)if(c[e]==b){d=!0;break}return d};goog.exportProperty(SlicerFileHandler.prototype,"isVolume",SlicerFileHandler.prototype.isVolume);SlicerFileHandler.prototype.getFileObjectType=function(b){var c=this.getFileExt(b);return"mrml"==c?"slicer":"trk"==c?"fiber":this.isVolume(b)?"volume":"mesh"};
goog.exportProperty(SlicerFileHandler.prototype,"getFileObjectType",SlicerFileHandler.prototype.getFileObjectType);SlicerFileHandler.prototype.createXObject=function(b){var c=this.getFileExt(b);obj=this.getXTKObjName(c);if("dcm"==c||"dicom"==c){for(var c=[],d=1;160>=d;++d)c.push(d);obj.file=c.sort().map(function(c){return b.slice(0,-4)+c+".dcm"})}else obj.file=b;return obj};goog.exportProperty(SlicerFileHandler.prototype,"createXObject",SlicerFileHandler.prototype.createXObject);var Modal=function(b){var c=this;XVWidget.call(this,utils.dom.mergeArgs(Modal.prototype.defaultArgs,b));this.widget.onclick=function(){c.destroy()};window.onresize=function(){c.updateCSS()};this.modal=utils.dom.makeElement("div",this.widget,XVGlobals.ModalId,this.args.modalCSS);utils.css.setCSS(this.modal,{"overflow-x":"hidden","overflow-y":"hidden"});this.modal.onclick=function(b,c){utils.dom.stopPropagation(b)};utils.css.setCSS(this.modal,{height:"50%",width:"50%"});this.closeButton=utils.dom.makeElement("img",
this.widget,"closeIcon",{position:"absolute",cursor:"pointer",width:10,height:10,zIndex:103});this.closeButton.src="./icons/closeX.png";this.scanDataPaths=demoScanData;this.slicerDataPaths=demoSlicerData;this.dragDropThumbnails=[];c.addScrollGallery();c.addRowMenu();c.addColumnMenu();c.initThumbnailDragDrop();c.initViewerDragDrop();c.addViewerManager();c.ViewerManager({addViewersChangedCallback:function(){c.setThumbnailDragAndDrop();c.setViewerDragAndDrop()}});c.ViewerManager({insert:"column",animate:"off"});
c.ViewerManager({insert:"column",animate:"off"});c.updateCSS()};goog.inherits(Modal,XVWidget);goog.exportSymbol("Modal",Modal);
Modal.prototype.defaultArgs={className:XVGlobals.classNames.Modal,layout:"all_columns",numViewers:1,parent:document.body,minLeft:50,minTop:20,compressWidth:0.33,expandWidth:0.9,expanded:!1,gutter:10,marginWidth:50,marginTop:10,marginLeft:10,expandButtonWidth:30,galleryWidth:100,MINIMUMHEIGHT:400,heightPct:0.9,CSS:{position:"fixed",height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,.5)",display:"inline-block","font-family":'Helvetica,"Helvetica neue", Arial, sans-serif'},modalCSS:{position:"absolute",
backgroundColor:"rgba(0,0,0,1)",border:"none","border-radius":"20px"}};Modal.modalDims={};
Modal.prototype.modalDims=function(b){var c=Math.round(window.innerWidth*XVGlobals.maxModalHeightPct);b=XVGlobals.maxModalHeightPct*window.innerHeight;var d=this.ViewerManager(),e=d[0].length,f=d.length,g=(b-(f+1)*XVGlobals.expandButtonWidth)/f,h=XVGlobals.ViewerDimRatio*g,d=XVGlobals.ScrollGalleryWidth+h*e+XVGlobals.ViewerVerticalMargin*e+XVGlobals.expandButtonWidth;d>c&&(h=(c-(XVGlobals.ScrollGalleryWidth+XVGlobals.ViewerVerticalMargin*e+XVGlobals.expandButtonWidth))/e,g=h/XVGlobals.ViewerDimRatio,d=
c,b=g*f+XVGlobals.ViewerVerticalMargin*(f-1)+2*XVGlobals.expandButtonWidth);var c=(window.innerWidth-d)/2,e=(window.innerHeight-b)/2,f={height:Math.round(b)-2*XVGlobals.expandButtonWidth,top:XVGlobals.expandButtonWidth},k=[],m=[],p=utils.css.dims(this.ScrollGallery.widget),n=p.width+p.left+XVGlobals.ViewerVerticalMargin;this.ViewerManager(function(b,c,d){l=n+d*(h+XVGlobals.ViewerVerticalMargin);0!=d&&k[c]||k.push([]);k[c][d]=l;0!=d&&m[c]||m.push([]);m[c][d]=-1+c*(g+XVGlobals.ViewerHorizontalMargin);
m[c][d]+=XVGlobals.expandButtonWidth});return{width:Math.round(d),left:Math.round(c),height:Math.round(b),top:Math.round(e),Viewer:{width:Math.round(h),height:Math.round(g),lefts:k,tops:m},ScrollGallery:{widgetCSS:f},closeButton:{left:Math.round(c)+Math.round(d)-utils.convert.toInt(this.closeButton.style.width)-13,top:Math.round(e)+10},ColumnMenu:{left:Math.round(d)-XVGlobals.expandButtonWidth,top:m[0][0]+Math.round(b)/2-XVGlobals.expandButtonWidth-20,width:XVGlobals.expandButtonWidth-1,height:40},
RowMenu:{left:k[0][0]+(Math.round(d)-k[0][0]-XVGlobals.expandButtonWidth)/2-17,top:Math.round(b)-XVGlobals.expandButtonWidth,width:40,height:XVGlobals.expandButtonWidth-1}}};goog.exportProperty(Modal.prototype,"modalDims",Modal.prototype.modalDims);goog.net={};goog.net.EventType={COMPLETE:"complete",SUCCESS:"success",ERROR:"error",ABORT:"abort",READY:"ready",READY_STATE_CHANGE:"readystatechange",TIMEOUT:"timeout",INCREMENTAL_DATA:"incrementaldata",PROGRESS:"progress"};goog.net.ImageLoader=function(b){goog.events.EventTarget.call(this);this.imageIdToUrlMap_={};this.imageIdToImageMap_={};this.handler_=new goog.events.EventHandler(this);this.parent_=b};goog.inherits(goog.net.ImageLoader,goog.events.EventTarget);goog.net.ImageLoader.IMAGE_LOAD_EVENTS_=[goog.userAgent.IE?goog.net.EventType.READY_STATE_CHANGE:goog.events.EventType.LOAD,goog.net.EventType.ABORT,goog.net.EventType.ERROR];
goog.net.ImageLoader.prototype.addImage=function(b,c){var d=goog.isString(c)?c:c.src;d&&(this.imageIdToUrlMap_[b]=d)};goog.net.ImageLoader.prototype.removeImage=function(b){delete this.imageIdToUrlMap_[b];var c=this.imageIdToImageMap_[b];c&&(delete this.imageIdToImageMap_[b],this.handler_.unlisten(c,goog.net.ImageLoader.IMAGE_LOAD_EVENTS_,this.onNetworkEvent_),goog.object.isEmpty(this.imageIdToImageMap_)&&goog.object.isEmpty(this.imageIdToUrlMap_)&&this.dispatchEvent(goog.net.EventType.COMPLETE))};
goog.net.ImageLoader.prototype.start=function(){var b=this.imageIdToUrlMap_;goog.array.forEach(goog.object.getKeys(b),function(c){var d=b[c];d&&(delete b[c],this.loadImage_(d,c))},this)};goog.net.ImageLoader.prototype.loadImage_=function(b,c){if(!this.isDisposed()){var d;d=this.parent_?goog.dom.getDomHelper(this.parent_).createDom("img"):new Image;this.handler_.listen(d,goog.net.ImageLoader.IMAGE_LOAD_EVENTS_,this.onNetworkEvent_);this.imageIdToImageMap_[c]=d;d.id=c;d.src=b}};
goog.net.ImageLoader.prototype.onNetworkEvent_=function(b){var c=b.currentTarget;if(c){if(b.type==goog.net.EventType.READY_STATE_CHANGE)if(c.readyState==goog.net.EventType.COMPLETE)b.type=goog.events.EventType.LOAD;else return;"undefined"==typeof c.naturalWidth&&(b.type==goog.events.EventType.LOAD?(c.naturalWidth=c.width,c.naturalHeight=c.height):(c.naturalWidth=0,c.naturalHeight=0));this.dispatchEvent({type:b.type,target:c});this.isDisposed()||this.removeImage(c.id)}};
goog.net.ImageLoader.prototype.disposeInternal=function(){delete this.imageIdToUrlMap_;delete this.imageIdToImageMap_;goog.dispose(this.handler_);goog.net.ImageLoader.superClass_.disposeInternal.call(this)};var Thumbnail=function(b){var c=this;XVWidget.call(this,utils.dom.mergeArgs(Thumbnail.prototype.defaultArgs,b));goog.fx.DragDrop.call(this,this.widget,void 0);this.ThumbnailImage=new Image;this.ThumbnailImage.className="ThumbnailImage";this.ThumbnailCanvas=this.makeThumbnailCanvas("ThumbCanvas");this.TextElement=utils.dom.makeElement("div",this.widget,"TextElement",{position:"absolute",height:this.args.ThumbnailImageCSS.height,width:this.args.ThumbnailImageCSS.width,top:1*XVGlobals.ThumbnailImageMarginX,
left:this.args.ThumbnailImageCSS.width+2*XVGlobals.ThumbnailImageMarginX,fontSize:11,fontFamily:'Helvetica,"Helvetica neue", Arial, sans-serif',overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"});utils.dom.addClass(this.ThumbnailCanvas,XVGlobals.classNames.ThumbnailCanvas);this.addHoverMethods();this.ThumbnailImage.onload=function(){c.ThumbnailCanvas?c.ThumbnailCanvas.getContext("2d").drawImage(c.ThumbnailImage,0,0,c.args.ThumbnailImageCSS.width,c.args.ThumbnailImageCSS.height):utils.dom.debug("No thumb canvas");
if(b.onloadCallbacks)for(var d=0,e=b.onloadCallbacks.length;d<e;d++)b.onloadCallbacks[d]()}};goog.inherits(Thumbnail,XVWidget);goog.inherits(Thumbnail,goog.fx.DragDrop);goog.exportSymbol("Thumbnail",Thumbnail);Thumbnail.prototype.setActive=function(b){this.isActive_=b;this.hoverMethods.setDefault()};
Thumbnail.prototype.createDragElement=function(b){var c;c=goog.dom.getAncestorByClass(b,this.args.className);b=c.cloneNode(!0);c=goog.dom.getElementByClass(XVGlobals.classNames.ThumbnailCanvas,c);goog.dom.getElementByClass(XVGlobals.classNames.ThumbnailCanvas,b).getContext("2d").drawImage(c,0,0);b.style.opacity=0.5;b.className="CLONE";b.id="CLONE";goog.events.removeAll(b);return b};Thumbnail.prototype.pathMolder=function(b){splitStrs=b.split("demoscans");return splitStrs[1]};
Thumbnail.prototype.makeThumbnailCanvas=function(b){b=utils.dom.makeElement("canvas",this.widget,b,utils.dom.mergeArgs(this.args.ThumbnailImageCSS,{top:XVGlobals.ThumbnailImageMarginY,left:XVGlobals.ThumbnailImageMarginX}));b.width=this.args.ThumbnailImageCSS.width;b.height=this.args.ThumbnailImageCSS.height;return b};
Thumbnail.prototype.addHoverMethods=function(){var b=this;this.hoverMethods||(this.hoverMethods={});this.hoverMethods.setDefault=function(){var c=b.isActive_?b.args.textHighlight:b.args.textDefault;utils.css.setCSS(b.TextElement,{color:c});utils.css.setCSS(b.ThumbnailCanvas,{borderColor:c});utils.css.setCSS(b.widget,{backgroundColor:b.args.bgDefault})};this.hoverMethods.highlight=function(){utils.css.setCSS(b.widget,{backgroundColor:b.args.bgHighlight});utils.css.setCSS(b.TextElement,{color:b.args.textHighlight});
utils.css.setCSS(b.ThumbnailCanvas,{borderColor:b.args.textHighlight})};this.hoverMethods.applyHover=function(c){c?b.hoverMethods.highlight():b.hoverMethods.setDefault()};goog.events.listen(this.widget,goog.events.EventType.MOUSEOVER,function(){b.hoverMethods.applyHover(!0)});goog.events.listen(this.widget,goog.events.EventType.MOUSEOUT,function(){b.hoverMethods.applyHover(!1)});b.hoverMethods.setDefault()};
Thumbnail.prototype.defaultArgs={className:XVGlobals.classNames.Thumbnail,parent:document.body,draggableParent:document.body,activated:"false",bgDefault:"rgb(0,0,0)",bgHighlight:"rgb(50, 50, 50)",textDefault:"rgb(120,120,120)",textHighlight:"rgb(230, 230, 230)",widgetCSS:{position:"absolute",width:XVGlobals.ThumbnailWidgetWidth,height:XVGlobals.ThumbnailWidgetHeight,top:"0",left:"0",cursor:"pointer",backgroundColor:"rgb(0,0,0)"},ThumbnailImageCSS:{position:"absolute",width:XVGlobals.ThumbnailImageWidth-
2,height:XVGlobals.ThumbnailImageHeight-2,top:"0",left:"0","overflow-y":"hidden","overflow-x":"hidden",border:"solid","border-color":"rgb(120,120,120)",borderWidth:1,"border-radius":0,cursor:"pointer"}};Thumbnail.prototype.updateCSS=function(){};Thumbnail.prototype.addActivatedCallback=function(b){this.activatedCallbacks||(this.activatedCallbacks=[]);this.activatedCallbacks.push(b)};var ScanThumbnail=function(b,c){function d(b){var c=e.getFrameList(b);e[b+"FrameCount"]=c.length;e[b+"LoadCount"]=0;utils.array.forEach(c,function(c){e.frames[e.pathMolder(c)]={viewPlane:b,src:c}})}Thumbnail.call(this,utils.dom.mergeArgs(ScanThumbnail.prototype.defaultArgs,c));var e=this;this.scanData=b;this.ThumbnailImage.src=this.scanData.sagittalPaths[Math.round(e.scanData.sagittalPaths.length/2)];this.frames={};this.getFrames=function(b){var c="object"===typeof b;if("string"===typeof b){var c=
b,d=[],k;for(k in e.frames)e.frames[k].viewPlane===c&&d.push(e.frames[k]);return d}if(c){var c=b.viewPlane,m=b.filter?b.filter:!1,d=[];for(k in e.frames)e.frames[k].viewPlane===c&&m&&e.frames[k][b.filter]&&d.push(e.frames[k][b.filter]);return d}};d("sagittal");d("coronal");d("transverse");this.ThumbnailCanvas.metaText=[];this.ThumbnailCanvas.metaText[0]=utils.convert.toInt(this.scanData.sessionInfo.Scan.value);this.ThumbnailCanvas.metaText[1]=this.scanData.sessionInfo.type.value.toString().toLowerCase();
this.ThumbnailCanvas.metaText[2]=this.scanData.sagittalPaths.length.toString().toLowerCase();this.TextElement.innerHTML+="<b><font size = '3'>"+this.ThumbnailCanvas.metaText[0]+"</font></b><br>";this.TextElement.innerHTML+=this.ThumbnailCanvas.metaText[1]+"<br>";this.TextElement.innerHTML+=this.ThumbnailCanvas.metaText[2]+" frames<br>";this.addHoverMethods()};goog.inherits(ScanThumbnail,Thumbnail);goog.exportSymbol("ScanThumbnail",ScanThumbnail);
ScanThumbnail.prototype.createDragElement=function(b){var c;c=goog.dom.getAncestorByClass(b,this.args.className);b=c.cloneNode(!0);c=goog.dom.getElementByClass(XVGlobals.classNames.ThumbnailCanvas,c);goog.dom.getElementByClass(XVGlobals.classNames.ThumbnailCanvas,b).getContext("2d").drawImage(c,0,0);b.style.opacity=0.5;b.className="CLONE";b.id="CLONE";goog.events.removeAll(b);return b};ScanThumbnail.prototype.defaultArgs={className:XVGlobals.classNames.ScanThumbnail};
ScanThumbnail.prototype.getFrameList=function(b){return"sagittal"===b?this.scanData.sagittalPaths:"transverse"===b?this.scanData.axialPaths:this.scanData.coronalPaths};ScanThumbnail.prototype.updateCSS=function(){};ScanThumbnail.prototype.addActivatedCallback=function(b){this.activatedCallbacks||(this.activatedCallbacks=[]);this.activatedCallbacks.push(b)};Thumbnail.prototype.getFrameList=function(b){return"sagittal"===b?this.scanData.sagittalPaths:"transverse"===b?this.scanData.axialPaths:this.scanData.coronalPaths};ScanThumbnail.loadFramesToDOM={};
ScanThumbnail.prototype.loadFramesToDOM=function(b){var c=this,d=[],e=this.getFrames(b.viewPlane).length;b.before&&b.before(e);for(f in this.frames)e=this.frames[f].viewPlane,this.frames[f].img||b.viewPlane&&e===b.viewPlane&&d.push(this.frames[f].src);if(0===d.length)XV.ViewerManager(function(b,d,e){b.FrameHolder.currDroppable===c&&(utils.dom.debug("Using cached images for "+b.FrameHolder.currViewPlane+" plane."),b.FrameHolder.loadCurrViewPlane())});else{e=new goog.net.ImageLoader;goog.events.listen(e,
goog.events.EventType.LOAD,function(c){b.load(c.target)});goog.events.listen(e,goog.net.EventType.COMPLETE,function(c){b.complete(c)});for(var f=0,g=d.length;f<g;f++){var h=utils.convert.replaceIllegalChars(d[f]);e.addImage(h,d[f])}e.start()}};goog.exportProperty(ScanThumbnail.prototype,"loadFramesToDOM",ScanThumbnail.prototype.loadFramesToDOM);Thumbnail.pathSplitter={};Thumbnail.prototype.pathSplitter=function(b){splitStrs=b.split("testscans")};
goog.exportProperty(Thumbnail.prototype,"viewPlaneLoaded",Thumbnail.prototype.viewPlaneLoaded);X.interactor=function(b){X.base.call(this);this._classname="interactor";this._element=b;this._mouseWheelHandler=this._mouseOutListener=this._mouseMoveListener=this._mouseUpListener=this._mouseDownListener=this._mouseWheelListener=null;this._mouseInside=!0;this._rightButtonDown=this._middleButtonDown=this._leftButtonDown=!1;this._mousePosition=[0,0];this._lastMousePosition=new X.vector(0,0,0);this._lastTouchPosition=new X.vector(0,0,0);this.lastFingerDistance=0;this._touchHoverTrigger=this._hoverTrigger=
null;this._shiftDown=!1;this._config={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}};goog.inherits(X.interactor,X.base);X.interactor.prototype.__defineGetter__("config",function(){return this._config});X.interactor.prototype.__defineGetter__("leftButtonDown",function(){return this._leftButtonDown});X.interactor.prototype.__defineGetter__("middleButtonDown",function(){return this._middleButtonDown});
X.interactor.prototype.__defineGetter__("rightButtonDown",function(){return this._rightButtonDown});
X.interactor.prototype.init=function(){this._config.MOUSEWHEEL_ENABLED?(this._mouseWheelHandler=new goog.events.MouseWheelHandler(this._element),this._mouseWheelListener=goog.events.listen(this._mouseWheelHandler,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.onMouseWheel_.bind(this))):(goog.events.unlistenByKey(this._mouseWheelListener),this._mouseWheelHandler=null);this._config.MOUSECLICKS_ENABLED?(this._mouseDownListener=goog.events.listen(this._element,goog.events.EventType.MOUSEDOWN,
this.onMouseDown_.bind(this)),this._mouseUpListener=goog.events.listen(this._element,goog.events.EventType.MOUSEUP,this.onMouseUp_.bind(this))):(goog.events.unlistenByKey(this._mouseDownListener),goog.events.unlistenByKey(this._mouseUpListener));this._element.oncontextmenu=this._config.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this._config.KEYBOARD_ENABLED?this.onKey_.bind(this):null;this._config.TOUCH_ENABLED?(this._config.TOUCH_BOUNCING_ENABLED||document.body.addEventListener("touchmove",
function(b){b.preventDefault()},!1),this._touchStartListener=goog.events.listen(this._element,goog.events.EventType.TOUCHSTART,this.onTouchStart_.bind(this)),this._touchMoveListener=goog.events.listen(this._element,goog.events.EventType.TOUCHMOVE,this.onTouchMove_.bind(this)),this._touchEndListener=goog.events.listen(this._element,goog.events.EventType.TOUCHEND,this.onTouchEnd_.bind(this))):(goog.events.unlistenByKey(this._touchStartListener),goog.events.unlistenByKey(this._touchMoveListener),goog.events.unlistenByKey(this._touchEndListener));
goog.events.unlistenByKey(this._mouseMoveListener);goog.events.unlistenByKey(this._mouseOutListener);this._mouseMoveListener=goog.events.listen(this._element,goog.events.EventType.MOUSEMOVE,this.onMouseMovementInside_.bind(this));this._mouseOutListener=goog.events.listen(this._element,goog.events.EventType.MOUSEOUT,this.onMouseMovementOutside_.bind(this))};
X.interactor.prototype.onMouseDown_=function(b){b.button==goog.events.BrowserEvent.MouseButton.LEFT?this._leftButtonDown=!0:b.button==goog.events.BrowserEvent.MouseButton.MIDDLE?this._middleButtonDown=!0:b.button==goog.events.BrowserEvent.MouseButton.RIGHT&&(this._rightButtonDown=!0);eval("this.onMouseDown("+this._leftButtonDown+","+this._middleButtonDown+","+this._rightButtonDown+")");this.hoverEnd_();b.preventDefault()};X.interactor.prototype.onMouseDown=function(b,c,d){};
X.interactor.prototype.onMouseUp_=function(b){b.button==goog.events.BrowserEvent.MouseButton.LEFT?this._leftButtonDown=!1:b.button==goog.events.BrowserEvent.MouseButton.MIDDLE?this._middleButtonDown=!1:b.button==goog.events.BrowserEvent.MouseButton.RIGHT&&(this._rightButtonDown=!1);eval("this.onMouseUp("+this._leftButtonDown+","+this._middleButtonDown+","+this._rightButtonDown+")");this.hoverEnd_();b.preventDefault()};X.interactor.prototype.__defineGetter__("mousePosition",function(){return this._mousePosition});
X.interactor.prototype.onMouseUp=function(b,c,d){};X.interactor.prototype.onMouseMovementOutside_=function(b){this._mouseInside=!1;this._config.KEYBOARD_ENABLED&&(window.onkeydown=null);this._rightButtonDown=this._middleButtonDown=this._leftButtonDown=!1;this.hoverEnd_();this._lastMousePosition=new X.vector(0,0,0);b.preventDefault()};X.interactor.prototype.onMouseMove=function(b){};
X.interactor.prototype.onTouchStart_=function(b){b.preventDefault();b.init(b.getBrowserEvent().targetTouches[0],b.currentTarget);eval("this.onTouchStart("+b.clientX+","+b.clientY+")");this._lastTouchPosition=new X.vector(b.clientX,b.clientY,0);this._touchHoverTrigger=setTimeout(this.onTouchHover_.bind(this,b),500)};X.interactor.prototype.onTouchStart=function(b,c){};
X.interactor.prototype.onTouchHover_=function(b){eval("this.onTouchHover("+b.clientX+","+b.clientY+")");b=new X.event.ZoomEvent;b._in=!0;b._fast=this instanceof X.interactor3D;this.dispatchEvent(b);this._touchHovering=!0};X.interactor.prototype.onTouchHover=function(b,c){};
X.interactor.prototype.resetTouchHover_=function(){clearTimeout(this._touchHoverTrigger);if(this._touchHovering){var b=new X.event.ZoomEvent;b._in=!1;b._fast=this instanceof X.interactor3D;this.dispatchEvent(b)}this._touchHovering=!1};X.interactor.prototype.onTouchEnd_=function(b){b.preventDefault();eval("this.onTouchEnd()");this.resetTouchHover_()};X.interactor.prototype.onTouchEnd=function(){};
X.interactor.prototype.onTouchMove_=function(b){b.preventDefault();this._touchHovering||this.resetTouchHover_();this.touchmoveEvent=b=b.getBrowserEvent();eval("this.onTouchMove(this['touchmoveEvent'])");var c=b.targetTouches;if(1==c.length){b=c[0];var d=[b.clientX,b.clientY];b=new X.vector(d[0],d[1],0);var c=d[0]>3*this._element.clientWidth/4,e=d[0]<this._element.clientWidth/4,f=d[1]<this._element.clientHeight/4,d=d[1]>3*this._element.clientHeight/4,d=!c&&!e&&!f&&!d,f=this._lastTouchPosition.subtract(b);
this._lastTouchPosition=b.clone();if(this._touchHovering)b=new X.event.PanEvent,5<f.x?f.x=1:-5>f.x&&(f.x=-1),5<f.y?f.y=1:-5>f.y&&(f.y=-1),b._distance=f,this.dispatchEvent(b);else if(this instanceof X.interactor2D&&(c||e))b=new X.event.ScrollEvent,b._up=0>f.y,this.dispatchEvent(b);else if(this instanceof X.interactor3D||d)f.scale(3),b=new X.event.RotateEvent,b._distance=f,this.dispatchEvent(b)}else 2==c.length&&(b=c[0],c=c[1],b=[b.clientX,b.clientY],c=[c.clientX,c.clientY],b=new X.vector(b[0],b[1],
0),c=new X.vector(c[0],c[1],0),f=goog.math.Vec3.squaredDistance(b,c),c=f-this.lastFingerDistance,this.lastFingerDistance=f,this._lastTouchPosition.subtract(b),this._lastTouchPosition=b.clone(),10<Math.abs(c)&&(b=new X.event.ZoomEvent,b._in=0<c,b._fast=this instanceof X.interactor3D,this.dispatchEvent(b)))};X.interactor.prototype.onTouchMove=function(b){};
X.interactor.prototype.onMouseMovementInside_=function(b){this.mousemoveEvent=b;eval("this.onMouseMove(this['mousemoveEvent'])");this._mouseInside=!0;this._config.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.onKey_.bind(this));b.preventDefault();var c=b.shiftKey;this._shiftDown=c;this._mousePosition=[b.offsetX,b.offsetY];var d=new X.vector(this._mousePosition[0],this._mousePosition[1],0);b=this._lastMousePosition.subtract(d);this._lastMousePosition=d.clone();this._config.HOVERING_ENABLED&&
((0<Math.abs(b.x)||0<Math.abs(b.y)||this._middleButtonDown||this._leftButtonDown||this._rightButtonDown)&&this.hoverEnd_(),this._hoverTrigger=setTimeout(function(){this.hoverEnd_();var b=new X.event.HoverEvent;b._x=d.x;b._y=d.y;this.dispatchEvent(b);this._hoverTrigger=null}.bind(this),300));2>Math.abs(b.x)&&(b.x=0);2>Math.abs(b.y)&&(b.y=0);0!=b.magnitude()&&(this._leftButtonDown&&!c?(c=new X.event.RotateEvent,b.scale(3),c._distance=b,this.dispatchEvent(c)):this._middleButtonDown||this._leftButtonDown&&
c?(c=new X.event.PanEvent,5<b.x?b.x=5:-5>b.x&&(b.x=-5),5<b.y?b.y=5:-5>b.y&&(b.y=-5),c._distance=b,this.dispatchEvent(c)):this._rightButtonDown&&(c=new X.event.ZoomEvent,c._in=0<b.y,c._fast=!1,this.dispatchEvent(c)))};X.interactor.prototype.hoverEnd_=function(){this._hoverTrigger&&clearTimeout(this._hoverTrigger);var b=new X.event.HoverEndEvent;this.dispatchEvent(b)};X.interactor.prototype.onMouseWheel=function(b){};
X.interactor.prototype.onMouseWheel_=function(b){this.mouseWheelEvent=b;eval("this.onMouseWheel(this['mouseWheelEvent'])");this.hoverEnd_();b.preventDefault()};X.interactor.prototype.onKey=function(b){};
X.interactor.prototype.onKey_=function(b){if(this._mouseInside){this.keyEvent=b;eval("this.onKey(this['keyEvent'])");this.hoverEnd_();var c=b.altKey,d=b.ctrlKey,e=b.metaKey,f=b.shiftKey,g=b.keyCode;82!=g||c||d||e||f?37<=g&&40>=g&&(b.preventDefault(),f?b=new X.event.PanEvent:c?b=new X.event.ZoomEvent:(b=new X.event.RotateEvent,this instanceof X.interactor2D&&(b=new X.event.ScrollEvent)),b&&(d=new X.vector(0,0,0),37==g?(d.x=5,b._up=!1,c&&(b._up=!0,b._in=!0,b._fast=!1)):39==g?(d.x=-5,b._up=!0,c&&(b._in=
!1,b._fast=!1)):38==g?(d.y=5,b._up=!0,c&&(b._in=!0,b._fast=!0)):40==g&&(d.y=-5,b._up=!1,c&&(b._in=!1,b._fast=!0)),b._distance=d,this.dispatchEvent(b))):(b.preventDefault(),b=new X.event.ResetViewEvent,this.dispatchEvent(b))}};goog.exportSymbol("X.interactor",X.interactor);goog.exportSymbol("X.interactor.prototype.init",X.interactor.prototype.init);goog.exportSymbol("X.interactor.prototype.onMouseDown",X.interactor.prototype.onMouseDown);goog.exportSymbol("X.interactor.prototype.onMouseUp",X.interactor.prototype.onMouseUp);
goog.exportSymbol("X.interactor.prototype.onMouseMove",X.interactor.prototype.onMouseMove);goog.exportSymbol("X.interactor.prototype.onMouseWheel",X.interactor.prototype.onMouseWheel);goog.exportSymbol("X.interactor.prototype.onKey",X.interactor.prototype.onKey);goog.exportSymbol("X.interactor.prototype.onTouchStart",X.interactor.prototype.onTouchStart);goog.exportSymbol("X.interactor.prototype.onTouchMove",X.interactor.prototype.onTouchMove);
goog.exportSymbol("X.interactor.prototype.onTouchEnd",X.interactor.prototype.onTouchEnd);goog.exportSymbol("X.interactor.prototype.onTouchHover",X.interactor.prototype.onTouchHover);X.camera=function(b,c){if(!goog.isNumber(b)||!goog.isNumber(c))throw Error("A camera needs valid width and height values.");X.base.call(this);this._classname="camera";this._position=new X.vector(0,100,0);this._focus=new X.vector(0,0,0);this._up=new X.vector(0,0,1);this._view=this.lookAt_(this._position,this._focus)};goog.inherits(X.camera,X.base);
X.camera.prototype.observe=function(b){if(!(goog.isDefAndNotNull(b)&&b instanceof X.interactor))throw Error("Could not observe the interactor.");goog.events.listen(b,X.event.events.ROTATE,this.onRotate_.bind(this));goog.events.listen(b,X.event.events.PAN,this.onPan_.bind(this));goog.events.listen(b,X.event.events.ZOOM,this.onZoom_.bind(this))};X.camera.prototype.onRotate_=function(b){if(!(b instanceof X.event.RotateEvent))throw Error("Received no valid rotate event.");this.rotate(b._distance)};
X.camera.prototype.onZoom_=function(b){if(!(b instanceof X.event.ZoomEvent))throw Error("Received no valid zoom event.");b._in?this.zoomIn(b._fast):this.zoomOut(b._fast)};X.camera.prototype.onPan_=function(b){if(!(b instanceof X.event.PanEvent))throw Error("Received no valid pan event.");this.pan(b._distance)};X.camera.prototype.__defineGetter__("view",function(){return this._view});
X.camera.prototype.__defineSetter__("view",function(b){if(!(goog.isDefAndNotNull(b)&&b instanceof Float32Array))throw Error("Invalid view matrix.");this._view=b});X.camera.prototype.__defineGetter__("position",function(){return[this._position.x,this._position.y,this._position.z]});X.camera.prototype.__defineSetter__("position",function(b){if(!goog.isDefAndNotNull(b)||!goog.isArray(b)||3!=b.length)throw Error("Invalid position.");this._position=new X.vector(b[0],b[1],b[2]);this.reset()});
X.camera.prototype.__defineGetter__("focus",function(){return[this._focus.x,this._focus.y,this._focus.z]});X.camera.prototype.__defineSetter__("focus",function(b){if(!goog.isDefAndNotNull(b)||!goog.isArray(b)||3!=b.length)throw Error("Invalid focus");this._focus=new X.vector(b[0],b[1],b[2]);this.reset()});X.camera.prototype.__defineGetter__("up",function(){return[this._up.x,this._up.y,this._up.z]});
X.camera.prototype.__defineSetter__("up",function(b){if(!goog.isDefAndNotNull(b)||!goog.isArray(b)||3!=b.length)throw Error("Invalid up vector.");this._up=new X.vector(b[0],b[1],b[2]);this.reset()});X.camera.prototype.reset=function(){this._view=this.lookAt_(this._position,this._focus)};X.camera.prototype.rotate=function(b){if(goog.isArray(b)&&2==b.length)b=new X.vector(b[0],b[1],0);else if(!(b instanceof X.vector))throw Error("Invalid distance vector for rotate operation.");return b};
X.camera.prototype.pan=function(b){if(goog.isArray(b)&&2==b.length)b=new X.vector(b[0],b[1],0);else if(!(b instanceof X.vector))throw Error("Invalid distance vector for pan operation.");this._view[12]-=b.x;this._view[13]+=b.y};X.camera.prototype.zoomIn=function(b){var c=20;goog.isDefAndNotNull(b)&&!b&&(c=1);this._view[14]+=c};X.camera.prototype.zoomOut=function(b){var c=30;goog.isDefAndNotNull(b)&&!b&&(c=1);this._view[14]-=c};
X.camera.prototype.lookAt_=function(b,c){if(!(b instanceof X.vector&&c instanceof X.vector))throw Error("3D vectors required for calculating the view.");return X.matrix.identity()};goog.exportSymbol("X.camera",X.camera);goog.exportSymbol("X.camera.prototype.pan",X.camera.prototype.pan);goog.exportSymbol("X.camera.prototype.rotate",X.camera.prototype.rotate);goog.exportSymbol("X.camera.prototype.zoomIn",X.camera.prototype.zoomIn);goog.exportSymbol("X.camera.prototype.zoomOut",X.camera.prototype.zoomOut);X.camera3D=function(b,c){X.camera.call(this,b,c);this._classname="camera3D";this._fieldOfView=45;this._perspective=X.matrix.makePerspective(X.matrix.identity(),this._fieldOfView,b/c,1,1E4)};goog.inherits(X.camera3D,X.camera);
X.camera3D.prototype.rotate=function(b){b=X.camera3D.superClass_.rotate.call(this,b);var c=-b.x/5*Math.PI/180;b=-b.y/5*Math.PI/180;var d=new X.vector(this._view[1],this._view[5],this._view[9]),e=new X.vector(this._view[0],this._view[4],this._view[8]);d.normalize();e.normalize();X.matrix.rotate(this._view,c,d.x,d.y,d.z);X.matrix.rotate(this._view,b,e.x,e.y,e.z)};X.camera3D.prototype.lookAt_=function(b,c){var d=X.camera3D.superClass_.lookAt_.call(this,b,c);X.matrix.makeLookAt(d,b,c,this._up);return d};
goog.exportSymbol("X.camera3D",X.camera3D);var USE_TYPEDARRAY=!0;var Zlib={CRC32:{}},ZLIB_CRC32_EXPORT=!1;Zlib.CRC32.calc=function(b,c,d){return Zlib.CRC32.update(b,0,c,d)};
Zlib.CRC32.update=function(b,c,d,e){var f=Zlib.CRC32.Table,g="number"===typeof d?d:d=0;e="number"===typeof e?e:b.length;c^=4294967295;for(g=e&7;g--;++d)c=c>>>8^f[(c^b[d])&255];for(g=e>>3;g--;d+=8)c=c>>>8^f[(c^b[d])&255],c=c>>>8^f[(c^b[d+1])&255],c=c>>>8^f[(c^b[d+2])&255],c=c>>>8^f[(c^b[d+3])&255],c=c>>>8^f[(c^b[d+4])&255],c=c>>>8^f[(c^b[d+5])&255],c=c>>>8^f[(c^b[d+6])&255],c=c>>>8^f[(c^b[d+7])&255];return(c^4294967295)>>>0};
Zlib.CRC32.Table=function(b){return USE_TYPEDARRAY?new Uint32Array(b):b}([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,
1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,
1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,
1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,
570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,
3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);ZLIB_CRC32_EXPORT&&(goog.exportSymbol("Zlib.CRC32",Zlib.CRC32),goog.exportSymbol("Zlib.CRC32.calc",Zlib.CRC32.calc),goog.exportSymbol("Zlib.CRC32.update",Zlib.CRC32.update));Zlib.Huffman={};Zlib.Huffman.buildHuffmanTable=function(b){var c=b.length,d=0,e=Number.POSITIVE_INFINITY,f,g,h,k,m,p,n,q,r;for(q=0;q<c;++q)b[q]>d&&(d=b[q]),b[q]<e&&(e=b[q]);f=1<<d;g=new (USE_TYPEDARRAY?Uint32Array:Array)(f);h=1;k=0;for(m=2;h<=d;){for(q=0;q<c;++q)if(b[q]===h){p=0;n=k;for(r=0;r<h;++r)p=p<<1|n&1,n>>=1;for(r=p;r<f;r+=m)g[r]=h<<16|q;++k}++h;k<<=1;m<<=1}return[g,d,e]};var ZLIB_RAW_INFLATE_EXPORT=!1,ZLIB_RAW_INFLATE_BUFFER_SIZE=32768;
Zlib.RawInflate=function(b,c){this.blocks=[];this.bufferSize=ZLIB_RAW_INFLATE_BUFFER_SIZE;this.bitsbuflen=this.bitsbuf=this.ip=this.totalpos=0;this.input=USE_TYPEDARRAY?new Uint8Array(b):b;this.bfinal=!1;this.bufferType=Zlib.RawInflate.BufferType.ADAPTIVE;this.resize=!1;if(c||!(c={}))c.index&&(this.ip=c.index),c.bufferSize&&(this.bufferSize=c.bufferSize),c.bufferType&&(this.bufferType=c.bufferType),c.resize&&(this.resize=c.resize);switch(this.bufferType){case Zlib.RawInflate.BufferType.BLOCK:this.op=
Zlib.RawInflate.MaxBackwardLength;this.output=new (USE_TYPEDARRAY?Uint8Array:Array)(Zlib.RawInflate.MaxBackwardLength+this.bufferSize+Zlib.RawInflate.MaxCopyLength);break;case Zlib.RawInflate.BufferType.ADAPTIVE:this.op=0;this.output=new (USE_TYPEDARRAY?Uint8Array:Array)(this.bufferSize);this.expandBuffer=this.expandBufferAdaptive;this.concatBuffer=this.concatBufferDynamic;this.decodeHuffman=this.decodeHuffmanAdaptive;break;default:throw Error("invalid inflate mode");}};
Zlib.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1};Zlib.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();return this.concatBuffer()};Zlib.RawInflate.MaxBackwardLength=32768;Zlib.RawInflate.MaxCopyLength=258;Zlib.RawInflate.Order=function(b){return USE_TYPEDARRAY?new Uint16Array(b):b}([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);
Zlib.RawInflate.LengthCodeTable=function(b){return USE_TYPEDARRAY?new Uint16Array(b):b}([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]);Zlib.RawInflate.LengthExtraTable=function(b){return USE_TYPEDARRAY?new Uint8Array(b):b}([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]);
Zlib.RawInflate.DistCodeTable=function(b){return USE_TYPEDARRAY?new Uint16Array(b):b}([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]);Zlib.RawInflate.DistExtraTable=function(b){return USE_TYPEDARRAY?new Uint8Array(b):b}([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);
Zlib.RawInflate.FixedLiteralLengthTable=function(b){return b}(function(){var b=new (USE_TYPEDARRAY?Uint8Array:Array)(288),c,d;c=0;for(d=b.length;c<d;++c)b[c]=143>=c?8:255>=c?9:279>=c?7:8;return(0,Zlib.Huffman.buildHuffmanTable)(b)}());Zlib.RawInflate.FixedDistanceTable=function(b){return b}(function(){var b=new (USE_TYPEDARRAY?Uint8Array:Array)(30),c,d;c=0;for(d=b.length;c<d;++c)b[c]=5;return(0,Zlib.Huffman.buildHuffmanTable)(b)}());
Zlib.RawInflate.prototype.parseBlock=function(){var b=this.readBits(3);b&1&&(this.bfinal=!0);b>>>=1;switch(b){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw Error("unknown BTYPE: "+b);}};
Zlib.RawInflate.prototype.readBits=function(b){for(var c=this.bitsbuf,d=this.bitsbuflen,e=this.input,f=this.ip,g;d<b;){g=e[f++];if(void 0===g)throw Error("input buffer is broken");c|=g<<d;d+=8}g=c&(1<<b)-1;this.bitsbuf=c>>>b;this.bitsbuflen=d-b;this.ip=f;return g};
Zlib.RawInflate.prototype.readCodeByTable=function(b){var c=this.bitsbuf,d=this.bitsbuflen,e=this.input,f=this.ip,g=b[0];b=b[1];for(var h;d<b;){h=e[f++];if(void 0===h)throw Error("input buffer is broken");c|=h<<d;d+=8}e=g[c&(1<<b)-1];g=e>>>16;this.bitsbuf=c>>g;this.bitsbuflen=d-g;this.ip=f;return e&65535};
Zlib.RawInflate.prototype.parseUncompressedBlock=function(){var b=this.input,c=this.ip,d=this.output,e=this.op,f,g,h,k=d.length;this.bitsbuflen=this.bitsbuf=0;f=b[c++];if(void 0===f)throw Error("invalid uncompressed block header: LEN (first byte)");g=f;f=b[c++];if(void 0===f)throw Error("invalid uncompressed block header: LEN (second byte)");g|=f<<8;f=b[c++];if(void 0===f)throw Error("invalid uncompressed block header: NLEN (first byte)");h=f;f=b[c++];if(void 0===f)throw Error("invalid uncompressed block header: NLEN (second byte)");
if(g===~(h|f<<8))throw Error("invalid uncompressed block header: length verify");if(c+g>b.length)throw Error("input buffer is broken");switch(this.bufferType){case Zlib.RawInflate.BufferType.BLOCK:for(;e+g>d.length;){f=k-e;g-=f;if(USE_TYPEDARRAY)d.set(b.subarray(c,c+f),e),e+=f,c+=f;else for(;f--;)d[e++]=b[c++];this.op=e;d=this.expandBuffer();e=this.op}break;case Zlib.RawInflate.BufferType.ADAPTIVE:for(;e+g>d.length;)d=this.expandBuffer({fixRatio:2});break;default:throw Error("invalid inflate mode");
}if(USE_TYPEDARRAY)d.set(b.subarray(c,c+g),e),e+=g,c+=g;else for(;g--;)d[e++]=b[c++];this.ip=c;this.op=e;this.output=d};Zlib.RawInflate.prototype.parseFixedHuffmanBlock=function(){this.decodeHuffman(Zlib.RawInflate.FixedLiteralLengthTable,Zlib.RawInflate.FixedDistanceTable)};
Zlib.RawInflate.prototype.parseDynamicHuffmanBlock=function(){function b(b,c,d){var e,f,g;for(g=0;g<b;)switch(e=this.readCodeByTable(c),e){case 16:for(e=3+this.readBits(2);e--;)d[g++]=f;break;case 17:for(e=3+this.readBits(3);e--;)d[g++]=0;f=0;break;case 18:for(e=11+this.readBits(7);e--;)d[g++]=0;f=0;break;default:f=d[g++]=e}return d}var c=this.readBits(5)+257,d=this.readBits(5)+1,e=this.readBits(4)+4,f=new (USE_TYPEDARRAY?Uint8Array:Array)(Zlib.RawInflate.Order.length),g;for(g=0;g<e;++g)f[Zlib.RawInflate.Order[g]]=
this.readBits(3);e=(0,Zlib.Huffman.buildHuffmanTable)(f);f=new (USE_TYPEDARRAY?Uint8Array:Array)(c);g=new (USE_TYPEDARRAY?Uint8Array:Array)(d);this.decodeHuffman((0,Zlib.Huffman.buildHuffmanTable)(b.call(this,c,e,f)),(0,Zlib.Huffman.buildHuffmanTable)(b.call(this,d,e,g)))};
Zlib.RawInflate.prototype.decodeHuffman=function(b,c){var d=this.output,e=this.op;this.currentLitlenTable=b;for(var f=d.length-Zlib.RawInflate.MaxCopyLength,g,h,k;256!==(g=this.readCodeByTable(b));)if(256>g)e>=f&&(this.op=e,d=this.expandBuffer(),e=this.op),d[e++]=g;else for(g-=257,k=Zlib.RawInflate.LengthCodeTable[g],0<Zlib.RawInflate.LengthExtraTable[g]&&(k+=this.readBits(Zlib.RawInflate.LengthExtraTable[g])),g=this.readCodeByTable(c),h=Zlib.RawInflate.DistCodeTable[g],0<Zlib.RawInflate.DistExtraTable[g]&&
(h+=this.readBits(Zlib.RawInflate.DistExtraTable[g])),e>=f&&(this.op=e,d=this.expandBuffer(),e=this.op);k--;)d[e]=d[e++-h];for(;8<=this.bitsbuflen;)this.bitsbuflen-=8,this.ip--;this.op=e};
Zlib.RawInflate.prototype.decodeHuffmanAdaptive=function(b,c){var d=this.output,e=this.op;this.currentLitlenTable=b;for(var f=d.length,g,h,k;256!==(g=this.readCodeByTable(b));)if(256>g)e>=f&&(d=this.expandBuffer(),f=d.length),d[e++]=g;else for(g-=257,k=Zlib.RawInflate.LengthCodeTable[g],0<Zlib.RawInflate.LengthExtraTable[g]&&(k+=this.readBits(Zlib.RawInflate.LengthExtraTable[g])),g=this.readCodeByTable(c),h=Zlib.RawInflate.DistCodeTable[g],0<Zlib.RawInflate.DistExtraTable[g]&&(h+=this.readBits(Zlib.RawInflate.DistExtraTable[g])),
e+k>f&&(d=this.expandBuffer(),f=d.length);k--;)d[e]=d[e++-h];for(;8<=this.bitsbuflen;)this.bitsbuflen-=8,this.ip--;this.op=e};
Zlib.RawInflate.prototype.expandBuffer=function(b){b=new (USE_TYPEDARRAY?Uint8Array:Array)(this.op-Zlib.RawInflate.MaxBackwardLength);var c=this.op-Zlib.RawInflate.MaxBackwardLength,d,e,f=this.output;if(USE_TYPEDARRAY)b.set(f.subarray(Zlib.RawInflate.MaxBackwardLength,b.length));else for(d=0,e=b.length;d<e;++d)b[d]=f[d+Zlib.RawInflate.MaxBackwardLength];this.blocks.push(b);this.totalpos+=b.length;if(USE_TYPEDARRAY)f.set(f.subarray(c,c+Zlib.RawInflate.MaxBackwardLength));else for(d=0;d<Zlib.RawInflate.MaxBackwardLength;++d)f[d]=
f[c+d];this.op=Zlib.RawInflate.MaxBackwardLength;return f};Zlib.RawInflate.prototype.expandBufferAdaptive=function(b){var c=this.input.length/this.ip+1|0,d=this.input,e=this.output;b&&("number"===typeof b.fixRatio&&(c=b.fixRatio),"number"===typeof b.addRatio&&(c+=b.addRatio));2>c?(b=(d.length-this.ip)/this.currentLitlenTable[2],b=258*(b/2)|0,b=b<e.length?e.length+b:e.length<<1):b=e.length*c;USE_TYPEDARRAY?(b=new Uint8Array(b),b.set(e)):b=e;return this.output=b};
Zlib.RawInflate.prototype.concatBuffer=function(){var b=0,c=this.output,d=this.blocks,e,f=new (USE_TYPEDARRAY?Uint8Array:Array)(this.totalpos+(this.op-Zlib.RawInflate.MaxBackwardLength)),g,h,k,m;if(0===d.length)return USE_TYPEDARRAY?this.output.subarray(Zlib.RawInflate.MaxBackwardLength,this.op):this.output.slice(Zlib.RawInflate.MaxBackwardLength,this.op);g=0;for(h=d.length;g<h;++g)for(e=d[g],k=0,m=e.length;k<m;++k)f[b++]=e[k];g=Zlib.RawInflate.MaxBackwardLength;for(h=this.op;g<h;++g)f[b++]=c[g];
this.blocks=[];return this.buffer=f};Zlib.RawInflate.prototype.concatBufferDynamic=function(){var b,c=this.op;USE_TYPEDARRAY?this.resize?(b=new Uint8Array(c),b.set(this.output.subarray(0,c))):b=this.output.subarray(0,c):(this.output.length>c&&(this.output.length=c),b=this.output);return this.buffer=b};ZLIB_RAW_INFLATE_EXPORT&&(goog.exportSymbol("Zlib.RawInflate",Zlib.RawInflate),goog.exportSymbol("Zlib.RawInflate.prototype.decompress",Zlib.RawInflate.prototype.decompress));Zlib.Heap=function(b){this.buffer=new (USE_TYPEDARRAY?Uint16Array:Array)(2*b);this.length=0};Zlib.Heap.prototype.getParent=function(b){return 2*((b-2)/4|0)};Zlib.Heap.prototype.getChild=function(b){return 2*b+2};Zlib.Heap.prototype.push=function(b,c){var d,e,f=this.buffer,g;d=this.length;f[this.length++]=c;for(f[this.length++]=b;0<d;)if(e=this.getParent(d),f[d]>f[e])g=f[d],f[d]=f[e],f[e]=g,g=f[d+1],f[d+1]=f[e+1],f[e+1]=g,d=e;else break;return this.length};
Zlib.Heap.prototype.pop=function(){var b,c,d=this.buffer,e,f,g;c=d[0];b=d[1];this.length-=2;d[0]=d[this.length];d[1]=d[this.length+1];for(g=0;;){f=this.getChild(g);if(f>=this.length)break;f+2<this.length&&d[f+2]>d[f]&&(f+=2);if(d[f]>d[g])e=d[g],d[g]=d[f],d[f]=e,e=d[g+1],d[g+1]=d[f+1],d[f+1]=e;else break;g=f}return{index:b,value:c,length:this.length}};Zlib.BitStream=function(b,c){this.index="number"===typeof c?c:0;this.bitindex=0;this.buffer=b instanceof(USE_TYPEDARRAY?Uint8Array:Array)?b:new (USE_TYPEDARRAY?Uint8Array:Array)(Zlib.BitStream.DefaultBlockSize);if(2*this.buffer.length<=this.index)throw Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()};Zlib.BitStream.DefaultBlockSize=32768;
Zlib.BitStream.prototype.expandBuffer=function(){var b=this.buffer,c,d=b.length,e=new (USE_TYPEDARRAY?Uint8Array:Array)(d<<1);if(USE_TYPEDARRAY)e.set(b);else for(c=0;c<d;++c)e[c]=b[c];return this.buffer=e};
Zlib.BitStream.prototype.writeBits=function(b,c,d){var e=this.buffer,f=this.index,g=this.bitindex,h=e[f];d&&1<c&&(b=8<c?(Zlib.BitStream.ReverseTable[b&255]<<24|Zlib.BitStream.ReverseTable[b>>>8&255]<<16|Zlib.BitStream.ReverseTable[b>>>16&255]<<8|Zlib.BitStream.ReverseTable[b>>>24&255])>>32-c:Zlib.BitStream.ReverseTable[b]>>8-c);if(8>c+g)h=h<<c|b,g+=c;else for(d=0;d<c;++d)h=h<<1|b>>c-d-1&1,8===++g&&(g=0,e[f++]=Zlib.BitStream.ReverseTable[h],h=0,f===e.length&&(e=this.expandBuffer()));e[f]=h;this.buffer=
e;this.bitindex=g;this.index=f};Zlib.BitStream.prototype.finish=function(){var b=this.buffer,c=this.index;0<this.bitindex&&(b[c]<<=8-this.bitindex,b[c]=Zlib.BitStream.ReverseTable[b[c]],c++);USE_TYPEDARRAY?b=b.subarray(0,c):b.length=c;return b};Zlib.BitStream.ReverseTable=function(b){return b}(function(){var b=new (USE_TYPEDARRAY?Uint8Array:Array)(256),c;for(c=0;256>c;++c){for(var d=b,e=c,f=c,g=f,h=7,f=f>>>1;f;f>>>=1)g<<=1,g|=f&1,--h;d[e]=(g<<h&255)>>>0}return b}());var ZLIB_RAWDEFLATE_EXPORT=!1;
Zlib.RawDeflate=function(b,c){this.compressionType=Zlib.RawDeflate.CompressionType.DYNAMIC;this.lazy=0;this.input=b;this.op=0;c&&(c.lazy&&(this.lazy=c.lazy),"number"===typeof c.compressionType&&(this.compressionType=c.compressionType),c.outputBuffer&&(this.output=USE_TYPEDARRAY&&c.outputBuffer instanceof Array?new Uint8Array(c.outputBuffer):c.outputBuffer),"number"===typeof c.outputIndex&&(this.op=c.outputIndex));this.output||(this.output=new (USE_TYPEDARRAY?Uint8Array:Array)(32768))};
Zlib.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3};Zlib.RawDeflate.Lz77MinLength=3;Zlib.RawDeflate.Lz77MaxLength=258;Zlib.RawDeflate.WindowSize=32768;Zlib.RawDeflate.MaxCodeLength=16;Zlib.RawDeflate.HUFMAX=286;
Zlib.RawDeflate.FixedHuffmanTable=function(){var b=[],c;for(c=0;288>c;c++)switch(!0){case 143>=c:b.push([c+48,8]);break;case 255>=c:b.push([c-144+400,9]);break;case 279>=c:b.push([c-256+0,7]);break;case 287>=c:b.push([c-280+192,8]);break;default:throw"invalid literal: "+c;}return b}();
Zlib.RawDeflate.prototype.compress=function(){var b,c,d,e=this.input;switch(this.compressionType){case Zlib.RawDeflate.CompressionType.NONE:c=0;for(d=e.length;c<d;)b=USE_TYPEDARRAY?e.subarray(c,c+65535):e.slice(c,c+65535),c+=b.length,this.makeNocompressBlock(b,c===d);break;case Zlib.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(e,!0);this.op=this.output.length;break;case Zlib.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(e,!0);this.op=this.output.length;
break;default:throw"invalid compression type";}return this.output};
Zlib.RawDeflate.prototype.makeNocompressBlock=function(b,c){var d,e,f=this.output,g=this.op;if(USE_TYPEDARRAY){for(f=new Uint8Array(this.output.buffer);f.length<=g+b.length+5;)f=new Uint8Array(f.length<<1);f.set(this.output)}d=Zlib.RawDeflate.CompressionType.NONE;f[g++]=(c?1:0)|d<<1;d=b.length;e=~d+65536&65535;f[g++]=d&255;f[g++]=d>>>8&255;f[g++]=e&255;f[g++]=e>>>8&255;if(USE_TYPEDARRAY)f.set(b,g),g+=b.length,f=f.subarray(0,g);else{d=0;for(e=b.length;d<e;++d)f[g++]=b[d];f.length=g}this.op=g;return this.output=
f};Zlib.RawDeflate.prototype.makeFixedHuffmanBlock=function(b,c){var d=new Zlib.BitStream(new Uint8Array(this.output.buffer),this.op),e;e=Zlib.RawDeflate.CompressionType.FIXED;d.writeBits(c?1:0,1,!0);d.writeBits(e,2,!0);e=this.lz77(b);this.fixedHuffman(e,d);return d.finish()};
Zlib.RawDeflate.prototype.makeDynamicHuffmanBlock=function(b,c){var d=new Zlib.BitStream(new Uint8Array(this.output),this.op),e,f,g,h,k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],m,p,n,q,r,s,u=Array(19),t;e=Zlib.RawDeflate.CompressionType.DYNAMIC;d.writeBits(c?1:0,1,!0);d.writeBits(e,2,!0);e=this.lz77(b);m=this.getLengths_(this.freqsLitLen,15);p=this.getCodesFromLengths_(m);n=this.getLengths_(this.freqsDist,7);q=this.getCodesFromLengths_(n);for(f=286;257<f&&0===m[f-1];f--);for(g=30;1<g&&0===
n[g-1];g--);r=this.getTreeSymbols_(f,m,g,n);s=this.getLengths_(r.freqs,7);for(t=0;19>t;t++)u[t]=s[k[t]];for(h=19;4<h&&0===u[h-1];h--);k=this.getCodesFromLengths_(s);d.writeBits(f-257,5,!0);d.writeBits(g-1,5,!0);d.writeBits(h-4,4,!0);for(t=0;t<h;t++)d.writeBits(u[t],3,!0);t=0;for(u=r.codes.length;t<u;t++)if(f=r.codes[t],d.writeBits(k[f],s[f],!0),16<=f){t++;switch(f){case 16:f=2;break;case 17:f=3;break;case 18:f=7;break;default:throw"invalid code: "+f;}d.writeBits(r.codes[t],f,!0)}this.dynamicHuffman(e,
[p,m],[q,n],d);return d.finish()};Zlib.RawDeflate.prototype.dynamicHuffman=function(b,c,d,e){var f,g,h,k,m;h=c[0];c=c[1];k=d[0];m=d[1];d=0;for(f=b.length;d<f;++d)if(g=b[d],e.writeBits(h[g],c[g],!0),256<g)e.writeBits(b[++d],b[++d],!0),g=b[++d],e.writeBits(k[g],m[g],!0),e.writeBits(b[++d],b[++d],!0);else if(256===g)break;return e};
Zlib.RawDeflate.prototype.fixedHuffman=function(b,c){var d,e,f;d=0;for(e=b.length;d<e;d++)if(f=b[d],Zlib.BitStream.prototype.writeBits.apply(c,Zlib.RawDeflate.FixedHuffmanTable[f]),256<f)c.writeBits(b[++d],b[++d],!0),c.writeBits(b[++d],5),c.writeBits(b[++d],b[++d],!0);else if(256===f)break;return c};Zlib.RawDeflate.Lz77Match=function(b,c){this.length=b;this.backwardDistance=c};
Zlib.RawDeflate.Lz77Match.LengthCodeTable=function(b){return USE_TYPEDARRAY?new Uint32Array(b):b}(function(){function b(b){switch(!0){case 3===b:return[257,b-3,0];case 4===b:return[258,b-4,0];case 5===b:return[259,b-5,0];case 6===b:return[260,b-6,0];case 7===b:return[261,b-7,0];case 8===b:return[262,b-8,0];case 9===b:return[263,b-9,0];case 10===b:return[264,b-10,0];case 12>=b:return[265,b-11,1];case 14>=b:return[266,b-13,1];case 16>=b:return[267,b-15,1];case 18>=b:return[268,b-17,1];case 22>=b:return[269,
b-19,2];case 26>=b:return[270,b-23,2];case 30>=b:return[271,b-27,2];case 34>=b:return[272,b-31,2];case 42>=b:return[273,b-35,3];case 50>=b:return[274,b-43,3];case 58>=b:return[275,b-51,3];case 66>=b:return[276,b-59,3];case 82>=b:return[277,b-67,4];case 98>=b:return[278,b-83,4];case 114>=b:return[279,b-99,4];case 130>=b:return[280,b-115,4];case 162>=b:return[281,b-131,5];case 194>=b:return[282,b-163,5];case 226>=b:return[283,b-195,5];case 257>=b:return[284,b-227,5];case 258===b:return[285,b-258,0];
default:throw"invalid length: "+b;}}var c=[],d,e;for(d=3;258>=d;d++)e=b(d),c[d]=e[2]<<24|e[1]<<16|e[0];return c}());
Zlib.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(b){switch(!0){case 1===b:b=[0,b-1,0];break;case 2===b:b=[1,b-2,0];break;case 3===b:b=[2,b-3,0];break;case 4===b:b=[3,b-4,0];break;case 6>=b:b=[4,b-5,1];break;case 8>=b:b=[5,b-7,1];break;case 12>=b:b=[6,b-9,2];break;case 16>=b:b=[7,b-13,2];break;case 24>=b:b=[8,b-17,3];break;case 32>=b:b=[9,b-25,3];break;case 48>=b:b=[10,b-33,4];break;case 64>=b:b=[11,b-49,4];break;case 96>=b:b=[12,b-65,5];break;case 128>=b:b=[13,b-97,5];break;case 192>=
b:b=[14,b-129,6];break;case 256>=b:b=[15,b-193,6];break;case 384>=b:b=[16,b-257,7];break;case 512>=b:b=[17,b-385,7];break;case 768>=b:b=[18,b-513,8];break;case 1024>=b:b=[19,b-769,8];break;case 1536>=b:b=[20,b-1025,9];break;case 2048>=b:b=[21,b-1537,9];break;case 3072>=b:b=[22,b-2049,10];break;case 4096>=b:b=[23,b-3073,10];break;case 6144>=b:b=[24,b-4097,11];break;case 8192>=b:b=[25,b-6145,11];break;case 12288>=b:b=[26,b-8193,12];break;case 16384>=b:b=[27,b-12289,12];break;case 24576>=b:b=[28,b-16385,
13];break;case 32768>=b:b=[29,b-24577,13];break;default:throw"invalid distance";}return b};Zlib.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var b=this.backwardDistance,c=[],d=0,e;e=Zlib.RawDeflate.Lz77Match.LengthCodeTable[this.length];c[d++]=e&65535;c[d++]=e>>16&255;c[d++]=e>>24;e=this.getDistanceCode_(b);c[d++]=e[0];c[d++]=e[1];c[d++]=e[2];return c};
Zlib.RawDeflate.prototype.lz77=function(b){function c(b,c){var d=b.toLz77Array(),e,f;e=0;for(f=d.length;e<f;++e)n[q++]=d[e];s[d[0]]++;u[d[3]]++;r=b.length+c-1;p=null}var d,e,f,g,h,k={},m=Zlib.RawDeflate.WindowSize,p,n=USE_TYPEDARRAY?new Uint16Array(2*b.length):[],q=0,r=0,s=new (USE_TYPEDARRAY?Uint32Array:Array)(286),u=new (USE_TYPEDARRAY?Uint32Array:Array)(30),t=this.lazy;if(!USE_TYPEDARRAY){for(f=0;285>=f;)s[f++]=0;for(f=0;29>=f;)u[f++]=0}s[256]=1;d=0;for(e=b.length;d<e;++d){f=h=0;for(g=Zlib.RawDeflate.Lz77MinLength;f<
g&&d+f!==e;++f)h=h<<8|b[d+f];void 0===k[h]&&(k[h]=[]);f=k[h];if(!(0<r--)){for(;0<f.length&&d-f[0]>m;)f.shift();if(d+Zlib.RawDeflate.Lz77MinLength>=e){p&&c(p,-1);f=0;for(g=e-d;f<g;++f)h=b[d+f],n[q++]=h,++s[h];break}0<f.length?(g=this.searchLongestMatch_(b,d,f),p?p.length<g.length?(h=b[d-1],n[q++]=h,++s[h],c(g,0)):c(p,-1):g.length<t?p=g:c(g,0)):p?c(p,-1):(h=b[d],n[q++]=h,++s[h])}f.push(d)}n[q++]=256;s[256]++;this.freqsLitLen=s;this.freqsDist=u;return USE_TYPEDARRAY?n.subarray(0,q):n};
Zlib.RawDeflate.prototype.searchLongestMatch_=function(b,c,d){var e,f,g=0,h,k,m,p=b.length;k=0;m=d.length;a:for(;k<m;k++){e=d[m-k-1];h=Zlib.RawDeflate.Lz77MinLength;if(g>Zlib.RawDeflate.Lz77MinLength){for(h=g;h>Zlib.RawDeflate.Lz77MinLength;h--)if(b[e+h-1]!==b[c+h-1])continue a;h=g}for(;h<Zlib.RawDeflate.Lz77MaxLength&&c+h<p&&b[e+h]===b[c+h];)++h;h>g&&(f=e,g=h);if(h===Zlib.RawDeflate.Lz77MaxLength)break}return new Zlib.RawDeflate.Lz77Match(g,c-f)};
Zlib.RawDeflate.prototype.getTreeSymbols_=function(b,c,d,e){var f=new (USE_TYPEDARRAY?Uint32Array:Array)(b+d),g,h,k=new (USE_TYPEDARRAY?Uint32Array:Array)(316),m=new (USE_TYPEDARRAY?Uint8Array:Array)(19);for(g=h=0;g<b;g++)f[h++]=c[g];for(g=0;g<d;g++)f[h++]=e[g];if(!USE_TYPEDARRAY)for(g=0,c=m.length;g<c;++g)m[g]=0;g=d=0;for(c=f.length;g<c;g+=h){for(h=1;g+h<c&&f[g+h]===f[g];++h);b=h;if(0===f[g])if(3>b)for(;0<b--;)k[d++]=0,m[0]++;else for(;0<b;)e=138>b?b:138,e>b-3&&e<b&&(e=b-3),10>=e?(k[d++]=17,k[d++]=
e-3,m[17]++):(k[d++]=18,k[d++]=e-11,m[18]++),b-=e;else if(k[d++]=f[g],m[f[g]]++,b--,3>b)for(;0<b--;)k[d++]=f[g],m[f[g]]++;else for(;0<b;)e=6>b?b:6,e>b-3&&e<b&&(e=b-3),k[d++]=16,k[d++]=e-3,m[16]++,b-=e}return{codes:USE_TYPEDARRAY?k.subarray(0,d):k.slice(0,d),freqs:m}};
Zlib.RawDeflate.prototype.getLengths_=function(b,c){var d=b.length,e=new Zlib.Heap(2*Zlib.RawDeflate.HUFMAX),f=new (USE_TYPEDARRAY?Uint8Array:Array)(d),g,h,k;if(!USE_TYPEDARRAY)for(h=0;h<d;h++)f[h]=0;for(h=0;h<d;++h)0<b[h]&&e.push(h,b[h]);d=Array(e.length/2);g=new (USE_TYPEDARRAY?Uint32Array:Array)(e.length/2);if(1===d.length)return f[e.pop().index]=1,f;h=0;for(k=e.length/2;h<k;++h)d[h]=e.pop(),g[h]=d[h].value;e=this.reversePackageMerge_(g,g.length,c);h=0;for(k=d.length;h<k;++h)f[d[h].index]=e[h];
return f};
Zlib.RawDeflate.prototype.reversePackageMerge_=function(b,c,d){function e(b){var d=m[b][p[b]];d===c?(e(b+1),e(b+1)):--h[d];++p[b]}var f=new (USE_TYPEDARRAY?Uint16Array:Array)(d),g=new (USE_TYPEDARRAY?Uint8Array:Array)(d),h=new (USE_TYPEDARRAY?Uint8Array:Array)(c),k=Array(d),m=Array(d),p=Array(d),n=(1<<d)-c,q=1<<d-1,r,s;f[d-1]=c;for(r=0;r<d;++r)n<q?g[r]=0:(g[r]=1,n-=q),n<<=1,f[d-2-r]=(f[d-1-r]/2|0)+c;f[0]=g[0];k[0]=Array(f[0]);m[0]=Array(f[0]);for(r=1;r<d;++r)f[r]>2*f[r-1]+g[r]&&(f[r]=2*f[r-1]+g[r]),
k[r]=Array(f[r]),m[r]=Array(f[r]);for(n=0;n<c;++n)h[n]=d;for(q=0;q<f[d-1];++q)k[d-1][q]=b[q],m[d-1][q]=q;for(n=0;n<d;++n)p[n]=0;1===g[d-1]&&(--h[0],++p[d-1]);for(r=d-2;0<=r;--r){d=n=0;s=p[r+1];for(q=0;q<f[r];q++)d=k[r+1][s]+k[r+1][s+1],d>b[n]?(k[r][q]=d,m[r][q]=c,s+=2):(k[r][q]=b[n],m[r][q]=n,++n);p[r]=0;1===g[r]&&e(r)}return h};
Zlib.RawDeflate.prototype.getCodesFromLengths_=function(b){var c=new (USE_TYPEDARRAY?Uint16Array:Array)(b.length),d=[],e=[],f=0,g,h,k;g=0;for(h=b.length;g<h;g++)d[b[g]]=(d[b[g]]|0)+1;g=1;for(h=Zlib.RawDeflate.MaxCodeLength;g<=h;g++)e[g]=f,f+=d[g]|0,f<<=1;g=0;for(h=b.length;g<h;g++)for(f=e[b[g]],e[b[g]]+=1,d=c[g]=0,k=b[g];d<k;d++)c[g]=c[g]<<1|f&1,f>>>=1;return c};
ZLIB_RAWDEFLATE_EXPORT&&(goog.exportSymbol("Zlib.RawDeflate",Zlib.RawDeflate),goog.exportSymbol("Zlib.RawDeflate.CompressionType",Zlib.RawDeflate.CompressionType),goog.exportSymbol("Zlib.RawDeflate.CompressionType.NONE",Zlib.RawDeflate.CompressionType.NONE),goog.exportSymbol("Zlib.RawDeflate.CompressionType.FIXED",Zlib.RawDeflate.CompressionType.FIXED),goog.exportSymbol("Zlib.RawDeflate.CompressionType.DYNAMIC",Zlib.RawDeflate.CompressionType.DYNAMIC));var ZLIB_GZIP_EXPORT=!1;Zlib.Gzip=function(b,c){this.input=b;this.op=this.ip=0;this.flags={};c&&(c.flags&&(this.flags=c.flags),"string"===typeof c.filename&&(this.filename=c.filename),"string"===typeof c.comment&&(this.comment=c.comment),c.deflateOptions&&(this.deflateOptions=c.deflateOptions));this.deflateOptions||(this.deflateOptions={})};Zlib.Gzip.DefaultBufferSize=32768;
Zlib.Gzip.prototype.compress=function(){var b,c,d,e,f,g=new (USE_TYPEDARRAY?Uint8Array:Array)(Zlib.Gzip.DefaultBufferSize);d=0;var h=this.input,k=this.ip;c=this.filename;var m=this.comment;g[d++]=31;g[d++]=139;g[d++]=8;b=0;this.flags.fname&&(b|=Zlib.Gzip.FlagsMask.FNAME);this.flags.fcomment&&(b|=Zlib.Gzip.FlagsMask.FCOMMENT);this.flags.fhcrc&&(b|=Zlib.Gzip.FlagsMask.FHCRC);g[d++]=b;b=(Date.now?Date.now():+new Date)/1E3|0;g[d++]=b&255;g[d++]=b>>>8&255;g[d++]=b>>>16&255;g[d++]=b>>>24&255;g[d++]=0;g[d++]=
Zlib.Gzip.OperatingSystem.UNKNOWN;if(void 0!==this.flags.fname){e=0;for(f=c.length;e<f;++e)b=c.charCodeAt(e),255<b&&(g[d++]=b>>>8&255),g[d++]=b&255;g[d++]=0}if(this.flags.comment){e=0;for(f=m.length;e<f;++e)b=m.charCodeAt(e),255<b&&(g[d++]=b>>>8&255),g[d++]=b&255;g[d++]=0}this.flags.fhcrc&&(c=Zlib.CRC32.calc(g,0,d)&65535,g[d++]=c&255,g[d++]=c>>>8&255);this.deflateOptions.outputBuffer=g;this.deflateOptions.outputIndex=d;d=new Zlib.RawDeflate(h,this.deflateOptions);g=d.compress();d=d.op;USE_TYPEDARRAY&&
(d+8>g.buffer.byteLength?(this.output=new Uint8Array(d+8),this.output.set(new Uint8Array(g.buffer)),g=this.output):g=new Uint8Array(g.buffer));c=Zlib.CRC32.calc(h);g[d++]=c&255;g[d++]=c>>>8&255;g[d++]=c>>>16&255;g[d++]=c>>>24&255;f=h.length;g[d++]=f&255;g[d++]=f>>>8&255;g[d++]=f>>>16&255;g[d++]=f>>>24&255;this.ip=k;USE_TYPEDARRAY&&d<g.length&&(this.output=g=g.subarray(0,d));return g};
Zlib.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255};Zlib.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16};ZLIB_GZIP_EXPORT&&(goog.exportSymbol("Zlib.Gzip",Zlib.Gzip),goog.exportSymbol("Zlib.Gzip.prototype.compress",Zlib.Gzip.prototype.compress));Zlib.GunzipMember=function(){};var ZLIB_GUNZIP_EXPORT=!1;Zlib.Gunzip=function(b,c){this.input=b;this.ip=0;this.member=[]};Zlib.Gunzip.prototype.decompress=function(){for(var b=this.input.length;this.ip<b;)this.decodeMember();return this.concatMember()};
Zlib.Gunzip.prototype.decodeMember=function(){var b=new Zlib.GunzipMember,c,d,e,f,g,h=this.input;d=this.ip;b.id1=h[d++];b.id2=h[d++];if(31!==b.id1||139!==b.id2)throw Error("invalid file signature:",b.id1,b.id2);b.cm=h[d++];switch(b.cm){case 8:break;default:throw Error("unknown compression method: "+b.cm);}b.flg=h[d++];c=h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24;b.mtime=new Date(1E3*c);b.xfl=h[d++];b.os=h[d++];0<(b.flg&Zlib.Gzip.FlagsMask.FEXTRA)&&(b.xlen=h[d++]|h[d++]<<8,d=this.decodeSubField(d,b.xlen));
if(0<(b.flg&Zlib.Gzip.FlagsMask.FNAME)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=String.fromCharCode(c);b.name=g.join("")}if(0<(b.flg&Zlib.Gzip.FlagsMask.FCOMMENT)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=String.fromCharCode(c);b.comment=g.join("")}if(0<(b.flg&Zlib.Gzip.FlagsMask.FHCRC)&&(b.crc16=Zlib.CRC32.calc(h,0,d)&65535,b.crc16!==(h[d++]|h[d++]<<8)))throw Error("invalid header crc16");c=h[h.length-4]|h[h.length-3]<<8|h[h.length-2]<<16|h[h.length-1]<<24;h.length-d-4-4<512*c&&(e=c);d=new Zlib.RawInflate(h,
{index:d,bufferSize:e});b.data=e=d.decompress();d=d.ip;b.crc32=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;if(Zlib.CRC32.calc(e)!==c)throw Error("invalid CRC-32 checksum: 0x"+Zlib.CRC32.calc(e).toString(16)+" / 0x"+c.toString(16));b.isize=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.member.push(b);this.ip=d};Zlib.Gunzip.prototype.decodeSubField=function(b,c){return b+c};
Zlib.Gunzip.prototype.concatMember=function(){var b=this.member,c,d,e=0,f=0;c=0;for(d=b.length;c<d;++c)f+=b[c].data.length;if(USE_TYPEDARRAY)for(f=new Uint8Array(f),c=0;c<d;++c)f.set(b[c].data,e),e+=b[c].data.length;else{f=[];for(c=0;c<d;++c)f[c]=b[c].data;f=Array.prototype.concat.apply([],f)}return f};ZLIB_GUNZIP_EXPORT&&(goog.exportSymbol("Zlib.Gunzip",Zlib.Gunzip),goog.exportSymbol("Zlib.Gunzip.prototype.decompress",Zlib.Gunzip.prototype.decompress));X.parser=function(){X.base.call(this);this._classname="parser";this._data=null;this._dataPointer=0;this._nativeLittleEndian=0<(new Int8Array((new Int16Array([1])).buffer))[0];this._littleEndian=!0;this._lastMin=-Infinity;this._lastMax=Infinity};goog.inherits(X.parser,X.base);X.parser.prototype.parse=function(b,c,d,e){throw Error("The function parse() should be overloaded.");};
X.parser.prototype.arrayMinMax=function(b){for(var c=Infinity,d=-Infinity,e=b.length,f=0,f=0;f<e;f++)var g=b[f],c=Math.min(c,g),d=Math.max(d,g);return[c,d]};X.parser.prototype.parseChars=function(b,c,d){void 0===c&&(c=0);void 0===d&&(d=b.length);var e="",f=0,f=c;for(c=d;f<c;++f)e+=String.fromCharCode(b[f]);return e};X.parser.prototype.jumpTo=function(b){this._dataPointer=b};
X.parser.prototype.scan=function(b,c){goog.isDefAndNotNull(c)||(c=1);var d=1,e=Uint8Array;switch(b){case "schar":e=Int8Array;break;case "ushort":e=Uint16Array;d=2;break;case "sshort":e=Int16Array;d=2;break;case "uint":e=Uint32Array;d=4;break;case "sint":e=Int32Array;d=4;break;case "float":e=Float32Array;d=4;break;case "complex":e=Float64Array;d=8;break;case "double":e=Float64Array,d=8}e=new e(this._data.slice(this._dataPointer,this._dataPointer+=c*d));this._nativeLittleEndian!=this._littleEndian&&
(e=this.flipEndianness(e,d));return 1==c?e[0]:e};X.parser.prototype.flipEndianness=function(b,c){for(var d=new Uint8Array(b.buffer,b.byteOffset,b.byteLength),e=0,f=b.byteLength;e<f;e+=c)for(var g=e+c-1,h=e;g>h;g--,h++){var k=d[h];d[h]=d[g];d[g]=k}return b};X.parser.prototype.toRAS=function(b,c){"right"!=b[0]&&(c[0]=-c[0],c[3]=-c[3],c[6]=-c[6]);"anterior"!=b[1]&&(c[1]=-c[1],c[4]=-c[4],c[7]=-c[7]);"superior"!=b[2]&&(c[2]=-c[2],c[5]=-c[5],c[8]=-c[8]);return c};
X.parser.prototype.orientnormalize=function(b){X.TIMER(this._classname+".orientnormalize");var c=b.slice(0,3),d=c.map(function(b){return Math.abs(b)}),e=d.indexOf(Math.max.apply(Math,d)),d=[0,0,0];d[e]=0>c[e]?-1:1;var f=b.slice(3,6),c=f.map(function(b){return Math.abs(b)}),g=c.indexOf(Math.max.apply(Math,c)),c=[0,0,0];c[g]=0>f[g]?-1:1;b=b.slice(6,9);var f=b.map(function(b){return Math.abs(b)}),h=f.indexOf(Math.max.apply(Math,f)),f=[0,0,0];f[h]=0>b[h]?-1:1;e=[d[e],c[g],f[h]];d=[d,c,f];X.TIMERSTOP(this._classname+
".orientnormalize");return[e,d]};
X.parser.prototype.reslice=function(b){X.TIMER(this._classname+".reslice");var c=null!=b._labelmap,d=null;b._colortable&&(d=b._colortable._map);for(var e=b._dimensions,f=b._spacing,g=b._data,h=Array(e[2]),k=Array(e[2]),m=b._normcosine,p=e[0]*e[1],n=0,q=0,r=0,s=0,u=0,s=0,t=e[2];s<t;s++){var w=g.subarray(s*p,(s+1)*p),u=0;h[s]=Array(e[1]);k[s]=Array(e[1]);r=0;for(t=e[1];r<t;r++)for(h[s][r]=new b._data.constructor(e[0]),k[s][r]=new b._data.constructor(e[0]),q=0,t=e[0];q<t;q++)n=w[u],h[s][r][q]=255*(n/
b._max),k[s][r][q]=n,u++}for(var x=0,g=g=0,t=3;g<t;g++){var y=g,s=(y+1)%3,h=(y+2)%3,p=4*e[y]*e[s],n=e[y],u=e[s],t=e[h],w=(t-1)/2,I=m[y],z=m[s],C=m[h],D=[1,1,1],D=0!=m[h][2]?[1,0,0]:0!=m[h][1]?[0,1,0]:[1,1,0],y=n*f[y],A=u*f[s];0!=m[2][1]&&(s=y,y=A,A=s);for(s=0;s<t;s++){var E=0,t=-w*f[h]+s*f[h],t=[b._center[0]+m[h][0]*t,b._center[1]+m[h][1]*t,b._center[2]+m[h][2]*t],B=new X.slice,q=!0;goog.isDefAndNotNull(b._volume)&&!c&&(q=!1);B.setup(t,C,z,I,y,A,q,D);B._volume=b;B.visible=!1;for(var F=new Uint8Array(p),
r=0,t=u;r<t;r++)for(q=0,t=n;q<t;q++){var x=0==g?k[s][r][q]:1==g?k[r][q][s]:k[q][s][r],G=0,H=0,J=0,v=0;d?((v=d.get(Math.floor(x)))||(v=[0,1,0.1,0.2,1]),G=255*v[1],H=255*v[2],J=255*v[3],v=255*v[4]):(G=H=J=255*(x/b._max),v=255);x=4*E;F[x]=G;F[++x]=H;F[++x]=J;F[++x]=v;E++}q=new X.texture;q._rawData=F;q._rawDataWidth=n;q._rawDataHeight=u;B._texture=q;0<b._orientation[h]?b._children[g]._children.push(B):b._children[g]._children.unshift(B);c&&(B._labelmap=b._labelmap._children[g]._children[s]._texture)}0==
g?(b._indexX=w,b._indexXold=w):1==g?(b._indexY=w,b._indexYold=w):2==g&&(b._indexZ=w,b._indexZold=w);if(!b._reslicing)break}X.TIMERSTOP(this._classname+".reslice");return k};X.parserNII=function(){X.parser.call(this);this._classname="parserNII"};goog.inherits(X.parserNII,X.parser);
X.parserNII.prototype.parse=function(b,c,d,e){X.TIMER(this._classname+".parse");e=d;var f=-1,f="undefined"==typeof DataView?(new Int32Array(d,0,1))[0]:(new DataView(d,0)).getInt32(0,!0);348!=f&&(e=(new Zlib.Gunzip(new Uint8Array(e))).decompress(),e=e.buffer);d=this.parseStream(e);e=[d.dim[1],d.dim[2],d.dim[3]];c._dimensions=e;c._spacing=[d.pixdim[1],d.pixdim[2],d.pixdim[3]];var f=d.min,g=d.max;c._min=c._windowLow=f;c._max=c._windowHigh=g;-Infinity==c._lowerThreshold&&(c._lowerThreshold=f);Infinity==
c._upperThreshold&&(c._upperThreshold=g);d.space=["right","anterior","superior"];d.spaceorientation=[];d.spaceorientation.push(d.srow_x[0]);d.spaceorientation.push(d.srow_y[0]);d.spaceorientation.push(d.srow_z[0]);d.spaceorientation.push(d.srow_x[1]);d.spaceorientation.push(d.srow_y[1]);d.spaceorientation.push(d.srow_z[1]);d.spaceorientation.push(d.srow_x[2]);d.spaceorientation.push(d.srow_y[2]);d.spaceorientation.push(d.srow_z[2]);d.rasspaceorientation=this.toRAS(d.space,d.spaceorientation);f=this.orientnormalize(d.rasspaceorientation);
d.orientation=f[0];d.normcosine=f[1];f=this.create_IJK2RAS(d);e=goog.vec.Vec4.createFloat32FromValues(e[0]/2,e[1]/2,e[2]/2,1);g=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(f,e,g);c._center=[g[0],g[1],g[2]];c.create_(d);X.TIMERSTOP(this._classname+".parse");c._image=this.reslice(c);c.map_();d=new X.event.ModifiedEvent;d._object=c;d._container=b;this.dispatchEvent(d)};
X.parserNII.prototype.parseStream=function(b){this._data=b;b={sizeof_hdr:0,data_type:null,db_name:null,extents:0,session_error:0,regular:0,dim_info:null,dim:null,intent_p1:0,intent_p2:0,intent_p3:0,intent_code:0,datatype:0,bitpix:0,slice_start:0,pixdim:null,vox_offset:0,scl_slope:0,scl_inter:0,slice_end:0,slice_code:null,xyzt_units:null,cal_max:0,cal_min:0,slice_duration:0,toffset:0,glmax:0,glmin:0,descrip:null,aux_file:null,qform_code:0,sform_code:0,quatern_b:0,quatern_c:0,quatern_d:0,qoffset_x:0,
qoffset_y:0,qoffset_z:0,srow_x:null,srow_y:null,srow_z:null,intent_name:null,magic:null,data:null,min:Infinity,max:-Infinity,space:null,spaceorientation:null,rasspaceorientation:null,orientation:null,normcosine:null};b.sizeof_hdr=this.scan("uint");b.data_type=this.scan("uchar",10);b.db_name=this.scan("uchar",18);b.extents=this.scan("uint");b.session_error=this.scan("ushort");b.regular=this.scan("uchar");b.dim_info=this.scan("uchar");b.dim=this.scan("ushort",8);b.intent_p1=this.scan("float");b.intent_p2=
this.scan("float");b.intent_p3=this.scan("float");b.intent_code=this.scan("ushort");b.datatype=this.scan("ushort");b.bitpix=this.scan("ushort");b.slice_start=this.scan("ushort");b.pixdim=this.scan("float",8);b.vox_offset=this.scan("float");b.scl_slope=this.scan("float");b.scl_inter=this.scan("float");b.slice_end=this.scan("ushort");b.slice_code=this.scan("uchar");b.xyzt_units=this.scan("uchar");b.cal_max=this.scan("float");b.cal_min=this.scan("float");b.slice_duration=this.scan("float");b.toffset=
this.scan("float");b.glmax=this.scan("uint",1);b.glmin=this.scan("uint",1);b.descrip=this.scan("uchar",80);b.aux_file=this.scan("uchar",24);b.qform_code=this.scan("ushort");b.sform_code=this.scan("ushort");b.quatern_b=this.scan("float");b.quatern_c=this.scan("float");b.quatern_d=this.scan("float");b.qoffset_x=this.scan("float");b.qoffset_y=this.scan("float");b.qoffset_z=this.scan("float");b.srow_x=this.scan("float",4);b.srow_y=this.scan("float",4);b.srow_z=this.scan("float",4);b.intent_name=this.scan("uchar",
16);b.magic=this.scan("uchar",4);this.jumpTo(parseInt(b.vox_offset,10));var c=b.dim[1]*b.dim[2]*b.dim[3];switch(b.datatype){case 2:b.data=this.scan("uchar",c);break;case 4:b.data=this.scan("sshort",c);break;case 8:b.data=this.scan("sint",c);break;case 16:b.data=this.scan("float",c);break;case 32:b.data=this.scan("complex",c);break;case 64:b.data=this.scan("double",c);break;case 256:b.data=this.scan("schar",c);break;case 512:b.data=this.scan("ushort",c);break;case 768:b.data=this.scan("uint",c);break;
default:throw Error("Unsupported NII data type: "+b.datatype);}c=this.arrayMinMax(b.data);b.min=c[0];b.max=c[1];return b};
X.parserNII.prototype.create_IJK2RAS=function(b){var c=goog.vec.Mat4.createFloat32Identity(),d=[];if(0==b.qform_code)goog.vec.Mat4.setRowValues(c,0,b.pixdim[1],0,0,0),goog.vec.Mat4.setRowValues(c,1,0,b.pixdim[2],0,0),goog.vec.Mat4.setRowValues(c,2,0,0,b.pixdim[3],0),d.push(b.pixdim[1]),d.push(0),d.push(0),d.push(0),d.push(b.pixdim[2]),d.push(0),d.push(0),d.push(0),d.push(b.pixdim[3]);else if(0<b.qform_code){var e=0,f=b.quatern_b,g=b.quatern_c,h=b.quatern_d,k=1,m=1,p=1,n=b.qoffset_x,q=b.qoffset_y,
r=b.qoffset_z,e=1-(f*f+g*g+h*h);1E-7>e?(e=1/Math.sqrt(f*f+g*g+h*h),f*=e,g*=e,h*=e,e=0):e=Math.sqrt(e);0<b.pixdim[1]&&(k=b.pixdim[1]);0<b.pixdim[2]&&(m=b.pixdim[2]);0<b.pixdim[2]&&(p=b.pixdim[3]);0>b.pixdim[0]&&(p=-p);goog.vec.Mat4.setRowValues(c,0,(e*e+f*f-g*g-h*h)*k,2*(f*g-e*h)*m,2*(f*h+e*g)*p,n);goog.vec.Mat4.setRowValues(c,1,2*(f*g+e*h)*k,(e*e+g*g-f*f-h*h)*m,2*(g*h-e*f)*p,q);goog.vec.Mat4.setRowValues(c,2,2*(f*h-e*g)*k,2*(g*h+e*f)*m,(e*e+h*h-g*g-f*f)*p,r);d.push((e*e+f*f-g*g-h*h)*k);d.push(2*(f*
g+e*h)*k);d.push(2*(f*h+e*g)*p);d.push(2*(f*g-e*h)*m);d.push((e*e+g*g-f*f-h*h)*m);d.push(2*(g*h-e*f)*p);d.push(2*(f*h+e*g)*p);d.push(2*(g*h+e*f)*m);d.push((e*e+h*h-g*g-f*f)*p)}else 0<b.sform_code&&(d=b.srow_x,e=b.srow_y,b=b.srow_z,goog.vec.Mat4.setRowValues(c,0,d[0],d[1],d[2],d[3]),goog.vec.Mat4.setRowValues(c,1,e[0],e[1],e[2],e[3]),goog.vec.Mat4.setRowValues(c,2,b[0],b[1],b[2],b[3]));return c};goog.exportSymbol("X.parserNII",X.parserNII);goog.exportSymbol("X.parserNII.prototype.parse",X.parserNII.prototype.parse);Modal.addColumnMenu={};
Modal.prototype.addColumnMenu=function(){function b(b){var e=utils.dom.makeElement("img",c.ColumnMenu,b.id,{position:"absolute",cursor:"pointer",zIndex:100,width:utils.convert.px(0.5*XVGlobals.expandButtonWidth),left:utils.convert.px(0.25*XVGlobals.expandButtonWidth),top:utils.convert.px(b.top),"vertical-align":"bottom"});utils.fx.fadeTo(e,0,0.5);goog.events.listen(e,goog.events.EventType.MOUSEOVER,function(b){utils.fx.fadeTo(e,XVGlobals.animFast,1)});goog.events.listen(e,goog.events.EventType.MOUSEOUT,function(b){utils.fx.fadeTo(e,
XVGlobals.animFast,0.5)});e.src=b.src;e.title=b.title;goog.events.listen(e,goog.events.EventType.CLICK,function(c){utils.fx.fadeTo(e,XVGlobals.animFast,0.5);b.onclick()})}var c=this;this.ColumnMenu=utils.dom.makeElement("div",this.modal,"ColumnMenu",{position:"absolute",textAlign:"right",display:"inline-block",bottom:"0px"});b({id:"InsertColumnButton",src:"./icons/Arrows/insertColumnArrow.png",top:0,title:"Insert Column",onclick:function(){XV.ViewerManager({insert:"column"})}});b({id:"RemoveColumnButton",
src:"./icons/Arrows/removeColumnArrow.png",top:22,title:"Remove Column",onclick:function(){XV.ViewerManager({remove:"column"})}})};goog.exportProperty(Modal.prototype,"addColumnMenu",Modal.prototype.addColumnMenu);utils.dom.mergeArgs=function(b,c,d){d={};for(var e in b)d[e]=b[e];if(c)for(e in c)d[e]=c[e]&&"[object Object]"===c[e].toString()&&e in d?utils.dom.mergeArgs(d[e],c[e]):c[e];return d};goog.exportSymbol("utils.dom.mergeArgs",utils.dom.mergeArgs);utils.dom.stopPropagation=function(b){b||(b=window.event);b.cancelBubble=!0;b.stopPropagation&&b.stopPropagation()};goog.exportSymbol("utils.dom.stopPropagation",utils.dom.stopPropagation);utils.fx.fadeInFromZero=function(b,c,d){utils.fx.fadeTo(b,0,0,function(){utils.fx.fadeTo(b,c,1,d)})};goog.exportSymbol("utils.fx.fadeInFromZero",utils.fx.fadeInFromZero);utils.convert.px=function(b){if(b instanceof Array)return b.map(function(b){return b.toString()+"px"});switch(typeof b){case "number":return b.toString()+"px"}};goog.exportSymbol("utils.convert.px",utils.convert.px);utils.convert.toInt=function(b){return parseInt(b,10)};goog.exportSymbol("utils.convert.toInt",utils.convert.toInt);utils.css.setCSS=function(b,c){b&&c&&(b.style||(b.style={}),goog.style.setStyle(b,c),utils.array.forEach("top left height width fontSize borderWidth borderRadius".split(" "),function(d){c[d]&&(b.style[d]="number"===typeof c[d]?utils.convert.px(c[d]):c[d])}))};goog.exportSymbol("utils.css.setCSS",utils.css.setCSS);var imageProcessing=function(){};goog.exportSymbol("imageProcessing",imageProcessing);imageProcessing.prototype.linearBrightness=function(b,c){for(var d=0,e=b.length;d<e;d+=4){var f=b[d+1],g=b[d+2];b[d]+=c;b[d+1]=f+c;b[d+2]=g+c}return b};
imageProcessing.prototype.linearContrast=function(b,c,d){for(var e=0,f=b.length;e<f;e+=4){var g=b[e]/255,h=b[e+1]/255,k=b[e+2]/255,g=255*((g-d)*c/1+d),h=255*((h-d)*c/1+d),k=255*((k-d)*c/1+d),g=255<g?255:g,g=0>g?0:g,h=255<h?255:h,h=0>h?0:h,k=255<k?255:k,k=0>k?0:k;b[e]=Math.round(g);b[e+1]=Math.round(h);b[e+2]=Math.round(k)}return b};imageProcessing.prototype.objArrContains=function(b,c,d){var e=-1;for(i in b)b[i][c]===d&&(e=i);return e};
imageProcessing.prototype.histogram=function(b){for(var c=[],d=0,e=b.length;d<e;d+=4){var f=Math.round((b[d]+b[d+1]+b[d+2])/3);if(0<c.length){var g=this.objArrContains(c,"intensity",f);if(-1!==g){c[g].count+=1;continue}}c.push({count:1,intensity:f})}c=c.sort(function(b,c){return b.intensity<c.intensity?-1:b.intensity===c.intensity?0:1});b=[];f=[];d=0;for(e=c.length;d<e;d++)b.push(c[d].count),f.push(c[d].intensity);return{objArr:c,countArr:b,intensityArr:f}};
imageProcessing.prototype.sigmaMult=function(b,c){if(b.length!==c.length||0===b.length||0==c.length)throw"sigmaMult: Array lengths unequal or zero length!";for(var d=0,e=0,f=b.length;e<f;e++)d+=b[e]*c[e];return d};function sigma(b){if(0===b.length)throw"sigmaMult: Array lengths unequal or zero length!";for(var c=0,d=0,e=b.length;d<e;d++)c+=b[d];return c}
imageProcessing.prototype.thresholdAutoDetect=function(b){var c=this.histogram(b);b=c.countArr;c=c.intensityArr;if(1<b.length&&1<c.length){var d=[14];d[0]=Math.round(sigmaMult(b,c)/sigma(b));for(var e=1,f=0;0!==e&&14>f;){for(var e=[],g=0,h=c.length;g<h;g++)c[g]>d[f]&&e.push(g);g=e[0];e=sigmaMult(b.slice(0,g),c.slice(0,g))/sigma(b.slice(0,g));g=sigmaMult(b.slice(g,b.length-1),c.slice(g,b.length-1))/sigma(b.slice(g,b.length-1));f+=1;d[f]=Math.round(Math.sqrt(e*g));e=d[f]-d[f-1]}return d[f]/255}};console.log("here");var xmiv=function(){};goog.exportSymbol("xmiv",xmiv);xmiv.start=function(){document.body.style.overflow="hidden";XVGlobals.ModalID="TestModalID";XVGlobals.SliderLinker=new SliderLinker;XV=new Modal({parent:document.body});IP=new imageProcessing};goog.exportSymbol("xmiv.start",xmiv.start);utils.dom.validateArgs=function(b,c,d,e){var f="A "+b+" has invalid arguments:",g;for(g in d)if(g in c)"[object Object]"===d[g].toString()&&utils.dom.validateArgs(b,c[g],d[g]);else throw f+" '"+g+"' ";e&&e()};goog.exportSymbol("utils.dom.validateArgs",utils.dom.validateArgs);goog.ui.TwoThumbSlider=function(b){goog.ui.SliderBase.call(this,b);this.rangeModel.setValue(this.getMinimum());this.rangeModel.setExtent(this.getMaximum()-this.getMinimum())};goog.inherits(goog.ui.TwoThumbSlider,goog.ui.SliderBase);goog.ui.TwoThumbSlider.CSS_CLASS_PREFIX="goog-twothumbslider";goog.ui.TwoThumbSlider.VALUE_THUMB_CSS_CLASS=goog.ui.TwoThumbSlider.CSS_CLASS_PREFIX+"-value-thumb";goog.ui.TwoThumbSlider.EXTENT_THUMB_CSS_CLASS=goog.ui.TwoThumbSlider.CSS_CLASS_PREFIX+"-extent-thumb";
goog.ui.TwoThumbSlider.RANGE_HIGHLIGHT_CSS_CLASS=goog.ui.TwoThumbSlider.CSS_CLASS_PREFIX+"-rangehighlight";goog.ui.TwoThumbSlider.prototype.getCssClass=function(b){return b==goog.ui.SliderBase.Orientation.VERTICAL?goog.ui.TwoThumbSlider.CSS_CLASS_PREFIX+"-vertical":goog.ui.TwoThumbSlider.CSS_CLASS_PREFIX+"-horizontal"};goog.ui.TwoThumbSlider.prototype.createThumb_=function(b){b=this.getDomHelper().createDom("div",b);goog.a11y.aria.setRole(b,goog.a11y.aria.Role.BUTTON);return b};
goog.ui.TwoThumbSlider.prototype.createThumbs=function(){var b=goog.dom.getElementsByTagNameAndClass(null,goog.ui.TwoThumbSlider.VALUE_THUMB_CSS_CLASS,this.getElement())[0],c=goog.dom.getElementsByTagNameAndClass(null,goog.ui.TwoThumbSlider.EXTENT_THUMB_CSS_CLASS,this.getElement())[0],d=goog.dom.getElementsByTagNameAndClass(null,goog.ui.TwoThumbSlider.RANGE_HIGHLIGHT_CSS_CLASS,this.getElement())[0];b||(b=this.createThumb_(goog.ui.TwoThumbSlider.VALUE_THUMB_CSS_CLASS),this.getElement().appendChild(b));
c||(c=this.createThumb_(goog.ui.TwoThumbSlider.EXTENT_THUMB_CSS_CLASS),this.getElement().appendChild(c));d||(d=this.getDomHelper().createDom("div",goog.ui.TwoThumbSlider.RANGE_HIGHLIGHT_CSS_CLASS),this.getDomHelper().insertSiblingBefore(d,b));this.valueThumb=b;this.extentThumb=c;this.rangeHighlight=d};var Menu=function(b){XVWidget.call(this,utils.dom.mergeArgs(Menu.prototype.defaultArgs,b));this.Content=new ScrollGallery({parent:this.widget,className:"Menu_ScrollGallery",orientation:"vertical",widgetCSS:{left:0,height:"90%",width:"100%",top:XVGlobals.scanTabLabelHeight+10}});this.Content.getScrollArea().style.position="absolute";this.Content.getScrollArea().style.height="100%";this.Content.getScrollArea().style.right="0";this.Scrollarea=utils.dom.makeElement("div",this.Content.getScrollArea(),
"Menu_ScrollGallery_MetadataContents",{overflow:"auto",height:"100%"})};goog.inherits(Menu,XVWidget);goog.exportSymbol("Menu",Menu);Menu.prototype.defaultArgs={className:XVGlobals.classNames.Menu,parent:document.body,CSS:{position:"absolute",height:"100%",width:"100%",top:"0%",left:"0%",display:"inline"}};Menu.prototype.defaultSliderCSS={position:"relative",width:"40%",height:"3px","border-radius":"4px",background:"#444",display:"inline-block","margin-right":"20px"};
Menu.prototype.folderHeaderCSS={"font-weight":"bold","letter-spacing":"2px",background:"#999",color:"#000",fontSize:XVGlobals.fontSizeMed};Menu.prototype.folderCSS={color:"#222",background:"#fff",opacity:"0.3",fontSize:XVGlobals.fontSizeSmall,fontFamily:XVGlobals.fontFamily,width:"100% - 42px",border:"1px solid #999",margin:"20px"};Menu.prototype.labelCSS={top:"3px",width:"45%",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"inline-block","margin-right":"20px"};
Menu.prototype.buttonCSS={"vertical-align":"bottom",margin:"3px 3px 0px 3px"};Menu.prototype.sliderLabelCSS={"margin-right":"3px",display:"inline-block",width:"50px"};Menu.addToMenu={};Menu.prototype.addFolder=function(b){var c=utils.dom.makeElement("div",this.Scrollarea,"Folder",this.folderCSS),d=utils.dom.makeElement("div",c,"FolderHeader",this.folderHeaderCSS),c=utils.dom.makeElement("div",c,"FolderContent");d.innerHTML=b;return c};goog.exportProperty(Menu.prototype,"addFolder",Menu.prototype.addFolder);
Menu.prototype.add=function(b,c,d,e,f){var g;switch(b){case "checkbox":case "radio":g=this.addInputButton(b,c,d,f,e);break;case "slider":g=this.addSlider(c,d,e);break;case "ttslider":g=this.addTTSlider(c,d,e);break;case "newline":g=utils.dom.makeElement("div",c,"Newline",{width:"100%",height:"1px"});break;case "spacer":g=utils.dom.makeElement("div",c,"Spacer",{width:"100%",height:"20px"});break;default:console.log("No menu support for "+b)}return g};goog.exportProperty(Menu.prototype,"add",Menu.prototype.add);
Menu.prototype.addInputButton=function(b,c,d,e,f){var g=f?"checked":"",h="radio"===b?"85%":"28%";f=utils.dom.makeElement("input",c,"Checkbox",this.buttonCSS);f.setAttribute("id",b+"ButtonFor"+d+e+this.widget.id);f.setAttribute("type",b);f.setAttribute("name",b+"Button"+this.widget.id);f.checked=g;c=utils.dom.makeElement("label",c,"Label",utils.dom.mergeArgs(this.labelCSS,{width:h}));d&&d.split("/")[1]?c.innerHTML=d.slice(d.lastIndexOf("/")+1,d.length):c.innerHTML=d;c.setAttribute("for",b+"ButtonFor"+
d+e+this.widget.id);return f};Menu.prototype.addSlider=function(b,c,d){this.widget.parentElement.style.display="block";var e=d[0],f=d[1],g=d[2];d=d[3];var h=new goog.ui.Slider;utils.dom.makeElement("div",b,"SliderLabel",this.sliderLabelCSS).innerHTML=c;h.decorate(utils.dom.makeElement("div",b,c,this.defaultSliderCSS));h.setMinimum(e);h.setMaximum(f);h.setStep(g);h.setValue(d);return h};
Menu.prototype.addTTSlider=function(b,c,d){var e=d[0],f=d[1],g=d[2];d=d[3];var h=new goog.ui.TwoThumbSlider;utils.dom.makeElement("div",b,"SliderLabel",this.sliderLabelCSS).innerHTML=c;h.decorate(utils.dom.makeElement("div",b,"Threshold",this.defaultSliderCSS));h.setMinimum(e);h.setMaximum(f);h.setStep(1);h.setValueAndExtent(g,d-g);return h};X.interactor3D=function(b){X.interactor.call(this,b);this._classname="interactor3D";this._clear_all=!1};goog.inherits(X.interactor3D,X.interactor);X.interactor3D.prototype.onMouseWheel_=function(b){X.interactor3D.superClass_.onMouseWheel_.call(this,b);var c=new X.event.ZoomEvent;goog.isDefAndNotNull(b.deltaY)||(b.deltaY=0);c._in=0>b.deltaY;c._fast=!0;this.dispatchEvent(c)};X.parserOBJ=function(){X.parser.call(this);this._classname="parserOBJ"};goog.inherits(X.parserOBJ,X.parser);
X.parserOBJ.prototype.parse=function(b,c,d,e){X.TIMER(this._classname+".parse");this._data=d;d=d.byteLength;e=this.scan("uchar",d);var f=[];c._points=new X.triplets(d);c._normals=new X.triplets(d);var g=c._points,h=c._normals,k=0,m;for(m=0;m<d;++m)if(10==e[m]){k=this.parseChars(e,k,m).replace(/\s{2,}/g," ").split(" ");if("v"==k[0]){var p=parseFloat(k[1]),n=parseFloat(k[2]),k=parseFloat(k[3]);f.push([p,n,k])}else"f"==k[0]&&(n=f[parseInt(k[1],10)-1],p=f[parseInt(k[2],10)-1],k=f[parseInt(k[3],10)-1],
g.add(n[0],n[1],n[2]),g.add(p[0],p[1],p[2]),g.add(k[0],k[1],k[2]),n=new goog.math.Vec3(n[0],n[1],n[2]),p=new goog.math.Vec3(p[0],p[1],p[2]),k=new goog.math.Vec3(k[0],k[1],k[2]),k=goog.math.Vec3.cross(p.subtract(n),k.subtract(n)),k.normalize(),h.add(k.x,k.y,k.z),h.add(k.x,k.y,k.z),h.add(k.x,k.y,k.z));k=m+1}X.TIMERSTOP(this._classname+".parse");d=new X.event.ModifiedEvent;d._object=c;d._container=b;this.dispatchEvent(d)};goog.exportSymbol("X.parserOBJ",X.parserOBJ);
goog.exportSymbol("X.parserOBJ.prototype.parse",X.parserOBJ.prototype.parse);X.array=function(b){X.base.call(this);this._classname="array";this._array=[];this._comparator=b};goog.inherits(X.array,X.base);X.array.compare=function(b,c,d,e,f){for(var g=0;g<f;g++)if(b[g+d]!==c[g+e])return!1;return!0};X.array.prototype.add=function(b){this._array.push(b);return!0};X.array.prototype.remove=function(b){b=this._array.indexOf(b);-1<b&&this._array.splice(b,1);return!0};X.array.prototype.clear=function(){this._array.length=0};
X.array.prototype.swap_=function(b,c){var d=this._array[b];this._array[b]=this._array[c];this._array[c]=d};X.array.prototype.insert_=function(b,c,d){for(;b+1<c&&0>this._comparator(this._array[b+1],d);)this.swap_(b,b+1),++b;this._array[b]=d};X.array.prototype.merge_inplace_=function(b,c,d){for(;b<c;++b)if(0<this._comparator(this._array[b],this._array[c])){var e=this._array[b];this._array[b]=this._array[c];this.insert_(c,d,e)}};
X.array.prototype.msort_=function(b,c){var d=c-b;2>d||(d=b+Math.floor(d/2),this.msort_(b,d),this.msort_(d,c),this.merge_inplace_(b,d,c))};X.array.prototype.sort=function(){this.msort_(0,this._array.length)};X.array.prototype.values=function(){return this._array};utils.init=function(){(new utils.gui.GenericSlider).addSlideCallback(function(){console.log("hera")})};var a=new utils.init;var ThreeDHolder=function(b){XVWidget.call(this,utils.dom.mergeArgs(ThreeDHolder.prototype.defaultArgs,b));this.firstVolObject=!0;this.fadeOnHoverOut=[];this.SlicerFileHandler_=new SlicerFileHandler;this.currentObjects=[];this.objRadioPairs=[];this.objVisiblePairs=[];this.objRenderPairs=[];this.objOpacityPairs=[];this.objThreshPairs=[];this.slicerCallbacks=[];this.addViewPanes();this.onloadCallbacks=[];this.adjustMethods={}};goog.inherits(ThreeDHolder,XVWidget);goog.exportSymbol("ThreeDHolder",ThreeDHolder);
ThreeDHolder.prototype.defaultArgs={className:XVGlobals.classNames.ThreeDHolder,parent:document.body,blankMsg:"drag and drop Thumbnail here",contrastThreshold:0.01,CSS:{position:"absolute",top:"0",left:"0",height:"95%",width:"100%",fontSize:"16","overflow-y":"hidden","overflow-x":"hidden","font-family":"Helvetica, Helvetica neue, Arial, sans-serif",border:"solid",borderColor:"rgba(50,50,50,1)",color:"rgba(255,255,255,1)","border-width":0,"border-radius":0,overflow:"visible"}};
ThreeDHolder.prototype.addOnloadCallback=function(b){this.onloadCallbacks.push(b)};ThreeDHolder.prototype.addViewPanes=function(){this.PlaneHolderX=new PlaneHolder("x",this,{parent:this.widget,CSS:{left:"0%",top:"0%"}});this.PlaneHolderY=new PlaneHolder("y",this,{parent:this.widget,CSS:{left:"50%",top:"0%"}});this.PlaneHolderZ=new PlaneHolder("z",this,{parent:this.widget,CSS:{left:"0%",top:"50%"}});this.PlaneHolder3=new PlaneHolder("v",this,{parent:this.widget,CSS:{left:"50%",top:"50%"}})};
ThreeDHolder.prototype.getObjFromList=function(b){var c=this.SlicerFileHandler_.getFileExt(b);if("dcm"===c||"dicom"===c)for(c=0;c<this.currentObjects.length;++c){if(-1<this.currentObjects[c].file[0].indexOf(b.slice(0,-9)))return this.currentObjects[c]}else for(c=0;c<this.currentObjects.length;++c)if(this.currentObjects[c].file==b)return this.currentObjects[c]};
ThreeDHolder.prototype.setOnShowtime=function(b){var c=this;this.PlaneHolder3.Renderer.onShowtime=b?function(){c.currentVolObject=b;c.initSliceSliders();c.update2Drenderers();c.updateMenuSliders()}:function(){c.updateMenuSliders()}};
ThreeDHolder.prototype.update2Drenderers=function(b){b&&(this.currentVolObject=b);this.PlaneHolderX.Renderer.add(this.currentVolObject);this.PlaneHolderX.Renderer.render();this.PlaneHolderY.Renderer.add(this.currentVolObject);this.PlaneHolderY.Renderer.render();this.PlaneHolderZ.Renderer.add(this.currentVolObject);this.PlaneHolderZ.Renderer.render();this.updateSlices()};
ThreeDHolder.prototype.destroyRenderers=function(){this.PlaneHolderX.Renderer.destroy();this.PlaneHolderY.Renderer.destroy();this.PlaneHolderZ.Renderer.destroy();this.PlaneHolder3.Renderer.destroy()};ThreeDHolder.setListenerRadio={};ThreeDHolder.setListenerVisible={};ThreeDHolder.setListenerRender={};ThreeDHolder.setListenerOpacity={};ThreeDHolder.setListenerThresh={};ThreeDHolder.prototype.setListenerRadio=function(b,c){var d=this;goog.events.listen(c,goog.ui.Component.EventType.CHANGE,function(c){d.update2Drenderers(b)})};goog.exportProperty(ThreeDHolder.prototype,"setListenerRadio",ThreeDHolder.prototype.setListenerRadio);
ThreeDHolder.prototype.setListenerVisible=function(b,c,d){goog.events.listen(c,goog.ui.Component.EventType.CHANGE,function(c){var f=b.visible=this.checked;utils.array.forEach(d,function(b){1==b.nodeType?b.disabled=f?"":"disabled":b.setEnabled(f)})})};goog.exportProperty(ThreeDHolder.prototype,"setListenerVisible",ThreeDHolder.prototype.setListenerVisible);ThreeDHolder.prototype.setListenerRender=function(b,c){goog.events.listen(c,goog.ui.Component.EventType.CHANGE,function(c){b.volumeRendering=this.checked})};
goog.exportProperty(ThreeDHolder.prototype,"setListenerRender",ThreeDHolder.prototype.setListenerRender);ThreeDHolder.prototype.setListenerOpacity=function(b,c){goog.events.listen(c,goog.ui.Component.EventType.CHANGE,function(d){b.opacity=c.getValue()})};goog.exportProperty(ThreeDHolder.prototype,"setListenerOpacity",ThreeDHolder.prototype.setListenerOpacity);
ThreeDHolder.prototype.setListenerThresh=function(b,c){goog.events.listen(c,goog.ui.Component.EventType.CHANGE,function(d){b.lowerThreshold=c.getValue();b.upperThreshold=c.getValue()+c.getExtent()})};goog.exportProperty(ThreeDHolder.prototype,"setListenerThresh",ThreeDHolder.prototype.setListenerThresh);Modal.enableViewerDragAndDrop={};Modal.setViewerDragAndDrop={};Modal.disableViewerDragAndDrop={};Modal.initViewerDragAndDrop={};
Modal.prototype.initViewerDragDrop=function(){var b=this;this.viewerBoxDragDrop={};this.viewerBoxDragDrop.dragover=function(c){if(-1<c.dragSourceItem.element.className.indexOf(XVGlobals.classNames.Viewer)){var d=c.dropTargetItem.element;c=c.dragSourceItem.element;var e=utils.css.dims(c),f=utils.css.dims(d),g=(new Date).getTime(),h=c.clickTime?c.clickTime:void 0;c.clickTime=g;h&&200>g-h||(utils.css.setCSS(c,f),d.oldDims=e,c.oldDims=f,f=new goog.fx.dom.Slide(d,[f.left,f.top],[e.left,e.top],XVGlobals.animFast),
f.play(),goog.events.listen(f,goog.fx.Transition.EventType.END,function(){utils.css.setCSS(d,e)}),b.ViewerManager({swap:[c,d]}))}};this.viewerBoxDragDrop.dragOut=function(b){b.dropTargetItem.element.style.borderColor=b.dropTargetItem.element.prevBorder};this.viewerBoxDragDrop.drop=function(b){b.dragSourceItem.element.className.indexOf(XVGlobals.classNames.Viewer)};this.viewerBoxDragDrop.dragstart=function(c){c.dragSourceItem.element.isCloneable=!0;-1<c.dragSourceItem.currentDragElement_.className.toLowerCase().indexOf("viewer")||
-1<c.dragSourceItem.currentDragElement_.className.toLowerCase().indexOf("twod")||-1<goog.dom.getParentElement(c.dragSourceItem.currentDragElement_).className.toLowerCase().indexOf("twod")?(b.enableViewerDragAndDrop(),utils.fx.fadeOut(c.dragSourceItem.element,XVGlobals.animFast),XV.ViewerManager(function(b){b.widget.oldDims=utils.css.dims(b.widget)})):(b.disableViewerDragAndDrop(),c.dragSourceItem.element.isCloneable=!1)};this.viewerBoxDragDrop.dragend=function(c){var d=goog.style.getRelativePosition(c.dragSourceItem.element,
c.currentTarget.dragEl_),e=utils.css.dims(c.dragSourceItem.element),d={top:e.top-d.y,left:e.left-d.x},e=new goog.fx.dom.Slide(c.dragSourceItem.element,[d.left,d.top],[e.left,e.top],XVGlobals.animFast);utils.css.setCSS(c.dragSourceItem.element,d);c.dragSourceItem.element.style.opacity=1;goog.events.listen(e,"end",function(){b.updateCSS()});e.play()}};
Modal.prototype.setViewerDragAndDrop=function(){var b=this;1<b.ViewerManager("total")&&(b.ViewerManager(function(c){b.ViewerManager(function(b){c!==b&&c.addTarget(b)});goog.events.listen(c,"dragstart",b.viewerBoxDragDrop.dragstart)}),b.enableViewerDragAndDrop())};
Modal.prototype.disableViewerDragAndDrop=function(){var b=this;b.ViewerManager(function(c){goog.events.unlisten(c,"drop",b.viewerBoxDragDrop.drop);goog.events.unlisten(c,"dragover",b.viewerBoxDragDrop.dragover);goog.events.unlisten(c,"dragend",b.viewerBoxDragDrop.dragend)})};
Modal.prototype.enableViewerDragAndDrop=function(){var b=this;b.ViewerManager(function(c){c.init();goog.events.listen(c,"drop",b.viewerBoxDragDrop.drop);goog.events.listen(c,"dragover",b.viewerBoxDragDrop.dragover);goog.events.listen(c,"dragend",b.viewerBoxDragDrop.dragend)})};goog.exportProperty(Modal.prototype,"enableViewerDragAndDrop",Modal.prototype.enableViewerDragAndDrop);goog.exportProperty(Modal.prototype,"disableViewerDragAndDrop",Modal.prototype.disableViewerDragAndDrop);
goog.exportProperty(Modal.prototype,"setViewerDragAndDrop",Modal.prototype.setViewerDragAndDrop);goog.exportProperty(Modal.prototype,"initViewerDragAndDrop",Modal.prototype.initViewerDragAndDrop);utils.css.processCSSObject=function(b){var c="height width left top borderWidth borderWidth borderRadius border-radius fontSize fontSize margin margin-top marginTop marginLeft margin-left".split(" ");for(key in b)-1<c.indexOf(key)&&"number"===typeof b[key]&&(b[key]=utils.convert.px(b[key]));return b};goog.exportSymbol("utils.css.processCSSObject",utils.css.processCSSObject);var FrameHolder=function(b){XVWidget.call(this,utils.dom.mergeArgs(FrameHolder.prototype.defaultArgs,b));this.currFrame=this.args.onloadFrame;this.progBar=utils.gui.ProgressBar(this.widget);this.progBar.hide();this.canvas=utils.dom.makeElement("canvas",this.widget,XVGlobals.classNames.FrameHolderCanvas,{top:0,left:0});this.canvas.height=this.CSS.height;this.canvas.width=this.CSS.width;this.context=this.canvas.getContext("2d");this.onloadCallbacks=[];this.adjustMethods={};this.context.font=utils.convert.px(10)+
" "+this.args.CSS["font-family"];this.context.fillStyle="white";this.frames=[];this.updateCSS()};goog.inherits(FrameHolder,XVWidget);goog.exportSymbol("FrameHolder",FrameHolder);
FrameHolder.prototype.defaultArgs={className:XVGlobals.classNames.FrameHolder,parent:document.body,onloadFrame:0,blankMsg:"drag and drop Thumbnail here",contrastThreshold:0.01,CSS:{position:"absolute",top:15,left:20,height:300,width:300,fontSize:16,"overflow-y":"hidden","overflow-x":"hidden","font-family":"Helvetica, Helvetica neue, Arial, sans-serif",border:"solid",borderColor:"rgba(50,50,50,1)",color:"rgba(255,255,255,1)",borderWidth:0,"border-radius":0,overflow:"visible"}};
FrameHolder.prototype.addOnloadCallback=function(b){this.onloadCallbacks.push(b)};FrameHolder.prototype.drawFrame=function(b,c){this.frames&&(0>b?b=0:b>this.frames.length&&(b=this.frames.length-1),0<this.frames.length&&(this.currFrame=b=Math.round(b),this.drawImage_MaintainProportions(this.frames[b],this.canvas,this.context)),!0===c&&this.imageAdjust())};
FrameHolder.prototype.drawImage_MaintainProportions=function(b,c,d){var e=0,f=0,g=c.width,h=c.height;d.clearRect(0,0,c.width,c.height);b.width<b.height?(newH=c.height,newW=Math.round(b.width*c.height/b.height),e=Math.round(c.width-newW)/2,g=newW):b.width>b.height&&(newW=c.width,newH=Math.round(b.height*c.width/b.width),f=Math.round(c.height-newH)/2,h=newH);d.drawImage(b,e,f,g,h)};FrameHolder.prototype.applyImageAdjustments=function(){for(var b in this.adjustMethods)this.imageAdjust(b,this.adjustMethods[b])};
FrameHolder.prototype.imageAdjust=function(b,c){if("undefined"!==b&&c&&0<this.canvas.height&&0<this.canvas.width){this.adjustMethods[b]=c;this.drawFrame(this.currFrame);var d=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),e;for(e in this.adjustMethods)switch(e){case "brightness":d.data=IP.linearBrightness(d.data,this.adjustMethods[e]);break;case "contrast":d.data=IP.linearContrast(d.data,this.adjustMethods[e],this.defaultArgs.contrastThreshold)}this.context.putImageData(d,0,0)}};FrameHolder.updateCSS={};FrameHolder.prototype.updateCSS=function(b){b=utils.dom.mergeArgs(utils.css.dims(this.widget),b);utils.css.setCSS(this.widget,b);this.canvas.height=b.height;this.canvas.width=b.width;utils.css.setCSS(this.canvas,b);this.drawFrame(this.currFrame)};goog.exportProperty(FrameHolder.prototype,"updateCSS",FrameHolder.prototype.updateCSS);var ScanViewer=function(b){Viewer.call(this,utils.dom.mergeArgs(ScanViewer.prototype.defaultArgs,b));var c=this;this.FrameHolder=new FrameHolder({parent:this.widget,borderWidth:0});this.FrameHolder.Viewer=this;this.FrameHolder.addOnloadCallback(function(){var b=c.getThumbnail();b&&b.scanData&&c.populateData(b.scanData)});this.addViewPlaneMenu();this.addFrameSlider();this.ContentDivider=new ContentDivider({parent:this.widget,widgetCSS:{backgroundColor:"rgb(35,35,35)"}});this.ScanTabs=new ScanTabs({parent:this.widget,
tabTitles:["Info","Adjust"],widgetCSS:{height:XVGlobals.minScanTabHeight,width:"100%"}});this.linkContentDividerToScanTabs();this.addAdjustSliders();this.displayableData={};this.textCSS_small={color:"rgba(255,255,255,1)",position:"absolute",top:0,left:0,fontSize:XVGlobals.fontSizeMed,textAlign:"left",width:140};this.displayableData.frameNumber=utils.dom.makeElement("div",this.widget,"ScanViewerDisplayableData");utils.css.setCSS(this.displayableData.frameNumber,this.textCSS_small);this.FrameHolder.addOnloadCallback(function(){c.displayableData.frameNumber.innerHTML=
"Frame: "+c.FrameHolder.currFrame+" / "+c.FrameHolder.frames.length});this.setHoverEvents();this.updateCSS()};goog.inherits(ScanViewer,Viewer);ScanViewer.prototype.defaultArgs={className:XVGlobals.classNames.ScanViewer,sliderCSS:{parent:document.body,className:"FrameSlider",widgetCSS:{height:8,width:"96%",left:"2%"},thumbCSS:{height:7,width:7,borderRadius:2,backgroundColor:"rgba(195,195,195,1)"},trackCSS:{height:3,backgroundColor:"rgba(55, 55, 55, 1)",borderRadius:2}}};
ScanViewer.prototype.loadThumbnail=function(b){ScanViewer.superClass_.loadThumbnail.call(this,b);this.FrameHolder.loadThumbnail(b)};
ScanViewer.prototype.setHoverEvents=function(){var b=this,c=[XVGlobals.classNames.FrameHolder];this.hoverOut=function(){utils.array.forEach(b.widget.childNodes,function(b){var e=!1;utils.array.forEach(c,function(c){-1<b.className.indexOf(c)&&(e=!0)});e||utils.fx.fadeOut(b,0)})};this.hoverIn=function(){utils.array.forEach(b.widget.childNodes,function(b){utils.fx.fadeIn(b,0)})};goog.events.listen(this.widget,goog.events.EventType.MOUSEOVER,function(){b.hoverIn()});goog.events.listen(this.widget,goog.events.EventType.MOUSEOUT,
function(){b.hoverOut()});b.hoverOut()};
ScanViewer.prototype.createDragElement=function(b){var c=ScanViewer.superClass_.createDragElement.call(this,b);"DUMMY"!==c.id&&(b=goog.dom.getAncestorByClass(b,XVGlobals.classNames.ScanViewer),c=b.cloneNode(!0),c.style.fontFamily=XVGlobals.fontFamily,b=goog.dom.getElementByClass(XVGlobals.classNames.FrameHolderCanvas,b),goog.dom.getElementByClass(XVGlobals.classNames.FrameHolderCanvas,c).getContext("2d").drawImage(b,0,0),c.style.opacity=0.7,c.className="VIEWERCLONE",c.id="CLONE",utils.css.setCSS(c,
{cursor:"move","-moz-user-select":"none"}),goog.events.removeAll(c));return c};ScanViewer.updateCSS={};
ScanViewer.prototype.updateCSS=function(b){ScanViewer.superClass_.updateCSS.call(this,b);if(!this.ContentDivider.dragging&&utils.css.dims(this.ContentDivider.containmentDiv,"width")!==this.widgetDims.width){b=XVGlobals.minFrameHolderHeight;var c=this.widgetDims.height-b-utils.css.dims(this.ContentDivider.widget,"height")-XVGlobals.minScanTabHeight+5;utils.css.setCSS(this.ContentDivider.widget,{top:XVGlobals.minContentDividerTop(this.widgetDims.height)-1});utils.css.setCSS(this.ContentDivider.containmentDiv,{top:b,
left:0,height:c,width:this.widgetDims.width})}c=utils.css.dims(this.ContentDivider.widget);b=c.top+c.height;var c=c.top-utils.css.dims(this.FrameSlider.getWidget(),"height")-5,d,e;d=c-10>this.widgetDims.width?this.widgetDims.width:c-10;e=this.widgetDims.width/2-d/2;this.ScanTabs.updateCSS({left:0,top:b,width:"100%"});this.FrameSlider.updateCSS({top:c});this.FrameHolder.updateCSS({left:e,top:0,width:d,height:d});utils.css.setCSS(this.displayableData.frameNumber,{top:c-15,left:10,width:this.widgetDims.width-
10,fontSize:XVGlobals.fontSizeSmall});this.FrameSlider.dispatchEvent(goog.ui.Component.EventType.CHANGE);utils.css.setCSS(this.LinkMenu,{left:this.widgetDims.width-30});this.selectorBox&&utils.css.setCSS(this.selectorBox,{height:this.widgetDims.height,width:this.widgetDims.widget,left:this.widgetDims.left,top:this.widgetDims.top})};goog.exportProperty(ScanViewer.prototype,"updateCSS",ScanViewer.prototype.updateCSS);X.parserSTL=function(){X.parser.call(this);this._classname="parserSTL"};goog.inherits(X.parserSTL,X.parser);
X.parserSTL.prototype.parse=function(b,c,d,e){X.TIMER(this._classname+".parse");this._data=d;e=c._points;var f=c._normals;"solid"==this.parseChars(this.scan("uchar",5))?(c._points=e=new X.triplets(d.byteLength),c._normals=f=new X.triplets(d.byteLength),this.parseASCII(e,f,this.scan("uchar",d.byteLength-5))):(this.jumpTo(80),d=this.scan("uint"),c._points=e=new X.triplets(9*d),c._normals=f=new X.triplets(9*d),this.parseBIN(e,f,d));X.TIMERSTOP(this._classname+".parse");d=new X.event.ModifiedEvent;d._object=
c;d._container=b;this.dispatchEvent(d)};X.parserSTL.prototype.parseASCII=function(b,c,d){var e=d.length,f=!1,g=!1,h=0,k;for(k=0;k<e;k++)if(10==d[k]){if(f||g){var m=this.parseChars(d,h,k).split(" "),g=parseFloat(m[0]),p=parseFloat(m[1]),m=parseFloat(m[2]);f?(c.add(g,p,m),c.add(g,p,m),c.add(g,p,m)):b.add(g,p,m);g=f=!1}}else 32==d[k-1]&&(102==d[k]?(h=k+=13,f=!0):118==d[k]&&(h=k+=7,g=!0))};
X.parserSTL.prototype.parseBIN=function(b,c,d){for(var e=0,e=0;e<d;e++){var f=this.scan("float",12),g=f[0],h=f[1],k=f[2];c.add(g,h,k);c.add(g,h,k);c.add(g,h,k);b.add(f[3],f[4],f[5]);b.add(f[6],f[7],f[8]);b.add(f[9],f[10],f[11]);this._dataPointer+=2}};goog.exportSymbol("X.parserSTL",X.parserSTL);goog.exportSymbol("X.parserSTL.prototype.parse",X.parserSTL.prototype.parse);X.parserDCM=function(){X.parser.call(this);this._classname="parserDCM"};goog.inherits(X.parserDCM,X.parser);
X.parserDCM.prototype.parse=function(b,c,d,e){d=this.parseStream(d,c);if(d.loaded_files==d.number_of_slices){e=d.sorting_table.length;var f,g=0;for(f=0;f<e;f++){var h=d.sorting_table[f];void 0!==h&&(h*=d.vol_size,h=d.data_unsorted.subarray(h,h+d.vol_size),d.data.set(h,g*d.vol_size),g++)}c._dimensions=[d.dim[0],d.dim[1],d.dim[2]];Infinity==d.pixdim[2]&&(d.pixdim[2]=1);c._spacing=[d.pixdim[0],d.pixdim[1],d.pixdim[2]];f=this.arrayMinMax(d.data);e=f[0];f=f[1];d.min=c._min=c._windowLow=e;d.max=c._max=
c._windowHigh=f;-Infinity==c._lowerThreshold&&(c._lowerThreshold=e);Infinity==c._upperThreshold&&(c._upperThreshold=f);d.space=["left","posterior","superior"];e=new goog.math.Vec3(d.spaceorientation[0],d.spaceorientation[1],d.spaceorientation[2]);f=new goog.math.Vec3(d.spaceorientation[3],d.spaceorientation[4],d.spaceorientation[5]);e=goog.math.Vec3.cross(e,f);d.spaceorientation.push(e.x,e.y,e.z);d.rasspaceorientation=this.toRAS(d.space,d.spaceorientation);e=this.orientnormalize(d.rasspaceorientation);
d.orientation=e[0];d.normcosine=e[1];c.create_(d);c._image=this.reslice(c);c.map_()}d=new X.event.ModifiedEvent;d._object=c;d._container=b;this.dispatchEvent(d)};
X.parserDCM.prototype.parseStream=function(b,c){this._data=b;var d=0;if(goog.isDefAndNotNull(c.MRI)){h=c.MRI;k=this.scan("ushort",this._data.byteLength-2*h.vol_size);m=0;for(p=2;0<p;)if(g=k[m++],32==g)if(g=k[m++],19==g){m++;e=k[m++];g=0;for(e/=2;g<e;g++)n=k[m++],q=n&255,n=(n&65280)>>8,d+=String.fromCharCode(q),d+=String.fromCharCode(n),d=parseInt(d,10);p--}else if(4161==g){m++;for(var e=k[m++],f="",g=0,e=e/2;g<e;g++)n=k[m++],q=n&255,n=(n&65280)>>8,f+=String.fromCharCode(q),f+=String.fromCharCode(n);
g=Math.abs(h.last_slicelocation-f);h.pixdim=[h.pixdim[0],h.pixdim[1],Math.min(g,h.pixdim[2])];h.last_slicelocation=f;p--}h.dim[2]++}else{var h={rows:0,cols:0,pixdim:null,bits_allocated:0,bits_stored:0,number_of_slices:1,number_of_images:1,last_slicelocation:null,loaded_files:0,vol_size:0,data_unsorted:null,position_unsorted:0,sorting_table:[],data:null,min:Infinity,max:-Infinity,origin:null,space:null,spaceorientation:null,rasspaceorientation:null,orientation:null,normcosine:null};h.number_of_slices=
c._file.length;goog.isDefAndNotNull(h.number_of_slices)||(h.number_of_slices=1);for(var k=this.scan("ushort",this._data.byteLength),m=66,g=null,e=g=null,p=9;0<p;)if(g=k[m++],40==g)switch(g=k[m++],m++,e=k[m++],g){case 16:h.rows=k[m++];p--;break;case 17:h.cols=k[m++];p--;break;case 256:h.bits_allocated=k[m++];p--;break;case 257:h.bits_stored=k[m++];p--;break;case 2:h.number_of_images=k[m++];p--;break;case 48:f="";g=g=0;for(e/=2;g<e;g++)var n=k[m++],q=n&255,n=(n&65280)>>8,f=f+String.fromCharCode(q),
f=f+String.fromCharCode(n);f=f.split("\\");h.pixdim=[parseFloat(f[0]),parseFloat(f[1]),Infinity];p--}else if(32==g)switch(g=k[m++],m++,e=k[m++],g){case 19:g=0;for(e/=2;g<e;g++)n=k[m++],q=n&255,n=(n&65280)>>8,d+=String.fromCharCode(q),d+=String.fromCharCode(n),d=parseInt(d,10);p--;break;case 50:f="";g=0;for(e/=2;g<e;g++)n=k[m++],q=n&255,n=(n&65280)>>8,f+=String.fromCharCode(q),f+=String.fromCharCode(n);f=f.split("\\");h.origin=[parseFloat(f[0]),parseFloat(f[1]),parseFloat(f[2])];p--;break;case 55:f=
"";g=0;for(e/=2;g<e;g++)n=k[m++],q=n&255,n=(n&65280)>>8,f+=String.fromCharCode(q),f+=String.fromCharCode(n);f=f.split("\\");h.spaceorientation=[parseFloat(f[0]),parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]),parseFloat(f[4]),parseFloat(f[5])];p--}else if(16==g)switch(g=k[m++],m++,e=k[m++],g){case 8720:for(f="",g=0,e/=2;g<e;g++)n=k[m++],q=n&255,n=(n&65280)>>8,f+=String.fromCharCode(q),f+=String.fromCharCode(n)}c.MRI=h;h.dim=[h.cols,h.rows,1];h.vol_size=h.rows*h.cols;switch(h.bits_allocated){case 8:h.data_unsorted=
new Uint8Array(h.cols*h.rows*h.number_of_slices);h.data=new Uint8Array(h.cols*h.rows*h.number_of_slices);break;case 16:h.data_unsorted=new Uint16Array(h.cols*h.rows*h.number_of_slices);h.data=new Uint16Array(h.cols*h.rows*h.number_of_slices);break;case 32:h.data_unsorted=new Uint32Array(h.cols*h.rows*h.number_of_slices),h.data=new Uint32Array(h.cols*h.rows*h.number_of_slices)}}this.jumpTo(this._data.byteLength-2*h.vol_size);k=null;switch(h.bits_allocated){case 8:k=this.scan("uchar",h.vol_size);break;
case 16:k=this.scan("ushort",h.vol_size);break;case 32:k=this.scan("uint",h.vol_size)}h.sorting_table[d]=h.position_unsorted;h.data_unsorted.set(k,h.position_unsorted*h.vol_size);h.position_unsorted++;++h.loaded_files;return h};goog.exportSymbol("X.parserDCM",X.parserDCM);goog.exportSymbol("X.parserDCM.prototype.parse",X.parserDCM.prototype.parse);X.parserVTK=function(){X.parser.call(this);this._classname="parserVTK"};goog.inherits(X.parserVTK,X.parser);
X.parserVTK.prototype.parse=function(b,c,d,e){X.TIMER(this._classname+".parse");e=c._points;var f=c._normals,g=new Uint8Array(d),h="";c._points=e=new X.triplets(d.byteLength);c._normals=f=new X.triplets(d.byteLength);d=0;for(var k=g.length;d<k;d+=32768)h+=this.parseChars(g,d,Math.min(d+32768,k));g=h.split("\n");h=g.length;this._unorderedNormals=this._unorderedPoints=null;this._geometries=[];this._objectType=X.displayable.types.TRIANGLES;this._normalsMode=this._pointDataMode=this._geometryMode=this._pointsMode=
!1;d=0;for(k=h%8;k--;)this.parseLine(g[d]),d++;for(k=0.125*h^0;k--;)this.parseLine(g[d]),d++,this.parseLine(g[d]),d++,this.parseLine(g[d]),d++,this.parseLine(g[d]),d++,this.parseLine(g[d]),d++,this.parseLine(g[d]),d++,this.parseLine(g[d]),d++,this.parseLine(g[d]),d++;this.configure(e,f);c._type=this._objectType;X.TIMERSTOP(this._classname+".parse");e=new X.event.ModifiedEvent;e._object=c;e._container=b;this.dispatchEvent(e)};
X.parserVTK.prototype.parseLine=function(b){b=b.replace(/^\s+|\s+$/g,"");b=b.split(" ");var c=b.length,d=b[0];switch(d){case "POINTS":this._pointsMode=!0;this._pointDataMode=this._geometryMode=!1;b=parseInt(b[1],10);this._unorderedPoints=new X.triplets(3*b);this._unorderedNormals=new X.triplets(3*b);return;case "VERTICES":this._geometryMode=!0;this._pointDataMode=this._pointsMode=!1;b=parseInt(b[1],10);if(3<=b)this._objectType=X.displayable.types.TRIANGLES;else if(1==b)this._objectType=X.displayable.types.POINTS;
else throw Error("This VTK file is not supported!");this._geometries=[];return;case "TRIANGLE_STRIPS":this._geometryMode=!0;this._pointDataMode=this._pointsMode=!1;this._objectType=X.displayable.types.TRIANGLE_STRIPS;this._geometries=[];return;case "LINES":this._geometryMode=!0;this._pointDataMode=this._pointsMode=!1;this._objectType=X.displayable.types.LINES;this._geometries=[];return;case "POLYGONS":this._geometryMode=!0;this._pointDataMode=this._pointsMode=!1;this._objectType=X.displayable.types.POLYGONS;
this._geometries=[];return;case "POINT_DATA":this._pointDataMode=!0;this._geometryMode=this._pointsMode=!1;return}if(this._pointsMode)if(1==c||isNaN(parseFloat(d)))this._pointsMode=!1;else{if(3<=c){var d=parseFloat(b[0]),e=parseFloat(b[1]),f=parseFloat(b[2]);this._unorderedPoints.add(d,e,f)}6<=c&&(d=parseFloat(b[3]),e=parseFloat(b[4]),f=parseFloat(b[5]),this._unorderedPoints.add(d,e,f));9<=c&&(c=parseFloat(b[6]),d=parseFloat(b[7]),b=parseFloat(b[8]),this._unorderedPoints.add(c,d,b))}else this._geometryMode?
1==c||isNaN(parseFloat(d))?this._geometryMode=!1:(b=b.slice(1),this._geometries.push(b)):this._pointDataMode&&("NORMALS"==d?this._normalsMode=!0:1==c||isNaN(parseFloat(d))?this._normalsMode=this._pointDataMode=!1:this._normalsMode&&(3<=c&&(d=parseFloat(b[0]),e=parseFloat(b[1]),f=parseFloat(b[2]),this._unorderedNormals.add(d,e,f)),6<=c&&(d=parseFloat(b[3]),e=parseFloat(b[4]),f=parseFloat(b[5]),this._unorderedNormals.add(d,e,f)),9<=c&&(c=parseFloat(b[6]),d=parseFloat(b[7]),b=parseFloat(b[8]),this._unorderedNormals.add(c,
d,b))))};
X.parserVTK.prototype.configure=function(b,c){var d=this._unorderedPoints,e=this._unorderedNormals,f=e.length,g=this._geometries.length,h=g;do{var k=this._geometries[g-h],m=k.length,p;p=0;for(var n=m;p<n&&!(this._objectType==X.displayable.types.LINES&&p+1>=m);p++){var q=parseInt(k[p],10),r=d.get(q);b.add(r[0],r[1],r[2]);var s=q,u=r;this._objectType==X.displayable.types.LINES?(s=parseInt(k[p+1],10),u=d.get(s),b.add(u[0],u[1],u[2])):this._objectType==X.displayable.types.TRIANGLE_STRIPS&&(0!=p&&p!=m-
1||b.add(r[0],r[1],r[2]));q<f?(u=e.get(q),c.add(u[0],u[1],u[2]),this._objectType==X.displayable.types.LINES?(s=e.get(s),c.add(s[0],s[1],s[2])):this._objectType==X.displayable.types.TRIANGLE_STRIPS&&(0!=p&&p!=m-1||c.add(u[0],u[1],u[2]))):(s=new goog.math.Vec3(r[0],r[1],r[2]),s.normalize(),c.add(s.x,s.y,s.z),this._objectType==X.displayable.types.LINES?(s=new goog.math.Vec3(u[0],u[1],u[2]),s.normalize(),c.add(s.x,s.y,s.z)):this._objectType==X.displayable.types.TRIANGLE_STRIPS&&(0!=p&&p!=m-1||c.add(s.x,
s.y,s.z)))}h--}while(0<h)};goog.exportSymbol("X.parserVTK",X.parserVTK);goog.exportSymbol("X.parserVTK.prototype.parse",X.parserVTK.prototype.parse);X.parserFSM=function(){X.parser.call(this);this._classname="parserFSM";this._littleEndian=!1};goog.inherits(X.parserFSM,X.parser);
X.parserFSM.prototype.parse=function(b,c,d,e){X.TIMER(this._classname+".parse");this._data=d;var f=c._points,g=c._normals;c._pointIndices=[];var h=c._pointIndices;d=0;do e=this.scan("uchar"),d++;while(200>d&&10!=e);this.scan("uchar");d=this.scan("uint");var k=this.scan("uint"),m=this.scan("float",3*d);e=this.scan("uint",3*k);var p=new Uint32Array(d),n=new Float32Array(9*k);c._points=f=new X.triplets(9*k);c._normals=g=new X.triplets(9*k);var q;q=0;for(d=k;q<d;q++){var r=3*q,s=e[r],u=e[r+1],t=e[r+2];
h.push(s);h.push(u);h.push(t);p[s]+=1;p[u]+=1;p[t]+=1;var r=3*s,w=3*u,x=3*t,y=m[r],I=m[r+1],z=m[r+2],C=m[w],D=m[w+1],A=m[w+2],u=m[x],t=m[x+1],s=m[x+2];f.add(y,I,z);f.add(C,D,A);f.add(u,t,s);y=new goog.math.Vec3(y,I,z);C=new goog.math.Vec3(C,D,A);u=new goog.math.Vec3(u,t,s);t=C.clone().subtract(y);u=u.clone().subtract(y);u=goog.math.Vec3.cross(t,u).normalize();n[r]+=u.x;n[r+1]+=u.y;n[r+2]+=u.z;n[w]+=u.x;n[w+1]+=u.y;n[w+2]+=u.z;n[x]+=u.x;n[x+1]+=u.y;n[x+2]+=u.z}q=0;for(d=k;q<d;q++)r=3*q,s=e[r],u=e[r+
1],t=e[r+2],r=3*s,w=3*u,x=3*t,h=n[w],k=n[w+1],f=n[w+2],m=n[x],w=n[x+1],x=n[x+2],r=new goog.math.Vec3(n[r],n[r+1],n[r+2]),h=new goog.math.Vec3(h,k,f),x=new goog.math.Vec3(m,w,x),r=r.scale(1/p[s]).normalize(),h=h.scale(1/p[u]).normalize(),x=x.scale(1/p[t]).normalize(),g.add(r.x,r.y,r.z),g.add(h.x,h.y,h.z),g.add(x.x,x.y,x.z);e=this.scan("uchar",this._data.byteLength-this._dataPointer);g=null;r=0;for(d=e.length;r<d;r++)if(99==e[r]&&114==e[r+1]&&97==e[r+2]&&115==e[r+3]){for(g=d=r+9;10!=e[r]&&r<e.length;)g++,
r++;g=this.parseChars(e.subarray(d,g)).split(" ");break}g&&(c._transform.translateX(parseFloat(g[0])),c._transform.translateY(parseFloat(g[1])),c._transform.translateZ(parseFloat(g[2])));c._type=X.displayable.types.TRIANGLES;X.TIMERSTOP(this._classname+".parse");d=new X.event.ModifiedEvent;d._object=c;d._container=b;this.dispatchEvent(d)};goog.exportSymbol("X.parserFSM",X.parserFSM);goog.exportSymbol("X.parserFSM.prototype.parse",X.parserFSM.prototype.parse);X.parserMGZ=function(){X.parser.call(this);this._classname="parserMGZ";this._littleEndian=!1};goog.inherits(X.parserMGZ,X.parser);
X.parserMGZ.prototype.parse=function(b,c,d,e){X.TIMER(this._classname+".parse");e&&(d=(new Zlib.Gunzip(new Uint8Array(d))).decompress(),d=d.buffer);e=this.parseStream(d);c._dimensions=[e.ndim1,e.ndim2,e.ndim3];c._spacing=e.v_voxelsize;d=e.min;var f=e.max;c._min=c._windowLow=d;c._max=c._windowHigh=f;-Infinity==c._lowerThreshold&&(c._lowerThreshold=d);Infinity==c._upperThreshold&&(c._upperThreshold=f);e.space=["right","anterior","superior"];e.spaceorientation=[];e.spaceorientation.push(e.M_ras[0][0]);
e.spaceorientation.push(e.M_ras[0][1]);e.spaceorientation.push(e.M_ras[0][2]);e.spaceorientation.push(e.M_ras[1][0]);e.spaceorientation.push(e.M_ras[1][1]);e.spaceorientation.push(e.M_ras[1][2]);e.spaceorientation.push(e.M_ras[2][0]);e.spaceorientation.push(e.M_ras[2][1]);e.spaceorientation.push(e.M_ras[2][2]);e.rasspaceorientation=this.toRAS(e.space,e.spaceorientation);d=this.orientnormalize(e.rasspaceorientation);e.orientation=d[0];e.normcosine=d[1];c.create_(e);X.TIMERSTOP(this._classname+".parse");
c._image=this.reslice(c);c.map_();e=new X.event.ModifiedEvent;e._object=c;e._container=b;this.dispatchEvent(e)};
X.parserMGZ.prototype.parseStream=function(b){this._data=b;b={version:0,Tr:0,Te:0,flipangle:0,Ti:0,ndim1:0,ndim2:0,ndim3:0,nframes:0,type:0,dof:0,rasgoodflag:0,MRIreader:null,M_ras:null,v_voxelsize:null,data:null,min:Infinity,max:-Infinity,space:null,spaceorientation:null,rasspaceorientation:null,orientation:null,normcosine:null};b.version=this.scan("uint");b.ndim1=this.scan("uint");b.ndim2=this.scan("uint");b.ndim3=this.scan("uint");b.nframes=this.scan("uint");b.type=this.scan("uint");b.dof=this.scan("uint");
b.rasgoodflag=this.scan("ushort");if(0<b.rasgoodflag){b.v_voxelsize=this.scan("float",3);var c=[];c.push(this.scan("float",3));c.push(this.scan("float",3));c.push(this.scan("float",3));c.push(this.scan("float",3));b.M_ras=c}this.jumpTo(284);c=b.ndim1*b.ndim2*b.ndim3;switch(b.type){case 0:b.data=this.scan("uchar",c);break;case 1:b.data=this.scan("uint",c);break;case 3:b.data=this.scan("float",c);break;case 4:b.data=this.scan("ushort",c);break;default:throw Error("Unsupported MGH/MGZ data type: "+b.type);
}c=this.arrayMinMax(b.data);b.min=c[0];b.max=c[1];this._dataPointer+16<this._data.byteLength&&(b.Tr=this.scan("float"),b.flipangle=this.scan("float"),b.Te=this.scan("float"),b.Ti=this.scan("float"));return b};goog.exportSymbol("X.parserMGZ",X.parserMGZ);goog.exportSymbol("X.parserMGZ.prototype.parse",X.parserMGZ.prototype.parse);X.parserLBL=function(){X.parser.call(this);this._classname="parserLBL"};goog.inherits(X.parserLBL,X.parser);
X.parserLBL.prototype.parse=function(b,c,d,e){X.TIMER(this._classname+".parse");e=c._pointIndices;var f=e.length;if(0==f)throw Error("No _pointIndices defined on the X.object.");this._data=d;var g=[],h=this.scan("uchar",d.byteLength),k=h.length,m=!1,p=0;for(d=1;d<k;d++)10==h[d-1]?(p=d,m=!0):m&&32==h[d]&&(m=parseInt(this.parseChars(h,p,d),10),g.push(m),m=!1);h=c._scalars._array?c._scalars._array:new Float32Array(f);k=g.length;for(d=0;d<k;d++)h[g[d]]=1;g=new Float32Array(3*f);d=p=0;for(k=f;d<k;d++){m=
e[d];if(m>f)throw Error("Could not find scalar for vertex.");m=h[m];g[p++]=m;g[p++]=m;g[p++]=m}c._scalars._array=h;c._scalars._glArray=g;c._scalars._dirty=!0;X.TIMERSTOP(this._classname+".parse");e=new X.event.ModifiedEvent;e._object=c;e._container=b;this.dispatchEvent(e)};goog.exportSymbol("X.parserLBL",X.parserLBL);goog.exportSymbol("X.parserLBL.prototype.parse",X.parserLBL.prototype.parse);X.parserCRV=function(){X.parser.call(this);this._classname="parserCRV";this._littleEndian=!1};goog.inherits(X.parserCRV,X.parser);
X.parserCRV.prototype.parse=function(b,c,d,e){X.TIMER(this._classname+".parse");e=c._pointIndices;if(0==e.length)throw Error("No _pointIndices defined on the X.object.");this._data=d;this.jumpTo(3);var f=this.scan("uint");this.scan("uint");this.scan("uint");var g=0,h=0,k=0,m=0,p=0,n=0,q=0,r=0,s=0,u=0,t=0;d=Array(2);var w=Array(2),x=this.scan("float",f),y;y=0;for(var I=f;y<I;y++){var z=x[y];0==y&&(d[0]=w[0]=z);0<=z?(g++,m+=z):(h++,k+=z);s+=z;t++;w[0]=Math.max(z,w[0]);d[0]=Math.min(z,d[0]);x[y]=z}0!=
g&&(p=m/g);0!=h&&(n=k/h);0!=t&&(u=s/t);y=s=k=m=0;for(I=f;y<I;y++)z=x[y],f=0,0<=z?(f=Math.pow(z-p,2),m+=f):(f=Math.pow(z-n,2),k+=f),f=Math.pow(z-u,2),s+=f;1<g&&(q=Math.sqrt(m/(g-1)));1<h&&(r=Math.sqrt(k/(h-1)));1<t&&Math.sqrt(s/(t-1));d[1]=n-2.5*r;w[1]=p+2.5*q;I=e.length;g=new Float32Array(3*I);for(y=0;y<I;y++)h=x[e[y]],k=3*y,g[k]=h,g[k+1]=h,g[k+2]=h;c._scalars._min=d[1];c._scalars._max=w[1];-Infinity==c._scalars._lowerThreshold&&(c._scalars._lowerThreshold=d[1]);Infinity==c._scalars._upperThreshold&&
(c._scalars._upperThreshold=w[1]);c._scalars._array=x;c._scalars._glArray=g;c._scalars._dirty=!0;X.TIMERSTOP(this._classname+".parse");e=new X.event.ModifiedEvent;e._object=c;e._container=b;this.dispatchEvent(e)};goog.exportSymbol("X.parserCRV",X.parserCRV);goog.exportSymbol("X.parserCRV.prototype.parse",X.parserCRV.prototype.parse);X.parserTRK=function(){X.parser.call(this);this._classname="parserTRK"};goog.inherits(X.parserTRK,X.parser);
X.parserTRK.prototype.parse=function(b,c,d,e){X.TIMER(this._classname+".parse");var f=c._points,g=c._normals,h=c._colors;this._data=d;this.scan("uchar",6);this.scan("ushort",3);var k=this.scan("float",3);this.scan("float",3);var m=this.scan("ushort");this.scan("uchar",200);this.scan("ushort");this.scan("uchar",200);d=this.scan("float",16);this.scan("uchar",444);this.scan("uchar",4);this.scan("uchar",4);this.scan("float",6);this.scan("uchar",2);this.scan("uchar");this.scan("uchar");this.scan("uchar");
this.scan("uchar");this.scan("uchar");this.scan("uchar");var p=this.scan("uint");this.scan("uint");var n=this.scan("uint"),q=[],r=[];e=Infinity;var s=-Infinity,u=null,t=null,w=null,x=null,g=f=null,y=this.scan("uint",(this._data.byteLength-1E3)/4);this.jumpTo(n);for(var I=this.scan("float",(this._data.byteLength-1E3)/4),z=0,n=h=0,C=p;n<C;n++){for(var D=y[z],A=new X.triplets(3*D),E=0,B=0,C=D;B<C;B++){var F=I[z+3*B+B*m+1],G=I[z+3*B+B*m+2],H=I[z+3*B+B*m+3],F=F/k[0],G=G/k[1],H=H/k[2];A.add(F,G,H);if(0<
B)var J=A.get(B-1),E=E+Math.sqrt(Math.pow(F-J[0],2)+Math.pow(G-J[1],2)+Math.pow(H-J[2],2));B<D-1&&(h+=6)}z+=3*D+D*m+1;B=A._minA;D=A._maxA;F=A._minB;G=A._maxB;H=A._minC;J=A._maxC;if(!u||B<u)u=B;if(!t||D>t)t=D;if(!w||F<w)w=F;if(!x||G>x)x=G;if(!f||H<f)f=H;if(!g||J>g)g=J;q.push(A);r.push(E)}k=(u+t)/2;w=(w+x)/2;m=(f+g)/2;x=new Float32Array(h);c._points=f=new X.triplets(h);c._normals=g=new X.triplets(h);c._colors=h=new X.triplets(h);n=u=0;for(C=p;n<C;n++)for(p=q[n],C=p.count,E=r[n],e=Math.min(e,E),s=Math.max(s,
E),B=0,C-=1;B<C;B++)y=p.get(B),t=p.get(B+1),f.add(y[0],y[1],y[2]),f.add(t[0],t[1],t[2]),I=y[0]-k,z=y[1]-w,A=y[2]-m,D=Math.sqrt(I*I+z*z+A*A),F=t[0]-k,G=t[1]-w,H=t[2]-m,J=Math.sqrt(F*F+G*G+H*H),g.add(I/D,z/D,A/D),g.add(F/J,G/J,H/J),t=[Math.abs(t[0]-y[0]),Math.abs(t[1]-y[1]),Math.abs(t[2]-y[2])],y=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),t[0]/=y,t[1]/=y,t[2]/=y,h.add(t[0],t[1],t[2]),h.add(t[0],t[1],t[2]),x[u++]=E,x[u++]=E,x[u++]=E,x[u++]=E,x[u++]=E,x[u++]=E;c._type=X.displayable.types.LINES;q=new X.scalars;
q._min=e;q._max=s;q._lowerThreshold=e;q._upperThreshold=s;q._glArray=x;q._replaceMode=!1;q._dirty=!0;c._scalars=q;X.TIMERSTOP(this._classname+".parse");X.matrix.transpose(d,c._transform._matrix);d=new X.event.ModifiedEvent;d._object=c;d._container=b;this.dispatchEvent(d)};goog.exportSymbol("X.parserTRK",X.parserTRK);goog.exportSymbol("X.parserTRK.prototype.parse",X.parserTRK.prototype.parse);X.parserIMAGE=function(){X.parser.call(this);this._classname="parserIMAGE"};goog.inherits(X.parserIMAGE,X.parser);X.parserIMAGE.prototype.parse=function(b,c,d,e){if(!(d instanceof ArrayBuffer))throw Error();for(var f=new Uint8Array(d),g=f.length,h=Array(g);g--;)h[g]=String.fromCharCode(f[g]);f=h.join("");f=window.btoa(f);g=new Image;goog.events.listenOnce(g,goog.events.EventType.LOAD,this.parseCompleted.bind(this,g,b,c,d,e));g.src="data:image/"+e+";base64,"+f};
X.parserIMAGE.prototype.parseCompleted=function(b,c,d,e,f){c._image=b;c._rawData=null;b=new X.event.ModifiedEvent;b._object=d;b._container=c;this.dispatchEvent(b)};goog.exportSymbol("X.parserIMAGE",X.parserIMAGE);goog.exportSymbol("X.parserIMAGE.prototype.parse",X.parserIMAGE.prototype.parse);X.parserLUT=function(){X.parser.call(this);this._classname="parserLUT"};goog.inherits(X.parserLUT,X.parser);
X.parserLUT.prototype.parse=function(b,c,d,e){X.TIMER(this._classname+".parse");this._data=d;d=this.scan("uchar",d.byteLength);e=d.length;var f=0,g;for(g=0;g<e;g++)if(10==d[g]){var h=this.parseChars(d,f,g),f=g+1,h=h.replace(/^\s+|\s+$/g,"");"#"!=h[0]&&(h=h.split(" "),h=h.filter(function(b){return""!=b}),6==h.length&&(h[2]=parseInt(h[2],10)/255,h[3]=parseInt(h[3],10)/255,h[4]=parseInt(h[4],10)/255,h[5]=parseInt(h[5],10)/255,b.add(parseInt(h[0],10),h[1],h[2],h[3],h[4],h[5],10)))}X.TIMERSTOP(this._classname+
".parse");d=new X.event.ModifiedEvent;d._object=c;d._container=b;this.dispatchEvent(d)};goog.exportSymbol("X.parserLUT",X.parserLUT);goog.exportSymbol("X.parserLUT.prototype.parse",X.parserLUT.prototype.parse);X.parserNRRD=function(){X.parser.call(this);this._classname="parserNRRD"};goog.inherits(X.parserNRRD,X.parser);
X.parserNRRD.prototype.parse=function(b,c,d,e){X.TIMER(this._classname+".parse");this._data=d;d=this.scan("uchar",d.byteLength);e=d.length;var f=null,g=0,h;for(h=1;h<e;h++)if(10==d[h-1]&&10==d[h]){f=this.parseChars(d,0,h-2);g=h+1;break}this.parseHeader(f);e=d.subarray(g);if("gzip"==this.encoding||"gz"==this.encoding)e=(new Zlib.Gunzip(new Uint8Array(e))).decompress();e=e.buffer;d={data:null,min:Infinity,max:-Infinity,space:null,spaceorientation:null,rasspaceorientation:null,orientation:null,normcosine:null};
d.data=new this.__array(e);f=this.arrayMinMax(d.data);e=d.min=f[0];f=d.max=f[1];c._min=c._windowLow=e;c._max=c._windowHigh=f;c._dimensions=[this.sizes[0],this.sizes[1],this.sizes[2]];g=(new goog.math.Vec3(this.vectors[0][0],this.vectors[0][1],this.vectors[0][2])).magnitude();h=(new goog.math.Vec3(this.vectors[1][0],this.vectors[1][1],this.vectors[1][2])).magnitude();var k=(new goog.math.Vec3(this.vectors[2][0],this.vectors[2][1],this.vectors[2][2])).magnitude();c._spacing=[g,h,k];-Infinity==c._lowerThreshold&&
(c._lowerThreshold=e);Infinity==c._upperThreshold&&(c._upperThreshold=f);d.space=d.space=this.space;d.spaceorientation=[];d.spaceorientation.push(this.vectors[0][0]);d.spaceorientation.push(this.vectors[0][1]);d.spaceorientation.push(this.vectors[0][2]);d.spaceorientation.push(this.vectors[1][0]);d.spaceorientation.push(this.vectors[1][1]);d.spaceorientation.push(this.vectors[1][2]);d.spaceorientation.push(this.vectors[2][0]);d.spaceorientation.push(this.vectors[2][1]);d.spaceorientation.push(this.vectors[2][2]);
d.spaceorientation=d.spaceorientation;d.rasspaceorientation=this.toRAS(d.space,d.spaceorientation);e=this.orientnormalize(d.rasspaceorientation);d.orientation=d.orientation=e[0];d.normcosine=d.normcosine=e[1];c.create_(d);X.TIMERSTOP(this._classname+".parse");c._image=this.reslice(c);c.map_();d=new X.event.ModifiedEvent;d._object=c;d._container=b;this.dispatchEvent(d)};
X.parserNRRD.prototype.parseHeader=function(b){var c,d,e,f,g,h;b=b.split(/\r?\n/);g=0;for(h=b.length;g<h;g++)c=b[g],c.match(/NRRD\d+/)?this.isNrrd=!0:!c.match(/^#/)&&(f=c.match(/(.*):(.*)/))&&(d=f[1].trim(),c=f[2].trim(),(e=this.fieldFunctions[d])?e.call(this,c):this[d]=c);if(!this.isNrrd)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");if(!this.vectors&&(this.vectors=[new goog.math.Vec3(1,
0,0),new goog.math.Vec3(0,1,0),new goog.math.Vec3(0,0,1)],this.spacings)){b=[];for(f=0;2>=f;f++)b.push(isNaN(this.spacings[f])?void 0:this.vectors[f].scale(this.spacings[f]));return b}};
X.parserNRRD.prototype.fieldFunctions={type:function(b){switch(b){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.__array=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.__array=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.__array=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.__array=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.__array=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.__array=Uint32Array;break;case "float":this.__array=Float32Array;break;case "double":this.__array=Float64Array;break;default:throw Error("Unsupported NRRD data type: "+b);}return this.type=b},endian:function(b){return this.endian=b},encoding:function(b){return this.encoding=b},dimension:function(b){return this.dim=parseInt(b,10)},sizes:function(b){var c,d,e,f;e=b.split(/\s+/);f=[];c=0;for(d=e.length;c<d;c++)b=e[c],
f.push(parseInt(b,10));return this.sizes=f},space:function(b){return this.space=b.split("-")},"space directions":function(b){var c,d,e;d=b.match(/\(.*?\)/g);return this.vectors=function(){var b,g,h;h=[];b=0;for(g=d.length;b<g;b++)e=d[b],h.push(function(){var b,d,f,g;f=e.slice(1,-1).split(/,/);g=[];b=0;for(d=f.length;b<d;b++)c=f[b],g.push(parseFloat(c));return g}());return h}()},spacings:function(b){var c;c=b.split(/\s+/);var d,e,f;f=[];d=0;for(e=c.length;d<e;d++)b=c[d],f.push(parseFloat(b));return this.spacings=
f}};goog.exportSymbol("X.parserNRRD",X.parserNRRD);goog.exportSymbol("X.parserNRRD.prototype.parse",X.parserNRRD.prototype.parse);X.loader=function(){X.base.call(this);this._classname="loader";this._jobs=new goog.structs.Map;this._progress=0};goog.inherits(X.loader,X.base);X.loader.prototype.completed=function(){return!this._jobs.containsValue(!1)};X.loader.prototype.addProgress=function(b){this._progress+=b/this._jobs.getCount()/3;this._progress=Math.min(1,this._progress);b=new X.event.ProgressEvent;b._value=this._progress;this.dispatchEvent(b)};
X.loader.prototype.checkFileFormat=function(b){b=b._file._path;var c=b.split(".").pop().toUpperCase();c==b.toUpperCase()&&(c="");if(!(c in X.loader.extensions))throw Error("The "+c+" file format is not supported.");return[b,c,X.loader.extensions[c][0],X.loader.extensions[c][1],X.loader.extensions[c][2]]};
X.loader.prototype.load=function(b,c){if(!b||!c)throw Error("No container or object to load.");if(!this._jobs.containsKey(b._id)||this._jobs.get(b._id)){this._jobs.set(b._id,!1);var d=this.checkFileFormat(b)[0];if(null!=b._filedata)this.parse(null,b,c);else{var e=new XMLHttpRequest;goog.events.listen(e,"abort",this.failed.bind(this,e,b,c));goog.events.listen(e,"error",this.failed.bind(this,e,b,c));goog.events.listen(e,"load",this.parse.bind(this,e,b,c));e.open("GET",d,!0);e.responseType="arraybuffer";
e.send(null)}}};X.loader.prototype.parse=function(b,c,d){this.addProgress(1);setTimeout(function(){var e=this.checkFileFormat(c),f=e[3],e=new e[2];goog.events.listenOnce(e,X.event.events.MODIFIED,this.complete.bind(this));var g=c._filedata;null==g&&(g=b.response,c._filedata=g);e.parse(c,d,g,f)}.bind(this),100)};
X.loader.prototype.complete=function(b){this.addProgress(1);setTimeout(function(){var c=b._container,d=b._object;c._file._dirty=!1;c._dirty=!0;d.modified();this._jobs.set(c._id,!0)}.bind(this),100)};X.loader.prototype.failed=function(b,c,d){throw Error("Loading failed: ",c,d);};
X.loader.extensions={OBJ:[X.parserOBJ,null],STL:[X.parserSTL,null],VTK:[X.parserVTK,null],TRK:[X.parserTRK,null],FSM:[X.parserFSM,null],INFLATED:[X.parserFSM,null],SMOOTHWM:[X.parserFSM,null],SPHERE:[X.parserFSM,null],PIAL:[X.parserFSM,null],ORIG:[X.parserFSM,null],NRRD:[X.parserNRRD,null],NII:[X.parserNII,null],GZ:[X.parserNII,null],DCM:[X.parserDCM,null],DICOM:[X.parserDCM,null],"":[X.parserDCM,null],CRV:[X.parserCRV,null],LABEL:[X.parserLBL,null],MGH:[X.parserMGZ,!1],MGZ:[X.parserMGZ,!0],TXT:[X.parserLUT,
null],LUT:[X.parserLUT,null],PNG:[X.parserIMAGE,"png"],JPG:[X.parserIMAGE,"jpeg"],JPEG:[X.parserIMAGE,"jpeg"],GIF:[X.parserIMAGE,"gif"]};ThreeDHolder.updateMenuSliders={};
ThreeDHolder.prototype.updateMenuSliders=function(){utils.array.forEach(this.objVisiblePairs,function(b){b[1].checked=b[0].visible?"checked":""});utils.array.forEach(this.objRenderPairs,function(b){b[1].disabled=b[0].visible?"":"disabled"});utils.array.forEach(this.objOpacityPairs,function(b){var c=b[0];b=b[1];b.setValue(parseFloat(c.opacity));b.setEnabled(c.visible)});utils.array.forEach(this.objThreshPairs,function(b){var c=b[0];b=b[1];b.setEnabled(c.visible);b.setMinimum(c.min);b.setMaximum(c.max);
c.lowerThreshold=0.05*c.max+1;c.upperThreshold=c.max;b.setValueAndExtent(c.lowerThreshold,c.upperThreshold-c.lowerThreshold)})};goog.exportProperty(ThreeDHolder.prototype,"updateMenuSliders",ThreeDHolder.prototype.updateMenuSliders);utils.fx.fadeOut=function(b,c,d){utils.fx.fadeTo(b,c,0,d)};goog.exportSymbol("utils.fx.fadeOut",utils.fx.fadeOut);utils.gui.DialogBox=function(b){this.setArgs=function(b){var c=this.currArgs?this.currArgs():this.defaultArgs(),d=b?utils.dom.mergeArgs(c,b):c;this.currArgs=function(){return d}};this.setArgs(b);var c=utils.dom.makeElement("div",this.currArgs().parent,this.currArgs().className,this.currArgs().widgetCSS);this.widget=function(){return c};var d={};b=this.currArgs().buttons&&0<this.currArgs().buttons.length?this.currArgs().buttons:this.currArgs().defaultButtons;for(var e=b.length-1;0<=e;e--){var f=utils.dom.makeElement("button",
c,"DialogBoxButton",this.currArgs().buttonCSS);f.innerHTML=b[e];f.title=b[e].toLowerCase();d[f.title]={element:f,callbacks:[]};f.onclick=function(){}}var g=utils.dom.makeElement("div",c,"moveBar",this.currArgs().mouseListenerCSS),h=utils.dom.makeElement("div",c,"message",this.currArgs().messageCSS);h.innerHTML=this.currArgs().message;this.addStandardButton=function(){};this.addStandardButton=function(){};this.addButton=function(){};this.updateCSS=function(b){b&&this.setArgs(b);utils.css.setCSS(c,
this.currArgs().widgetCSS);b=this.currArgs().buttonCSS.height+this.currArgs().widgetCSS.margin;var e=this.currArgs().widgetCSS.width,f=this.currArgs().widgetCSS.height-b,n=e,q;for(q in d)utils.css.setCSS(d[q].element,this.currArgs().buttonCSS),n-=70+this.currArgs().widgetCSS.margin,n<this.currArgs().margin&&(utils.dom.debug("HERE"),n=e,f-=b),d[q].element.style.left=utils.convert.px(n),d[q].element.style.top=utils.convert.px(f);utils.css.setCSS(h,utils.dom.mergeArgs(this.currArgs().messageCSS,{top:utils.convert.toInt(g.style.height)+
this.currArgs().widgetCSS.margin,left:this.currArgs().widgetCSS.margin,width:utils.convert.toInt(c.style.width)-2*this.currArgs().widgetCSS.margin}))};this.setButtonOnclick=function(b,c){for(var e in d)if(b.toLowerCase()===e.toLowerCase()){d[e].element.onclick=c;break}};goog.events.listen(c,goog.events.EventType.MOUSEDOWN,function(b){var d=new goog.fx.Dragger(c);d.addEventListener(goog.fx.Dragger.EventType.DRAG,function(b){});d.addEventListener(goog.fx.Dragger.EventType.END,function(b){d.dispose()});
d.startDrag(b)});this.updateCSS()};goog.exportSymbol("utils.gui.DialogBox",utils.gui.DialogBox);
utils.gui.DialogBox.prototype.defaultArgs=function(){return{className:"utils.gui.DialogBox",parent:document.body,defaultButtons:["OK","Cancel"],defaultButtonList:"OK Done Cancel Next Yes No".split(" "),buttons:[],message:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",widgetCSS:{position:"absolute",top:window.innerHeight/2-100,left:window.innerWidth/2-150,width:330,height:140,fontFamily:utils.globals.fontFamily,fontSize:utils.globals.fontSizeS,
color:"rgba(255,0,0,1)",border:"solid",borderWidth:1,borderColor:"rgba(0,255,0,1)",backgroundColor:"rgba(155,155,155,1)",borderRadius:0,zIndex:1E4,margin:15,marginLeft:10,marginRight:10,marginTop:10,marginBottom:10},messageCSS:{position:"absolute"},mouseListenerCSS:{top:0,left:0,width:"100%",height:15,backgroundColor:"rgba(55,55,55,1)"},buttonCSS:{height:15,position:"absolute",border:"solid",borderWidth:1,borderColor:"rgba(0,0,0,1)",backgroundColor:"rgba(125,125,125,1)",borderRadius:0,cursor:"pointer"}}};SlicerViewer.updateCSS={};
SlicerViewer.prototype.updateCSS=function(b){SlicerViewer.superClass_.updateCSS.call(this,b);if(!this.ContentDivider.dragging&&utils.css.dims(this.ContentDivider.containmentDiv,"width")!==this.widgetDims.width){b=XVGlobals.minFrameHolderHeight;var c=this.widgetDims.height-b-utils.css.dims(this.ContentDivider.widget,"height")-XVGlobals.minScanTabHeight+5;utils.css.setCSS(this.ContentDivider.widget,{top:XVGlobals.minContentDividerTop(this.widgetDims.height)-1});utils.css.setCSS(this.ContentDivider.containmentDiv,{top:b,
left:"0",height:c,width:this.widgetDims.width})}b=utils.css.dims(this.ContentDivider.widget);var c=b.top+b.height,d={};d.width=b.top-15>this.widgetDims.width?this.widgetDims.width:b.top-15;d.height=d.width;d.top=0;d.left=this.widgetDims.width/2-d.width/2;this.ScanTabs.updateCSS({left:"0",top:c,width:"100%"});this.ThreeDHolder.updateCSS({left:d.left,top:d.top,width:d.width,height:d.height});utils.css.setCSS(this.LinkMenu,{left:this.widgetDims.width-30});this.selectorBox&&utils.css.setCSS(this.selectorBox,
{height:this.widgetDims.height,width:this.widgetDims.width,left:this.widgetDims.left,top:this.widgetDims.top})};goog.exportProperty(SlicerViewer.prototype,"updateCSS",SlicerViewer.prototype.updateCSS);Modal.addViewerManager={};
Modal.prototype.addViewerManager=function(){var b=[[]],c=[],d=this;this.ViewerManager=function(e,f,g,h,k){function m(){0<c.length&&utils.array.forEach(c,function(b){b()})}function p(){return q(function(b){return b.widget})}function n(c,d){var e=q(function(b,e,f){var g=b.widget===c||b.widget===d,h=b.widget.id===c||b.widget.id===d;if(b===c||b===d||g||h)return{i:e,j:f}});if(2===e.length){var f=b[e[0].i][e[0].j];b[e[0].i][e[0].j]=b[e[1].i][e[1].j];b[e[1].i][e[1].j]=f}else throw"SWAP ERROR: ";}g="object"===
typeof e;f="function"===typeof e;var q=function(c){for(var d=[],e=0,f=b.length;e<f;e++)for(var g=0,h=b[e].length;g<h;g++){var k=c(b[e][g],e,g);k&&d.push(k)}if(0<d.length)return 1===d.length?d[0]:d};if("undefined"===typeof e)return b;if("string"===typeof e){h=0===e.toLowerCase().indexOf("widgets");g=0===e.indexOf(XVGlobals.ViewerPreId);k=0===e.toLowerCase().indexOf("total");if(h)return p();if(g)return q(function(b){if(b.widget.id===e)return b});if(k)return b.length*b[0].length}else if(g){g=e.animate&&
"off"===e.animate;h=e.element;k=e.loop;var r=e.swap,s=e.insert,u=e.remove,t=e.viewerAfter,w=e.addViewersChangedCallback;if(e.tagName)return q(function(b){if(b.widget==e)return b});w&&c.push(e.addViewersChangedCallback);if(h&&(h=0===e.element.toLowerCase().indexOf("widgets")))return p();if(k)return q(e.loop);if(r)return n(e.swap[0],e.swap[1]);if(t)for(r=e.viewerAfter,h=0,t=b.length;h<t;h++)for(k=0,w=b[h].length;k<w;k++)if(b[h][k]===r)return s=h+1===b.length,u=k+1===b[h].length,s&&u?b[0][0]:s&&!u?b[0][k+
1]:!s&&u?b[h+1][0]:b[h+1][k+1];if(s){h="row"===e.insert;k="column"===e.insert;r=[];if(h){k=[];r=b[0]&&b[0].length?b[0].length:1;for(h=0;h<r;h++)k.push(new Viewer({parent:d.modal}));b.push(k);r=k}else if(k){var x=[];k=b.length?b.length:1;for(h=0;h<k;h++)x.push(new Viewer({parent:d.modal}));0===b.length?b.push([x[0]]):utils.array.forEach(b,function(b,c){b.push(x[c])});r=x}g?d.updateCSS():(utils.array.forEach(r,function(b){b.widget.style.opacity=0}),this.animateModal())}u&&(h="row"===e.remove,k="column"===
e.remove,h?1<b.length&&(utils.array.forEach(b[b.length-1],function(b){utils.fx.fadeTo(b.widget,XVGlobals.animFast,0);b.widget.parentNode.removeChild(b.widget)}),b.splice(b.length-1,1)):k&&b[0]&&1<b[0].length&&utils.array.forEach(b,function(b,c){var d=b.length-1;utils.fx.fadeTo(b[d].widget,XVGlobals.animFast,0);b[d].widget.parentNode.removeChild(b[d].widget);b.splice(d,1)}),g?this.updateCSS():this.animateModal());q(function(b){b.hoverOut()})}(s||u)&&m();f&&q(e);this.ViewerManager.adaptAndLoad=function(c,
e){var f;switch(e.widget.className){case XVGlobals.classNames.ScanThumbnail:f=new ScanViewer({parent:c.widget.parentNode});f.updateCSS(utils.css.dims(c.widget));break;case XVGlobals.classNames.SlicerThumbnail:f=new SlicerViewer({parent:c.widget.parentNode}),f.updateCSS(utils.css.dims(c.widget))}q(function(d,e,g){d===c&&(b[e][g]=f,c.widget.parentNode.removeChild(c.widget),delete c)});f.loadThumbnail(e);d.manageActiveThumbs(f,e);m()};this.ViewerManager.keepAndLoad=function(b,c){b.loadThumbnail(c);d.manageActiveThumbs(b,
c);m()}}};goog.exportProperty(Modal.prototype,"addViewerManager",Modal.prototype.addViewerManager);ThreeDHolder.initSliceSliders={};
ThreeDHolder.prototype.initSliceSliders=function(){this.PlaneHolderX.widget.style.display="block";this.PlaneHolderY.widget.style.display="block";this.PlaneHolderZ.widget.style.display="block";this.xSlider=new goog.ui.Slider;this.ySlider=new goog.ui.Slider;this.zSlider=new goog.ui.Slider;this.xSlider.decorate(goog.dom.getElementByClass("xSlice",this.widget));this.ySlider.decorate(goog.dom.getElementByClass("ySlice",this.widget));this.zSlider.decorate(goog.dom.getElementByClass("zSlice",this.widget));
this.xBox=goog.dom.getElementByClass("xBox",this.widget);this.yBox=goog.dom.getElementByClass("yBox",this.widget);this.zBox=goog.dom.getElementByClass("zBox",this.widget);this.updateSlices();var b=this;goog.events.listen(b.xSlider,goog.ui.Component.EventType.CHANGE,function(){var c=b.currentVolObject,d=c.getIndexOrientation_("sagittal");c[d]=b.xSlider.getValue();b.xBox.innerHTML="Frame: "+c[d]+" / "+c._dimensionsRAS[0];c.modified()});goog.events.listen(b.ySlider,goog.ui.Component.EventType.CHANGE,
function(){var c=b.currentVolObject,d=c.getIndexOrientation_("coronal");c[d]=b.ySlider.getValue();b.yBox.innerHTML="Frame: "+c[d]+" / "+c._dimensionsRAS[1];c.modified()});goog.events.listen(b.zSlider,goog.ui.Component.EventType.CHANGE,function(){var c=b.currentVolObject,d=c.getIndexOrientation_("axial");c[d]=b.zSlider.getValue();b.zBox.innerHTML="Frame: "+c[d]+" / "+c._dimensionsRAS[2];c.modified()});b.PlaneHolderX.Renderer.onScroll=function(){var c=b.currentVolObject,d=c.getIndexOrientation_("sagittal");
b.xSlider.setValue(c[d]);b.xBox.innerHTML="Frame: "+c[d]+" / "+c._dimensionsRAS[0]};b.PlaneHolderY.Renderer.onScroll=function(){var c=b.currentVolObject,d=c.getIndexOrientation_("coronal");b.ySlider.setValue(c[d]);b.yBox.innerHTML="Frame: "+c[d]+" / "+c._dimensionsRAS[1]};b.PlaneHolderZ.Renderer.onScroll=function(){var c=b.currentVolObject,d=c.getIndexOrientation_("axial");b.zSlider.setValue(c[d]);b.zBox.innerHTML="Frame: "+c[d]+" / "+c._dimensionsRAS[2]};b.PlaneHolderX.Renderer.xy2ijkOverwrite=function(){var c=
b.currentVolObject,d=c.getIndexOrientation_("coronal"),e=c.getIndexOrientation_("axial");b.ySlider.setValue(c[d]);b.yBox.innerHTML="Frame: "+c[d]+" / "+c._dimensionsRAS[1];b.zSlider.setValue(c[e]);b.zBox.innerHTML="Frame: "+c[e]+" / "+c._dimensionsRAS[2]};b.PlaneHolderY.Renderer.xy2ijkOverwrite=function(){var c=b.currentVolObject,d=c.getIndexOrientation_("axial"),e=c.getIndexOrientation_("sagittal");b.xSlider.setValue(c[e]);b.xBox.innerHTML="Frame: "+c[e]+" / "+c._dimensionsRAS[0];b.zSlider.setValue(c[d]);
b.zBox.innerHTML="Frame: "+c[d]+" / "+c._dimensionsRAS[2]};b.PlaneHolderZ.Renderer.xy2ijkOverwrite=function(){var c=b.currentVolObject,d=c.getIndexOrientation_("coronal"),e=c.getIndexOrientation_("sagittal");b.xSlider.setValue(c[e]);b.xBox.innerHTML="Frame: "+c[e]+" / "+c._dimensionsRAS[0];b.ySlider.setValue(c[d]);b.yBox.innerHTML="Frame: "+c[d]+" / "+c._dimensionsRAS[1]}};goog.exportProperty(ThreeDHolder.prototype,"initSliceSliders",ThreeDHolder.prototype.initSliceSliders);utils.fx.fadeOutAndRemove=function(b,c,d){utils.fx.fadeTo(b,c,0,function(){b.parentNode.removeChild(b);d()})};goog.exportSymbol("utils.fx.fadeOutAndRemove",utils.fx.fadeOutAndRemove);utils.fx.fadeIn=function(b,c,d){utils.fx.fadeTo(b,c,1,d)};goog.exportSymbol("utils.fx.fadeIn",utils.fx.fadeIn);FrameHolder.loadCurrViewPlane={};FrameHolder.prototype.loadCurrViewPlane=function(){var b=this.currDroppable[this.currViewPlane+"FrameCount"];this.currDroppable.getFrames({viewPlane:this.currViewPlane,filter:"img"}).length>=b&&!this.loaded&&(this.loaded=!0,this.progBar.hide(),utils.fx.fadeIn(this.canvas,XVGlobals.animFast),this.loadFramesByViewPlane(this.currViewPlane))};goog.exportProperty(FrameHolder.prototype,"loadCurrViewPlane",FrameHolder.prototype.loadCurrViewPlane);
FrameHolder.loadThumbnail={};
FrameHolder.prototype.loadThumbnail=function(b,c){var d=this;if(b.frames)d=this,this.currDroppable=b,this.currViewPlane=c?c:"sagittal",this.currDroppable.loadFramesToDOM({viewPlane:d.currViewPlane,before:function(b){d.loaded=!1;d.progBar.update({max:b,clear:!0});utils.fx.fadeOut(d.canvas,0);d.progBar.show()},load:function(b){var c=d.currDroppable.pathMolder(b.src),g=d.currDroppable.getFrames({viewPlane:d.currViewPlane,filter:"img"}),h="<b>"+d.currViewPlane.charAt(0).toUpperCase()+d.currViewPlane.slice(1)+
"</b>";d.progBar.update({label:"Loading...  "+("<br> Scan "+d.currDroppable.scanData.sessionInfo.Scan.value.toString()+" - "+h+"<br>")+" "+g.length.toString()+" / "+d.currDroppable[d.currViewPlane+"FrameCount"]});d.currDroppable.frames[c]&&(d.currDroppable.frames[c].img=b,d.progBar.update({add:1}))},complete:function(){d.loadCurrViewPlane()}});else throw"FrameHolder.js: Invalid Droppable for FrameHolder.";};goog.exportProperty(FrameHolder.prototype,"loadThumbnail",FrameHolder.prototype.loadThumbnail);Zlib.Util={};Zlib.Util.convertNetworkByteOrder=function(b,c){var d=[],e;do e=b&255,d.push(e),b>>>=8;while(0<b);if("number"===typeof c)for(;d.length<c;)d.push(0);return d.reverse()};Zlib.Util.slice=function(b,c,d){var e,f=b.length;if(b instanceof Array)return b.slice(c,c+d);e=[];for(var g=0;g<d&&!(c+g>=f);g++)e.push(b[c+g]);return e};Zlib.Util.push=function(b,c){var d=0,e=c.length,f=c.length;if(b.push)for(;d<f;d++)b.push(c[d]);else for(;d<f;d++)b[e+d]=c[d];return b.length};
Zlib.Util.stringToByteArray=function(b){b=b.split("");var c,d;c=0;for(d=b.length;c<d;c++)b[c]=(b[c].charCodeAt(0)&255)>>>0;return b};var ZLIB_RAW_INFLATE_STREAM_EXPORT=!1,ZLIB_STREAM_RAW_INFLATE_BUFFER_SIZE=32768;Zlib.RawInflateStream=function(b,c,d){this.blocks=[];this.bufferSize=d?d:ZLIB_STREAM_RAW_INFLATE_BUFFER_SIZE;this.totalpos=0;this.ip=void 0===c?0:c;this.bitsbuflen=this.bitsbuf=0;this.input=USE_TYPEDARRAY?new Uint8Array(b):b;this.output=new (USE_TYPEDARRAY?Uint8Array:Array)(this.bufferSize);this.op=0;this.resize=this.bfinal=!1;this.sp=0;this.status=Zlib.RawInflateStream.Status.INITIALIZED};
Zlib.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2};Zlib.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6};
Zlib.RawInflateStream.prototype.decompress=function(b,c){var d=!1;void 0!==b&&(this.input=b);void 0!==c&&(this.ip=c);for(;!d;)switch(this.status){case Zlib.RawInflateStream.Status.INITIALIZED:case Zlib.RawInflateStream.Status.BLOCK_HEADER_START:0>this.readBlockHeader()&&(d=!0);break;case Zlib.RawInflateStream.Status.BLOCK_HEADER_END:case Zlib.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case Zlib.RawInflateStream.BlockType.UNCOMPRESSED:0>this.readUncompressedBlockHeader()&&
(d=!0);break;case Zlib.RawInflateStream.BlockType.FIXED:0>this.parseFixedHuffmanBlock()&&(d=!0);break;case Zlib.RawInflateStream.BlockType.DYNAMIC:0>this.parseDynamicHuffmanBlock()&&(d=!0)}break;case Zlib.RawInflateStream.Status.BLOCK_BODY_END:case Zlib.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case Zlib.RawInflateStream.BlockType.UNCOMPRESSED:0>this.parseUncompressedBlock()&&(d=!0);break;case Zlib.RawInflateStream.BlockType.FIXED:case Zlib.RawInflateStream.BlockType.DYNAMIC:0>
this.decodeHuffman()&&(d=!0)}break;case Zlib.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?d=!0:this.status=Zlib.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()};Zlib.RawInflateStream.MaxBackwardLength=32768;Zlib.RawInflateStream.MaxCopyLength=258;Zlib.RawInflateStream.Order=function(b){return USE_TYPEDARRAY?new Uint16Array(b):b}([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);
Zlib.RawInflateStream.LengthCodeTable=function(b){return USE_TYPEDARRAY?new Uint16Array(b):b}([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]);Zlib.RawInflateStream.LengthExtraTable=function(b){return USE_TYPEDARRAY?new Uint8Array(b):b}([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]);
Zlib.RawInflateStream.DistCodeTable=function(b){return USE_TYPEDARRAY?new Uint16Array(b):b}([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]);Zlib.RawInflateStream.DistExtraTable=function(b){return USE_TYPEDARRAY?new Uint8Array(b):b}([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);
Zlib.RawInflateStream.FixedLiteralLengthTable=function(b){return b}(function(){var b=new (USE_TYPEDARRAY?Uint8Array:Array)(288),c,d;c=0;for(d=b.length;c<d;++c)b[c]=143>=c?8:255>=c?9:279>=c?7:8;return(0,Zlib.Huffman.buildHuffmanTable)(b)}());Zlib.RawInflateStream.FixedDistanceTable=function(b){return b}(function(){var b=new (USE_TYPEDARRAY?Uint8Array:Array)(30),c,d;c=0;for(d=b.length;c<d;++c)b[c]=5;return(0,Zlib.Huffman.buildHuffmanTable)(b)}());
Zlib.RawInflateStream.prototype.readBlockHeader=function(){var b;this.status=Zlib.RawInflateStream.Status.BLOCK_HEADER_START;this.save_();if(0>(b=this.readBits(3)))return this.restore_(),-1;b&1&&(this.bfinal=!0);b>>>=1;switch(b){case 0:this.currentBlockType=Zlib.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=Zlib.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=Zlib.RawInflateStream.BlockType.DYNAMIC;break;default:throw Error("unknown BTYPE: "+b);}this.status=
Zlib.RawInflateStream.Status.BLOCK_HEADER_END};Zlib.RawInflateStream.prototype.readBits=function(b){for(var c=this.bitsbuf,d=this.bitsbuflen,e=this.input,f=this.ip,g;d<b;){g=e[f++];if(void 0===g)return-1;c|=g<<d;d+=8}g=c&(1<<b)-1;this.bitsbuf=c>>>b;this.bitsbuflen=d-b;this.ip=f;return g};
Zlib.RawInflateStream.prototype.readCodeByTable=function(b){var c=this.bitsbuf,d=this.bitsbuflen,e=this.input,f=this.ip,g=b[0];b=b[1];for(var h;d<b;){h=e[f++];if(void 0===h)return-1;c|=h<<d;d+=8}e=g[c&(1<<b)-1];g=e>>>16;this.bitsbuf=c>>g;this.bitsbuflen=d-g;this.ip=f;return e&65535};
Zlib.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var b,c,d,e=this.input,f=this.ip;this.status=Zlib.RawInflateStream.Status.BLOCK_BODY_START;b=e[f++];if(void 0===b)return-1;c=b;b=e[f++];if(void 0===b)return-1;c|=b<<8;b=e[f++];if(void 0===b)return-1;d=b;b=e[f++];if(void 0===b)return-1;if(c===~(d|b<<8))throw Error("invalid uncompressed block header: length verify");this.bitsbuflen=this.bitsbuf=0;this.ip=f;this.blockLength=c;this.status=Zlib.RawInflateStream.Status.BLOCK_BODY_END};
Zlib.RawInflateStream.prototype.parseUncompressedBlock=function(){var b=this.input,c=this.ip,d=this.output,e=this.op,f=this.blockLength;for(this.status=Zlib.RawInflateStream.Status.DECODE_BLOCK_START;f--;){e===d.length&&(d=this.expandBuffer());if(void 0===b[c])return this.ip=c,this.op=e,this.blockLength=f+1,-1;d[e++]=b[c++]}0>f&&(this.status=Zlib.RawInflateStream.Status.DECODE_BLOCK_END);this.ip=c;this.op=e;return 0};
Zlib.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){this.status=Zlib.RawInflateStream.Status.BLOCK_BODY_START;this.litlenTable=Zlib.RawInflateStream.FixedLiteralLengthTable;this.distTable=Zlib.RawInflateStream.FixedDistanceTable;this.status=Zlib.RawInflateStream.Status.BLOCK_BODY_END;return 0};Zlib.RawInflateStream.prototype.save_=function(){this.ip_=this.ip;this.bitsbuflen_=this.bitsbuflen;this.bitsbuf_=this.bitsbuf};
Zlib.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_;this.bitsbuflen=this.bitsbuflen_;this.bitsbuf=this.bitsbuf_};
Zlib.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){function b(){function b(c,d,e){for(var f,g,h=0,h=0;h<c;){f=this.readCodeByTable(d);if(0>f)throw Error("not enough input");switch(f){case 16:if(0>(f=this.readBits(2)))throw Error("not enough input");for(f=3+f;f--;)e[h++]=g;break;case 17:if(0>(f=this.readBits(3)))throw Error("not enough input");for(f=3+f;f--;)e[h++]=0;g=0;break;case 18:if(0>(f=this.readBits(7)))throw Error("not enough input");for(f=11+f;f--;)e[h++]=0;g=0;break;default:g=
e[h++]=f}}return e}var p;for(m=0;m<e;++m){if(0>(p=this.readBits(3)))throw Error("not enough input");f[Zlib.RawInflateStream.Order[m]]=p}g=(0,Zlib.Huffman.buildHuffmanTable)(f);h=new (USE_TYPEDARRAY?Uint8Array:Array)(c);k=new (USE_TYPEDARRAY?Uint8Array:Array)(d);this.litlenTable=(0,Zlib.Huffman.buildHuffmanTable)(b.call(this,c,g,h));this.distTable=(0,Zlib.Huffman.buildHuffmanTable)(b.call(this,d,g,k))}var c,d,e,f=new (USE_TYPEDARRAY?Uint8Array:Array)(Zlib.RawInflateStream.Order.length),g,h,k,m=0;this.status=
Zlib.RawInflateStream.Status.BLOCK_BODY_START;this.save_();c=this.readBits(5)+257;d=this.readBits(5)+1;e=this.readBits(4)+4;if(0>c||0>d||0>e)return this.restore_(),-1;try{b.call(this)}catch(p){return this.restore_(),-1}this.status=Zlib.RawInflateStream.Status.BLOCK_BODY_END;return 0};
Zlib.RawInflateStream.prototype.decodeHuffman=function(){var b=this.output,c=this.op,d,e,f,g=this.litlenTable,h=this.distTable,k=b.length;for(this.status=Zlib.RawInflateStream.Status.DECODE_BLOCK_START;;){this.save_();d=this.readCodeByTable(g);if(0>d)return this.op=c,this.restore_(),-1;if(256===d)break;if(256>d)c===k&&(b=this.expandBuffer(),k=b.length),b[c++]=d;else{e=d-257;f=Zlib.RawInflateStream.LengthCodeTable[e];if(0<Zlib.RawInflateStream.LengthExtraTable[e]){d=this.readBits(Zlib.RawInflateStream.LengthExtraTable[e]);
if(0>d)return this.op=c,this.restore_(),-1;f+=d}d=this.readCodeByTable(h);if(0>d)return this.op=c,this.restore_(),-1;e=Zlib.RawInflateStream.DistCodeTable[d];if(0<Zlib.RawInflateStream.DistExtraTable[d]){d=this.readBits(Zlib.RawInflateStream.DistExtraTable[d]);if(0>d)return this.op=c,this.restore_(),-1;e+=d}c+f>=k&&(b=this.expandBuffer(),k=b.length);for(;f--;)b[c]=b[c++-e];if(this.ip===this.input.length)return this.op=c,-1}}for(;8<=this.bitsbuflen;)this.bitsbuflen-=8,this.ip--;this.op=c;this.status=
Zlib.RawInflateStream.Status.DECODE_BLOCK_END};Zlib.RawInflateStream.prototype.expandBuffer=function(b){var c=this.input.length/this.ip+1|0,d=this.input,e=this.output;b&&("number"===typeof b.fixRatio&&(c=b.fixRatio),"number"===typeof b.addRatio&&(c+=b.addRatio));2>c?(b=(d.length-this.ip)/this.litlenTable[2],b=258*(b/2)|0,b=b<e.length?e.length+b:e.length<<1):b=e.length*c;USE_TYPEDARRAY?(b=new Uint8Array(b),b.set(e)):b=e;return this.output=b};
Zlib.RawInflateStream.prototype.concatBuffer=function(){var b,c=this.op;this.resize?USE_TYPEDARRAY?(b=new Uint8Array(c),b.set(this.output.subarray(this.sp,c))):b=this.output.slice(this.sp,c):b=USE_TYPEDARRAY?this.output.subarray(this.sp,c):this.output.slice(this.sp,c);this.buffer=b;this.sp=c;return this.buffer};Zlib.RawInflateStream.prototype.getBytes=function(){return USE_TYPEDARRAY?this.output.subarray(0,this.op):this.output.slice(0,this.op)};
ZLIB_RAW_INFLATE_STREAM_EXPORT&&(goog.exportSymbol("Zlib.RawInflateStream",Zlib.RawInflateStream),goog.exportSymbol("Zlib.RawInflateStream.prototype.decompress",Zlib.RawInflateStream.prototype.decompress),goog.exportSymbol("Zlib.RawInflateStream.prototype.getBytes",Zlib.RawInflateStream.prototype.getBytes));utils.oo.init=function(b,c,d,e){b.defaultArgs=c;b.args=d?utils.dom.mergeArgs(b.defaultArgs,d):b.defaultArgs;b.CSS=b.args.CSS?b.args.CSS:b.args.widgetCSS;b.widget=utils.dom.makeElement("div",b.args.parent,b.args.className,b.CSS);e&&e()};goog.exportSymbol("utils.oo.init",utils.oo.init);X.interactor2D=function(b){X.interactor.call(this,b);this._classname="interactor2D"};goog.inherits(X.interactor2D,X.interactor);X.interactor2D.prototype.onMouseWheel_=function(b){X.interactor2D.superClass_.onMouseWheel_.call(this,b);var c=new X.event.ScrollEvent;goog.isDefAndNotNull(b.deltaY)||(b.deltaY=0);c._up=0>b.deltaY;this.dispatchEvent(c)};Viewer.linkContentDividerToScanTabs={};Viewer.prototype.linkContentDividerToScanTabs=function(){var b=this;this.ContentDivider.setDrag(function(c){b.updateCSS()});this.ScanTabs.setClickCallbacks({activate:function(){var c=b.ContentDivider.getUpperLimit();b.ContentDivider.slideTo(c+0.5*c,!0)},deactivate:function(){b.ContentDivider.slideTo(b.ContentDivider.getLowerLimit(),!0)}})};goog.exportProperty(Viewer.prototype,"linkContentDividerToScanTabs",Viewer.prototype.linkContentDividerToScanTabs);CSG.cube=function(b){CSG.call(this);b=b||{};var c=new csgVector(b.center||[0,0,0]),d=b.radius?b.radius.length?b.radius:[b.radius,b.radius,b.radius]:[1,1,1];return CSG.fromPolygons([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(b){return new csgPolygon(b[0].map(function(f){f=new csgVector(c.x()+d[0]*(2*!!(f&1)-1),c.y()+d[1]*(2*!!(f&2)-1),c.z()+d[2]*(2*!!(f&4)-1));return new csgVertex(f,new csgVector(b[1]))}))}))};
goog.inherits(CSG.cube,CSG);Modal.addScrollGallery={};
Modal.prototype.addScrollGallery=function(){var b=this;this.ScrollGallery=new ScrollGallery({parent:b.modal,orientation:"vertical",widgetCSS:{left:0,top:b.args.marginTop,height:700}});b.ScrollGallery.addZippy("Scans");var c=b.ScrollGallery.getScrollables("Scans","content"),d=utils.css.dims(c,"width");utils.array.forEach(b.scanDataPaths,function(e){b.dragDropThumbnails.push(new ScanThumbnail(e,{parent:c,widgetCSS:{position:"relative",left:0,width:d},onloadCallbacks:[function(){b.ScrollGallery.moveContents(b.ScrollGallery.ContentSlider,b.ScrollGallery)}]}))});
b.ScrollGallery.addZippy("Slicer");c=b.ScrollGallery.getScrollables("Slicer","content");d=utils.css.dims(c,"width");utils.array.forEach(b.slicerDataPaths,function(e){b.dragDropThumbnails.push(new SlicerThumbnail(e,{parent:c,widgetCSS:{position:"relative",left:0,width:d},onloadCallbacks:[function(){b.ScrollGallery.moveContents(b.ScrollGallery.ContentSlider,b.ScrollGallery)}]}))})};goog.exportProperty(Modal.prototype,"addScrollGallery",Modal.prototype.addScrollGallery);Modal.setThumbnailDragAndDrop={};
Modal.prototype.initThumbnailDragDrop=function(){var b=this;this.thumbnailDragDrop={};this.thumbnailDragDrop.dragOver=function(b){-1<b.dragSourceItem.element.className.indexOf(XVGlobals.classNames.Thumbnail)&&(b.dropTargetItem.element.prevBorder=b.dropTargetItem.element.style.borderColor,b.dropTargetItem.element.style.borderColor="white")};this.thumbnailDragDrop.dragOut=function(b){-1<b.dragSourceItem.element.className.indexOf(XVGlobals.classNames.Thumbnail)&&(b.dropTargetItem.element.style.borderColor=b.dropTargetItem.element.prevBorder)};
this.thumbnailDragDrop.drop=function(c){if(-1<c.dragSourceItem.element.className.indexOf(XVGlobals.classNames.Thumbnail)){var d,e,f=b.ViewerManager(c.dropTargetItem.element);utils.array.forEach(b.dragDropThumbnails,function(b){e||b.widget!=c.dragSourceItem.element||(d=b,e=!0)});f&&(c.isClick||c.dragSourceItem.element.className!==XVGlobals.classNames.SlicerThumbnail||c.dropTargetItem.element.className!==XVGlobals.classNames.SlicerViewer?XV.ViewerManager.adaptAndLoad(f,d):XV.ViewerManager.keepAndLoad(f,
d),b.updateCSS());c.dropTargetItem.element.prevBorder&&(c.dropTargetItem.element.style.borderColor=c.dropTargetItem.element.prevBorder)}};this.thumbnailDragDrop.dragStart=function(c){utils.array.forEach(b.dragDropThumbnails,function(b){})}};
Modal.prototype.setThumbnailDragAndDrop=function(){function b(b,e){c.thumbnailDragDrop.drop({dropTargetItem:{element:b.widget},dragSourceItem:{element:e.widget},isClick:!0})}var c=this;c.ViewerManager(function(b){utils.array.forEach(c.dragDropThumbnails,function(c){c.addTarget(b)});goog.events.listen(b,"dragover",c.thumbnailDragDrop.dragOver);goog.events.listen(b,"dragout",c.thumbnailDragDrop.dragOut);goog.events.listen(b,"drop",c.thumbnailDragDrop.drop)});utils.array.forEach(c.dragDropThumbnails,
function(b){b.init();goog.events.listen(b,"dragstart",c.thumbnailDragDrop.dragStart)});utils.array.forEach(c.dragDropThumbnails,function(d){goog.events.listen(d.widget,goog.events.EventType.CLICK,function(){var e=(new Date).getTime(),f=d.clickTime?d.clickTime:void 0,g=!1;d.clickTime=e;f&&1500>e-f||(c.ViewerManager(function(c){g||c.getThumbnail()||(g=!0,b(c,d))}),g||c.ViewerManager(function(e){if(!g){if(XVGlobals.thumbClickTarget)if(XVGlobals.thumbClickTarget===e.widget.id)e=c.ViewerManager({viewerAfter:e});
else return;else e=c.ViewerManager()[0][0];XVGlobals.thumbClickTarget=e.widget.id;b(e,d);g=!0}}))})})};goog.exportProperty(Modal.prototype,"setThumbnailDragAndDrop",Modal.prototype.setThumbnailDragAndDrop);Zlib.Adler32=function(b){"string"===typeof b&&(b=Zlib.Util.stringToByteArray(b));return Zlib.Adler32.update(1,b)};Zlib.Adler32.update=function(b,c){for(var d=b&65535,e=b>>>16&65535,f=c.length,g,h=0;0<f;){g=f>Zlib.Adler32.OptimizationParameter?Zlib.Adler32.OptimizationParameter:f;f-=g;do d+=c[h++],e+=d;while(--g);d%=65521;e%=65521}return(e<<16|d)>>>0};Zlib.Adler32.OptimizationParameter=1024;Zlib.CompressionMethod={DEFLATE:8,RESERVED:15};var ZLIB_INFLATE_EXPORT=!1;
Zlib.Inflate=function(b,c){var d,e;this.input=b;this.ip=0;if(c||!(c={}))c.index&&(this.ip=c.index),c.verify&&(this.verify=c.verify);d=b[this.ip++];e=b[this.ip++];switch(d&15){case Zlib.CompressionMethod.DEFLATE:this.method=Zlib.CompressionMethod.DEFLATE;break;default:throw Error("unsupported compression method");}if(0!==((d<<8)+e)%31)throw Error("invalid fcheck flag:"+((d<<8)+e)%31);if(e&32)throw Error("fdict flag is not supported");this.rawinflate=new Zlib.RawInflate(b,{index:this.ip,bufferSize:c.bufferSize,
bufferType:c.bufferType,resize:c.resize})};Zlib.Inflate.BufferType=Zlib.RawInflate.BufferType;Zlib.Inflate.prototype.decompress=function(){var b=this.input,c;c=this.rawinflate.decompress();this.ip=this.rawinflate.ip;if(this.verify&&(b=(b[this.ip++]<<24|b[this.ip++]<<16|b[this.ip++]<<8|b[this.ip++])>>>0,b!==Zlib.Adler32(c)))throw Error("invalid adler-32 checksum");return c};
ZLIB_INFLATE_EXPORT&&(goog.exportSymbol("Zlib.Inflate",Zlib.Inflate),goog.exportSymbol("Zlib.Inflate.BufferType",Zlib.Inflate.BufferType),goog.exportProperty(Zlib.Inflate.BufferType,"ADAPTIVE",Zlib.Inflate.BufferType.ADAPTIVE),goog.exportProperty(Zlib.Inflate.BufferType,"BLOCK",Zlib.Inflate.BufferType.BLOCK),goog.exportSymbol("Zlib.Inflate.prototype.decompress",Zlib.Inflate.prototype.decompress));var SliderLinker=function(b){this.borderColorSet_=[[155,205,5,1],[21,2,200,1],[25,200,55,1],[200,5,200,1],[0,255,0,1],[0,200,0,1],[0,0,200,1],[200,0,0,1],[200,200,0,1]];this.groups_=[];this.addGroup()};goog.exportSymbol("SliderLinker",SliderLinker);SliderLinker.MAX_GROUPS=XVGlobals.MAX_SCROLL_LINK_GROUPS;
SliderLinker.popupArgs={widgetCSS:{fontFamily:utils.globals.fontFamily,fontSize:utils.globals.fontSizeM,color:"rgba(255,255,255,1)",border:"solid",borderWidth:1,borderColor:"rgba(255,255,255,1)",backgroundColor:"rgba(0,0,0,1)",borderRadius:0,zIndex:1E4},buttonCSS:{height:2*utils.globals.fontSizeM,position:"absolute",border:"solid",color:"rgba(255,255,255,1)",borderWidth:1,borderColor:"rgba(255,255,255,1)",backgroundColor:"rgba(125,125,125,1)",borderRadius:0,cursor:"pointer"}};
SliderLinker.prototype.getGroups=function(){return this.groups_};SliderLinker.prototype.lastGroup=function(){return this.groups_[this.groups_.length-1]};SliderLinker.prototype.addGroup=function(){this.groups_.push({border:"solid 2px rgba("+this.borderColorSet_[this.groups_.length].toString()+")",groupID:"linkGroup_"+this.groups_.length,Viewers:[],prevViewers:[]})};
SliderLinker.prototype.addToLastGroup=function(b){this.removeFromGroup(b,!1);-1===this.groups_[this.groups_.length-1].ViewerManager.indexOf(b)&&(this.groups_[this.groups_.length-1].ViewerManager.push(b),b.selectorBox.style.border=this.lastGroup().border,utils.fx.fadeTo(b.selectorBox,XVGlobals.animFast,1))};
SliderLinker.prototype.clearSelectorBox=function(b){b.selectorBox.style.border="none";goog.events.unlisten(b.widget,goog.events.EventType.MOUSEOVER,that.sliderlink_mouseover);goog.events.unlisten(b.widget,goog.events.EventType.MOUSEOUT,that.sliderlink_mouseout);utils.array.forEach(b.widget.defaultMouseEvents,function(b){b()});b.FrameSlider.clearLinked()};
SliderLinker.prototype.removeFromGroup=function(b,c){var d,e=!1;utils.array.forEach(this.groups_,function(f){e||(d=f.ViewerManager.indexOf(b),-1<d&&(c&&that.clearSelectorBox(f.ViewerManager[d]),f.ViewerManager.splice(d,1),e=!0))});return e};
SliderLinker.prototype.removeGroup=function(b){var c,d,e;that.forEach_({before:function(d,g){e||(c=d.ViewerManager.indexOf(b))},during:function(b,d){-1<c&&!e&&that.clearSelectorBox(b)},after:function(b,g){-1<c&&!e&&(d=g.indexOf(b),0<i?g.splice(d,1):b.ViewerManager=[],e=!0)}})};SliderLinker.prototype.addSelectorBox=function(b,c){var d=utils.dom.mergeArgs(c,{position:"absolute",border:"solid 3px rgba(255,0,0,1)",cursor:"pointer"});return utils.dom.makeElement("div",b,"selectorBox",d)};
SliderLinker.prototype.clearAll_=function(){XV.ViewerManager(function(b){that.removeFromGroup(b,!0)});this.groups_=[];this.addGroup()};SliderLinker.prototype.getViewerSetFromID=function(b){that.forEach_(function(c,d){if(c.widget.id===b)return{viewer:c,viewerset:d.ViewerManager}})};SliderLinker.prototype.showExisting=function(b){var c=b?b:0;that.forEach_(function(b,e){(new goog.async.Delay(function(){utils.fx.fadeIn(b,XVGlobals.animFast)},c)).start()})};
SliderLinker.prototype.hideExisting=function(b){var c=b?b:0;this.stayVisible||that.forEach_(function(b,e){(new goog.async.Delay(function(){utils.fx.fadeOut(b,XVGlobals.animFast)},c)).start()})};SliderLinker.prototype.flashExisting=function(b){var c=b?b:500;that.forEach_(function(b,e){utils.fx.fadeIn(b.selectorBox,XVGlobals.animFast,function(){(new goog.async.Delay(function(){utils.fx.fadeOut(b,XVGlobals.animFast)},c)).start()})})};
SliderLinker.prototype.disableSelectorBox_=function(b){utils.css.setCSS(b,{"pointer-events":"none"})};SliderLinker.prototype.enableSelectorBox_=function(b){utils.css.setCSS(b,{"pointer-events":"auto"})};SliderLinker.prototype.takeSnapshot_=function(){that.forEach_(function(b){group.prevViewers.push(b)})};
SliderLinker.prototype.forEach_=function(b){var c={};"function"===typeof b?c.during=b:"object"===typeof b&&(c={});utils.array.forEach(groups,function(b){c.before&&c.before(b,groups);utils.array.forEach(b.ViewerManager,function(e){c.during&&c.during(e,b,groups)});c.after&&c.after(b,groups)})};SliderLinker.prototype.cancel=function(){that.forEach_({during:function(b){that.clearSelectorBox(b)},after:function(b){b.ViewerManager=this.groups_[i].prevViewers;b.prevViewers=[];that.hideExisting()}});this.processGroups()};
SliderLinker.prototype.processGroups=function(){XV.ViewerManager(function(b){that.disableSelectorBox_(b.selectorBox);that.hideExisting(500)});that.forEach_(function(b){goog.events.listen(b.widget,goog.events.EventType.MOUSEOVER,that.sliderlink_mouseover);goog.events.listen(b.widget,goog.events.EventType.MOUSEOUT,that.sliderlink_mouseout)})};
SliderLinker.prototype.sliderlink_mouseover=function(b){b=XVGlobals.SliderLinker.getViewerSetFromID(b.currentTarget.id);var c=b.viewer;utils.array.forEach(b.viewerset,function(b){b!==c&&c.FrameSlider.linkSlider(b.FrameSlider)})};SliderLinker.prototype.sliderlink_mouseout=function(b){(b=XVGlobals.SliderLinker.getViewerSetFromID(b.currentTarget.id))&&b.viewer.FrameSlider.clearLinked()};SliderLinker.setViewerClickListen={};SliderLinker.prototype.setViewerClickListen=function(b){var c=this;this.showExisting();XV.ViewerManager(function(d){d.selectorBox?c.enableSelectorBox_(d.selectorBox):(d.selectorBox=XVGlobals.SliderLinker.addSelectorBox(d.widget.parentNode,utils.css.dims(d.widget)),d.selectorBox.style.border="none",d.selectorBox.Viewer=d,d.selectorBox.onclick=function(){var b=this.Viewer;c.lastViewerSelected=b;c.addToLastGroup(b)});if(d===b)d.selectorBox.onclick()})};
goog.exportProperty(SliderLinker.prototype,"setViewerClickListen",SliderLinker.prototype.setViewerClickListen);ScanViewer.addLinkMenu={};
ScanViewer.prototype.addLinkMenu=function(){var b=this,c=utils.css.dims(this.widget,"width")-20,d={1:{images:["Chain-Closed","Chain-Closed_GroupPlus","Chain-Closed_Group"],titles:["Link slider to current group","Link slider to new group","Link slider to selected group"]},2:{images:["Chain-Broken_Minus","Chain-Broken_GroupMinus","Broom_Minus"],titles:["Unlink from group","Remove group","Clear all groups"]},3:{images:["Eye"],titles:["View all groups"]}},e=0,f=0,g;for(g in d)e<d[g].images.length&&(e=
d[g].images.length),f+=35;var h=52.5*e+35;this.LinkMenu=utils.dom.makeElement("div",this.widget,"LinkMenu",{position:"absolute",left:c,top:5,height:35,width:35});this.LinkMenu.closed=!1;this.LinkMenu.icon=utils.dom.makeElement("img",this.LinkMenu,"icon",{position:"absolute",left:0,top:0,height:25,width:25,cursor:"pointer"});this.LinkMenu.icon.src="./icons/LinkMenu/Chain-Broken.png";b.LinkMenu.iconHovered=!1;this.LinkMenu.subMenu=utils.dom.makeElement("div",this.LinkMenu,"subMenu",{position:"absolute",
left:-h+35,top:0,height:f,width:h,cursor:"pointer"});this.LinkMenu.subMenu.pinned=!1;this.LinkMenu.subMenu.icons=[];for(g in d)utils.array.forEach(d[g].images,function(c,e){var f=utils.dom.makeElement("img",this.LinkMenu.subMenu,"Icon_"+c,{position:"absolute",top:35*(g-1),left:h-70-17.5-52.5*e,height:35,width:35,cursor:"pointer"});f.src="./icons/LinkMenu/"+c+".png";f.title=d[g].titles[e];this.LinkMenu.subMenu.icons.push(f);"Link slider to selected group"!==f.title&&("Link slider to current group"===
f.title?f.onclick=function(c){utils.dom.stopPropagation(c);XVGlobals.SliderLinker.addLinkMenuPopup(b);b.LinkMenu.childNodes[0].src="./icons/LinkMenu/Chain-Closed.png"}:"Link slider to new group"===f.title?f.onclick=function(c){utils.dom.stopPropagation(c);XVGlobals.SliderLinker.addGroup();XVGlobals.SliderLinker.addLinkMenuPopup(b,"Select viewers for new link group.  Click 'Done' when finished.");b.LinkMenu.childNodes[0].src="./icons/LinkMenu/Chain-Closed.png"}:"Unlink from group"===f.title?f.onclick=
function(c){XVGlobals.SliderLinker.flashExisting();b.selectorBox&&(XVGlobals.SliderLinker.removeFromGroup(b,!0),b.LinkMenu.childNodes[0].src="./icons/LinkMenu/Chain-Broken.png")}:"Remove group"===f.title?f.onclick=function(c){XVGlobals.SliderLinker.flashExisting();b.selectorBox&&(XVGlobals.SliderLinker.removeGroup(b),b.LinkMenu.childNodes[0].src="./icons/LinkMenu/Chain-Broken.png")}:"Clear all groups"===f.title?f.onclick=function(c){XVGlobals.SliderLinker.showExisting();XVGlobals.SliderLinker.addClearAllPopup(b);
XV.ViewerManager(function(b){"ScanViewer"==b.type&&(b.LinkMenu.childNodes[0].src="./icons/LinkMenu/Chain-Broken.png")})}:"View all groups"===f.title&&(f.onclick=function(b){"undefined"===typeof f.viewAll&&(f.viewAll=!1);f.viewAll=!f.viewAll;if("undefined"!==typeof b){f.viewAll?(XVGlobals.SliderLinker.stayVisible=!0,XVGlobals.SliderLinker.showExisting()):(XVGlobals.SliderLinker.stayVisible=!1,XVGlobals.SliderLinker.hideExisting());var c;f.viewAll=!f.viewAll;XV.ViewerManager(function(b){"ScanViewer"===
b.type&&(c=b.LinkMenu.subMenu.icons,utils.array.forEach(c,function(b){if("View all groups"===b.title)b.onclick()}))})}else!0===f.viewAll?(subMenuIconBind(f,!1),utils.fx.FadeIn(this,0)):(subMenuIconBind(f,!0),utils.fx.FadeTo(this,0,0.5))}))})};goog.exportProperty(ScanViewer.prototype,"addLinkMenu",ScanViewer.prototype.addLinkMenu);X.buffer=function(b,c,d){if(!goog.isDefAndNotNull(b))throw Error("Invalid GL Buffer.");if(!goog.isDefAndNotNull(c))throw Error("Invalid number of items.");if(!goog.isDefAndNotNull(d))throw Error("Invalid item size.");X.base.call(this);this._classname="buffer";this._glBuffer=b;this._itemCount=c;this._itemSize=d};goog.inherits(X.buffer,X.base);X.shaders=function(){X.base.call(this);this._classname="shaders";this._vertexshaderSource="";var b;b="precision mediump float;\n\n";b+="attribute vec3 vertexPosition;\n";b+="attribute vec3 vertexNormal;\n";b+="attribute vec3 vertexColor;\n";b+="attribute vec2 vertexTexturePos;\n";b+="attribute float vertexScalar;\n";b+="\n";b+="uniform mat4 view;\n";b+="uniform mat4 perspective;\n";b+="uniform vec3 center;\n";b+="uniform mat4 objectTransform;\n";b+="uniform bool useObjectColor;\n";b+="uniform bool useScalars;\n";
b+="uniform bool scalarsReplaceMode;\n";b+="uniform float scalarsMin;\n";b+="uniform float scalarsMax;\n";b+="uniform vec3 scalarsMinColor;\n";b+="uniform vec3 scalarsMaxColor;\n";b+="uniform float scalarsMinThreshold;\n";b+="uniform float scalarsMaxThreshold;\n";b+="uniform int scalarsInterpolation;\n";b+="uniform vec3 objectColor;\n";b+="uniform float pointSize;\n";b+="\n";b+="varying float fDiscardNow;\n";b+="varying vec4 fVertexPosition;\n";b+="varying vec3 fragmentColor;\n";b+="varying vec2 fragmentTexturePos;\n";
b+="varying vec3 fVertexNormal;\n";b+="varying vec3 fTransformedVertexNormal;\n";b+="\n";b+="void main(void) {\n";b+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";b+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";b+="vertexNormal;\n";b+="  fVertexNormal = vertexNormal;\n";b+="  fDiscardNow = 0.0;\n";b+="  vec3 vertexPosition2 = vertexPosition - center;\n";b+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";
b+="  fragmentTexturePos = vertexTexturePos;\n";b+="  if (useScalars) {\n";b+="    float scalarValue = vertexScalar;\n";b+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";b+="      if (scalarsReplaceMode) {\n";b+="        fragmentColor = objectColor;\n";b+="      } else {\n";b+="        fDiscardNow = 1.0;\n";b+="      }\n";b+="    } else {\n";b+="      if (scalarsReplaceMode) {\n";b+="        if (scalarsInterpolation == 1) {\n";b+="            vec3 zeroMaxColor;\n";
b+="            vec3 zeroMinColor;\n";b+="            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";b+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";b+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";b+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";b+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";b+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";b+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
b+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";b+="        } else {\n";b+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";b+="          }\n";b+="      } else {\n";b+="        fragmentColor = vertexColor;\n";b+="      }\n";b+="    }\n";b+="  } else if (useObjectColor) {\n";b+="    fragmentColor = objectColor;\n";b+="  } else {\n";b+="    fragmentColor = vertexColor;\n";
b+="  }\n";b+="  gl_PointSize = pointSize;\n";b+="  gl_Position = perspective * fVertexPosition;\n";this._vertexshaderSource=b+="}\n";this._fragmentshaderSource="";b="precision mediump float;\n\n";b+="uniform bool usePicking;\n";b+="uniform bool useTexture;\n";b+="uniform bool volumeTexture;\n";b+="uniform bool useLabelMapTexture;\n";b+="uniform sampler2D textureSampler;\n";b+="uniform sampler2D textureSampler2;\n";b+="uniform float objectOpacity;\n";b+="uniform float labelmapOpacity;\n";b+="uniform vec4 labelmapColor;\n";
b+="uniform float volumeLowerThreshold;\n";b+="uniform float volumeUpperThreshold;\n";b+="uniform float volumeScalarMin;\n";b+="uniform float volumeScalarMax;\n";b+="uniform vec3 volumeScalarMinColor;\n";b+="uniform vec3 volumeScalarMaxColor;\n";b+="uniform float volumeWindowLow;\n";b+="uniform float volumeWindowHigh;\n";b+="\n";b+="varying float fDiscardNow;\n";b+="varying vec4 fVertexPosition;\n";b+="varying vec3 fragmentColor;\n";b+="varying vec2 fragmentTexturePos;\n";b+="varying vec3 fVertexNormal;\n";
b+="varying vec3 fTransformedVertexNormal;\n";b+="\n";b+="void main(void) {\n";b+=" if (fDiscardNow > 0.0) {\n";b+="   discard;\n";b+=" }\n";b+=" if (usePicking) {\n";b+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";b+=" } else if (useTexture) {\n";b+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";b+="   vec4 textureSum = texture1;\n";b+="   if (volumeTexture) {\n";b+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";b+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";
b+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";b+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";b+="     vec3 fac = _maxrange - _minrange;\n";b+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";b+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";b+="   }\n";b+="   if (useLabelMapTexture) {\n";b+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";b+=
"     if (texture2.a > 0.0) {\n";b+="         if (labelmapColor.a != -255.0) {\n";b+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";b+="             if (labelmapOpacity < 1.0) {\n";b+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";b+="             } else {\n";b+="               textureSum = texture2;\n";b+="             }\n";b+="           }\n";b+="         } else {\n";b+="           if (labelmapOpacity < 1.0) {\n";b+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";
b+="           } else {\n";b+="             textureSum = texture2;\n";b+="           }\n";b+="         }\n";b+="     }\n";b+="   }\n";b+="   if (volumeTexture) {\n";b+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";b+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";b+="     if (texture1.r < _volumeLowerThreshold ||\n";b+="         texture1.r > _volumeUpperThreshold) {\n";b+="       discard;\n";b+="     };\n";b+="   };\n";b+="   gl_FragColor = textureSum;\n";
b+="   gl_FragColor.a = objectOpacity;\n";b+=" } else {\n";b+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";b+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";b+="     gl_FragColor = vec4(fragmentColor,1.0);\n";b+="     return;\n";b+="   }\n";b+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";b+="   vec3 lightDirection = vec3(0,0,-10);\n";b+="   lightDirection = normalize(lightDirection);\n";b+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";b+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";
b+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";b+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";b+="   float ambient = 0.3;\n";b+="   gl_FragColor = vec4(fragmentColor * ambient +\n";b+="                       fragmentColor * diffuse +\n";b+="                       vec3(0.2, 0.2, 0.2) * specular,\n";b+="                       objectOpacity);\n";b+=" }\n";this._fragmentshaderSource=b+="}\n"};goog.inherits(X.shaders,X.base);
X.shaders.attributes={VERTEXPOSITION:"vertexPosition",VERTEXNORMAL:"vertexNormal",VERTEXCOLOR:"vertexColor",VERTEXTEXTUREPOS:"vertexTexturePos",VERTEXSCALAR:"vertexScalar"};
X.shaders.uniforms={VIEW:"view",PERSPECTIVE:"perspective",CENTER:"center",OBJECTTRANSFORM:"objectTransform",USEOBJECTCOLOR:"useObjectColor",OBJECTCOLOR:"objectColor",USESCALARS:"useScalars",SCALARSREPLACEMODE:"scalarsReplaceMode",SCALARSMIN:"scalarsMin",SCALARSMAX:"scalarsMax",SCALARSMINCOLOR:"scalarsMinColor",SCALARSMAXCOLOR:"scalarsMaxColor",SCALARSMINTHRESHOLD:"scalarsMinThreshold",SCALARSMAXTHRESHOLD:"scalarsMaxThreshold",SCALARSINTERPOLATION:"scalarsInterpolation",POINTSIZE:"pointSize",OBJECTOPACITY:"objectOpacity",
NORMAL:"normal",USEPICKING:"usePicking",USETEXTURE:"useTexture",USELABELMAPTEXTURE:"useLabelMapTexture",LABELMAPOPACITY:"labelmapOpacity",LABELMAPCOLOR:"labelmapColor",TEXTURESAMPLER:"textureSampler",TEXTURESAMPLER2:"textureSampler2",VOLUMELOWERTHRESHOLD:"volumeLowerThreshold",VOLUMEUPPERTHRESHOLD:"volumeUpperThreshold",VOLUMESCALARMIN:"volumeScalarMin",VOLUMESCALARMAX:"volumeScalarMax",VOLUMESCALARMINCOLOR:"volumeScalarMinColor",VOLUMESCALARMAXCOLOR:"volumeScalarMaxColor",VOLUMEWINDOWLOW:"volumeWindowLow",
VOLUMEWINDOWHIGH:"volumeWindowHigh",VOLUMETEXTURE:"volumeTexture"};X.shaders.prototype.vertex=function(){return this._vertexshaderSource};X.shaders.prototype.fragment=function(){return this._fragmentshaderSource};
X.shaders.prototype.validate=function(){var b=Object.keys(X.shaders.attributes),c=Object.keys(X.shaders.uniforms);if(!b.every(function(b){b=X.shaders.attributes[b];return-1!=this._vertexshaderSource.search(b)||-1!=this._fragmentshaderSource.search(b)}.bind(this)))throw Error("Could not find all attributes in the shader sources.");if(!c.every(function(b){b=X.shaders.uniforms[b];return-1!=this._vertexshaderSource.search(b)||-1!=this._fragmentshaderSource.search(b)}.bind(this)))throw Error("Could not find all uniforms in the shader sources.");
return!0};CSG.cylinder=function(b){function c(b,c,e){c=2*c*Math.PI;c=m.times(Math.cos(c)).plus(p.times(Math.sin(c)));b=d.plus(f.times(b)).plus(c.times(g));e=c.times(1-Math.abs(e)).plus(h.times(e));return new csgVertex(b,e)}CSG.call(this);b=b||{};var d=new csgVector(b.start||[0,-1,0]),e=new csgVector(b.end||[0,1,0]),f=e.minus(d),g=b.radius||1;b=b.slices||16;for(var h=f.unit(),k=0.5<Math.abs(h.y()),m=(new csgVector(k,!k,0)).cross(h).unit(),p=m.cross(h).unit(),k=new csgVertex(d,h.negated()),e=new csgVertex(e,
h.unit()),n=[],q=0;q<b;q++){var r=q/b,s=(q+1)/b;n.push(new csgPolygon([k,c(0,r,-1),c(0,s,-1)]));n.push(new csgPolygon([c(0,s,0),c(0,r,0),c(1,r,0),c(1,s,0)]));n.push(new csgPolygon([e,c(1,s,1),c(1,r,1)]))}return CSG.fromPolygons(n)};goog.inherits(CSG.cylinder,CSG);X.cylinder=function(){X.object.call(this);this._classname="cylinder";this._start=[-10,-10,-10];this._end=[10,10,10];this._radius=10;this._slices=32;inject(this,new X.constructable)};goog.inherits(X.cylinder,X.object);X.cylinder.prototype.__defineGetter__("start",function(){return this._start});X.cylinder.prototype.__defineSetter__("start",function(b){if(!goog.isDefAndNotNull(b)||!goog.isArray(b)||3!=b.length)throw Error("Invalid start");this._start=b});
X.cylinder.prototype.__defineGetter__("end",function(){return this._end});X.cylinder.prototype.__defineSetter__("end",function(b){if(!goog.isDefAndNotNull(b)||!goog.isArray(b)||3!=b.length)throw Error("Invalid end");this._end=b});X.cylinder.prototype.__defineGetter__("radius",function(){return this._radius});X.cylinder.prototype.__defineSetter__("radius",function(b){if(!goog.isNumber(b))throw Error("Invalid radius.");this._radius=b});
X.cylinder.prototype.modified=function(){this.fromCSG(new CSG.cylinder({start:this._start,end:this._end,radius:this._radius,slices:this._slices}));X.cylinder.superClass_.modified.call(this)};goog.exportSymbol("X.cylinder",X.cylinder);goog.exportSymbol("X.cylinder.prototype.modified",X.cylinder.prototype.modified);X.labelmap=function(b){X.volume.call(this);this._classname="labelmap";this._volume=b;this._showOnlyColor=new Float32Array([-255,-255,-255,-255])};goog.inherits(X.labelmap,X.volume);X.labelmap.prototype.modified=function(){var b=new X.event.ModifiedEvent;b._object=this;this.dispatchEvent(b);this._volume.modified()};
X.labelmap.prototype.__defineSetter__("showOnly",function(b){var c=[-1,-1,-1,-1];if(goog.isDefAndNotNull(b))if(goog.isArray(b)&&4==b.length)c=b;else{if(!this._colortable)throw Error("No colortable assigned.");c=this._colortable._map.get(b).slice(1,5)}this._showOnlyColor=new Float32Array([Math.floor(255*c[0]),Math.floor(255*c[1]),Math.floor(255*c[2]),Math.floor(255*c[3])])});goog.exportSymbol("X.labelmap",X.labelmap);X.cube=function(){X.object.call(this);this._classname="cube";this._center=[0,0,0];this._lengthZ=this._lengthY=this._lengthX=20;this._textureCoordinateMap=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];inject(this,new X.constructable)};goog.inherits(X.cube,X.object);X.cube.prototype.__defineGetter__("center",function(){return this._center});
X.cube.prototype.__defineSetter__("center",function(b){if(!goog.isDefAndNotNull(b)||!goog.isArray(b)||3!=b.length)throw Error("Invalid center");this._center=b});X.cube.prototype.__defineGetter__("lengthX",function(){return this._lengthX});X.cube.prototype.__defineSetter__("lengthX",function(b){if(!goog.isNumber(b))throw Error("Invalid lengthX.");this._lengthX=b});X.cube.prototype.__defineGetter__("lengthY",function(){return this._lengthY});
X.cube.prototype.__defineSetter__("lengthY",function(b){if(!goog.isNumber(b))throw Error("Invalid lengthY.");this._lengthY=b});X.cube.prototype.__defineGetter__("lengthZ",function(){return this._lengthZ});X.cube.prototype.__defineSetter__("lengthZ",function(b){if(!goog.isNumber(b))throw Error("Invalid lengthZ.");this._lengthZ=b});X.cube.prototype.modified=function(){this.fromCSG(new CSG.cube({center:this._center,radius:[this._lengthX/2,this._lengthY/2,this._lengthZ/2]}));X.cube.superClass_.modified.call(this)};
goog.exportSymbol("X.cube",X.cube);goog.exportSymbol("X.cube.prototype.modified",X.cube.prototype.modified);X.camera2D=function(b,c){X.camera.call(this,b,c);this._classname="camera2D"};goog.inherits(X.camera2D,X.camera);X.camera2D.prototype.rotate=function(b){b=X.camera2D.superClass_.rotate.call(this,b);var c=new X.event.WindowLevelEvent;0<b.x?c._window--:0>b.x&&c._window++;0<b.y?c._level++:0>b.y&&c._level--;this.dispatchEvent(c)};X.progressbar=function(b,c){if(!goog.isDefAndNotNull(b))throw Error("No valid parent element.");if(!goog.isDefAndNotNull(c))throw Error("Invalid initial value.");goog.ui.ProgressBar.call(this);this._classname="progressbar";this._parent=b;this._parent_position_original="";this._doneProgressBar=this._style=null;this._css=[];var d;d=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";d+="  background: white;\n";d+="  padding: 1px;\n";d+="  overflow: hidden;\n";d+="  margin: 2px;\n";
d+="  width: 100px;\n";d+="  height: 5px;\n";d+="}";var e;e=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";e+="  overflow: hidden;\n";e+="  width: 0%;\n";e+="  height: 100%;\n";e+="}";var f;f=".progress-bar-thumb-done {\n  background: #57E964;\n}";this._css=[d,e,f];this.setValue(c);this.init_()};goog.inherits(X.progressbar,goog.ui.ProgressBar);
X.progressbar.prototype.init_=function(){var b=goog.style.getComputedStyle(this._parent,"position");if("static"==b||""==b)this._parent_position_original=this._parent.style.position,this._parent.style.position="relative";var b=goog.dom.getDocument().getElementsByTagName("head")[0],c=goog.dom.createDom("style");c.type="text/css";c.media="screen";var d=goog.dom.createTextNode(this._css[0]),e=goog.dom.createTextNode(this._css[1]),f=goog.dom.createTextNode(this._css[2]);goog.dom.appendChild(b,c);goog.dom.appendChild(c,
d);goog.dom.appendChild(c,e);goog.dom.appendChild(c,f);this._style=c;this.render(this._parent);b=this.getElement();b.style.position="absolute";b.style.top=(this._parent.clientHeight-5)/2+"px";b.style.left=(this._parent.clientWidth-100)/2+"px";b.classList.add("xtk-progress-bar")};
X.progressbar.prototype.done=function(){var b=this.getElement().style.top,c=this.getElement().style.left;goog.dom.removeNode(this.getElement());var d=new X.progressbar(this._parent,100),e=d.getElement();e.style.position="absolute";e.style.top=b;e.style.left=c;e.classList.add("xtk-progress-bar");goog.dom.getFirstElementChild(e).classList.add("progress-bar-thumb-done");this._doneProgressBar=d};
X.progressbar.prototype.kill=function(){this._style&&goog.dom.removeNode(this._style);this.getElement()&&goog.dom.removeNode(this.getElement());this._doneProgressBar&&goog.dom.removeNode(this._doneProgressBar.getElement());this._doneProgressBar=this._style=null;this._parent_position_original&&(this._parent.style.position=this._parent_position_original)};X.renderer=function(){X.base.call(this);this._classname="renderer";this._container=window.document.body;this._width=this._container.clientWidth;this._height=this._container.clientHeight;this._interactor=this._camera=this._canvas=null;this._objects=new X.array(X.object.OPACITY_COMPARATOR);this._topLevelObjects=[];this._loader=null;this._onShowtime=this._loadingCompleted=this._locked=!1;this._context=this._progressBar=null;this._config={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1,SLICENAVIGATORS:!0};
this._AnimationFrameID=-1;window.console.log("XTK release 10 -- ###TIMESTAMP### -- http://www.goXTK.com -- @goXTK")};goog.inherits(X.renderer,X.base);X.renderer.prototype.onProgress=function(b){this._progressBar&&this._progressBar.setValue(100*b._value)};X.renderer.prototype.onModified=function(b){goog.isDefAndNotNull(b)&&b instanceof X.event.ModifiedEvent&&b._object&&this.update_(b._object)};
X.renderer.prototype.onHover_=function(b){if(!(goog.isDefAndNotNull(b)&&b instanceof X.event.HoverEvent))throw Error("Invalid hover event.");};
X.renderer.prototype.onResize_=function(){var b=goog.dom.getElement(this._container);this._width=b.clientWidth;this._height=b.clientHeight;b=goog.dom.getElement(this._canvas);b.width=this._width;b.height=this._height;"renderer3D"==this._classname&&(this._context.viewport(0,0,this._width,this._height),this._camera._perspective=X.matrix.makePerspective(X.matrix.identity(),this._camera._fieldOfView,this._canvas.width/this._canvas.height,1,1E4))};
X.renderer.prototype.onScroll_=function(b){if(!(goog.isDefAndNotNull(b)&&b instanceof X.event.ScrollEvent))throw Error("Invalid scroll event.");};X.renderer.prototype.__defineGetter__("config",function(){return this._config});X.renderer.prototype.__defineGetter__("interactor",function(){return this._interactor});X.renderer.prototype.__defineGetter__("camera",function(){return this._camera});X.renderer.prototype.__defineGetter__("loadingCompleted",function(){return this._loadingCompleted});
X.renderer.prototype.__defineGetter__("container",function(){return this._container});X.renderer.prototype.__defineSetter__("container",function(b){if(!goog.isDefAndNotNull(b))throw Error("An ID to a valid container (<div>..) is required.");var c=b;goog.isString(c)&&(c=goog.dom.getElement(b));if(!goog.dom.isElement(c))throw Error("Could not find the given container.");this._container=c});X.renderer.prototype.resetViewAndRender=function(){this._camera.reset()};
X.renderer.prototype.showProgressBar_=function(){this._config.PROGRESSBAR_ENABLED&&!this._progressBar&&(this._progressBar=new X.progressbar(this._container,3))};X.renderer.prototype.hideProgressBar_=function(){this._config.PROGRESSBAR_ENABLED&&(this._progressBar&&!this.__readyCheckTimer2)&&(this._progressBar.done(),this.__readyCheckTimer2=goog.Timer.callOnce(function(){this.__readyCheckTimer2=null;this._progressBar&&(this._progressBar.kill(),this._progressBar=null);this.render()}.bind(this),700))};
X.renderer.prototype.init=function(b){var c=goog.dom.createDom("canvas");goog.dom.appendChild(this._container,c);this._width=this._container.clientWidth;this._height=this._container.clientHeight;c.width=this._width;c.height=this._height;try{var d=c.getContext(b);if(!d)throw Error();}catch(e){throw b="Sorry, "+b+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this._container.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
b+"</p>",Error(b);}this._loader=new X.loader;goog.events.listen(this._loader,X.event.events.PROGRESS,this.onProgress.bind(this));this._canvas=c;this._context=d;c=new X.interactor3D(this._canvas);"2d"==b&&(c=new X.interactor2D(this._canvas));c.init();goog.events.listen(c,X.event.events.RESETVIEW,this.resetViewAndRender.bind(this));goog.events.listen(c,X.event.events.HOVER,this.onHover_.bind(this));goog.events.listen(c,X.event.events.SCROLL,this.onScroll_.bind(this));this._interactor=c;c=new X.camera3D(this._width,
this._height);"2d"==b&&(c=new X.camera2D(this._width,this._height));c.observe(this._interactor);this._camera=c;goog.events.listen(window,goog.events.EventType.RESIZE,this.onResize_,!1,this)};X.renderer.prototype.add=function(b){(b instanceof X.cube||b instanceof X.sphere||b instanceof X.cylinder)&&b.modified();this._topLevelObjects.push(b);this.update_(b)};
X.renderer.prototype.remove=function(b){if(!this._canvas||!this._context)throw Error("The renderer was not initialized properly.");if(!goog.isDefAndNotNull(b))throw Error("Illegal object.");return!1};
X.renderer.prototype.update_=function(b){if(!this._canvas||!this._context)throw Error("The renderer was not initialized properly.");if(!goog.isDefAndNotNull(b))throw window.console.log(b),Error("Illegal object.");goog.events.hasListener(b,X.event.events.MODIFIED)||goog.events.listen(b,X.event.events.MODIFIED,this.onModified.bind(this))};
X.renderer.prototype.get=function(b){if(!goog.isDefAndNotNull(b))throw Error("Invalid object id.");for(var c=this._objects.values(),d=c.length,e=0,e=0;e<d;e++)if(c[e]._id==b)return c[e];return null};X.renderer.prototype.printScene=function(){var b=this._topLevelObjects.length,c;for(c=0;c<b;c++)this.generateTree_(this._topLevelObjects[c],0)};
X.renderer.prototype.generateTree_=function(b,c){for(var d="",e=0,e=0;e<c;e++)d+=">";d+=b._id;window.console.log(d);if(0<b._children.length)for(var d=b._children,e=d.length,f=0,f=0;f<e;f++)this.generateTree_(d[f],c+1)};
X.renderer.prototype.render=function(){if(!this._canvas||!this._context)throw Error("The renderer was not initialized properly.");if(!goog.isDefAndNotNull(this._readyCheckTimer)){if(this._loader.completed()){if(this._loadingCompleted||this._onShowtime||(this._onShowtime=!0,eval("this.onShowtime()"),this._loadingCompleted=!0),this._progressBar){this.hideProgressBar_();return}}else if(this.showProgressBar_(),this._onShowtime=this._loadingCompleted=!1,this._readyCheckTimer=goog.Timer.callOnce(function(){this._readyCheckTimer=
null;this.render()}.bind(this),100),!this._config.INTERMEDIATE_RENDERING)return;this._AnimationFrameID=window.requestAnimationFrame(this.render.bind(this),this._canvas);eval("this.onRender()");this.render_(!1,!0)}};X.renderer.prototype.onShowtime=function(){};X.renderer.prototype.onRender=function(){};X.renderer.prototype.render_=function(b,c){};
X.renderer.prototype.destroy=function(){window.cancelAnimationFrame(this._AnimationFrameID);this._loader&&(delete this._loader,this._loader=null);this._progressBar&&(this._progressBar.kill(),delete this._progressBar,this._progressBar=null);this._objects.clear();delete this._objects;this._topLevelObjects.length=0;delete this._topLevelObjects;delete this._loader;this._loader=null;delete this._camera;this._camera=null;delete this._interactor;this._interactor=null;delete this._context;this._context=null;
goog.dom.removeNode(this._canvas);delete this._canvas;this._canvas=null};goog.positioning={};goog.positioning.Corner={TOP_LEFT:0,TOP_RIGHT:2,BOTTOM_LEFT:1,BOTTOM_RIGHT:3,TOP_START:4,TOP_END:6,BOTTOM_START:5,BOTTOM_END:7};goog.positioning.CornerBit={BOTTOM:1,RIGHT:2,FLIP_RTL:4};goog.positioning.Overflow={IGNORE:0,ADJUST_X:1,FAIL_X:2,ADJUST_Y:4,FAIL_Y:8,RESIZE_WIDTH:16,RESIZE_HEIGHT:32,ADJUST_X_EXCEPT_OFFSCREEN:65,ADJUST_Y_EXCEPT_OFFSCREEN:132};
goog.positioning.OverflowStatus={NONE:0,ADJUSTED_X:1,ADJUSTED_Y:2,WIDTH_ADJUSTED:4,HEIGHT_ADJUSTED:8,FAILED_LEFT:16,FAILED_RIGHT:32,FAILED_TOP:64,FAILED_BOTTOM:128,FAILED_OUTSIDE_VIEWPORT:256};goog.positioning.OverflowStatus.FAILED=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT|goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM|goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT;
goog.positioning.OverflowStatus.FAILED_HORIZONTAL=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT;goog.positioning.OverflowStatus.FAILED_VERTICAL=goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM;
goog.positioning.positionAtAnchor=function(b,c,d,e,f,g,h,k,m){goog.asserts.assert(d);var p=goog.positioning.getOffsetParentPageOffset(d),n=goog.positioning.getVisiblePart_(b);goog.style.translateRectForAnotherFrame(n,goog.dom.getDomHelper(b),goog.dom.getDomHelper(d));b=goog.positioning.getEffectiveCorner(b,c);n=new goog.math.Coordinate(b&goog.positioning.CornerBit.RIGHT?n.left+n.width:n.left,b&goog.positioning.CornerBit.BOTTOM?n.top+n.height:n.top);n=goog.math.Coordinate.difference(n,p);f&&(n.x+=
(b&goog.positioning.CornerBit.RIGHT?-1:1)*f.x,n.y+=(b&goog.positioning.CornerBit.BOTTOM?-1:1)*f.y);var q;if(h)if(m)q=m;else if(q=goog.style.getVisibleRectForElement(d))q.top-=p.y,q.right-=p.x,q.bottom-=p.y,q.left-=p.x;return goog.positioning.positionAtCoordinate(n,d,e,g,q,h,k)};
goog.positioning.getOffsetParentPageOffset=function(b){var c;if(b=b.offsetParent){var d=b.tagName==goog.dom.TagName.HTML||b.tagName==goog.dom.TagName.BODY;d&&"static"==goog.style.getComputedPosition(b)||(c=goog.style.getPageOffset(b),d||(c=goog.math.Coordinate.difference(c,new goog.math.Coordinate(goog.style.bidi.getScrollLeft(b),b.scrollTop))))}return c||new goog.math.Coordinate};
goog.positioning.getVisiblePart_=function(b){var c=goog.style.getBounds(b);(b=goog.style.getVisibleRectForElement(b))&&c.intersection(goog.math.Rect.createFromBox(b));return c};
goog.positioning.positionAtCoordinate=function(b,c,d,e,f,g,h){b=b.clone();var k=goog.positioning.OverflowStatus.NONE;d=goog.positioning.getEffectiveCorner(c,d);var m=goog.style.getSize(c);h=h?h.clone():m.clone();if(e||d!=goog.positioning.Corner.TOP_LEFT)d&goog.positioning.CornerBit.RIGHT?b.x-=h.width+(e?e.right:0):e&&(b.x+=e.left),d&goog.positioning.CornerBit.BOTTOM?b.y-=h.height+(e?e.bottom:0):e&&(b.y+=e.top);if(g&&(k=f?goog.positioning.adjustForViewport_(b,h,f,g):goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT,
k&goog.positioning.OverflowStatus.FAILED))return k;goog.style.setPosition(c,b);goog.math.Size.equals(m,h)||goog.style.setBorderBoxSize(c,h);return k};
goog.positioning.adjustForViewport_=function(b,c,d,e){var f=goog.positioning.OverflowStatus.NONE,g=goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN,h=goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN;(e&g)==g&&(b.x<d.left||b.x>=d.right)&&(e&=~goog.positioning.Overflow.ADJUST_X);(e&h)==h&&(b.y<d.top||b.y>=d.bottom)&&(e&=~goog.positioning.Overflow.ADJUST_Y);b.x<d.left&&e&goog.positioning.Overflow.ADJUST_X&&(b.x=d.left,f|=goog.positioning.OverflowStatus.ADJUSTED_X);b.x<d.left&&(b.x+c.width>d.right&&
e&goog.positioning.Overflow.RESIZE_WIDTH)&&(c.width=Math.max(c.width-(b.x+c.width-d.right),0),f|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED);b.x+c.width>d.right&&e&goog.positioning.Overflow.ADJUST_X&&(b.x=Math.max(d.right-c.width,d.left),f|=goog.positioning.OverflowStatus.ADJUSTED_X);e&goog.positioning.Overflow.FAIL_X&&(f|=(b.x<d.left?goog.positioning.OverflowStatus.FAILED_LEFT:0)|(b.x+c.width>d.right?goog.positioning.OverflowStatus.FAILED_RIGHT:0));b.y<d.top&&e&goog.positioning.Overflow.ADJUST_Y&&
(b.y=d.top,f|=goog.positioning.OverflowStatus.ADJUSTED_Y);b.y<=d.top&&(b.y+c.height<d.bottom&&e&goog.positioning.Overflow.RESIZE_HEIGHT)&&(c.height=Math.max(c.height-(d.top-b.y),0),b.y=d.top,f|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED);b.y>=d.top&&(b.y+c.height>d.bottom&&e&goog.positioning.Overflow.RESIZE_HEIGHT)&&(c.height=Math.max(c.height-(b.y+c.height-d.bottom),0),f|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED);b.y+c.height>d.bottom&&e&goog.positioning.Overflow.ADJUST_Y&&(b.y=Math.max(d.bottom-
c.height,d.top),f|=goog.positioning.OverflowStatus.ADJUSTED_Y);e&goog.positioning.Overflow.FAIL_Y&&(f|=(b.y<d.top?goog.positioning.OverflowStatus.FAILED_TOP:0)|(b.y+c.height>d.bottom?goog.positioning.OverflowStatus.FAILED_BOTTOM:0));return f};goog.positioning.getEffectiveCorner=function(b,c){return(c&goog.positioning.CornerBit.FLIP_RTL&&goog.style.isRightToLeft(b)?c^goog.positioning.CornerBit.RIGHT:c)&~goog.positioning.CornerBit.FLIP_RTL};
goog.positioning.flipCornerHorizontal=function(b){return b^goog.positioning.CornerBit.RIGHT};goog.positioning.flipCornerVertical=function(b){return b^goog.positioning.CornerBit.BOTTOM};goog.positioning.flipCorner=function(b){return b^goog.positioning.CornerBit.BOTTOM^goog.positioning.CornerBit.RIGHT};goog.positioning.AbstractPosition=function(){};goog.positioning.AbstractPosition.prototype.reposition=function(b,c,d,e){};goog.positioning.ViewportPosition=function(b,c){this.coordinate=b instanceof goog.math.Coordinate?b:new goog.math.Coordinate(b,c)};goog.inherits(goog.positioning.ViewportPosition,goog.positioning.AbstractPosition);goog.positioning.ViewportPosition.prototype.reposition=function(b,c,d,e){goog.positioning.positionAtAnchor(goog.style.getClientViewportElement(b),goog.positioning.Corner.TOP_LEFT,b,c,this.coordinate,d,null,e)};goog.positioning.AnchoredPosition=function(b,c,d){this.element=b;this.corner=c;this.overflow_=d};goog.inherits(goog.positioning.AnchoredPosition,goog.positioning.AbstractPosition);goog.positioning.AnchoredPosition.prototype.reposition=function(b,c,d,e){goog.positioning.positionAtAnchor(this.element,this.corner,b,c,void 0,d,this.overflow_)};goog.ui.PopupBase=function(b,c){goog.events.EventTarget.call(this);this.handler_=new goog.events.EventHandler(this);this.setElement(b||null);c&&this.setType(c)};goog.inherits(goog.ui.PopupBase,goog.events.EventTarget);goog.ui.PopupBase.Type={TOGGLE_DISPLAY:"toggle_display",MOVE_OFFSCREEN:"move_offscreen"};goog.ui.PopupBase.prototype.element_=null;goog.ui.PopupBase.prototype.autoHide_=!0;goog.ui.PopupBase.prototype.autoHideRegion_=null;goog.ui.PopupBase.prototype.isVisible_=!1;
goog.ui.PopupBase.prototype.shouldHideAsync_=!1;goog.ui.PopupBase.prototype.lastShowTime_=-1;goog.ui.PopupBase.prototype.lastHideTime_=-1;goog.ui.PopupBase.prototype.hideOnEscape_=!1;goog.ui.PopupBase.prototype.enableCrossIframeDismissal_=!0;goog.ui.PopupBase.prototype.type_=goog.ui.PopupBase.Type.TOGGLE_DISPLAY;goog.ui.PopupBase.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",BEFORE_HIDE:"beforehide",HIDE:"hide"};goog.ui.PopupBase.DEBOUNCE_DELAY_MS=150;goog.ui.PopupBase.prototype.getType=function(){return this.type_};
goog.ui.PopupBase.prototype.setType=function(b){this.type_=b};goog.ui.PopupBase.prototype.shouldHideAsync=function(){return this.shouldHideAsync_};goog.ui.PopupBase.prototype.setShouldHideAsync=function(b){this.shouldHideAsync_=b};goog.ui.PopupBase.prototype.getElement=function(){return this.element_};goog.ui.PopupBase.prototype.setElement=function(b){this.ensureNotVisible_();this.element_=b};goog.ui.PopupBase.prototype.getAutoHide=function(){return this.autoHide_};
goog.ui.PopupBase.prototype.setAutoHide=function(b){this.ensureNotVisible_();this.autoHide_=b};goog.ui.PopupBase.prototype.getHideOnEscape=function(){return this.hideOnEscape_};goog.ui.PopupBase.prototype.setHideOnEscape=function(b){this.ensureNotVisible_();this.hideOnEscape_=b};goog.ui.PopupBase.prototype.getEnableCrossIframeDismissal=function(){return this.enableCrossIframeDismissal_};goog.ui.PopupBase.prototype.setEnableCrossIframeDismissal=function(b){this.enableCrossIframeDismissal_=b};
goog.ui.PopupBase.prototype.getAutoHideRegion=function(){return this.autoHideRegion_};goog.ui.PopupBase.prototype.setAutoHideRegion=function(b){this.autoHideRegion_=b};goog.ui.PopupBase.prototype.setTransition=function(b,c){this.showTransition_=b;this.hideTransition_=c};goog.ui.PopupBase.prototype.getLastShowTime=function(){return this.lastShowTime_};goog.ui.PopupBase.prototype.getLastHideTime=function(){return this.lastHideTime_};goog.ui.PopupBase.prototype.getHandler=function(){return this.handler_};
goog.ui.PopupBase.prototype.ensureNotVisible_=function(){if(this.isVisible_)throw Error("Can not change this state of the popup while showing.");};goog.ui.PopupBase.prototype.isVisible=function(){return this.isVisible_};goog.ui.PopupBase.prototype.isOrWasRecentlyVisible=function(){return this.isVisible_||goog.now()-this.lastHideTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};
goog.ui.PopupBase.prototype.setVisible=function(b){this.showTransition_&&this.showTransition_.stop();this.hideTransition_&&this.hideTransition_.stop();b?this.show_():this.hide_()};goog.ui.PopupBase.prototype.reposition=goog.nullFunction;
goog.ui.PopupBase.prototype.show_=function(){if(!this.isVisible_&&this.onBeforeShow()){if(!this.element_)throw Error("Caller must call setElement before trying to show the popup");this.reposition();var b=goog.dom.getOwnerDocument(this.element_);this.hideOnEscape_&&this.handler_.listen(b,goog.events.EventType.KEYDOWN,this.onDocumentKeyDown_,!0);if(this.autoHide_)if(this.handler_.listen(b,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0),goog.userAgent.IE){var c;try{c=b.activeElement}catch(d){}for(;c&&
"IFRAME"==c.nodeName;){try{var e=goog.dom.getFrameContentDocument(c)}catch(f){break}b=e;c=b.activeElement}this.handler_.listen(b,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0);this.handler_.listen(b,goog.events.EventType.DEACTIVATE,this.onDocumentBlur_)}else this.handler_.listen(b,goog.events.EventType.BLUR,this.onDocumentBlur_);this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.showPopupElement():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.reposition();this.isVisible_=
!0;if(this.showTransition_)goog.events.listenOnce(this.showTransition_,goog.fx.Transition.EventType.END,this.onShow_,!1,this),this.showTransition_.play();else this.onShow_()}};
goog.ui.PopupBase.prototype.hide_=function(b){if(!this.isVisible_||!this.onBeforeHide_(b))return!1;this.handler_&&this.handler_.removeAll();this.isVisible_=!1;this.lastHideTime_=goog.now();this.hideTransition_?(goog.events.listenOnce(this.hideTransition_,goog.fx.Transition.EventType.END,goog.partial(this.continueHidingPopup_,b),!1,this),this.hideTransition_.play()):this.continueHidingPopup_(b);return!0};
goog.ui.PopupBase.prototype.continueHidingPopup_=function(b){this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.shouldHideAsync_?goog.Timer.callOnce(this.hidePopupElement_,0,this):this.hidePopupElement_():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.moveOffscreen_();this.onHide_(b)};goog.ui.PopupBase.prototype.showPopupElement=function(){this.element_.style.visibility="visible";goog.style.setElementShown(this.element_,!0)};
goog.ui.PopupBase.prototype.hidePopupElement_=function(){this.element_.style.visibility="hidden";goog.style.setElementShown(this.element_,!1)};goog.ui.PopupBase.prototype.moveOffscreen_=function(){this.element_.style.top="-10000px"};goog.ui.PopupBase.prototype.onBeforeShow=function(){return this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)};goog.ui.PopupBase.prototype.onShow_=function(){this.lastShowTime_=goog.now();this.lastHideTime_=-1;this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)};
goog.ui.PopupBase.prototype.onBeforeHide_=function(b){return this.dispatchEvent({type:goog.ui.PopupBase.EventType.BEFORE_HIDE,target:b})};goog.ui.PopupBase.prototype.onHide_=function(b){this.dispatchEvent({type:goog.ui.PopupBase.EventType.HIDE,target:b})};goog.ui.PopupBase.prototype.onDocumentMouseDown_=function(b){b=b.target;goog.dom.contains(this.element_,b)||(this.autoHideRegion_&&!goog.dom.contains(this.autoHideRegion_,b)||this.shouldDebounce_())||this.hide_(b)};
goog.ui.PopupBase.prototype.onDocumentKeyDown_=function(b){b.keyCode==goog.events.KeyCodes.ESC&&this.hide_(b.target)&&(b.preventDefault(),b.stopPropagation())};goog.ui.PopupBase.prototype.onDocumentBlur_=function(b){if(this.enableCrossIframeDismissal_){var c=goog.dom.getOwnerDocument(this.element_);if("undefined"!=typeof document.activeElement){if(b=c.activeElement,!b||goog.dom.contains(this.element_,b)||"BODY"==b.tagName)return}else if(b.target!=c)return;this.shouldDebounce_()||this.hide_()}};
goog.ui.PopupBase.prototype.shouldDebounce_=function(){return goog.now()-this.lastShowTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};goog.ui.PopupBase.prototype.disposeInternal=function(){goog.ui.PopupBase.superClass_.disposeInternal.call(this);this.handler_.dispose();goog.dispose(this.showTransition_);goog.dispose(this.hideTransition_);delete this.element_;delete this.handler_};goog.positioning.ClientPosition=function(b,c){this.coordinate=b instanceof goog.math.Coordinate?b:new goog.math.Coordinate(b,c)};goog.inherits(goog.positioning.ClientPosition,goog.positioning.AbstractPosition);
goog.positioning.ClientPosition.prototype.reposition=function(b,c,d,e){goog.asserts.assert(b);var f=goog.style.getViewportPageOffset(goog.dom.getOwnerDocument(b)),g=this.coordinate.x+f.x,f=this.coordinate.y+f.y,h=goog.positioning.getOffsetParentPageOffset(b),g=g-h.x,f=f-h.y;goog.positioning.positionAtCoordinate(new goog.math.Coordinate(g,f),b,c,d,null,null,e)};goog.positioning.ViewportClientPosition=function(b,c){goog.positioning.ClientPosition.call(this,b,c)};goog.inherits(goog.positioning.ViewportClientPosition,goog.positioning.ClientPosition);goog.positioning.ViewportClientPosition.prototype.lastResortOverflow_=0;goog.positioning.ViewportClientPosition.prototype.setLastResortOverflow=function(b){this.lastResortOverflow_=b};
goog.positioning.ViewportClientPosition.prototype.reposition=function(b,c,d,e){var f=goog.style.getClientViewportElement(b),f=goog.style.getVisibleRectForElement(f),g=goog.dom.getDomHelper(b).getDocumentScrollElement(),g=new goog.math.Coordinate(this.coordinate.x+g.scrollLeft,this.coordinate.y+g.scrollTop),h=goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,k=c,m=goog.positioning.positionAtCoordinate(g,b,k,d,f,h,e);if(0!=(m&goog.positioning.OverflowStatus.FAILED)){if(m&goog.positioning.OverflowStatus.FAILED_LEFT||
m&goog.positioning.OverflowStatus.FAILED_RIGHT)k=goog.positioning.flipCornerHorizontal(k);if(m&goog.positioning.OverflowStatus.FAILED_TOP||m&goog.positioning.OverflowStatus.FAILED_BOTTOM)k=goog.positioning.flipCornerVertical(k);m=goog.positioning.positionAtCoordinate(g,b,k,d,f,h,e);0!=(m&goog.positioning.OverflowStatus.FAILED)&&goog.positioning.positionAtCoordinate(g,b,c,d,f,this.lastResortOverflow_,e)}};goog.positioning.AbsolutePosition=function(b,c){this.coordinate=b instanceof goog.math.Coordinate?b:new goog.math.Coordinate(b,c)};goog.inherits(goog.positioning.AbsolutePosition,goog.positioning.AbstractPosition);goog.positioning.AbsolutePosition.prototype.reposition=function(b,c,d,e){goog.positioning.positionAtCoordinate(this.coordinate,b,c,d,null,null,e)};goog.positioning.AnchoredViewportPosition=function(b,c,d,e){goog.positioning.AnchoredPosition.call(this,b,c);this.lastResortOverflow_=d?goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y:goog.positioning.Overflow.IGNORE;this.overflowConstraint_=e||void 0};goog.inherits(goog.positioning.AnchoredViewportPosition,goog.positioning.AnchoredPosition);goog.positioning.AnchoredViewportPosition.prototype.getOverflowConstraint=function(){return this.overflowConstraint_};
goog.positioning.AnchoredViewportPosition.prototype.setOverflowConstraint=function(b){this.overflowConstraint_=b};goog.positioning.AnchoredViewportPosition.prototype.getLastResortOverflow=function(){return this.lastResortOverflow_};goog.positioning.AnchoredViewportPosition.prototype.setLastResortOverflow=function(b){this.lastResortOverflow_=b};
goog.positioning.AnchoredViewportPosition.prototype.reposition=function(b,c,d,e){var f=goog.positioning.positionAtAnchor(this.element,this.corner,b,c,null,d,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,e,this.overflowConstraint_);if(f&goog.positioning.OverflowStatus.FAILED){var g=this.adjustCorner(f,this.corner);c=this.adjustCorner(f,c);f=goog.positioning.positionAtAnchor(this.element,g,b,c,null,d,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,e,this.overflowConstraint_);
f&goog.positioning.OverflowStatus.FAILED&&(g=this.adjustCorner(f,g),c=this.adjustCorner(f,c),goog.positioning.positionAtAnchor(this.element,g,b,c,null,d,this.getLastResortOverflow(),e,this.overflowConstraint_))}};goog.positioning.AnchoredViewportPosition.prototype.adjustCorner=function(b,c){b&goog.positioning.OverflowStatus.FAILED_HORIZONTAL&&(c=goog.positioning.flipCornerHorizontal(c));b&goog.positioning.OverflowStatus.FAILED_VERTICAL&&(c=goog.positioning.flipCornerVertical(c));return c};goog.ui.Popup=function(b,c){this.popupCorner_=goog.positioning.Corner.TOP_START;this.position_=c||void 0;goog.ui.PopupBase.call(this,b)};goog.inherits(goog.ui.Popup,goog.ui.PopupBase);goog.ui.Popup.Corner=goog.positioning.Corner;goog.ui.Popup.Overflow=goog.positioning.Overflow;goog.ui.Popup.prototype.getPinnedCorner=function(){return this.popupCorner_};goog.ui.Popup.prototype.setPinnedCorner=function(b){this.popupCorner_=b;this.isVisible()&&this.reposition()};
goog.ui.Popup.prototype.getPosition=function(){return this.position_||null};goog.ui.Popup.prototype.setPosition=function(b){this.position_=b||void 0;this.isVisible()&&this.reposition()};goog.ui.Popup.prototype.getMargin=function(){return this.margin_||null};goog.ui.Popup.prototype.setMargin=function(b,c,d,e){this.margin_=null==b||b instanceof goog.math.Box?b:new goog.math.Box(b,c,d,e);this.isVisible()&&this.reposition()};
goog.ui.Popup.prototype.reposition=function(){if(this.position_){var b=!this.isVisible()&&this.getType()!=goog.ui.PopupBase.Type.MOVE_OFFSCREEN,c=this.getElement();b&&(c.style.visibility="hidden",goog.style.setElementShown(c,!0));this.position_.reposition(c,this.popupCorner_,this.margin_);b&&goog.style.setElementShown(c,!1)}};goog.ui.Popup.AnchoredPosition=goog.positioning.AnchoredPosition;goog.ui.Popup.AnchoredViewPortPosition=goog.positioning.AnchoredViewportPosition;
goog.ui.Popup.AbsolutePosition=goog.positioning.AbsolutePosition;goog.ui.Popup.ViewPortPosition=goog.positioning.ViewportPosition;goog.ui.Popup.ClientPosition=goog.positioning.ClientPosition;goog.ui.Popup.ViewPortClientPosition=goog.positioning.ViewportClientPosition;goog.structs.Collection=function(){};goog.structs.getCount=function(b){return"function"==typeof b.getCount?b.getCount():goog.isArrayLike(b)||goog.isString(b)?b.length:goog.object.getCount(b)};goog.structs.getValues=function(b){if("function"==typeof b.getValues)return b.getValues();if(goog.isString(b))return b.split("");if(goog.isArrayLike(b)){for(var c=[],d=b.length,e=0;e<d;e++)c.push(b[e]);return c}return goog.object.getValues(b)};
goog.structs.getKeys=function(b){if("function"==typeof b.getKeys)return b.getKeys();if("function"!=typeof b.getValues){if(goog.isArrayLike(b)||goog.isString(b)){var c=[];b=b.length;for(var d=0;d<b;d++)c.push(d);return c}return goog.object.getKeys(b)}};goog.structs.contains=function(b,c){return"function"==typeof b.contains?b.contains(c):"function"==typeof b.containsValue?b.containsValue(c):goog.isArrayLike(b)||goog.isString(b)?goog.array.contains(b,c):goog.object.containsValue(b,c)};
goog.structs.isEmpty=function(b){return"function"==typeof b.isEmpty?b.isEmpty():goog.isArrayLike(b)||goog.isString(b)?goog.array.isEmpty(b):goog.object.isEmpty(b)};goog.structs.clear=function(b){"function"==typeof b.clear?b.clear():goog.isArrayLike(b)?goog.array.clear(b):goog.object.clear(b)};
goog.structs.forEach=function(b,c,d){if("function"==typeof b.forEach)b.forEach(c,d);else if(goog.isArrayLike(b)||goog.isString(b))goog.array.forEach(b,c,d);else for(var e=goog.structs.getKeys(b),f=goog.structs.getValues(b),g=f.length,h=0;h<g;h++)c.call(d,f[h],e&&e[h],b)};
goog.structs.filter=function(b,c,d){if("function"==typeof b.filter)return b.filter(c,d);if(goog.isArrayLike(b)||goog.isString(b))return goog.array.filter(b,c,d);var e,f=goog.structs.getKeys(b),g=goog.structs.getValues(b),h=g.length;if(f){e={};for(var k=0;k<h;k++)c.call(d,g[k],f[k],b)&&(e[f[k]]=g[k])}else for(e=[],k=0;k<h;k++)c.call(d,g[k],void 0,b)&&e.push(g[k]);return e};
goog.structs.map=function(b,c,d){if("function"==typeof b.map)return b.map(c,d);if(goog.isArrayLike(b)||goog.isString(b))return goog.array.map(b,c,d);var e,f=goog.structs.getKeys(b),g=goog.structs.getValues(b),h=g.length;if(f){e={};for(var k=0;k<h;k++)e[f[k]]=c.call(d,g[k],f[k],b)}else for(e=[],k=0;k<h;k++)e[k]=c.call(d,g[k],void 0,b);return e};
goog.structs.some=function(b,c,d){if("function"==typeof b.some)return b.some(c,d);if(goog.isArrayLike(b)||goog.isString(b))return goog.array.some(b,c,d);for(var e=goog.structs.getKeys(b),f=goog.structs.getValues(b),g=f.length,h=0;h<g;h++)if(c.call(d,f[h],e&&e[h],b))return!0;return!1};
goog.structs.every=function(b,c,d){if("function"==typeof b.every)return b.every(c,d);if(goog.isArrayLike(b)||goog.isString(b))return goog.array.every(b,c,d);for(var e=goog.structs.getKeys(b),f=goog.structs.getValues(b),g=f.length,h=0;h<g;h++)if(!c.call(d,f[h],e&&e[h],b))return!1;return!0};goog.structs.Set=function(b){this.map_=new goog.structs.Map;b&&this.addAll(b)};goog.structs.Set.getKey_=function(b){var c=typeof b;return"object"==c&&b||"function"==c?"o"+goog.getUid(b):c.substr(0,1)+b};goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()};goog.structs.Set.prototype.add=function(b){this.map_.set(goog.structs.Set.getKey_(b),b)};goog.structs.Set.prototype.addAll=function(b){b=goog.structs.getValues(b);for(var c=b.length,d=0;d<c;d++)this.add(b[d])};
goog.structs.Set.prototype.removeAll=function(b){b=goog.structs.getValues(b);for(var c=b.length,d=0;d<c;d++)this.remove(b[d])};goog.structs.Set.prototype.remove=function(b){return this.map_.remove(goog.structs.Set.getKey_(b))};goog.structs.Set.prototype.clear=function(){this.map_.clear()};goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()};goog.structs.Set.prototype.contains=function(b){return this.map_.containsKey(goog.structs.Set.getKey_(b))};
goog.structs.Set.prototype.containsAll=function(b){return goog.structs.every(b,this.contains,this)};goog.structs.Set.prototype.intersection=function(b){var c=new goog.structs.Set;b=goog.structs.getValues(b);for(var d=0;d<b.length;d++){var e=b[d];this.contains(e)&&c.add(e)}return c};goog.structs.Set.prototype.difference=function(b){var c=this.clone();c.removeAll(b);return c};goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()};goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)};
goog.structs.Set.prototype.equals=function(b){return this.getCount()==goog.structs.getCount(b)&&this.isSubsetOf(b)};goog.structs.Set.prototype.isSubsetOf=function(b){var c=goog.structs.getCount(b);if(this.getCount()>c)return!1;!(b instanceof goog.structs.Set)&&5<c&&(b=new goog.structs.Set(b));return goog.structs.every(this,function(c){return goog.structs.contains(b,c)})};goog.structs.Set.prototype.__iterator__=function(b){return this.map_.__iterator__(!1)};goog.ui.Tooltip=function(b,c,d){this.dom_=d||(b?goog.dom.getDomHelper(goog.dom.getElement(b)):goog.dom.getDomHelper());goog.ui.Popup.call(this,this.dom_.createDom("div",{style:"position:absolute;display:none;"}));this.cursorPosition=new goog.math.Coordinate(1,1);this.elements_=new goog.structs.Set;b&&this.attach(b);null!=c&&this.setText(c)};goog.inherits(goog.ui.Tooltip,goog.ui.Popup);goog.ui.Tooltip.activeInstances_=[];goog.ui.Tooltip.prototype.activeEl_=null;
goog.ui.Tooltip.prototype.className="goog-tooltip";goog.ui.Tooltip.prototype.showDelayMs_=500;goog.ui.Tooltip.prototype.hideDelayMs_=0;goog.ui.Tooltip.State={INACTIVE:0,WAITING_TO_SHOW:1,SHOWING:2,WAITING_TO_HIDE:3,UPDATING:4};goog.ui.Tooltip.Activation={CURSOR:0,FOCUS:1};goog.ui.Tooltip.prototype.getDomHelper=function(){return this.dom_};goog.ui.Tooltip.prototype.getChildTooltip=function(){return this.childTooltip_};
goog.ui.Tooltip.prototype.attach=function(b){b=goog.dom.getElement(b);this.elements_.add(b);goog.events.listen(b,goog.events.EventType.MOUSEOVER,this.handleMouseOver,!1,this);goog.events.listen(b,goog.events.EventType.MOUSEOUT,this.handleMouseOutAndBlur,!1,this);goog.events.listen(b,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this);goog.events.listen(b,goog.events.EventType.FOCUS,this.handleFocus,!1,this);goog.events.listen(b,goog.events.EventType.BLUR,this.handleMouseOutAndBlur,!1,this)};
goog.ui.Tooltip.prototype.detach=function(b){if(b)b=goog.dom.getElement(b),this.detachElement_(b),this.elements_.remove(b);else{for(var c=this.elements_.getValues(),d=0;b=c[d];d++)this.detachElement_(b);this.elements_.clear()}};
goog.ui.Tooltip.prototype.detachElement_=function(b){goog.events.unlisten(b,goog.events.EventType.MOUSEOVER,this.handleMouseOver,!1,this);goog.events.unlisten(b,goog.events.EventType.MOUSEOUT,this.handleMouseOutAndBlur,!1,this);goog.events.unlisten(b,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this);goog.events.unlisten(b,goog.events.EventType.FOCUS,this.handleFocus,!1,this);goog.events.unlisten(b,goog.events.EventType.BLUR,this.handleMouseOutAndBlur,!1,this)};
goog.ui.Tooltip.prototype.setShowDelayMs=function(b){this.showDelayMs_=b};goog.ui.Tooltip.prototype.getShowDelayMs=function(){return this.showDelayMs_};goog.ui.Tooltip.prototype.setHideDelayMs=function(b){this.hideDelayMs_=b};goog.ui.Tooltip.prototype.getHideDelayMs=function(){return this.hideDelayMs_};goog.ui.Tooltip.prototype.setText=function(b){goog.dom.setTextContent(this.getElement(),b)};goog.ui.Tooltip.prototype.setHtml=function(b){this.getElement().innerHTML=b};
goog.ui.Tooltip.prototype.setElement=function(b){var c=this.getElement();c&&goog.dom.removeNode(c);goog.ui.Tooltip.superClass_.setElement.call(this,b);b&&(c=this.dom_.getDocument().body,c.insertBefore(b,c.lastChild))};goog.ui.Tooltip.prototype.getText=function(){return goog.dom.getTextContent(this.getElement())};goog.ui.Tooltip.prototype.getHtml=function(){return this.getElement().innerHTML};
goog.ui.Tooltip.prototype.getState=function(){return this.showTimer?this.isVisible()?goog.ui.Tooltip.State.UPDATING:goog.ui.Tooltip.State.WAITING_TO_SHOW:this.hideTimer?goog.ui.Tooltip.State.WAITING_TO_HIDE:this.isVisible()?goog.ui.Tooltip.State.SHOWING:goog.ui.Tooltip.State.INACTIVE};goog.ui.Tooltip.prototype.setRequireInteraction=function(b){this.requireInteraction_=b};
goog.ui.Tooltip.prototype.isCoordinateInTooltip=function(b){if(!this.isVisible())return!1;var c=goog.style.getPageOffset(this.getElement()),d=goog.style.getSize(this.getElement());return c.x<=b.x&&b.x<=c.x+d.width&&c.y<=b.y&&b.y<=c.y+d.height};
goog.ui.Tooltip.prototype.onBeforeShow=function(){if(!goog.ui.PopupBase.prototype.onBeforeShow.call(this))return!1;if(this.anchor)for(var b,c=0;b=goog.ui.Tooltip.activeInstances_[c];c++)goog.dom.contains(b.getElement(),this.anchor)||b.setVisible(!1);goog.array.insert(goog.ui.Tooltip.activeInstances_,this);b=this.getElement();b.className=this.className;this.clearHideTimer();goog.events.listen(b,goog.events.EventType.MOUSEOVER,this.handleTooltipMouseOver,!1,this);goog.events.listen(b,goog.events.EventType.MOUSEOUT,
this.handleTooltipMouseOut,!1,this);this.clearShowTimer();return!0};
goog.ui.Tooltip.prototype.onHide_=function(){goog.array.remove(goog.ui.Tooltip.activeInstances_,this);for(var b=this.getElement(),c,d=0;c=goog.ui.Tooltip.activeInstances_[d];d++)c.anchor&&goog.dom.contains(b,c.anchor)&&c.setVisible(!1);this.parentTooltip_&&this.parentTooltip_.startHideTimer();goog.events.unlisten(b,goog.events.EventType.MOUSEOVER,this.handleTooltipMouseOver,!1,this);goog.events.unlisten(b,goog.events.EventType.MOUSEOUT,this.handleTooltipMouseOut,!1,this);this.anchor=void 0;this.getState()==
goog.ui.Tooltip.State.INACTIVE&&(this.seenInteraction_=!1);goog.ui.PopupBase.prototype.onHide_.call(this)};goog.ui.Tooltip.prototype.maybeShow=function(b,c){this.anchor==b&&this.elements_.contains(this.anchor)&&(this.seenInteraction_||!this.requireInteraction_?(this.setVisible(!1),this.isVisible()||this.positionAndShow_(b,c)):this.anchor=void 0);this.showTimer=void 0};goog.ui.Tooltip.prototype.getElements=function(){return this.elements_};goog.ui.Tooltip.prototype.getActiveElement=function(){return this.activeEl_};
goog.ui.Tooltip.prototype.setActiveElement=function(b){this.activeEl_=b};goog.ui.Tooltip.prototype.showForElement=function(b,c){this.attach(b);this.activeEl_=b;this.positionAndShow_(b,c)};goog.ui.Tooltip.prototype.positionAndShow_=function(b,c){this.anchor=b;this.setPosition(c||this.getPositioningStrategy(goog.ui.Tooltip.Activation.CURSOR));this.setVisible(!0)};
goog.ui.Tooltip.prototype.maybeHide=function(b){this.hideTimer=void 0;b==this.anchor&&(null!=this.activeEl_&&(this.activeEl_==this.getElement()||this.elements_.contains(this.activeEl_))||this.hasActiveChild()||this.setVisible(!1))};goog.ui.Tooltip.prototype.hasActiveChild=function(){return!(!this.childTooltip_||!this.childTooltip_.activeEl_)};
goog.ui.Tooltip.prototype.saveCursorPosition_=function(b){var c=this.dom_.getDocumentScroll();this.cursorPosition.x=b.clientX+c.x;this.cursorPosition.y=b.clientY+c.y};goog.ui.Tooltip.prototype.handleMouseOver=function(b){var c=this.getAnchorFromElement(b.target);this.activeEl_=c;this.clearHideTimer();c!=this.anchor&&(this.anchor=c,this.startShowTimer(c),this.checkForParentTooltip_(),this.saveCursorPosition_(b))};
goog.ui.Tooltip.prototype.getAnchorFromElement=function(b){try{for(;b&&!this.elements_.contains(b);)b=b.parentNode;return b}catch(c){return null}};goog.ui.Tooltip.prototype.handleMouseMove=function(b){this.saveCursorPosition_(b);this.seenInteraction_=!0};
goog.ui.Tooltip.prototype.handleFocus=function(b){this.activeEl_=b=this.getAnchorFromElement(b.target);this.seenInteraction_=!0;if(this.anchor!=b){this.anchor=b;var c=this.getPositioningStrategy(goog.ui.Tooltip.Activation.FOCUS);this.clearHideTimer();this.startShowTimer(b,c);this.checkForParentTooltip_()}};goog.ui.Tooltip.prototype.getPositioningStrategy=function(b){return b==goog.ui.Tooltip.Activation.CURSOR?(b=this.cursorPosition.clone(),new goog.ui.Tooltip.CursorTooltipPosition(b)):new goog.ui.Tooltip.ElementTooltipPosition(this.activeEl_)};
goog.ui.Tooltip.prototype.checkForParentTooltip_=function(){if(this.anchor)for(var b,c=0;b=goog.ui.Tooltip.activeInstances_[c];c++)goog.dom.contains(b.getElement(),this.anchor)&&(b.childTooltip_=this,this.parentTooltip_=b)};
goog.ui.Tooltip.prototype.handleMouseOutAndBlur=function(b){var c=this.getAnchorFromElement(b.target),d=this.getAnchorFromElement(b.relatedTarget);c!=d&&(c==this.activeEl_&&(this.activeEl_=null),this.clearShowTimer(),this.seenInteraction_=!1,!this.isVisible()||b.relatedTarget&&goog.dom.contains(this.getElement(),b.relatedTarget)?this.anchor=void 0:this.startHideTimer())};
goog.ui.Tooltip.prototype.handleTooltipMouseOver=function(b){b=this.getElement();this.activeEl_!=b&&(this.clearHideTimer(),this.activeEl_=b)};goog.ui.Tooltip.prototype.handleTooltipMouseOut=function(b){var c=this.getElement();this.activeEl_!=c||b.relatedTarget&&goog.dom.contains(c,b.relatedTarget)||(this.activeEl_=null,this.startHideTimer())};goog.ui.Tooltip.prototype.startShowTimer=function(b,c){this.showTimer||(this.showTimer=goog.Timer.callOnce(goog.bind(this.maybeShow,this,b,c),this.showDelayMs_))};
goog.ui.Tooltip.prototype.clearShowTimer=function(){this.showTimer&&(goog.Timer.clear(this.showTimer),this.showTimer=void 0)};goog.ui.Tooltip.prototype.startHideTimer=function(){this.getState()==goog.ui.Tooltip.State.SHOWING&&(this.hideTimer=goog.Timer.callOnce(goog.bind(this.maybeHide,this,this.anchor),this.getHideDelayMs()))};goog.ui.Tooltip.prototype.clearHideTimer=function(){this.hideTimer&&(goog.Timer.clear(this.hideTimer),this.hideTimer=void 0)};
goog.ui.Tooltip.prototype.disposeInternal=function(){this.setVisible(!1);this.clearShowTimer();this.detach();this.getElement()&&goog.dom.removeNode(this.getElement());this.activeEl_=null;delete this.dom_;goog.ui.Tooltip.superClass_.disposeInternal.call(this)};goog.ui.Tooltip.CursorTooltipPosition=function(b,c){goog.positioning.ViewportPosition.call(this,b,c)};goog.inherits(goog.ui.Tooltip.CursorTooltipPosition,goog.positioning.ViewportPosition);
goog.ui.Tooltip.CursorTooltipPosition.prototype.reposition=function(b,c,d){c=goog.style.getClientViewportElement(b);c=goog.style.getVisibleRectForElement(c);d=d?new goog.math.Box(d.top+10,d.right,d.bottom,d.left+10):new goog.math.Box(10,0,0,10);goog.positioning.positionAtCoordinate(this.coordinate,b,goog.positioning.Corner.TOP_START,d,c,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y)&goog.positioning.OverflowStatus.FAILED&&goog.positioning.positionAtCoordinate(this.coordinate,
b,goog.positioning.Corner.TOP_START,d,c,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y)};goog.ui.Tooltip.ElementTooltipPosition=function(b){goog.positioning.AnchoredPosition.call(this,b,goog.positioning.Corner.BOTTOM_RIGHT)};goog.inherits(goog.ui.Tooltip.ElementTooltipPosition,goog.positioning.AnchoredPosition);
goog.ui.Tooltip.ElementTooltipPosition.prototype.reposition=function(b,c,d){var e=new goog.math.Coordinate(10,0);goog.positioning.positionAtAnchor(this.element,this.corner,b,c,e,d,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y)&goog.positioning.OverflowStatus.FAILED&&goog.positioning.positionAtAnchor(this.element,goog.positioning.Corner.TOP_RIGHT,b,goog.positioning.Corner.BOTTOM_LEFT,e,d,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y)};X.caption=function(b,c,d,e){if(!goog.isDefAndNotNull(b))throw Error("No valid parent element.");if(!goog.isNumber(c)||!goog.isNumber(d))throw Error("Invalid coordinates.");if(!(goog.isDefAndNotNull(e)&&e instanceof X.interactor))throw Error("Invalid interactor.");goog.ui.Tooltip.call(this);this._classname="caption";this._parent=b;this._x=c;this._y=d;this._interactor=e;this._style=null;this._css=[];b=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";b+="  border: 1px solid infotext;\n";b+=
"  padding: 1px;\n";b+="  font-family: sans-serif;\n";b+="}";this._css=[b];goog.events.listenOnce(e,X.event.events.HOVER_END,this.kill.bind(this));this.init_()};goog.inherits(X.caption,goog.ui.Tooltip);
X.caption.prototype.init_=function(){var b=goog.style.getComputedStyle(this._parent,"position");if("static"==b||""==b)this._parent.style.position="relative";var b=goog.dom.getDocument().getElementsByTagName("head")[0],c=goog.dom.createDom("style");c.type="text/css";c.media="screen";var d=goog.dom.createTextNode(this._css[0]);goog.dom.appendChild(b,c);goog.dom.appendChild(c,d);this._style=c;this.setPosition(new goog.positioning.ViewportPosition(this._x,this._y));this.setVisible(!0);this.attach(this._parent);
this.getElement().classList.add("x-tooltip")};X.caption.prototype.kill=function(){this.setVisible(!1);this._style&&goog.dom.removeNode(this._style);this.getElement()&&goog.dom.removeNode(this.getElement());this._style=null};X.renderer3D=function(){X.renderer.call(this);this._classname="renderer3D";this._maxZ=this._minZ=this._maxY=this._minY=this._maxX=this._minX=this._shaderProgram=this._shaders=null;this._center=[0,0,0];this._pickFrameBuffer=null;this._attributePointers=new goog.structs.Map;this._uniformLocations=new goog.structs.Map;this._vertexBuffers=new goog.structs.Map;this._normalBuffers=new goog.structs.Map;this._colorBuffers=new goog.structs.Map;this._scalarBuffers=new goog.structs.Map;this._texturePositionBuffers=
new goog.structs.Map;this._textures=new goog.structs.Map;this._config={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1}};goog.inherits(X.renderer3D,X.renderer);X.renderer3D.prototype.__defineGetter__("config",function(){return this._config});X.renderer3D.prototype.resetBoundingBox=function(){this._maxZ=this._minZ=this._maxY=this._minY=this._maxX=this._minX=null;this._center=[0,0,0]};
X.renderer3D.prototype.onHover_=function(b){X.renderer3D.superClass_.onHover_.call(this,b);this.showCaption_(b._x,b._y)};
X.renderer3D.prototype.init=function(){X.renderer3D.superClass_.init.call(this,"experimental-webgl");try{if(this._context.viewport(0,0,this._width,this._height),this._context.clearColor(0,0,0,0),this._context.enable(this._context.BLEND),this._context.blendEquation(this._context.FUNC_ADD),this._context.blendFunc(this._context.SRC_ALPHA,this._context.ONE_MINUS_SRC_ALPHA),this._context.enable(this._context.DEPTH_TEST),this._context.depthFunc(this._context.LEQUAL),this._context.clear(this._context.COLOR_BUFFER_BIT|
this._context.DEPTH_BUFFER_BIT),this._config.PICKING_ENABLED){var b=this._context.createFramebuffer(),c=this._context.createRenderbuffer(),d=this._context.createTexture();this._context.bindTexture(this._context.TEXTURE_2D,d);this._context.texImage2D(this._context.TEXTURE_2D,0,this._context.RGB,this._width,this._height,0,this._context.RGB,this._context.UNSIGNED_BYTE,null);this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_WRAP_S,this._context.CLAMP_TO_EDGE);this._context.texParameteri(this._context.TEXTURE_2D,
this._context.TEXTURE_WRAP_T,this._context.CLAMP_TO_EDGE);this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MAG_FILTER,this._context.NEAREST);this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MIN_FILTER,this._context.NEAREST);this._context.bindFramebuffer(this._context.FRAMEBUFFER,b);this._context.bindRenderbuffer(this._context.RENDERBUFFER,c);this._context.renderbufferStorage(this._context.RENDERBUFFER,this._context.DEPTH_COMPONENT16,this._width,
this._height);this._context.bindRenderbuffer(this._context.RENDERBUFFER,null);this._context.framebufferTexture2D(this._context.FRAMEBUFFER,this._context.COLOR_ATTACHMENT0,this._context.TEXTURE_2D,d,0);this._context.framebufferRenderbuffer(this._context.FRAMEBUFFER,this._context.DEPTH_ATTACHMENT,this._context.RENDERBUFFER,c);this._context.bindFramebuffer(this._context.FRAMEBUFFER,null);this._pickFrameBuffer=b}}catch(e){throw Error("Exception while accessing GL Context!\n"+e);}b=new X.shaders;this.addShaders(b)};
X.renderer3D.prototype.addShaders=function(b){if(!goog.isDefAndNotNull(this._canvas)||!goog.isDefAndNotNull(this._context)||!goog.isDefAndNotNull(this._camera))throw Error("Renderer was not initialized properly.");if(!(goog.isDefAndNotNull(b)&&b instanceof X.shaders))throw Error("Could not add shaders.");b.validate();var c=this._context.createShader(this._context.FRAGMENT_SHADER),d=this._context.createShader(this._context.VERTEX_SHADER);this._context.shaderSource(c,b.fragment());this._context.shaderSource(d,
b.vertex());this._context.compileShader(c);this._context.compileShader(d);if(!this._context.getShaderParameter(c,this._context.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+this._context.getShaderInfoLog(c));if(!this._context.getShaderParameter(d,this._context.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+this._context.getShaderInfoLog(d));var e=this._context.createProgram();this._context.attachShader(e,d);this._context.attachShader(e,c);this._context.linkProgram(e);
if(!this._context.getProgramParameter(e,this._context.LINK_STATUS))throw Error("Could not create shader program!\n"+this._context.getShaderInfoLog(c)+"\n"+this._context.getShaderInfoLog(d)+"\n"+this._context.getProgramInfoLog(e));this._context.useProgram(e);this._shaderProgram=e;Object.keys(X.shaders.attributes).forEach(function(b){b=X.shaders.attributes[b];this._attributePointers.set(b,this._context.getAttribLocation(this._shaderProgram,b));this._context.enableVertexAttribArray(this._attributePointers.get(b))}.bind(this));
Object.keys(X.shaders.uniforms).forEach(function(b){b=X.shaders.uniforms[b];this._uniformLocations.set(b,this._context.getUniformLocation(this._shaderProgram,b))}.bind(this));this._shaders=b};
X.renderer3D.prototype.update_=function(b){X.renderer3D.superClass_.update_.call(this,b);var c=!1;this.get(b._id)&&(c=!0);var d=b._id,e=b._points,f=b._normals,g=b._colors,h=b._texture,k=b._file,m=b._transform,p=b._colortable,n=b._labelmap,q=b._scalars;if(goog.isDefAndNotNull(n)&&goog.isDefAndNotNull(n._file)&&n._file._dirty)this.update_(n);else if(goog.isDefAndNotNull(n)&&n._dirty&&this.update_(n),goog.isDefAndNotNull(p)&&goog.isDefAndNotNull(p._file)&&p._file._dirty)this._loader.load(p,b);else if(goog.isDefAndNotNull(h)&&
goog.isDefAndNotNull(h._file)&&h._file._dirty)this._loader.load(h,b);else{if(goog.isDefAndNotNull(k)&&goog.isArray(k))if(goog.isDefAndNotNull(b.MRI)){if(b.MRI.loaded_files!=k.length||!b._dirty)return}else{c=0;d=k.length;for(c=0;c<d;c++)this._loader.load(k[c],b);return}else{if(goog.isDefAndNotNull(k)&&k._dirty){this._loader.load(b,b);return}if(goog.isDefAndNotNull(q)&&goog.isDefAndNotNull(q._file)&&q._file._dirty){this._loader.load(q,b);return}}if(0<b._children.length)for(k=b._children,p=k.length,
n=n=0;n<p;n++)this.update_(k[n]);if(e){for(k=0;this._locked;)k++,window.console.log("Possible thread lock avoided: "+k);this._locked=!0;p=b instanceof X.slice&&b._volume instanceof X.labelmap;c&&(goog.isDefAndNotNull(h)&&h._dirty)&&(k=this._texturePositionBuffers.get(d),goog.isDefAndNotNull(k)&&this._context.isBuffer(k._glBuffer)&&this._context.deleteBuffer(k._glBuffer));k=null;if(goog.isDefAndNotNull(h))if(!c||h._dirty){k=b._textureCoordinateMap;if(!goog.isDefAndNotNull(k))throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");
n=!1;h._rawData&&(n=!0);this._context.pixelStorei(this._context.UNPACK_FLIP_Y_WEBGL,n);n=this._context.createTexture();n.image=h._image;this._textures.set(h._id,n);this._context.bindTexture(this._context.TEXTURE_2D,n);h._rawData?(n=this._context.RGBA,h._grayscale&&(n=this._context.LUMINANCE,this._context.pixelStorei(this._context.UNPACK_ALIGNMENT,1)),this._context.texImage2D(this._context.TEXTURE_2D,0,n,h._rawDataWidth,h._rawDataHeight,0,n,this._context.UNSIGNED_BYTE,h._rawData)):this._context.texImage2D(this._context.TEXTURE_2D,
0,this._context.RGBA,this._context.RGBA,this._context.UNSIGNED_BYTE,n.image);this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_WRAP_S,this._context.CLAMP_TO_EDGE);this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_WRAP_T,this._context.CLAMP_TO_EDGE);p?(this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MAG_FILTER,this._context.NEAREST),this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MIN_FILTER,this._context.NEAREST)):
(this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MAG_FILTER,this._context.LINEAR),this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MIN_FILTER,this._context.LINEAR));this._context.bindTexture(this._context.TEXTURE_2D,null);n=this._context.createBuffer();this._context.bindBuffer(this._context.ARRAY_BUFFER,n);this._context.bufferData(this._context.ARRAY_BUFFER,new Float32Array(k),this._context.STATIC_DRAW);k=new X.buffer(n,k.length,2);h._dirty=!1}else k=
this._texturePositionBuffers.get(d);this._loader.addProgress(0.1);if(p)this._locked=!1,X.TIMERSTOP(this._classname+".update"),this._loader.addProgress(0.9);else{if(!c||e._dirty||m._dirty){p=m._matrix;h=X.matrix.multiplyByVector(p,e._minA,e._minB,e._minC);p=X.matrix.multiplyByVector(p,e._maxA,e._maxB,e._maxC);if(goog.isNull(this._minX)||h.x<this._minX)this._minX=h.x;if(goog.isNull(this._maxX)||p.x>this._maxX)this._maxX=p.x;if(goog.isNull(this._minY)||h.y<this._minY)this._minY=h.y;if(goog.isNull(this._maxY)||
p.y>this._maxY)this._maxY=p.y;if(goog.isNull(this._minZ)||h.z<this._minZ)this._minZ=h.z;if(goog.isNull(this._maxZ)||p.z>this._maxZ)this._maxZ=p.z;this._center=[(this._minX+this._maxX)/2,(this._minY+this._maxY)/2,(this._minZ+this._maxZ)/2];m._dirty=!1}c&&e._dirty&&(m=this._vertexBuffers.get(d),goog.isDefAndNotNull(m)&&this._context.isBuffer(m._glBuffer)&&this._context.deleteBuffer(m._glBuffer));m=null;!c||e._dirty?(m=this._context.createBuffer(),e.resize(),this._context.bindBuffer(this._context.ARRAY_BUFFER,
m),this._context.bufferData(this._context.ARRAY_BUFFER,e._triplets,this._context.STATIC_DRAW),m=new X.buffer(m,e.count,3),e._dirty=!1):m=this._vertexBuffers.get(d);this._loader.addProgress(0.3);c&&f._dirty&&(h=this._vertexBuffers.get(d),goog.isDefAndNotNull(h)&&this._context.isBuffer(h._glBuffer)&&this._context.deleteBuffer(h._glBuffer));h=null;!c||f._dirty?(h=this._context.createBuffer(),f.resize(),this._context.bindBuffer(this._context.ARRAY_BUFFER,h),this._context.bufferData(this._context.ARRAY_BUFFER,
f._triplets,this._context.STATIC_DRAW),h=new X.buffer(h,f.count,3),f._dirty=!1):h=this._normalBuffers.get(d);this._loader.addProgress(0.3);c&&(g&&g._dirty)&&(f=this._colorBuffers.get(d),goog.isDefAndNotNull(f)&&this._context.isBuffer(f._glBuffer)&&this._context.deleteBuffer(f._glBuffer));f=null;if(g)if(!c||g._dirty){if(g.length!=e.length)throw Error("Mismatch between points and point colors.");f=this._context.createBuffer();g.resize();this._context.bindBuffer(this._context.ARRAY_BUFFER,f);this._context.bufferData(this._context.ARRAY_BUFFER,
g._triplets,this._context.STATIC_DRAW);f=new X.buffer(f,g.count,3);g._dirty=!1}else f=this._colorBuffers.get(d);this._loader.addProgress(0.2);c&&(q&&q._dirty)&&(g=this._scalarBuffers.get(d),goog.isDefAndNotNull(g)&&this._context.isBuffer(g._glBuffer)&&this._context.deleteBuffer(g._glBuffer));g=null;if(q)if(g=q._glArray,!c||q._dirty){if(g.length!=e.length)throw Error("Mismatch between points and scalars.");e=this._context.createBuffer();this._context.bindBuffer(this._context.ARRAY_BUFFER,e);this._context.bufferData(this._context.ARRAY_BUFFER,
g,this._context.STATIC_DRAW);g=new X.buffer(e,g.length,3);q._dirty=!1}else g=this._scalarBuffers.get(d);this._loader.addProgress(0.1);c||this._objects.add(b);this._vertexBuffers.set(d,m);this._normalBuffers.set(d,h);this._colorBuffers.set(d,f);this._texturePositionBuffers.set(d,k);this._scalarBuffers.set(d,g);this._locked=b._dirty=!1}}else b._dirty=!1}};
X.renderer3D.prototype.showCaption_=function(b,c){var d=this.pick(b,c);if(d=this.get(d))if(d=d._caption){var e=goog.style.getClientPosition(this._container);(new X.caption(this._container,e.x+b+10,e.y+c+10,this._interactor)).setHtml(d)}};
X.renderer3D.prototype.orientVolume_=function(b){var c=X.matrix.multiplyByVector(this._camera._view,1,0,0),d=X.vector.distance(this._camera._position,c),c=X.matrix.multiplyByVector(this._camera._view,-1,0,0),e=X.vector.distance(this._camera._position,c),c=X.matrix.multiplyByVector(this._camera._view,0,1,0),f=X.vector.distance(this._camera._position,c),c=X.matrix.multiplyByVector(this._camera._view,0,-1,0),g=X.vector.distance(this._camera._position,c),c=X.matrix.multiplyByVector(this._camera._view,
0,0,1),h=X.vector.distance(this._camera._position,c),c=X.matrix.multiplyByVector(this._camera._view,0,0,-1),c=X.vector.distance(this._camera._position,c),k=Math.max(d,f,h,e,g,c);k==d||k==e?b.volumeRendering_(0):k==f||k==g?b.volumeRendering_(1):k!=h&&k!=c||b.volumeRendering_(2)};
X.renderer3D.prototype.distanceToEye_=function(b){var c=b._points._centroid;b=X.matrix.multiplyByVector(b._transform._matrix,c[0],c[1],c[2]);b=X.matrix.multiplyByVector(this._camera._view,b.x,b.y,b.z);b=X.vector.distance(this._camera._position,b);return Math.round(1E3*b)/1E3};
X.renderer3D.prototype.order_=function(){var b=!1,c=this._topLevelObjects,d;d=c.length-1;do{var e=c[d];if(e instanceof X.volume&&e._volumeRendering){var f=e._volumeRenderingDirection,b=e._slicesX._children;1==f?b=e._slicesY._children:2==f&&(b=e._slicesZ._children);var f=b.length,g=b[0];g._distance=this.distanceToEye_(g);g._opacity=e._opacity;var h=b[f-1];h._distance=this.distanceToEye_(h);h._opacity=e._opacity;for(var h=Math.round(1E3*((h._distance-g._distance)/f))/1E3,k=1,k=1;k<f-1;k++){var m=Math.round(1E3*
(g._distance+k*h))/1E3;b[k]._distance=m;b[k]._opacity=e._opacity}b=!0}}while(d--);c=this._objects.values();d=c.length-1;do e=c[d],!e._visible||(1==e._opacity||e instanceof X.slice)||(e._distance=this.distanceToEye_(e),b=!0);while(d--);b&&this._objects.sort()};
X.renderer3D.prototype.pick=function(b,c){if(this._config.PICKING_ENABLED){this.render_(!0,!1);var d=new Uint8Array(4);this._context.readPixels(b,this._height-c,1,1,this._context.RGBA,this._context.UNSIGNED_BYTE,d);return d[0]+255*d[1]+65025*d[2]}return-1};
X.renderer3D.prototype.render_=function(b,c){X.renderer3D.superClass_.render_.call(this,b,c);this._context.viewport(0,0,this._width,this._height);this._context.clear(this._context.COLOR_BUFFER_BIT|this._context.DEPTH_BUFFER_BIT);var d=this._objects.values(),e=d.length;if(0!=e){b?this._context.bindFramebuffer(this._context.FRAMEBUFFER,this._pickFrameBuffer):this._context.bindFramebuffer(this._context.FRAMEBUFFER,null);var f=this._camera._perspective,g=this._camera._view;this._context.uniformMatrix4fv(this._uniformLocations.get(X.shaders.uniforms.PERSPECTIVE),
!1,f);this._context.uniformMatrix4fv(this._uniformLocations.get(X.shaders.uniforms.VIEW),!1,g);f=this._center;this._context.uniform3f(this._uniformLocations.get(X.shaders.uniforms.CENTER),parseFloat(f[0]),parseFloat(f[1]),parseFloat(f[2]));g=this._topLevelObjects.length;for(f=0;f<g;++f){var h=this._topLevelObjects[f];h instanceof X.volume&&this.orientVolume_(h)}this._config.ORDERING_ENABLED&&this.order_();if(g=!b&&goog.isDefAndNotNull(c)&&c&&this._config.STATISTICS_ENABLED)var k=0,m=0,p=0,n=0;var f=
this._attributePointers,h=f.get(X.shaders.attributes.VERTEXPOSITION),q=f.get(X.shaders.attributes.VERTEXNORMAL),r=f.get(X.shaders.attributes.VERTEXCOLOR),s=f.get(X.shaders.attributes.VERTEXTEXTUREPOS),u=f.get(X.shaders.attributes.VERTEXSCALAR),f=this._uniformLocations,t=f.get(X.shaders.uniforms.USEPICKING),w=f.get(X.shaders.uniforms.USEOBJECTCOLOR),x=f.get(X.shaders.uniforms.OBJECTCOLOR),y=f.get(X.shaders.uniforms.USESCALARS),I=f.get(X.shaders.uniforms.SCALARSREPLACEMODE),z=f.get(X.shaders.uniforms.SCALARSMIN),
C=f.get(X.shaders.uniforms.SCALARSMAX),D=f.get(X.shaders.uniforms.SCALARSMINCOLOR),A=f.get(X.shaders.uniforms.SCALARSMAXCOLOR),E=f.get(X.shaders.uniforms.SCALARSINTERPOLATION),B=f.get(X.shaders.uniforms.SCALARSMINTHRESHOLD),F=f.get(X.shaders.uniforms.SCALARSMAXTHRESHOLD),G=f.get(X.shaders.uniforms.OBJECTOPACITY),H=f.get(X.shaders.uniforms.LABELMAPOPACITY),J=f.get(X.shaders.uniforms.LABELMAPCOLOR),v=f.get(X.shaders.uniforms.USETEXTURE),L=f.get(X.shaders.uniforms.USELABELMAPTEXTURE),N=f.get(X.shaders.uniforms.TEXTURESAMPLER),
P=f.get(X.shaders.uniforms.TEXTURESAMPLER2),S=f.get(X.shaders.uniforms.VOLUMELOWERTHRESHOLD),Y=f.get(X.shaders.uniforms.VOLUMEUPPERTHRESHOLD),Z=f.get(X.shaders.uniforms.VOLUMESCALARMIN),T=f.get(X.shaders.uniforms.VOLUMESCALARMAX),W=f.get(X.shaders.uniforms.VOLUMEWINDOWLOW),da=f.get(X.shaders.uniforms.VOLUMEWINDOWHIGH),ea=f.get(X.shaders.uniforms.VOLUMESCALARMINCOLOR),fa=f.get(X.shaders.uniforms.VOLUMESCALARMAXCOLOR),ca=f.get(X.shaders.uniforms.VOLUMETEXTURE),ga=f.get(X.shaders.uniforms.OBJECTTRANSFORM),
ha=f.get(X.shaders.uniforms.POINTSIZE),f=e;do{var K=d[e-f];if(K){var M=null;K instanceof X.slice&&K._volume&&(M=K._volume);if(K._visible&&(!M||M._visible)&&(!b||K._pickable)){var O=K._id,R=K._magicmode,Q=this._vertexBuffers.get(O),U=this._normalBuffers.get(O),aa=this._colorBuffers.get(O),V=this._scalarBuffers.get(O),ba=this._texturePositionBuffers.get(O);this._context.bindBuffer(this._context.ARRAY_BUFFER,Q._glBuffer);this._context.vertexAttribPointer(h,Q._itemSize,this._context.FLOAT,!1,0,0);this._context.bindBuffer(this._context.ARRAY_BUFFER,
U._glBuffer);this._context.vertexAttribPointer(q,U._itemSize,this._context.FLOAT,!1,0,0);b?this._context.uniform1i(t,!0):this._context.uniform1i(t,!1);!aa||b||R?(U=1,R&&!b&&(U=0),this._context.uniform1i(w,U),U=K._color,b&&(U=[Math.floor(O%65025%255)/255,Math.floor(O%65025/255)/255,Math.floor(O/65025)/255]),this._context.uniform3f(x,parseFloat(U[0]),parseFloat(U[1]),parseFloat(U[2])),this._context.vertexAttribPointer(r,Q._itemSize,this._context.FLOAT,!1,0,0)):(this._context.uniform1i(w,!1),this._context.bindBuffer(this._context.ARRAY_BUFFER,
aa._glBuffer),this._context.vertexAttribPointer(r,aa._itemSize,this._context.FLOAT,!1,0,0));!V||b||R?(this._context.uniform1i(y,!1),this._context.vertexAttribPointer(u,Q._itemSize,this._context.FLOAT,!1,0,0)):(this._context.uniform1i(y,!0),this._context.uniform1i(I,K._scalars._replaceMode),O=K._scalars._minColor,R=K._scalars._maxColor,this._context.uniform3f(D,parseFloat(O[0]),parseFloat(O[1]),parseFloat(O[2])),this._context.uniform3f(A,parseFloat(R[0]),parseFloat(R[1]),parseFloat(R[2])),this._context.uniform1f(B,
parseFloat(K._scalars._lowerThreshold)),this._context.uniform1f(F,parseFloat(K._scalars._upperThreshold)),this._context.uniform1f(z,parseFloat(K._scalars._min)),this._context.uniform1f(C,parseFloat(K._scalars._max)),this._context.uniform1i(E,parseInt(K._scalars._interpolation,10)),this._context.bindBuffer(this._context.ARRAY_BUFFER,V._glBuffer),this._context.vertexAttribPointer(u,V._itemSize,this._context.FLOAT,!1,0,0));this._context.uniform1f(G,parseFloat(K._opacity));K._texture&&ba&&!b?(this._context.uniform1i(v,
!0),this._context.activeTexture(this._context.TEXTURE0),this._context.bindTexture(this._context.TEXTURE_2D,this._textures.get(K._texture._id)),this._context.uniform1i(N,0),this._context.bindBuffer(this._context.ARRAY_BUFFER,ba._glBuffer),this._context.vertexAttribPointer(s,ba._itemSize,this._context.FLOAT,!1,0,0),this._context.uniform1i(ca,!1)):(this._context.uniform1i(v,!1),this._context.vertexAttribPointer(s,Q._itemSize,this._context.FLOAT,!1,0,0));M&&(this._context.uniform1i(ca,!0),this._context.uniform1f(S,
M._lowerThreshold),this._context.uniform1f(Y,M._upperThreshold),this._context.uniform1f(Z,M._min),this._context.uniform1f(T,M._max),O=M._minColor,R=M._maxColor,this._context.uniform3f(ea,parseFloat(O[0]),parseFloat(O[1]),parseFloat(O[2])),this._context.uniform3f(fa,parseFloat(R[0]),parseFloat(R[1]),parseFloat(R[2])),this._context.uniform1f(W,M._windowLow),this._context.uniform1f(da,M._windowHigh),V=M._labelmap,this._context.uniform1i(L,!1),M._volumeRendering?this._context.uniform1f(G,parseFloat(M._opacity)):
V&&V._visible&&(M=K._labelmap._id,this._context.uniform1i(L,!0),this._context.activeTexture(this._context.TEXTURE1),this._context.bindTexture(this._context.TEXTURE_2D,this._textures.get(M)),this._context.uniform1i(P,1),this._context.uniform1f(H,V._opacity),this._context.uniform4fv(J,V._showOnlyColor)));this._context.uniformMatrix4fv(ga,!1,K._transform._matrix);M=1;K._type==X.displayable.types.POINTS&&(M=K._pointsize);this._context.uniform1f(ha,M);M=-1;K._type==X.displayable.types.TRIANGLES?(M=this._context.TRIANGLES,
g&&(m+=Q._itemCount/3)):K._type==X.displayable.types.LINES?(this._context.lineWidth(K._linewidth),M=this._context.LINES,g&&(p+=Q._itemCount/2)):K._type==X.displayable.types.POINTS?(M=this._context.POINTS,g&&(n+=Q._itemCount)):K._type==X.displayable.types.TRIANGLE_STRIPS?(M=this._context.TRIANGLE_STRIP,g&&(m+=Q._itemCount/3)):K._type==X.displayable.types.POLYGONS&&(M=0==Q._itemCount%3?this._context.TRIANGLES:this._context.TRIANGLE_FAN,g&&(m+=Q._itemCount/3));g&&(k+=Q._itemCount);this._context.drawArrays(M,
0,Q._itemCount)}}}while(--f);g&&(d="Objects: "+e+" | "+("Vertices: "+k+" | "),d+="Triangles: "+Math.round(m)+" | ",d+="Lines: "+p+" | ",d+="Points: "+n+" | ",d+="Textures: "+this._textures.getCount(),window.console.log(d))}};
X.renderer3D.prototype.remove=function(b){X.renderer3D.superClass_.remove.call(this,b);if(0<b._children.length)for(var c=b._children,d=c.length,e=0,e=0;e<d;e++)this.remove(c[e]);c=b._id;return this.get(c)?(d=this._texturePositionBuffers.get(c),goog.isDefAndNotNull(d)&&this._context.isBuffer(d._glBuffer)&&this._context.deleteBuffer(d._glBuffer),b.texture&&(d=this._textures.get(b._texture._id))&&(this._context.deleteTexture(d),this._textures.remove(b._texture._id)),d=this._vertexBuffers.get(c),goog.isDefAndNotNull(d)&&
this._context.isBuffer(d._glBuffer)&&this._context.deleteBuffer(d._glBuffer),d=this._vertexBuffers.get(c),goog.isDefAndNotNull(d)&&this._context.isBuffer(d._glBuffer)&&this._context.deleteBuffer(d._glBuffer),d=this._colorBuffers.get(c),goog.isDefAndNotNull(d)&&this._context.isBuffer(d._glBuffer)&&this._context.deleteBuffer(d._glBuffer),d=this._scalarBuffers.get(c),goog.isDefAndNotNull(d)&&this._context.isBuffer(d._glBuffer)&&this._context.deleteBuffer(d._glBuffer),this._vertexBuffers.remove(c),this._normalBuffers.remove(c),
this._colorBuffers.remove(c),this._texturePositionBuffers.remove(c),this._scalarBuffers.remove(c),this._objects.remove(b),!0):!1};X.renderer3D.prototype.destroy=function(){this._shaders=null;delete this._shaders;this._context.clear(this._context.COLOR_BUFFER_BIT|this._context.DEPTH_BUFFER_BIT);X.renderer3D.superClass_.destroy.call(this)};goog.exportSymbol("X.renderer3D",X.renderer3D);goog.exportSymbol("X.renderer3D.prototype.init",X.renderer3D.prototype.init);
goog.exportSymbol("X.renderer3D.prototype.add",X.renderer3D.prototype.add);goog.exportSymbol("X.renderer3D.prototype.onShowtime",X.renderer3D.prototype.onShowtime);goog.exportSymbol("X.renderer3D.prototype.onRender",X.renderer3D.prototype.onRender);goog.exportSymbol("X.renderer3D.prototype.get",X.renderer3D.prototype.get);goog.exportSymbol("X.renderer3D.prototype.render",X.renderer3D.prototype.render);goog.exportSymbol("X.renderer3D.prototype.destroy",X.renderer3D.prototype.destroy);
goog.exportSymbol("X.renderer3D.prototype.remove",X.renderer3D.prototype.remove);goog.exportSymbol("X.renderer3D.prototype.resetBoundingBox",X.renderer3D.prototype.resetBoundingBox);goog.exportSymbol("X.renderer3D.prototype.resetViewAndRender",X.renderer3D.prototype.resetViewAndRender);goog.exportSymbol("X.renderer3D.prototype.pick",X.renderer3D.prototype.pick);ThreeDHolder.addObject={};
ThreeDHolder.prototype.addObject=function(b,c){var d=createXObject(b);filetype=this.SlicerFileHandler_.getFileObjectType(b);if(c){for(var e=c.color.split(" "),f=0;f<e.length;++f)e[f]=parseFloat(e[f],10);d.color=e;c.colorTable&&(console.log(b.split("/Data/")[0]+"/"+c.colorTable),d.labelmap.file=b,d.labelmap.colortable.file=b.split("/Data/")[0]+"/"+c.colorTable);d.opacity=parseFloat(c.opacity,10);d.visible="true"==c.visibility}this.currentObjects.push(d);this.addToMenu(d);this.PlaneHolder3.Renderer.add(d);
return d};goog.exportProperty(ThreeDHolder.prototype,"addObject",ThreeDHolder.prototype.addObject);FrameHolder.loadFrames={};FrameHolder.prototype.loadFrames=function(b){var c=this;if(!b)throw"Load Frames error: invalid method parameter -- you need frame paths!";var d=this.context.getImageData(0,0,this.canvas.width,this.canvas.height);this.frames=b;this.currFrame=Math.round(this.frames.length/2);this.drawImage_MaintainProportions(this.frames[this.currFrame],this.canvas,this.context);this.args.contrastThreshold=IP.thresholdAutoDetect(d.data);utils.array.forEach(this.onloadCallbacks,function(b){b(c.widget)})};
goog.exportProperty(FrameHolder.prototype,"loadFrames",FrameHolder.prototype.loadFrames);goog.ui.TabPane=function(b,c,d,e){goog.events.EventTarget.call(this);this.dom_=d||goog.dom.getDomHelper();this.el_=b;this.pages_=[];this.tabLocation_=c?c:goog.ui.TabPane.TabLocation.TOP;this.useMouseDown_=!!e;this.create_()};goog.inherits(goog.ui.TabPane,goog.events.EventTarget);goog.ui.TabPane.Events={CHANGE:"change"};goog.ui.TabPane.TabLocation={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3};
goog.ui.TabPane.prototype.create_=function(){this.el_.className="goog-tabpane";var b=this.getChildNodes_();this.elButtonBar_=this.dom_.createDom("ul",{className:"goog-tabpane-tabs",tabIndex:"0"});this.elContent_=this.dom_.createDom("div","goog-tabpane-cont");this.el_.appendChild(this.elContent_);switch(this.tabLocation_){case goog.ui.TabPane.TabLocation.TOP:this.el_.insertBefore(this.elButtonBar_,this.elContent_);this.el_.insertBefore(this.createClear_(),this.elContent_);goog.dom.classes.add(this.el_,
"goog-tabpane-top");break;case goog.ui.TabPane.TabLocation.BOTTOM:this.el_.appendChild(this.elButtonBar_);this.el_.appendChild(this.createClear_());goog.dom.classes.add(this.el_,"goog-tabpane-bottom");break;case goog.ui.TabPane.TabLocation.LEFT:this.el_.insertBefore(this.elButtonBar_,this.elContent_);goog.dom.classes.add(this.el_,"goog-tabpane-left");break;case goog.ui.TabPane.TabLocation.RIGHT:this.el_.insertBefore(this.elButtonBar_,this.elContent_);goog.dom.classes.add(this.el_,"goog-tabpane-right");
break;default:throw Error("Invalid tab location");}this.elButtonBar_.tabIndex=0;goog.events.listen(this.elButtonBar_,this.useMouseDown_?goog.events.EventType.MOUSEDOWN:goog.events.EventType.CLICK,this.onHeaderClick_,!1,this);goog.events.listen(this.elButtonBar_,goog.events.EventType.KEYDOWN,this.onHeaderKeyDown_,!1,this);this.createPages_(b)};
goog.ui.TabPane.prototype.createClear_=function(){goog.style.installStyles(".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }");return this.dom_.createDom("div","goog-tabpane-clear")};
goog.ui.TabPane.prototype.disposeInternal=function(){goog.ui.TabPane.superClass_.disposeInternal.call(this);goog.events.unlisten(this.elButtonBar_,this.useMouseDown_?goog.events.EventType.MOUSEDOWN:goog.events.EventType.CLICK,this.onHeaderClick_,!1,this);goog.events.unlisten(this.elButtonBar_,goog.events.EventType.KEYDOWN,this.onHeaderKeyDown_,!1,this);delete this.el_;this.elContent_=this.elButtonBar_=null};
goog.ui.TabPane.prototype.getChildNodes_=function(){for(var b=[],c=goog.dom.getFirstElementChild(this.el_);c;)b.push(c),c=goog.dom.getNextElementSibling(c);return b};goog.ui.TabPane.prototype.createPages_=function(b){for(var c,d=0;c=b[d];d++)this.addPage(new goog.ui.TabPane.TabPage(c))};
goog.ui.TabPane.prototype.addPage=function(b,c){b.parent_&&(b.parent_!=this&&b.parent_ instanceof goog.ui.TabPane)&&b.parent_.removePage(b);var d=this.pages_.length;goog.isDef(c)&&c!=d?(d=c,this.pages_.splice(d,0,b),this.elButtonBar_.insertBefore(b.elTitle_,this.elButtonBar_.childNodes[d])):(this.pages_.push(b),this.elButtonBar_.appendChild(b.elTitle_));b.setParent_(this,d);this.selected_||(this.selected_=b,this.dispatchEvent(new goog.ui.TabPaneEvent(goog.ui.TabPane.Events.CHANGE,this,this.selected_)));
this.elContent_.appendChild(b.elContent_);b.setVisible_(b==this.selected_);for(var e=d+1;d=this.pages_[e];e++)d.index_=e};goog.ui.TabPane.prototype.removePage=function(b){goog.isNumber(b)&&(b=this.pages_[b]);this.pages_.splice(b.index_,1);b.setParent_(null);goog.dom.removeNode(b.elTitle_);goog.dom.removeNode(b.elContent_);for(var c=0;b=this.pages_[c];c++)b.setParent_(this,c)};goog.ui.TabPane.prototype.getPage=function(b){return this.pages_[b]};
goog.ui.TabPane.prototype.setSelectedPage=function(b){!b.isEnabled()||this.selected_&&b==this.selected_||(this.selected_.setVisible_(!1),b.setVisible_(!0),this.selected_=b,this.dispatchEvent(new goog.ui.TabPaneEvent(goog.ui.TabPane.Events.CHANGE,this,this.selected_)))};goog.ui.TabPane.prototype.setSelectedIndex=function(b){0<=b&&b<this.pages_.length&&this.setSelectedPage(this.pages_[b])};goog.ui.TabPane.prototype.getSelectedIndex=function(){return this.selected_?this.selected_.index_:-1};
goog.ui.TabPane.prototype.getSelectedPage=function(){return this.selected_||null};goog.ui.TabPane.prototype.getContentElement=function(){return this.elContent_||null};goog.ui.TabPane.prototype.getElement=function(){return this.el_||null};goog.ui.TabPane.prototype.onHeaderClick_=function(b){for(var c=b.target;c!=this.elButtonBar_;){if("LI"==c.tagName){var d;for(d=0;c=c.previousSibling;d++);this.setSelectedIndex(d);break}c=c.parentNode}b.preventDefault()};
goog.ui.TabPane.prototype.onHeaderKeyDown_=function(b){if(!(b.altKey||b.metaKey||b.ctrlKey))switch(b.keyCode){case goog.events.KeyCodes.LEFT:b=this.selected_.getIndex()-1;this.setSelectedIndex(0>b?this.pages_.length-1:b);break;case goog.events.KeyCodes.RIGHT:b=this.selected_.getIndex()+1;this.setSelectedIndex(b>=this.pages_.length?0:b);break;case goog.events.KeyCodes.HOME:this.setSelectedIndex(0);break;case goog.events.KeyCodes.END:this.setSelectedIndex(this.pages_.length-1)}};
goog.ui.TabPane.TabPage=function(b,c,d){var e,f;if(goog.isString(b)&&!goog.isDef(c))e=b;else if(c)e=c,f=b;else if(b){if(c=goog.dom.getFirstElementChild(b))e=goog.dom.getTextContent(c),c.parentNode.removeChild(c);f=b}this.dom_=d||goog.dom.getDomHelper();this.elContent_=f||this.dom_.createDom("div");this.elTitle_=this.dom_.createDom("li",null,e);this.index_=this.parent_=null;this.enabled_=!0};goog.ui.TabPane.TabPage.prototype.getTitle=function(){return goog.dom.getTextContent(this.elTitle_)};
goog.ui.TabPane.TabPage.prototype.setTitle=function(b){goog.dom.setTextContent(this.elTitle_,b)};goog.ui.TabPane.TabPage.prototype.getTitleElement=function(){return this.elTitle_};goog.ui.TabPane.TabPage.prototype.getContentElement=function(){return this.elContent_};goog.ui.TabPane.TabPage.prototype.getIndex=function(){return this.index_};goog.ui.TabPane.TabPage.prototype.getParent=function(){return this.parent_};goog.ui.TabPane.TabPage.prototype.select=function(){this.parent_&&this.parent_.setSelectedPage(this)};
goog.ui.TabPane.TabPage.prototype.setEnabled=function(b){this.enabled_=b;this.elTitle_.className=b?"goog-tabpane-tab":"goog-tabpane-tab-disabled"};goog.ui.TabPane.TabPage.prototype.isEnabled=function(){return this.enabled_};goog.ui.TabPane.TabPage.prototype.setVisible_=function(b){this.isEnabled()&&(this.elContent_.style.display=b?"":"none",this.elTitle_.className=b?"goog-tabpane-tab-selected":"goog-tabpane-tab")};
goog.ui.TabPane.TabPage.prototype.setParent_=function(b,c){this.parent_=b;this.index_=goog.isDef(c)?c:null};goog.ui.TabPaneEvent=function(b,c,d){goog.events.Event.call(this,b,c);this.page=d};goog.inherits(goog.ui.TabPaneEvent,goog.events.Event);var ScanTabs=function(b){XVWidget.call(this,b);utils.dom.addCallbackManager(this);this.tabPane=new goog.ui.TabPane(this.widget);this.tabs=[];this.addTabs();this.lastSelectedTab=0;this.getLastSelectedTab=function(){return this.lastSelectedTab};this.getTab=function(b){var d;"string"===typeof b?(b=b.toLowerCase(),utils.array.forEach(this.tabs,function(e){-1<e.label.toLowerCase().indexOf(b)&&!d&&(d=e)})):"number"===typeof b&&utils.array.forEach(goog.dom.getElementsByClass("TabPage",this.widget),function(e,
f){f===b&&(d=e)});return d};this.updateCSS();this.setClickUI();this.setActive(0);utils.array.forEach(goog.dom.getElementsByClass("Tab",this.widget),function(b,d){b.isActive=!1})};goog.inherits(ScanTabs,XVWidget);goog.exportSymbol("ScanTabs",ScanTabs);
ScanTabs.prototype.defaultArgs={parent:document.body,className:XVGlobals.classNames.ScanTabs,tabTitles:["Info","Adjust","Menu"],tabIconSrc:["./icons/InfoIcon.png","./icons/Adjust.png","./icons/Menu.png"],widgetCSS:{position:"absolute",top:400,left:20,height:300,width:"100%",borderWidth:1,backgroundColor:XVGlobals.ContentDividerColor}};
ScanTabs.prototype.setClickUI=function(){var b=this;utils.array.forEach(goog.dom.getElementsByClass("Tab",b.widget),function(c,d){goog.events.listen(c,goog.events.EventType.CLICK,function(e){c.isActive?(b.callbacks.deactivate(),c.isActive=!1):(b.setActive(d),b.callbacks.activate())});goog.events.listen(c,goog.events.EventType.MOUSEOVER,function(b){c.style.opacity=1})})};
ScanTabs.prototype.setClickCallbacks=function(b){this.callbacks||(this.callbacks={});for(callbackType in b)this.callbacks[callbackType]=b[callbackType]};
ScanTabs.prototype.setActive=function(b){var c=this,d,e,f={border:"solid 1px rgb(120,120,120)"},g={border:"solid 1px rgb(80,80,80)"};this.tabPane.setSelectedIndex(b);utils.array.forEach(goog.dom.getElementsByClass("Tab",c.widget),function(h,k){d=g;e=10;h.isActive=!1;k===b&&(d=f,e=1E3,disp="visible",h.isActive=!0);utils.css.setCSS(h,utils.dom.mergeArgs(d,{zIndex:e,backgroundColor:"rgb(0,0,0)","border-bottom":"rgb(0,0,0)"}));utils.css.setCSS(c.getTab(k),utils.dom.mergeArgs(d,{zIndex:e}))})};
ScanTabs.prototype.expandVertically=function(b){var c=utils.css.dims(this.widget.parentNode,"height"),d=utils.css.dims(this.widget.parentNode,"width"),e=utils.css.dims(goog.dom.getElementsByClass("Tab",this.widget)[0],"outerHeight"),f=c-b-e;utils.css.setCSS(this.widget,{top:b});utils.array.forEach(goog.dom.getElementsByClass("TabPage",this.widget),function(b,c){utils.css.setCSS(b,{height:f-1,width:d-2})})};
ScanTabs.prototype.updateCSS=function(b){utils.css.setCSS(this.widget,b);b=utils.css.dims(this.widget.parentNode,"height");var c=utils.css.dims(this.widget.parentNode,"width"),d=utils.css.dims(goog.dom.getElementsByClass("Tab",this.widget)[0],"outerHeight"),e=b-utils.css.dims(this.widget,"top")-d-1||0;utils.array.forEach(goog.dom.getElementsByClass("TabPage",this.widget),function(b,d){utils.css.setCSS(b,{height:e,width:c-2})})};ScanTabs.addTabs={};
ScanTabs.prototype.addTabs=function(){var b=this,c={position:"absolute",top:0,color:"white",fontSize:XVGlobals.fontSizeMed,fontFamily:XVGlobals.fontFamily,backgroundColor:"rgb(0,0,0)",width:XVGlobals.scanTabLabelWidth,height:XVGlobals.minScanTabHeight-1,cursor:"pointer",backgroundColor:"rgba(0,0,0,1)"},d={position:"absolute",top:Math.round((XVGlobals.minScanTabHeight-0.85*XVGlobals.minScanTabHeight)/2),left:Math.round(XVGlobals.scanTabLabelWidth/2-0.85*XVGlobals.minScanTabHeight/2),height:Math.round(0.75*
XVGlobals.minScanTabHeight),width:Math.round(0.75*XVGlobals.minScanTabHeight),opacity:0.6},e={position:"absolute",top:XVGlobals.minScanTabHeight-1,color:"white",fontFamily:XVGlobals.fontFamily,backgroundColor:"rgb(0,0,0)"};utils.array.forEach(this.args.tabTitles,function(f,g){var h=utils.dom.makeElement("div",b.widget,"Tab",utils.dom.mergeArgs(c,{left:XVGlobals.scanTabLabelWidth*g+3*g}));h.title=f;var k=utils.dom.makeElement("img",h,"TabIcon",d);utils.array.forEach(b.args.tabIconSrc,function(b){-1<
b.indexOf(f)&&(k.src=b)});h=utils.dom.makeElement("div",b.args.parent,"TabPage",utils.dom.mergeArgs(e,{width:utils.css.dims(b.widget,"width")}));h.label=f;b.tabPane.addPage(new goog.ui.TabPane.TabPage(h),g);b.tabs.push(h)})};goog.exportProperty(ScanTabs.prototype,"addTabs",ScanTabs.prototype.addTabs);ThreeDHolder.openSlicerScene={};
ThreeDHolder.prototype.openSlicerScene=function(b,c){var d=this,e=loadXMLDoc(b),e=extractScene(e,c.scanData.sceneName),f=[],f=f.concat(extractFileInfo(e,"Volume","VolumeArchetypeStorage")),f=f.concat(extractFileInfo(e,"Model","ModelStorage")),f=f.concat(extractFileInfo(e,"FiberBundle","FiberBundleStorage"));b=c.scanData.filePath.slice(0,b.lastIndexOf("/"))+"/";var g;utils.array.forEach(f,function(c){var e=d.addObject(b+c.file,c.attributes);c.isSelectedVolume&&(g=e);!g&&c.colorTable&&(console.log("picking the color table"),
g=e)});g||(g=d.getObjFromList(b+f[0].file));utils.array.forEach(this.objRadioPairs,function(b){b[0]===g&&(b[1].checked="checked")});this.setOnShowtime(g);f=extractAnnotations(e);this.addAnnotations(f);e=extractCamera(e);this.PlaneHolder3.Renderer.camera.position=e};goog.exportProperty(ThreeDHolder.prototype,"openSlicerScene",ThreeDHolder.prototype.openSlicerScene);Viewer.addAdjustSliders={};
Viewer.prototype.addAdjustSliders=function(){var b=this,c={widgetCSS:{position:"absolute",width:100,height:20},thumbCSS:{height:18,width:6,borderRadius:0,borderColor:XVGlobals.semiactiveLineColor,backgroundColor:"rgba(185,185,185,1)"},trackCSS:{width:"100%",height:6,position:"absolute",top:6,border:"solid 1px rgb(155,155,155)",borderRadius:0}},d={position:"absolute",color:"rgba(255, 255, 255)",fontSize:XVGlobals.fontSizeSmall,fontFamily:XVGlobals.fontFamily,width:60,height:10},e;utils.array.forEach(["Brightness",
"Contrast"],function(f,g){e=f+"Slider";var h;this[e]=new utils.gui.GenericSlider(utils.dom.mergeArgs(c,{parent:b.ScanTabs.getTab("Adjust"),className:f+"Slider",widgetCSS:{top:15+30*g,left:80,borderColor:"rgb(180,180,180)"}}));utils.dom.makeElement("div",b.ScanTabs.getTab("Adjust"),"SliderLabel",utils.dom.mergeArgs(d,{top:15+30*g+c.thumbCSS.height/2-XVGlobals.fontSizeMed/2+2,left:15})).innerHTML=f;h=utils.dom.makeElement("div",b.ScanTabs.getTab("Adjust"),"SliderLabel",utils.dom.mergeArgs(d,{top:15+
30*g+c.thumbCSS.height/2-XVGlobals.fontSizeMed/2-2+3,left:190,fontSize:XVGlobals.fontSizeMed}));h.innerHTML="0";this[e].addSlideCallback(function(c){c=c.getValue();h.innerHTML=Math.round(c);b.FrameHolder.imageAdjust(f.toLowerCase(),c)})})};goog.exportProperty(Viewer.prototype,"addAdjustSliders",Viewer.prototype.addAdjustSliders);Viewer.addViewPlaneMenu={};
Viewer.prototype.addViewPlaneMenu=function(){var b=this,c=23*1.2,d=["Sagittal","Coronal","Transverse","All","3D"],e=[];this.ViewPlaneMenu=utils.dom.makeElement("div",this.widget,"ViewPlaneMenu",{position:"absolute",left:7,top:7,height:23,width:23,cursor:"pointer","z-index":"10"});this.ViewPlaneMenu.title="Select View Plane";this.ViewPlaneMenu.mainIcon=utils.dom.makeElement("img",this.ViewPlaneMenu,"menuIcon",{position:"absolute",height:23,width:23,cursor:"pointer"});this.ViewPlaneMenu.mainIcon.src="./icons/ViewPlaneMenu/Sagittal.png";
this.ViewPlaneMenu.mainIcon.axis="Sagittal";this.ViewPlaneMenu.mainIcon.title="Sagittal";e.push(this.ViewPlaneMenu.mainIcon);this.ViewPlaneMenu.subMenu=utils.dom.makeElement("div",this.ViewPlaneMenu,"subMenu",{position:"relative",left:34.5,height:23,width:c*d.length,cursor:"pointer"});this.ViewPlaneMenu.subMenu.pinned=!1;this.ViewPlaneMenu.subMenu.icons=[];var f=0;utils.array.forEach(d,function(c){if(c!=b.ViewPlaneMenu.mainIcon.axis){var d=utils.dom.makeElement("img",b.ViewPlaneMenu.subMenu,"Icon",
{position:"absolute",top:"0",left:1.2*23*f,height:23,width:23,cursor:"pointer"});d.src="./icons/ViewPlaneMenu/"+c+".png";d.axis=c;d.title=c;b.ViewPlaneMenu.subMenu.icons.push(d);e.push(d);f++}});utils.array.forEach(e,function(c,d){goog.events.listen(c,goog.events.EventType.CLICK,function(c){var d=b.ViewPlaneMenu.mainIcon.title,e=c.currentTarget.title;utils.dom.stopPropagation(c);b.ViewPlaneMenu.activateIcon(e);"All"===d?"All"!==e&&changeViewManyToOne(b,e):"All"===e?changeViewOneToMany(b,d):b.FrameHolder?
b.FrameHolder.loadDroppable(b.FrameHolder.currDroppable,c.currentTarget.axis.toLowerCase()):changeViewOneToOne(b,d,e)})});this.ViewPlaneMenu.activateIcon=function(c){utils.array.forEach(b.ViewPlaneMenu.subMenu.icons,function(d){if(d.title.toLowerCase()===c.toLowerCase()){utils.fx.fadeTo(d,XVGlobals.animFast,1);var f={};f.src=b.ViewPlaneMenu.mainIcon.src;f.axis=b.ViewPlaneMenu.mainIcon.axis;f.title=b.ViewPlaneMenu.mainIcon.title;b.ViewPlaneMenu.mainIcon.src=d.src;b.ViewPlaneMenu.mainIcon.axis=d.axis;
b.ViewPlaneMenu.mainIcon.title=d.title;d.src=f.src;d.axis=f.axis;d.title=f.title;e.push(b.ViewPlaneMenu.mainIcon)}else utils.fx.fadeTo(d,XVGlobals.animFast,0.5)})};(function(){utils.fx.fadeTo(b.ViewPlaneMenu.mainIcon,0,0.5);goog.events.listen(b.ViewPlaneMenu.mainIcon,goog.events.EventType.MOUSEOVER,function(){utils.fx.fadeTo(b.ViewPlaneMenu.mainIcon,XVGlobals.animFast,1);utils.fx.fadeTo(b.ViewPlaneMenu.subMenu,XVGlobals.animFast,1)});goog.events.listen(b.ViewPlaneMenu.mainIcon,goog.events.EventType.MOUSEOUT,
function(){b.ViewPlaneMenu.subMenu.mouseover=!1;delay=new goog.async.Delay(function(){b.ViewPlaneMenu.subMenu.mouseover||(utils.fx.fadeTo(b.ViewPlaneMenu.mainIcon,XVGlobals.animFast,0.5),utils.fx.fadeTo(b.ViewPlaneMenu.subMenu,XVGlobals.animFast,0))},800);delay.start()});utils.fx.fadeOut(b.ViewPlaneMenu.subMenu,0);goog.events.listen(b.ViewPlaneMenu.subMenu,goog.events.EventType.MOUSEOVER,function(c){b.ViewPlaneMenu.subMenu.mouseover=!0});goog.events.listen(b.ViewPlaneMenu.subMenu,goog.events.EventType.MOUSEOUT,
function(c){b.ViewPlaneMenu.subMenu.mouseover=!1;delay=new goog.async.Delay(function(){b.ViewPlaneMenu.subMenu.mouseover||utils.fx.fadeTo(b.ViewPlaneMenu.subMenu,XVGlobals.animFast,0)},800);delay.start()});utils.array.forEach(b.ViewPlaneMenu.subMenu.icons,function(b){utils.fx.fadeTo(b,0,0.5)});utils.array.forEach(b.ViewPlaneMenu.subMenu.icons,function(b){goog.events.listen(b,goog.events.EventType.MOUSEOVER,function(b){utils.fx.fadeTo(b.currentTarget,XVGlobals.animFast,1)});goog.events.listen(b,goog.events.EventType.MOUSEOUT,
function(b){utils.fx.fadeTo(b.currentTarget,XVGlobals.animFast,0.5)})})})()};goog.exportProperty(Viewer.prototype,"addViewPlaneMenu",Viewer.prototype.addViewPlaneMenu);Modal.manageActiveThumbs={};Modal.prototype.manageActiveThumbs=function(){var b=[];XV.ViewerManager(function(c){(c=c.getThumbnail())&&b.push(c.widget.id)});utils.array.forEach(this.dragDropThumbnails,function(c){var d=!1;utils.array.forEach(b,function(b){c.widget.id===b&&(c.setActive(!0),d=!0)});d||c.setActive(!1)})};goog.exportProperty(Modal.prototype,"manageActiveThumbs",Modal.prototype.manageActiveThumbs);X.renderer2D=function(){X.renderer.call(this);this._classname="renderer2D";this._orientation=null;this._orientationIndex=-1;this._orientationColors=[];this._labelFrameBufferContext=this._labelFrameBuffer=this._frameBufferContext=this._frameBuffer=null;this._sliceHeightSpacing=this._sliceWidthSpacing=this._sliceHeight=this._sliceWidth=0;this._windowHigh=this._windowLow=this._upperThreshold=this._lowerThreshold=this._currentSlice=-1;this._labelmapShowOnlyColor=new Float32Array([-255,-255,-255,-255]);
this._radiological=!0};goog.inherits(X.renderer2D,X.renderer);X.renderer2D.prototype.onScroll=function(){};X.renderer2D.prototype.onWindowLevel=function(){};X.renderer2D.prototype.onScroll_=function(b){X.renderer2D.superClass_.onScroll_.call(this,b);var c=this._topLevelObjects[0];if(c){var d=this._orientationIndex,e="",e=0==d?"indexX":1==d?"indexY":"indexZ";c[e]=b._up?c[e]+1:c[e]-1;eval("this.onScroll();")}};
X.renderer2D.prototype.onWindowLevel_=function(b){var c=this._topLevelObjects[0];if(c){var d=c._windowHigh-c._windowLow,e=d/2,f=parseInt(d+d/15*-b._window,10);b=parseInt(e+e/15*b._level,10);d==f&&f++;e==b&&b++;c._windowLow-=parseInt(e-b,10);c._windowLow-=parseInt(d-f,10);c._windowLow=Math.max(c._windowLow,c._min);c._windowHigh-=parseInt(e-b,10);c._windowHigh+=parseInt(d-f,10);c._windowHigh=Math.min(c._windowHigh,c._max);eval("this.onWindowLevel();")}};
X.renderer2D.prototype.__defineGetter__("orientation",function(){return this._orientation});X.renderer2D.prototype.__defineSetter__("orientation",function(b){b=b.toUpperCase();"AXIAL"==b?b="Z":"SAGITTAL"==b?b="X":"CORONAL"==b&&(b="Y");if("X"!=b&&"Y"!=b&&"Z"!=b)throw Error("Invalid orientation.");this._orientation=b;if(b=this._topLevelObjects[0])this._orientationIndex=this.volumeChildrenIndex_(b._normcosine,this._orientation)});X.renderer2D.prototype.__defineGetter__("radiological",function(){return this._radiological});
X.renderer2D.prototype.__defineSetter__("radiological",function(b){this._radiological=b});
X.renderer2D.prototype.init=function(){if(!this._orientation)throw Error("No 2D orientation set.");X.renderer2D.superClass_.init.call(this,"2d");this._context.fillStyle="rgba(50,50,50,0)";this._context.fillRect(0,0,this._canvas.width,this._canvas.height);this._frameBuffer=goog.dom.createDom("canvas");this._labelFrameBuffer=goog.dom.createDom("canvas");goog.events.listen(this._camera,X.event.events.WINDOWLEVEL,this.onWindowLevel_.bind(this))};
X.renderer2D.prototype.onResize_=function(){X.renderer2D.superClass_.onResize_.call(this);this.autoScale_()};X.renderer2D.prototype.resetViewAndRender=function(){X.renderer2D.superClass_.resetViewAndRender.call(this);this.autoScale_();var b=this._topLevelObjects[0];b&&(b._windowHigh=b._max,b._windowLow=b._min)};
X.renderer2D.prototype.volumeChildrenIndex_=function(b,c){if("X"==c){if(0!=b[2][0])return 0;if(0!=b[0][0])return 1}else if("Y"==c){if(0!=b[2][1])return 0;if(0!=b[0][1])return 1}else{if(0!=b[2][2])return 0;if(0!=b[0][2])return 1}return 2};
X.renderer2D.prototype.update_=function(b){X.renderer2D.superClass_.update_.call(this,b);var c=!1;this.get(b._id)&&(c=!0);if(b instanceof X.volume){var d=b._file,e=b._labelmap,f=b._colortable;if(goog.isDefAndNotNull(e)&&goog.isDefAndNotNull(e._file)&&e._file._dirty)this.update_(e);else if(goog.isDefAndNotNull(f)&&goog.isDefAndNotNull(f._file)&&f._file._dirty)this._loader.load(f,b);else{if(goog.isDefAndNotNull(d)&&goog.isArray(d))if(goog.isDefAndNotNull(b.MRI)){if(b.MRI.loaded_files!=d.length||c&&
!b._dirty)return}else{c=0;e=d.length;for(c=0;c<e;c++)this._loader.load(d[c],b);return}else if(goog.isDefAndNotNull(d)&&d._dirty){this._loader.load(b,b);return}var d=b._spacing,g=b._normcosine,h=b._dimensions,e=this._orientationIndex=this.volumeChildrenIndex_(g,this._orientation),f=(e+1)%3,k=(e+2)%3;if(0!=g[2][1])var m=e,e=f,f=m;0!=g[k][1]&&(m=e,e=f,f=m);g=h[e];h=h[f];this._slices=b._children[this._orientationIndex]._children;this._sliceWidthSpacing=d[e];this._sliceHeightSpacing=d[f];this._sliceWidth=
g;this._sliceHeight=h;d=this._frameBuffer;d.width=g;d.height=h;e=this._labelFrameBuffer;e.width=g;e.height=h;this._frameBufferContext=d.getContext("2d");this._labelFrameBufferContext=e.getContext("2d");c||(this._objects.add(b),this.autoScale_())}}};X.renderer2D.prototype.autoScale_=function(){var b=Math.min(this._width/(this._sliceWidth*this._sliceWidthSpacing),this._height/(this._sliceHeight*this._sliceHeightSpacing));this._camera._view[14]=b};
X.renderer2D.prototype.xy2ijk=function(b,c){var d=this._topLevelObjects[0],e=this._camera._view,f=1*e[12],g=-1*e[13],e=Math.max(e[14],0.6),h=[this._width/2,this._height/2],k=this._sliceWidth*this._sliceWidthSpacing*e,m=this._sliceHeight*this._sliceHeightSpacing*e,p=h[0]-k/2,h=h[1]-m/2,p=p+f*e,n=0,q=0,r=this._orientationIndex,f=(r+1)%3,s=(r+2)%3;0!=d._normcosine[s][2]?(this._orientationColors[0]="yellow",this._orientationColors[1]="green"):(this._orientationColors[0]=0!=d._normcosine[s][1]?"yellow":
"green",this._orientationColors[1]="red");var r=d._dimensions[r],u=d._dimensions[f];0!=d._normcosine[s][1]&&(n=r,r=u,u=n,n=f,f=s,s=n);0!=d._normcosine[2][1]&&(n=r,r=u,u=n,n=f,f=s,s=n);d=[Math.floor(d._indexX),Math.floor(d._indexY),Math.floor(d._indexZ)];n=this._radiological?Math.floor(r-(b-p)/k*r):Math.floor((b-p)/k*r);q=Math.floor(u-(c-(h+g*e))/m*u);if(0>n||n>=r||0>q||q>=u)return null;d[f]=n;d[s]=q;return d};
X.renderer2D.prototype.render_=function(b,c){X.renderer2D.superClass_.render_.call(this,b,c);if(0!=this._objects.values().length){var d=this._width,e=this._height,f=this._camera._view;this._context.save();this._context.clearRect(-d,-e,2*d,2*e);this._context.restore();var g=1*f[12],h=-1*f[13],k=Math.max(f[14],0.6);this._context.setTransform(k,0,0,k,0,0);var f=this._topLevelObjects[0],m=null;f._labelmap&&(m=f._labelmap._showOnlyColor);var p=this._orientationIndex,n=null,n=0==p?f.indexX:1==p?f.indexY:
f.indexZ,q=this._slices[parseInt(n,10)],r=q._texture._rawData,q=q._labelmap,s=null;q&&(s=q._rawData);var u=this._sliceWidth,t=this._sliceHeight,w=this._frameBufferContext,x=this._labelFrameBufferContext,y=w.getImageData(0,0,u,t),I=x.getImageData(0,0,u,t),z=y.data,C=I.data,D=z.length,A=f._orientation,E=f._normcosine,B=f._max,F=f._lowerThreshold,G=f._upperThreshold,H=f._windowLow/B,J=f._windowHigh/B;if(this._currentSlice!=n||this._lowerThreshold!=F||this._upperThreshold!=G||this._windowLow!=H||this._windowHigh!=
J||m&&!X.array.compare(m,this._labelmapShowOnlyColor,0,0,4)){var v=0;do{var L=[0,0,0,0],N=[0,0,0,0],P=r[v]/255*B,S=r[v],S=(S/255-H)/(J-H),S=255*S;P>=F&&P<=G&&(L=new goog.math.Vec3(f._maxColor[0],f._maxColor[1],f._maxColor[2]),P=new goog.math.Vec3(f._minColor[0],f._minColor[1],f._minColor[2]),L=L.scale(S).add(P.scale(255-S)),L=[Math.floor(L.x),Math.floor(L.y),Math.floor(L.z),255],q&&(-255==m[3]?N=[s[v],s[v+1],s[v+2],s[v+3]]:X.array.compare(m,s,0,v,4)&&(N=[s[v],s[v+1],s[v+2],s[v+3]])));var P=p,Y=(P+
1)%3,Z=(P+2)%3,S=v,T=A[P],W=A[Y];0!=E[Z][0]?0!=E[2][1]?(v=4*(v/4%t*u+Math.floor(v/4/t)),T=-A[Y],W=A[P]):T*=-1:(0!=E[Z][1]?0==E[2][1]&&(v=4*(v/4%t*u+Math.floor(v/4/t)),T=A[Y],W=A[P]):0!=E[2][1]&&(v=4*(v/4%t*u+Math.floor(v/4/t)),T=A[Y],W=A[P]),this._radiological&&(T*=-1));1==T?(1==W&&(v=4*u*(t-Math.floor(v/(4*u)))+v%(4*u)),z[v]=L[0],z[v+1]=L[1],z[v+2]=L[2],z[v+3]=L[3],C[v]=N[0],C[v+1]=N[1],C[v+2]=N[2],C[v+3]=N[3]):1==W?(v=D-1-v,z[v-3]=L[0],z[v-2]=L[1],z[v-1]=L[2],z[v]=L[3],C[v-3]=N[0],C[v-2]=N[1],C[v-
1]=N[2],C[v]=N[3]):(v=4*u*Math.floor(v/(4*u))-v%(4*u),z[v]=L[0],z[v+1]=L[1],z[v+2]=L[2],z[v+3]=L[3],C[v]=N[0],C[v+1]=N[1],C[v+2]=N[2],C[v+3]=N[3]);v=S+4}while(v<D);w.putImageData(y,0,0);x.putImageData(I,0,0);this._currentSlice=n;this._lowerThreshold=F;this._upperThreshold=G;this._windowLow=H;this._windowHigh=J;q&&(this._labelmapShowOnlyColor=m)}this._context.globalAlpha=1;this._context.translate(d/2/k,e/2/k);d=-u*this._sliceWidthSpacing/2+g;h=-t*this._sliceHeightSpacing/2+h;this._context.drawImage(this._frameBuffer,
d,h,u*this._sliceWidthSpacing,t*this._sliceHeightSpacing);q&&f._labelmap._visible&&(this._context.globalAlpha=f._labelmap._opacity,this._context.drawImage(this._labelFrameBuffer,d,h,u*this._sliceWidthSpacing,t*this._sliceHeightSpacing));this._config.SLICENAVIGATORS&&(this._interactor._mouseInside&&this._interactor._shiftDown&&!this._interactor._leftButtonDown)&&(h=this._interactor._mousePosition,h=this.xy2ijk(h[0],h[1]))&&(f._indexX=h[0],f._indexY=h[1],f._indexZ=h[2],f.modified(!1),this._context.setTransform(1,
0,0,1,0,0),this._context.lineWidth=1,this._context.beginPath(),this._context.moveTo(this._interactor._mousePosition[0]+0.5,0),this._context.lineTo(this._interactor._mousePosition[0]+0.5,this._height),this._context.strokeStyle=this._orientationColors[0],this._context.stroke(),this._context.closePath(),this._context.beginPath(),this._context.moveTo(0,this._interactor._mousePosition[1]+0.5),this._context.lineTo(this._width,this._interactor._mousePosition[1]+0.5),this._context.strokeStyle=this._orientationColors[1],
this._context.stroke(),this._context.closePath())}};goog.exportSymbol("X.renderer2D",X.renderer2D);goog.exportSymbol("X.renderer2D.prototype.init",X.renderer2D.prototype.init);goog.exportSymbol("X.renderer2D.prototype.add",X.renderer2D.prototype.add);goog.exportSymbol("X.renderer2D.prototype.onShowtime",X.renderer2D.prototype.onShowtime);goog.exportSymbol("X.renderer2D.prototype.onRender",X.renderer2D.prototype.onRender);goog.exportSymbol("X.renderer2D.prototype.onScroll",X.renderer2D.prototype.onScroll);
goog.exportSymbol("X.renderer2D.prototype.onWindowLevel",X.renderer2D.prototype.onWindowLevel);goog.exportSymbol("X.renderer2D.prototype.get",X.renderer2D.prototype.get);goog.exportSymbol("X.renderer2D.prototype.resetViewAndRender",X.renderer2D.prototype.resetViewAndRender);goog.exportSymbol("X.renderer2D.prototype.xy2ijk",X.renderer2D.prototype.xy2ijk);goog.exportSymbol("X.renderer2D.prototype.render",X.renderer2D.prototype.render);goog.exportSymbol("X.renderer2D.prototype.destroy",X.renderer2D.prototype.destroy);var PlaneHolder=function(b,c,d){XVWidget.call(this,utils.dom.mergeArgs(PlaneHolder.prototype.defaultArgs,d));this.ThreeDHolder=c;this.onloadCallbacks=[];this.widget.id=b+"_"+this.widget.id;goog.dom.classes.add(this.widget,b+"Plane");"v"!==b?(this.Renderer=new X.renderer2D,this.Renderer.orientation=b.toUpperCase(),this.addSliderAndFrameNum(b)):this.Renderer=new X.renderer3D;this.Renderer.container=this.widget.id;this.Renderer.init();"v"===b&&this.Renderer.render()};goog.inherits(PlaneHolder,XVWidget);
goog.exportSymbol("PlaneHolder",PlaneHolder);PlaneHolder.prototype.defaultArgs={className:XVGlobals.classNames.PlaneHolder,parent:document.body,blankMsg:"drag and drop Thumbnail here",CSS:{position:"absolute",height:"50%",width:"50%",top:"0%",left:"0%",overflow:"hidden",display:"inline",background:"#000"}};PlaneHolder.prototype.sliderDefaultArgs={position:"absolute",left:"5%",bottom:"10px",width:"90%",height:"3px","border-radius":"4px",background:"#4AA",opacity:"0"};
PlaneHolder.prototype.frameNumDefaultArgs={position:"absolute",width:"90%",left:"5%",bottom:"16px",color:"#ddd","font-size":"10px",opacity:"0"};PlaneHolder.prototype.labelDefaultArgs={position:"absolute","font-size":"8px",color:"#fff",opacity:0.5,"text-transform":"uppercase"};
PlaneHolder.prototype.addSliderAndFrameNum=function(b){var c=utils.dom.makeElement("div",this.widget,"sliceSlider",utils.dom.mergeArgs(this.sliderDefaultArgs,{background:"x"===b?"rgba(255,255,0,1)":"y"===b?"rgba(0,  255,0,1)":"rgba(255,0,  0,1)"}));goog.dom.classes.add(c,b+"Slice");var d=utils.dom.makeElement("div",this.widget,"box",this.frameNumDefaultArgs);goog.dom.classes.add(d,b+"Box");this.ThreeDHolder.fadeOnHoverOut.push(c);this.ThreeDHolder.fadeOnHoverOut.push(d)};
PlaneHolder.prototype.addLabels=function(b){var c,d,e,f;switch(b){case "x":c="s";d="i";e="a";f="p";break;case "y":c="s";d="i";e="r";f="l";break;case "z":c="a",d="p",e="r",f="l"}b=utils.dom.makeElement("div",this.widget,"LetterLabel",utils.dom.mergeArgs(this.labelDefaultArgs,{left:"50%",top:"10%"}));var g=utils.dom.makeElement("div",this.widget,"LetterLabel",utils.dom.mergeArgs(this.labelDefaultArgs,{left:"50%",top:"85%"})),h=utils.dom.makeElement("div",this.widget,"LetterLabel",utils.dom.mergeArgs(this.labelDefaultArgs,
{left:"10%",top:"50%"})),k=utils.dom.makeElement("div",this.widget,"LetterLabel",utils.dom.mergeArgs(this.labelDefaultArgs,{left:"85%",top:"50%"}));b.innerHTML=c;g.innerHTML=d;h.innerHTML=e;k.innerHTML=f};PlaneHolder.prototype.addOnloadCallback=function(b){this.onloadCallbacks.push(b)};Modal.addRowMenu={};
Modal.prototype.addRowMenu=function(b,c){function d(b){var c=utils.dom.makeElement("img",e.RowMenu,b.id,{position:"absolute",cursor:"pointer",zIndex:100,height:utils.convert.px(0.5*XVGlobals.expandButtonWidth),top:utils.convert.px(0.25*XVGlobals.expandButtonWidth),textAlign:"right",left:utils.convert.px(b.left)});utils.fx.fadeTo(c,0,0.5);goog.events.listen(c,goog.events.EventType.MOUSEOVER,function(b){utils.fx.fadeTo(c,XVGlobals.animFast,1)});goog.events.listen(c,goog.events.EventType.MOUSEOUT,function(b){utils.fx.fadeTo(c,
XVGlobals.animFast,0.5)});c.src=b.src;c.title=b.title;goog.events.listen(c,goog.events.EventType.CLICK,function(d){utils.fx.fadeTo(c,XVGlobals.animFast,0.5);b.onclick()})}var e=this;this.RowMenu=utils.dom.makeElement("div",this.modal,"RowMenu",{position:"absolute",textAlign:"right",display:"inline-block","vertical-align":"middle"});d({id:"InsertRowButton",src:"./icons/Arrows/insertRowArrow.png",left:0,title:"Insert Row",onclick:function(){XV.ViewerManager({insert:"row"})}});d({id:"RemoveRowButton",
src:"./icons/Arrows/removeRowArrow.png",left:23,title:"Remove Row",onclick:function(){XV.ViewerManager({remove:"row"})}})};goog.exportProperty(Modal.prototype,"addRowMenu",Modal.prototype.addRowMenu);ScanViewer.addFrameSlider={};
ScanViewer.prototype.addFrameSlider=function(){var b=this;this.FrameSlider=new FrameSlider(utils.dom.mergeArgs(this.args.sliderCSS,{parent:this.widget}));this.FrameSlider.addSlideCallback(function(){var c=0<b.FrameSlider.getMaximum()?b.FrameSlider.getMinimum():0,d=Math.round(b.FrameSlider.getValue());b.displayableData&&b.displayableData.frameNumber&&(b.displayableData.frameNumber.innerHTML=0<b.FrameHolder.frames.length?"Frame: "+(d+1)+" / "+b.FrameHolder.frames.length:"Drag or click on any thumbnail to view.");
b.FrameHolder.drawFrame(d-c,!0);b.FrameHolder.applyImageAdjustments()});this.FrameHolder.addOnloadCallback(function(){b.FrameSlider?(b.FrameSlider.setMinimum(0),b.FrameSlider.setMaximum(b.FrameHolder.frames.length-1),b.FrameSlider.setValue(Math.round(b.FrameHolder.frames.length/2)),b.FrameHolder.drawFrame(Math.round(b.FrameSlider.getValue()),!0)):utils.dom.debug("NO DRAW FRAME")});this.FrameSlider.bindToMouseWheel(this.FrameHolder.widget)};
goog.exportProperty(ScanViewer.prototype,"addFrameSlider",ScanViewer.prototype.addFrameSlider);Viewer.populateData={};
Viewer.prototype.populateData=function(b){b=b.sessionInfo;var c=0;this.sessionInfo=new ScrollGallery({parent:this.ScanTabs.getTab("Info"),className:"SessionData_ScrollGallery",orientation:"vertical",widgetCSS:{left:"0",height:"80%",width:"440",top:XVGlobals.scanTabLabelHeight+10}});var d=utils.dom.makeElement("div",this.sessionInfo.getScrollArea(),"SessionData_ScrollGallery_MetadataContents",{});for(i in b){var e=b[i].label.replace(/\s+/g," "),f=this.textCSS_small.fontSize*2*c;this.displayableData[e]=
utils.dom.makeElement("div",d,"SessionData_ScrollGalleryData_"+e);utils.css.setCSS(this.displayableData[e],utils.dom.mergeArgs(this.textCSS_small,{top:f,left:"15"}));this.displayableData[e].innerHTML=b[i].label+":";this.displayableData[e+"_value"]=utils.dom.makeElement("div",d,"SessionData_ScrollGalleryValue_"+e);utils.css.setCSS(this.displayableData[e+"_value"],utils.dom.mergeArgs(this.textCSS_small,{top:f,left:"160"}));this.displayableData[e+"_value"].innerHTML=b[i].value[0];c++}utils.css.setCSS(d,
{height:f})};goog.exportProperty(Viewer.prototype,"populateData",Viewer.prototype.populateData);utils.gui.ProgressBar=function(b,c){var d={};d.widget=utils.dom.makeElement("div",b,"ProgressWidget",{position:"absolute",marginLeft:"25%",width:"50%",marginTop:"50%"});d.label=utils.dom.makeElement("div",d.widget,"ProgressBar_Label",{fontFamily:utils.globals.fontFamily,color:"rgba(255,255,255)",fontSize:11});d.label.innerHTML="Loading...";d.bar=utils.dom.makeElement("div",d.widget,"ProgressBar",{height:10,borderRadius:"none",position:"relative",top:5,borderRadius:0,border:"solid 1px rgba(125,125,125)",
overflow:"hidden"});var e=new goog.ui.ProgressBar;e.decorate(d.bar);var f=goog.dom.getElementByClass("progress-bar-thumb",d.widget);utils.css.setCSS(f,{background:"#d4e4ff",borderRadius:0,border:"solid 1px rgb(180,180,180)",height:"100%"});d.update=function(b){var c=b.max?b.clear:!1,f=b.add?b.add:!1,m=b.label?b.label:!1;b.clear&&b.clear&&e.setValue(0);c&&e.setMaximum(b.max);f&&e.setValue(e.getValue()+b.add);m&&(d.label.innerHTML=b.label)};d.hide=function(){goog.style.showElement(d.widget,!1)};d.show=
function(){goog.style.showElement(d.widget,!0)};return d};goog.exportSymbol("utils.gui.ProgressBar",utils.gui.ProgressBar);utils.gui.ProgressBar.prototype.hide=function(){return utils.gui.ProgressBar.superClass_.hide.call(this)};ThreeDHolder.loadThumbnail={};
ThreeDHolder.prototype.loadThumbnail=function(b,c){this.currDroppable=b;var d=b.scanData.filePath,e=this.SlicerFileHandler_.getFileObjectType(d);"slicer"==e?(this.currViewPlane="3D",this.Viewer.ViewPlaneMenu.activateIcon("3D",!0),changeViewManyToOne(this.Viewer,"3D")):0==this.currentObjects.length&&(this.currViewPlane="All",this.Viewer.ViewPlaneMenu.activateIcon("All",!0));if("slicer"==e)this.openSlicerScene(d,b);else{var f=this.getObjFromList(d);f?this.reloadObj(f,e):(d=this.addObject(d),"volume"==
e?this.setOnShowtime(d):this.setOnShowtime())}utils.array.forEach(this.onloadCallbacks,function(b){b(this.widget)})};goog.exportProperty(ThreeDHolder.prototype,"loadThumbnail",ThreeDHolder.prototype.loadThumbnail);SliderLinker.addClearAllPopup={};
SliderLinker.prototype.addClearAllPopup=function(b,c){this.takeSnapshot_();var d=this,e=new utils.gui.DialogBox(utils.dom.mergeArgs(d.popupArgs,{buttons:["Yes","Cancel"],message:"undefined"===typeof c?"Are you sure you want to clear all links?":c})),f=e.widget();e.setButtonOnclick("yes",function(b){utils.dom.stopPropagation(b);utils.fx.fadeOutAndRemove(f,XVGlobals.animFast,function(){d.clearAll_()})});e.setButtonOnclick("cancel",function(b){utils.dom.stopPropagation(b);utils.fx.fadeOutAndRemove(f,
XVGlobals.animFast,function(){d.clearAll_()})});XV.updateCSS();utils.fx.fadeOut(f,0,function(){utils.fx.fadeIn(f,XVGlobals.animFast)})};goog.exportProperty(SliderLinker.prototype,"addClearAllPopup",SliderLinker.prototype.addClearAllPopup);Modal.animateModal={};
Modal.prototype.animateModal=function(b){function c(b,c,d,e){return new goog.fx.dom.Slide(b,[b.offsetLeft,b.offsetTop],[c,d],e,goog.fx.easing.easeOut)}var d=this,e=this.modalDims(),f=new goog.fx.AnimationParallelQueue;f.add(new goog.fx.dom.Resize(this.modal,[this.modal.offsetWidth,this.modal.offsetHeight],[e.width,e.height],XVGlobals.animMed,goog.fx.easing.easeOut));f.add(c(this.modal,e.left,e.top,XVGlobals.animMed));f.add(c(this.closeButton,e.closeButton.left,e.closeButton.top,XVGlobals.animMed));
XV.ViewerManager(function(b,d,k){f.add(c(b.widget,e.Viewer.lefts[d][k],e.Viewer.tops[d][k],XVGlobals.animMed));f.add(new goog.fx.dom.Resize(b.widget,[b.widget.offsetWidth,b.widget.offsetHeight],[e.Viewer.width,e.Viewer.height],XVGlobals.animMed,goog.fx.easing.easeOut))});utils.array.forEach(["ColumnMenu","RowMenu"],function(b){utils.array.forEach(goog.dom.getElementsByClass(b),function(d){f.add(c(d,e[b].left,e[b].top,XVGlobals.animMed))})});goog.events.listen(f,"end",function(){d.updateCSS();XV.ViewerManager(function(b,
c,d){0==b.widget.style.opacity&&utils.fx.fadeIn(b.widget,XVGlobals.animFast)});b&&b()});f.play()};goog.exportProperty(Modal.prototype,"animateModal",Modal.prototype.animateModal);FrameHolder.loadFramesByViewPlane={};FrameHolder.prototype.loadFramesByViewPlane=function(b){this.currViewPlane=b.toLowerCase();this.Viewer.ViewPlaneMenu.activateIcon(this.currViewPlane,!0);b=this.currDroppable.getFrames({viewPlane:this.currViewPlane,filter:"img"});this.loadFrames(b)};goog.exportProperty(FrameHolder.prototype,"loadFramesByViewPlane",FrameHolder.prototype.loadFramesByViewPlane);utils.css.absolutePosition=function(b){return b.getBoundingClientRect()};goog.exportSymbol("utils.css.absolutePosition",utils.css.absolutePosition);ThreeDHolder.addAnnotations={};
ThreeDHolder.prototype.addAnnotations=function(b){var c=this;utils.array.forEach(b,function(b){var e=b[0];b=b[1];for(var f=e.getAttribute("ctrlPtsCoord").split(" "),g=b.getAttribute("color").split(" "),h=0;h<f.length;++h)f[h]=parseFloat(f[h],10);for(h=0;h<g.length;++h)g[h]=parseFloat(g[h],10);h=new X.sphere;h.center=f;h.radius=4;h.caption=e.getAttribute("name");h.color=g;h.opacity=parseFloat(b.getAttribute("opacity"),10);h.visible="true"==b.getAttribute("visibility");c.PlaneHolder3.Renderer.add(h);
c.addToMenu(h,e.getAttribute("name"),"sphere")})};goog.exportProperty(ThreeDHolder.prototype,"addAnnotations",ThreeDHolder.prototype.addAnnotations);ThreeDHolder.updateSlices={};
ThreeDHolder.prototype.updateSlices=function(){var b=this.currentVolObject;b.indexX=Math.round(b.indexX);b.indexY=Math.round(b.indexY);b.indexZ=Math.round(b.indexZ);this.xSlider.setMaximum(b._dimensionsRAS[0]-1);this.ySlider.setMaximum(b._dimensionsRAS[1]-1);this.zSlider.setMaximum(b._dimensionsRAS[2]-1);var c=b.getIndexOrientation_("sagittal"),d=b.getIndexOrientation_("coronal"),e=b.getIndexOrientation_("axial");this.xSlider.setValue(b[c]);this.ySlider.setValue(b[d]);this.zSlider.setValue(b[e]);
this.xBox.innerHTML="Frame: "+b[c]+" / "+b._dimensionsRAS[0];this.yBox.innerHTML="Frame: "+b[d]+" / "+b._dimensionsRAS[1];this.zBox.innerHTML="Frame: "+b[e]+" / "+b._dimensionsRAS[2]};goog.exportProperty(ThreeDHolder.prototype,"updateSlices",ThreeDHolder.prototype.updateSlices);utils.css.dims=function(b,c){if(c&&"string"===typeof c)switch(c){case "height":return b.clientHeight;case "width":return b.clientWidth;case "outerHeight":return b.offsetHeight;case "outerWidth":return b.offsetWidth;case "offsetTop":return b.offsetTop;case "offsetLeft":return b.offsetLeft;default:if(!/%emt/.test(b.style[c]))return utils.convert.toInt(b.style[c]);var d=goog.style.getRelativePosition(b,b.parentNode),d={left:utils.convert.toInt(b.style.left)||d.x,top:utils.convert.toInt(b.style.top)||
d.y};return d[c]}else{var e={},d=goog.style.getRelativePosition(b,b.parentNode),d={left:utils.convert.toInt(b.style.left)||d.x,top:utils.convert.toInt(b.style.top)||d.y},e=utils.dom.mergeArgs(e,d);e.left=d.left;e.top=d.top;e.height=b.clientHeight;e.width=b.clientWidth;e.outerHeight=b.offsetWidth;e.outerWidth=b.offsetHeight;e.offsetTop=b.offsetTop;e.offsetLeft=b.offsetLeft;return e}};goog.exportSymbol("utils.css.dims",utils.css.dims);goog.ui.Zippy=function(b,c,d,e,f){function g(b){b&&(b.tabIndex=0,goog.a11y.aria.setRole(b,h.getAriaRole()),goog.dom.classes.add(b,"goog-zippy-header"),h.enableMouseEventsHandling_(b),h.enableKeyboardEventsHandling_(b))}goog.events.EventTarget.call(this);this.dom_=f||goog.dom.getDomHelper();this.elHeader_=this.dom_.getElement(b)||null;this.elExpandedHeader_=this.dom_.getElement(e||null);this.elContent_=(this.lazyCreateFunc_=goog.isFunction(c)?c:null)||!c?null:this.dom_.getElement(c);this.expanded_=
!0==d;this.keyboardEventHandler_=new goog.events.EventHandler(this);this.mouseEventHandler_=new goog.events.EventHandler(this);var h=this;g(this.elHeader_);g(this.elExpandedHeader_);this.setExpanded(this.expanded_)};goog.inherits(goog.ui.Zippy,goog.events.EventTarget);goog.ui.Zippy.Events={ACTION:"action",TOGGLE:"toggle"};goog.ui.Zippy.prototype.handleMouseEvents_=!0;goog.ui.Zippy.prototype.handleKeyEvents_=!0;
goog.ui.Zippy.prototype.disposeInternal=function(){goog.ui.Zippy.superClass_.disposeInternal.call(this);goog.dispose(this.keyboardEventHandler_);goog.dispose(this.mouseEventHandler_)};goog.ui.Zippy.prototype.getAriaRole=function(){return goog.a11y.aria.Role.TAB};goog.ui.Zippy.prototype.getContentElement=function(){return this.elContent_};goog.ui.Zippy.prototype.getVisibleHeaderElement=function(){var b=this.elExpandedHeader_;return b&&goog.style.isElementShown(b)?b:this.elHeader_};
goog.ui.Zippy.prototype.expand=function(){this.setExpanded(!0)};goog.ui.Zippy.prototype.collapse=function(){this.setExpanded(!1)};goog.ui.Zippy.prototype.toggle=function(){this.setExpanded(!this.expanded_)};
goog.ui.Zippy.prototype.setExpanded=function(b){this.elContent_?goog.style.setElementShown(this.elContent_,b):b&&this.lazyCreateFunc_&&(this.elContent_=this.lazyCreateFunc_());this.elContent_&&goog.dom.classes.add(this.elContent_,"goog-zippy-content");this.elExpandedHeader_?(goog.style.setElementShown(this.elHeader_,!b),goog.style.setElementShown(this.elExpandedHeader_,b)):this.updateHeaderClassName(b);this.setExpandedInternal(b);this.dispatchEvent(new goog.ui.ZippyEvent(goog.ui.Zippy.Events.TOGGLE,
this,this.expanded_))};goog.ui.Zippy.prototype.setExpandedInternal=function(b){this.expanded_=b};goog.ui.Zippy.prototype.isExpanded=function(){return this.expanded_};goog.ui.Zippy.prototype.updateHeaderClassName=function(b){this.elHeader_&&(goog.dom.classes.enable(this.elHeader_,"goog-zippy-expanded",b),goog.dom.classes.enable(this.elHeader_,"goog-zippy-collapsed",!b),goog.a11y.aria.setState(this.elHeader_,goog.a11y.aria.State.EXPANDED,b))};goog.ui.Zippy.prototype.isHandleKeyEvents=function(){return this.handleKeyEvents_};
goog.ui.Zippy.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_};goog.ui.Zippy.prototype.setHandleKeyboardEvents=function(b){this.handleKeyEvents_!=b&&((this.handleKeyEvents_=b)?(this.enableKeyboardEventsHandling_(this.elHeader_),this.enableKeyboardEventsHandling_(this.elExpandedHeader_)):this.keyboardEventHandler_.removeAll())};
goog.ui.Zippy.prototype.setHandleMouseEvents=function(b){this.handleMouseEvents_!=b&&((this.handleMouseEvents_=b)?(this.enableMouseEventsHandling_(this.elHeader_),this.enableMouseEventsHandling_(this.elExpandedHeader_)):this.mouseEventHandler_.removeAll())};goog.ui.Zippy.prototype.enableKeyboardEventsHandling_=function(b){b&&this.keyboardEventHandler_.listen(b,goog.events.EventType.KEYDOWN,this.onHeaderKeyDown_)};
goog.ui.Zippy.prototype.enableMouseEventsHandling_=function(b){b&&this.mouseEventHandler_.listen(b,goog.events.EventType.CLICK,this.onHeaderClick_)};goog.ui.Zippy.prototype.onHeaderKeyDown_=function(b){if(b.keyCode==goog.events.KeyCodes.ENTER||b.keyCode==goog.events.KeyCodes.SPACE)this.toggle(),this.dispatchActionEvent_(),b.preventDefault(),b.stopPropagation()};goog.ui.Zippy.prototype.onHeaderClick_=function(b){this.toggle();this.dispatchActionEvent_()};
goog.ui.Zippy.prototype.dispatchActionEvent_=function(){this.dispatchEvent(new goog.events.Event(goog.ui.Zippy.Events.ACTION,this))};goog.ui.ZippyEvent=function(b,c,d){goog.events.Event.call(this,b,c);this.expanded=d};goog.inherits(goog.ui.ZippyEvent,goog.events.Event);goog.ui.AnimatedZippy=function(b,c,d,e){e=e||goog.dom.getDomHelper();var f=e.createDom("div",{style:"overflow:hidden"});c=e.getElement(c);c.parentNode.replaceChild(f,c);f.appendChild(c);this.elWrapper_=f;this.anim_=null;goog.ui.Zippy.call(this,b,c,d,void 0,e);b=this.isExpanded();this.elWrapper_.style.display=b?"":"none";this.updateHeaderClassName(b)};goog.inherits(goog.ui.AnimatedZippy,goog.ui.Zippy);goog.ui.AnimatedZippy.prototype.animationDuration=500;
goog.ui.AnimatedZippy.prototype.animationAcceleration=goog.fx.easing.easeOut;goog.ui.AnimatedZippy.prototype.isBusy=function(){return null!=this.anim_};
goog.ui.AnimatedZippy.prototype.setExpanded=function(b){if(this.isExpanded()!=b||this.anim_){"none"==this.elWrapper_.style.display&&(this.elWrapper_.style.display="");var c=this.getContentElement().offsetHeight,d=0;this.anim_?(b=this.isExpanded(),goog.events.removeAll(this.anim_),this.anim_.stop(!1),d=parseInt(this.getContentElement().style.marginTop,10),d=c-Math.abs(d)):d=b?0:c;this.updateHeaderClassName(b);this.anim_=new goog.fx.Animation([0,d],[0,b?c:0],this.animationDuration,this.animationAcceleration);
goog.events.listen(this.anim_,[goog.fx.Transition.EventType.BEGIN,goog.fx.Animation.EventType.ANIMATE,goog.fx.Transition.EventType.END],this.onAnimate_,!1,this);goog.events.listen(this.anim_,goog.fx.Transition.EventType.END,goog.bind(this.onAnimationCompleted_,this,b));this.anim_.play(!1)}};goog.ui.AnimatedZippy.prototype.onAnimate_=function(b){var c=this.getContentElement();c.style.marginTop=b.y-c.offsetHeight+"px"};
goog.ui.AnimatedZippy.prototype.onAnimationCompleted_=function(b){b&&(this.getContentElement().style.marginTop="0");goog.events.removeAll(this.anim_);this.setExpandedInternal(b);this.anim_=null;b||(this.elWrapper_.style.display="none");this.dispatchEvent(new goog.ui.ZippyEvent(goog.ui.Zippy.Events.TOGGLE,this,b))};var ScrollGallery=function(b){XVWidget.call(this,b);this.Scrollables={};var c=utils.css.dims(this.widget,"width")-this.args.sliderCSS.widgetCSS.width-7;this.ScrollArea=utils.dom.makeElement("div",this.widget,"ScrollArea",{position:"relative",width:c,left:utils.css.dims(this.widget,"width")-c});this.getScrollArea=function(){return this.ScrollArea};utils.css.setCSS(this.widget,utils.dom.mergeArgs(this.args.widgetCSS,b.widgetCSS));this.ContentSlider=new utils.gui.GenericSlider({parent:this.widget,className:"ContentSlider",
orientation:"vertical",widgetCSS:{width:7,backgroundColor:"rgb(0,0,0)",border:"none"},thumbCSS:{height:60,backgroundColor:"rgb(120,120,120)",border:"none"}});this.ContentSlider.addSlideCallback(this.moveContents,this);this.ContentSlider.bindToMouseWheel(this.widget);this.updateCSS()};goog.inherits(ScrollGallery,XVWidget);goog.exportSymbol("ScrollGallery",ScrollGallery);
ScrollGallery.prototype.defaultArgs={className:"ScrollGallery",parent:document.body,orientation:"vertical",sliderLocation:"left",sliderWidth:8,scrollMarginY:8,scrollMarginX:8,widgetCSS:{top:0,left:30,width:XVGlobals.ScrollGalleryWidth,height:400,position:"absolute",overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"},sliderCSS:{parent:document.body,thumbCSS:{height:XVGlobals.ThumbnailWidgetHeight,width:7,borderWidth:0,borderColor:XVGlobals.semiactiveLineColor,backgroundColor:"rgba(105,105,105,1)"},
widgetCSS:{borderWidth:0,width:7,borderColor:XVGlobals.semiactiveLineColor,backgroundColor:"rgba(0, 0, 0, 1)"}}};
ScrollGallery.prototype.moveContents=function(b,c){var d=utils.css.dims(c.widget,"height"),e=[b.getMin(),b.getMax()],f=[0,utils.css.dims(c.ScrollArea,"height")-d],g=b.getThumb();f[1]>e[1]?(utils.css.setCSS(g,{opacity:1,height:d*(e[1]/f[1])}),b.enable(!0),d=Math.abs(b.getValue()-100),e=utils.convert.remap1D(d,e,f).newVal,utils.css.setCSS(c.ScrollArea,{top:-e})):(utils.css.setCSS(g,{opacity:0}),b.enable(!1),b.setValue(100))};
ScrollGallery.prototype.addContentToZippy=function(b,c){this.ContentHeaders[b].contents.appendChild(c);utils.dims.setCSS(this.ScrollContent,{height:utils.css.dims(c,"height")});this.updateCSS()};ScrollGallery.prototype.updateCSS=function(b){b&&utils.css.setCSS(this.widget,b.widgetCSS);utils.css.setCSS(this.ContentSlider.getWidget(),{height:utils.css.dims(this.widget,"height")})};ScrollGallery.prototype.getScrollables=function(b,c){return this.Scrollables[b][c]};
ScrollGallery.prototype.addZippy=function(b){function c(b,c){c.target==c.currentTarget?utils.css.setCSS(c.target,b):utils.css.setCSS(goog.dom.getAncestorByClass(c.target,XVGlobals.classNames.ScrollGalleryZippyHeader),b);utils.css.setCSS(k,b.iconColor)}var d=this,e=2*XVGlobals.fontSizeMed,f=this.args.sliderCSS.widgetCSS.width+5;this.Scrollables[b]={};var g,h,k;g=0;for(key in this.Scrollables)g++;g=utils.dom.makeElement("div",this.ScrollArea,"Header_"+b,{position:"relative",marginTop:1<g?5:0,backgroundColor:"rgb(70,70,70)",
width:utils.css.dims(this.ScrollArea,"width"),height:"1.5em",color:"rgb(0, 0, 0)",fontSize:XVGlobals.fontSizeMed,fontFamily:XVGlobals.fontFamily,cursor:"pointer"});g.className=XVGlobals.classNames.ScrollGalleryZippyHeader;g.key=b;this.Scrollables[b].header=g;h=utils.dom.makeElement("div",g,"HeaderLabel_"+b,{position:"absolute",marginTop:".25em",marginLeft:"1em",backgroundColor:"none"});h.innerHTML=b;this.Scrollables[b].headerLabel=h;k=utils.dom.makeElement("div",g,"ExpandIcon_"+b,{position:"absolute",
left:utils.css.dims(this.ScrollArea,"width"),marginTop:".25em",marginLeft:"-1em"});k.innerHTML="-";this.Scrollables[b].expandIcon=k;e=utils.dom.makeElement("div",this.ScrollArea,"Content_"+b,{width:utils.css.dims(this.ScrollArea,"width"),top:e,left:f});this.Scrollables[b].content=e;e=new goog.ui.AnimatedZippy(g,e,!1);this.Scrollables[b].zippy=e;b=goog.object.getValues(goog.ui.Zippy.Events);goog.events.listen(e,b,function(b){d.moveContents(d.ContentSlider,d);b.target.isExpanded()?(k.innerHTML="-",
utils.css.setCSS(k,{marginLeft:"-1em"})):(k.innerHTML="+",utils.css.setCSS(k,{marginLeft:"-1.1em"}))});utils.css.setCSS(g,{backgroundColor:"rgb(70,70,70)"});utils.css.setCSS(k,{color:"rgb(100,100,100)"});goog.events.listen(g,goog.events.EventType.MOUSEOVER,goog.partial(c,{backgroundColor:"rgb(110,110,110)",iconColor:{color:"rgb(200,200,200)"}}));goog.events.listen(g,goog.events.EventType.MOUSEOUT,goog.partial(c,{backgroundColor:"rgb(70,70,70)",iconColor:{color:"rgb(100,100,100)"}}))};var ContentDivider=function(b){XVWidget.call(this,b);var c=this;this.containmentDiv=utils.dom.makeElement("div",this.args.parent,this.args.className+"Container",{position:"absolute","pointer-events":"none"});this.widgetIcon=utils.dom.makeElement("div",this.widget,"widgetIcon",this.args.iconCSS);this.widgetIcon.innerHTML="...";this.updateCSS=function(b){b&&(this.setArgs(b),utils.css.setCSS(c.widget,this.currArgs().widgetCSS))};this.dragCallbacks=[];this.setDrag=function(b){-1===this.dragCallbacks.indexOf(b)&&
this.dragCallbacks.push(b)};goog.events.listen(this.widget,goog.events.EventType.MOUSEDOWN,function(b){utils.dom.stopPropagation(b);var e=utils.css.dims(c.containmentDiv),f=new goog.fx.Dragger(c.widget,null,new goog.math.Rect(0,e.top,0,e.height-XVGlobals.ContentDividerHeight));c.dragging=!0;f.addEventListener(goog.fx.Dragger.EventType.DRAG,function(b){utils.dom.stopPropagation(b);utils.array.forEach(c.dragCallbacks,function(d){d(c.widget,b)})});f.addEventListener(goog.fx.Dragger.EventType.END,function(b){c.dragging=
!1;f.dispose()});f.startDrag(b)});this.updateCSS()};goog.inherits(ContentDivider,XVWidget);goog.exportSymbol("ContentDivider",ContentDivider);
ContentDivider.prototype.defaultArgs={className:"ContentDivider",parent:document.body,orientation:"vertical",className:"ContentDivider",widgetCSS:{position:"absolute",top:"90%",left:0,width:"100%",height:XVGlobals.ContentDividerHeight,cursor:"n-resize",backgroundColor:XVGlobals.ContentDividerColor,opacity:1,color:"rgb(85,85,85)",fontSize:25,textAlign:"center"},boundaryCSS:{top:0,left:0,width:650,height:400},iconCSS:{position:"absolute",color:"rgba(0,0,0)",width:"20%",left:"40%",top:-11,fontSize:20,
textAlign:"center"}};ContentDivider.prototype.slideTo=function(b,c){var d=this,e=utils.css.dims(d.widget),e=new goog.fx.dom.Slide(d.widget,[e.left,e.top],[0,b],XVGlobals.animMed,goog.fx.easing.easeOut);goog.events.listen(e,goog.fx.Animation.EventType.ANIMATE,function(){utils.array.forEach(d.dragCallbacks,function(b){b(d.widget)})});e.play()};ContentDivider.prototype.getUpperLimit=function(){return utils.css.dims(this.containmentDiv,"top")};
ContentDivider.prototype.getLowerLimit=function(){return utils.css.dims(this.containmentDiv,"top")+utils.css.dims(this.containmentDiv,"height")-utils.css.dims(this.widget,"height")-2};var ZLIB_DEFLATE_EXPORT=!1;Zlib.Deflate=function(b,c){this.input=b;this.output=new (USE_TYPEDARRAY?Uint8Array:Array)(Zlib.Deflate.DefaultBufferSize);this.compressionType=Zlib.Deflate.CompressionType.DYNAMIC;var d={},e;!c&&(c={})||"number"!==typeof c.compressionType||(this.compressionType=c.compressionType);for(e in c)d[e]=c[e];d.outputBuffer=this.output;this.rawDeflate=new Zlib.RawDeflate(this.input,d)};Zlib.Deflate.DefaultBufferSize=32768;Zlib.Deflate.CompressionType=Zlib.RawDeflate.CompressionType;
Zlib.Deflate.compress=function(b,c){return(new Zlib.Deflate(b,c)).compress()};
Zlib.Deflate.prototype.compress=function(){var b,c,d,e=0;d=this.output;b=Zlib.CompressionMethod.DEFLATE;switch(b){case Zlib.CompressionMethod.DEFLATE:c=Math.LOG2E*Math.log(Zlib.RawDeflate.WindowSize)-8;break;default:throw Error("invalid compression method");}c=c<<4|b;d[e++]=c;switch(b){case Zlib.CompressionMethod.DEFLATE:switch(this.compressionType){case Zlib.Deflate.CompressionType.NONE:b=0;break;case Zlib.Deflate.CompressionType.FIXED:b=1;break;case Zlib.Deflate.CompressionType.DYNAMIC:b=2;break;
default:throw Error("unsupported compression type");}break;default:throw Error("invalid compression method");}b=b<<6|0;d[e++]=b|31-(256*c+b)%31;c=Zlib.Adler32(this.input);this.rawDeflate.op=e;d=this.rawDeflate.compress();e=d.length;USE_TYPEDARRAY&&(d=new Uint8Array(d.buffer),d.length<=e+4&&(this.output=new Uint8Array(d.length+4),this.output.set(d),d=this.output),d=d.subarray(0,e+4));d[e++]=c>>24&255;d[e++]=c>>16&255;d[e++]=c>>8&255;d[e++]=c&255;return d};
ZLIB_DEFLATE_EXPORT&&(goog.exportSymbol("Zlib.Deflate",Zlib.Deflate),goog.exportSymbol("Zlib.Deflate.compress",Zlib.Deflate.compress),goog.exportSymbol("Zlib.Deflate.prototype.compress",Zlib.Deflate.prototype.compress),goog.exportSymbol("Zlib.Deflate.CompressionType",Zlib.Deflate.CompressionType),goog.exportSymbol("Zlib.Deflate.CompressionType.NONE",Zlib.Deflate.CompressionType.NONE),goog.exportSymbol("Zlib.Deflate.CompressionType.FIXED",Zlib.Deflate.CompressionType.FIXED),goog.exportSymbol("Zlib.Deflate.CompressionType.DYNAMIC",
Zlib.Deflate.CompressionType.DYNAMIC));var ZLIB_INFLATE_STREAM_EXPORT=!1;Zlib.InflateStream=function(b){this.input=void 0===b?new (USE_TYPEDARRAY?Uint8Array:Array):b;this.ip=0;this.rawinflate=new Zlib.RawInflateStream(this.input,this.ip);this.output=this.rawinflate.output};
Zlib.InflateStream.prototype.decompress=function(b){if(void 0!==b)if(USE_TYPEDARRAY){var c=new Uint8Array(this.input.length+b.length);c.set(this.input,0);c.set(b,this.input.length);this.input=c}else this.input=this.input.concat(b);if(void 0===this.method&&0>this.readHeader())return new (USE_TYPEDARRAY?Uint8Array:Array);b=this.rawinflate.decompress(this.input,this.ip);this.ip=this.rawinflate.ip;return b};Zlib.InflateStream.prototype.getBytes=function(){return this.rawinflate.getBytes()};
Zlib.InflateStream.prototype.readHeader=function(){var b=this.ip,c=this.input,d=c[b++],c=c[b++];if(void 0===d||void 0===c)return-1;switch(d&15){case Zlib.CompressionMethod.DEFLATE:this.method=Zlib.CompressionMethod.DEFLATE;break;default:throw Error("unsupported compression method");}if(0!==((d<<8)+c)%31)throw Error("invalid fcheck flag:"+((d<<8)+c)%31);if(c&32)throw Error("fdict flag is not supported");this.ip=b};
ZLIB_INFLATE_STREAM_EXPORT&&(goog.exportSymbol("Zlib.InflateStream",Zlib.InflateStream),goog.exportSymbol("Zlib.InflateStream.prototype.decompress",Zlib.InflateStream.prototype.decompress),goog.exportSymbol("Zlib.InflateStream.prototype.getBytes",Zlib.InflateStream.prototype.getBytes));utils.dom.addCallbackManager=function(b){b.callbacks={};b.addCallback=function(c,d){b.callbacks[c]||(b.callbacks[c]=[]);-1===b.callbacks[c].indexOf(d)&&b.callbacks[c].push(d)};b.deleteCallback=function(c,d){var e=b.callbacks[c].indexOf(d);-1<e&&b.callbacks[c].splice(e,1)};b.runCallbacks=function(c){for(var d=0,e=b.callbacks[c].length;d<e;d++)b.callbacks[c][d]()}};goog.exportSymbol("utils.dom.addCallbackManager",utils.dom.addCallbackManager);PlaneHolder.updateCSS={};PlaneHolder.prototype.updateCSS=function(b){b&&(b=utils.dom.mergeArgs(utils.css.dims(this.widget),b),utils.css.setCSS(this.widget,b));if(this.Renderer)this.Renderer.onResize_()};goog.exportProperty(PlaneHolder.prototype,"updateCSS",PlaneHolder.prototype.updateCSS);utils.convert.pct=function(b){return(100*b).toString()+"%"};goog.exportSymbol("utils.convert.pct",utils.convert.pct);SliderLinker.addLinkMenuPopup={};
SliderLinker.prototype.addLinkMenuPopup=function(b,c){this.takeSnapshot_();this.lastViewerSelected=b;this.setViewerClickListen(b);var d=this,e=new utils.gui.DialogBox(utils.dom.mergeArgs(d.popupArgs,{buttons:["DONE","Cancel"],message:"undefined"===typeof c?"Select viewers to link. Click 'Done' when finished.":c})),f=e.widget();e.setButtonOnclick("done",function(b){utils.dom.stopPropagation(b);utils.fx.fadeOutAndRemove(f,XVGlobals.animFast,function(){d.clearAll_()});d.processGroups()});e.setButtonOnclick("cancel",
function(b){utils.dom.stopPropagation(b);utils.fx.fadeOutAndRemove(f,XVGlobals.animFast,function(){d.clearAll_()});d.cancel()});XV.updateCSS();utils.fx.fadeOut(f,0,function(){utils.fx.fadeIn(f,XVGlobals.animFast)})};goog.exportProperty(SliderLinker.prototype,"addLinkMenuPopup",SliderLinker.prototype.addLinkMenuPopup);ThreeDHolder.addToMenu={};
ThreeDHolder.prototype.addToMenu=function(b,c,d){var e=this.Viewer.Menu,f=c||b.file;d=d||this.SlicerFileHandler_.getFileObjectType(f);1<f[0].length&&(f=f[0].slice(0,-5)+".dcm");var g;if("sphere"===d)this.annotations||(this.annotations=this.Viewer.Menu.addFolder("Annotations")),g=this.annotations,c=e.add("checkbox",g,c,b.visible,c),e.add("newline",g),this.setListenerVisible(b,c,[]);else if("volume"===d){this.voluContent||(this.voluContent=this.Viewer.Menu.addFolder("Volumes"));g=this.voluContent;f=
f.split("/3D/")[1];d=e.add("radio",g,f,!0,f);e.add("newline",g);c=e.add("checkbox",g,"Visible",b.visible,f);var h=e.add("slider",g,"Opacity",[0,1,0.01,b.opacity]);e.add("newline",g);var f=e.add("checkbox",g,"Volume Rendering",b.volumeRendering,f),k=e.add("ttslider",g,"Threshold",[b.min,b.max,b.lowerThreshold,b.upperThreshold]);e.add("spacer",g);this.setListenerRadio(b,d);this.setListenerVisible(b,c,[f,h,k]);this.setListenerRender(b,f);this.setListenerOpacity(b,h);this.setListenerThresh(b,k);this.objRadioPairs.push([b,
d]);this.objVisiblePairs.push([b,c]);this.objRenderPairs.push([b,f]);this.objOpacityPairs.push([b,h]);this.objThreshPairs.push([b,k])}else"mesh"===d&&(this.meshContent||(this.meshContent=this.Viewer.Menu.addFolder("Meshes")),g=this.meshContent),"fiber"===d&&(this.fibrContent||(this.fibrContent=this.Viewer.Menu.addFolder("Fibers")),g=this.fibrContent),f=f.split("/3D/")[1],c=e.add("checkbox",g,f,b.visible,f),h=e.add("slider",g,"Opacity",[0,1,0.01,b.opacity]),e.add("newline",g),this.setListenerVisible(b,
c,[h]),this.setListenerOpacity(b,h),this.objVisiblePairs.push([b,c]),this.objOpacityPairs.push([b,h])};goog.exportProperty(ThreeDHolder.prototype,"addToMenu",ThreeDHolder.prototype.addToMenu);var SlicerThumbnail=function(b,c){Thumbnail.call(this,utils.dom.mergeArgs(SlicerThumbnail.prototype.defaultArgs,c));this.scanData=b;var d=this.scanData.filePath;this.scanData.filePath.split("slicer")[1]?this.ThumbnailImage.src=d.slice(0,d.lastIndexOf("/"))+"/Data/"+this.scanData.sceneName+".png":this.ThumbnailImage.src="./demoscans/3D/placeholder.jpg";this.ThumbnailCanvas.metaText=[];this.ThumbnailCanvas.metaText[0]=this.scanData.sessionInfo.SessionID.value;this.ThumbnailCanvas.metaText[1]=this.scanData.sessionInfo.Format.value.toString().toUpperCase();
this.scanData.filePath.split("/3D/")[1]?this.ThumbnailCanvas.metaText[2]=this.scanData.filePath.split("/3D/")[1]:this.ThumbnailCanvas.metaText[2]=this.scanData.filePath;this.TextElement.innerHTML+="<b><font size = '3'>"+this.ThumbnailCanvas.metaText[0]+"</font></b><br>";this.TextElement.innerHTML+=this.ThumbnailCanvas.metaText[1]+"<br>";this.TextElement.innerHTML+=this.ThumbnailCanvas.metaText[2];this.addHoverMethods()};goog.inherits(SlicerThumbnail,Thumbnail);
goog.exportSymbol("SlicerThumbnail",SlicerThumbnail);SlicerThumbnail.prototype.createDragElement=function(b){var c;c=goog.dom.getAncestorByClass(b,this.args.className);b=c.cloneNode(!0);c=goog.dom.getElementByClass(XVGlobals.classNames.ThumbnailCanvas,c);goog.dom.getElementByClass(XVGlobals.classNames.ThumbnailCanvas,b).getContext("2d").drawImage(c,0,0);b.style.opacity=0.5;b.className="CLONE";b.id="CLONE";goog.events.removeAll(b);return b};SlicerThumbnail.prototype.defaultArgs={className:XVGlobals.classNames.SlicerThumbnail};
SlicerThumbnail.prototype.updateCSS=function(){};SlicerThumbnail.prototype.addActivatedCallback=function(b){this.activatedCallbacks||(this.activatedCallbacks=[]);this.activatedCallbacks.push(b)};ThreeDHolder.reloadObj={};ThreeDHolder.prototype.reloadObj=function(b,c){utils.array.forEach(this.objRadioPairs,function(c){c[0]===b&&(c[1].checked="checked")});b.visible=!0;"volume"==c&&this.currentVolObject!=b&&this.update2Drenderers(b);this.updateMenuSliders()};goog.exportProperty(ThreeDHolder.prototype,"reloadObj",ThreeDHolder.prototype.reloadObj);utils.convert.replaceIllegalChars=function(b,c){if("string"!==typeof b)throw Error("Illegal value "+typeof b+" in argument of utils.convert.replaceIllegalChars.");c||(c="");return b.replace(/\/./g,c)};goog.exportSymbol("utils.convert.replaceIllegalChars",utils.convert.replaceIllegalChars);utils.dom.getMouseXY=function(b){"Microsoft Internet Explorer"===navigator.appName?(tempX=event.clientX+document.body.scrollLeft,tempY=event.clientY+document.body.scrollTop):(tempX=b.pageX,tempY=b.pageY);0>tempX&&(tempX=0);0>tempY&&(tempY=0);return{x:tempX,y:tempY}};goog.exportSymbol("utils.dom.getMouseXY",utils.dom.getMouseXY);Modal.updateCSS={};
Modal.prototype.updateCSS=function(b){modalDims=this.modalDims();utils.css.setCSS(this.modal,modalDims);b&&utils.css.setCSS(this.modal,b);this.ScrollGallery&&this.ScrollGallery.updateCSS(modalDims.ScrollGallery);this.ViewerManager&&this.ViewerManager(function(b,d,e){b.updateCSS({height:modalDims.Viewer.height,width:modalDims.Viewer.width,left:modalDims.Viewer.lefts[d][e],top:modalDims.Viewer.tops[d][e]})});this.closeButton&&utils.css.setCSS(this.closeButton,modalDims.closeButton);this.ColumnMenu&&
this.RowMenu&&(utils.css.setCSS(this.ColumnMenu,{top:modalDims.ColumnMenu.top,left:modalDims.ColumnMenu.left,height:modalDims.ColumnMenu.height,width:modalDims.ColumnMenu.width}),utils.css.setCSS(this.RowMenu,{top:modalDims.RowMenu.top,left:modalDims.RowMenu.left,height:modalDims.RowMenu.height,width:modalDims.RowMenu.width}))};goog.exportProperty(Modal.prototype,"updateCSS",Modal.prototype.updateCSS);ThreeDHolder.updateCSS={};ThreeDHolder.prototype.updateCSS=function(b){b=utils.dom.mergeArgs(utils.css.dims(this.widget),b);utils.css.setCSS(this.widget,b);this.PlaneHolderX&&this.PlaneHolderX.updateCSS();this.PlaneHolderY&&this.PlaneHolderY.updateCSS();this.PlaneHolderZ&&this.PlaneHolderZ.updateCSS();this.PlaneHolder3&&this.PlaneHolder3.updateCSS()};goog.exportProperty(ThreeDHolder.prototype,"updateCSS",ThreeDHolder.prototype.updateCSS);Modal.destroy={};Modal.prototype.destroy=function(b){var c=this;utils.dom.debug("Destroying! "+this.args.id);utils.fx.fadeOut(this.widget,XVGlobals.animMed,function(){try{c.args.parent.removeChild(c.widget)}catch(b){}})};goog.exportProperty(Modal.prototype,"destroy",Modal.prototype.destroy);utils.convert.remap1D=function(b,c,d){function e(b){var c=b[0];b[0]=b[1];b[1]=c;return b}if(c[0]===c[1]||d[0]===d[1])throw"Remap: initial domain is equal!";c[0]>c[1]&&(c=e(c));d[0]>d[1]&&(d=e(d));if(b<=c[0])return b=c[0],b={newVal:d[0],adjOld:b};if(b>=c[1])return b=c[1],b={newVal:d[1],adjOld:b};c=Math.round(b/(c[1]-c[0])*(d[1]-d[0]));c<d[0]?c=d[0]:c>d[1]&&(c=d[1]);return{newVal:c,adjOld:b}};goog.exportSymbol("utils.convert.remap1D",utils.convert.remap1D);
